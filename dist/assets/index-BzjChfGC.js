function sd(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(o,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pl={exports:{}},xr={},Rl={exports:{}},R={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=Symbol.for("react.element"),cd=Symbol.for("react.portal"),ud=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),hd=Symbol.for("react.profiler"),pd=Symbol.for("react.provider"),md=Symbol.for("react.context"),fd=Symbol.for("react.forward_ref"),gd=Symbol.for("react.suspense"),wd=Symbol.for("react.memo"),yd=Symbol.for("react.lazy"),ps=Symbol.iterator;function vd(e){return e===null||typeof e!="object"?null:(e=ps&&e[ps]||e["@@iterator"],typeof e=="function"?e:null)}var Nl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ml=Object.assign,Ol={};function bn(e,t,n){this.props=e,this.context=t,this.refs=Ol,this.updater=n||Nl}bn.prototype.isReactComponent={};bn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Al(){}Al.prototype=bn.prototype;function pi(e,t,n){this.props=e,this.context=t,this.refs=Ol,this.updater=n||Nl}var mi=pi.prototype=new Al;mi.constructor=pi;Ml(mi,bn.prototype);mi.isPureReactComponent=!0;var ms=Array.isArray,Wl=Object.prototype.hasOwnProperty,fi={current:null},Fl={key:!0,ref:!0,__self:!0,__source:!0};function Hl(e,t,n){var o,r={},a=null,i=null;if(t!=null)for(o in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Wl.call(t,o)&&!Fl.hasOwnProperty(o)&&(r[o]=t[o]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(o in s=e.defaultProps,s)r[o]===void 0&&(r[o]=s[o]);return{$$typeof:mo,type:e,key:a,ref:i,props:r,_owner:fi.current}}function kd(e,t){return{$$typeof:mo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gi(e){return typeof e=="object"&&e!==null&&e.$$typeof===mo}function bd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fs=/\/+/g;function Br(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bd(""+e.key):t.toString(36)}function Ho(e,t,n,o,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case mo:case cd:i=!0}}if(i)return i=e,r=r(i),e=o===""?"."+Br(i,0):o,ms(r)?(n="",e!=null&&(n=e.replace(fs,"$&/")+"/"),Ho(r,t,n,"",function(u){return u})):r!=null&&(gi(r)&&(r=kd(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(fs,"$&/")+"/")+e)),t.push(r)),1;if(i=0,o=o===""?".":o+":",ms(e))for(var s=0;s<e.length;s++){a=e[s];var l=o+Br(a,s);i+=Ho(a,t,n,l,r)}else if(l=vd(e),typeof l=="function")for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=o+Br(a,s++),i+=Ho(a,t,n,l,r);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function _o(e,t,n){if(e==null)return e;var o=[],r=0;return Ho(e,o,"","",function(a){return t.call(n,a,r++)}),o}function _d(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pe={current:null},Uo={transition:null},xd={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:fi};function Ul(){throw Error("act(...) is not supported in production builds of React.")}R.Children={map:_o,forEach:function(e,t,n){_o(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _o(e,function(){t++}),t},toArray:function(e){return _o(e,function(t){return t})||[]},only:function(e){if(!gi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};R.Component=bn;R.Fragment=ud;R.Profiler=hd;R.PureComponent=pi;R.StrictMode=dd;R.Suspense=gd;R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xd;R.act=Ul;R.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Ml({},e.props),r=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=fi.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Wl.call(t,l)&&!Fl.hasOwnProperty(l)&&(o[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];o.children=s}return{$$typeof:mo,type:e.type,key:r,ref:a,props:o,_owner:i}};R.createContext=function(e){return e={$$typeof:md,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pd,_context:e},e.Consumer=e};R.createElement=Hl;R.createFactory=function(e){var t=Hl.bind(null,e);return t.type=e,t};R.createRef=function(){return{current:null}};R.forwardRef=function(e){return{$$typeof:fd,render:e}};R.isValidElement=gi;R.lazy=function(e){return{$$typeof:yd,_payload:{_status:-1,_result:e},_init:_d}};R.memo=function(e,t){return{$$typeof:wd,type:e,compare:t===void 0?null:t}};R.startTransition=function(e){var t=Uo.transition;Uo.transition={};try{e()}finally{Uo.transition=t}};R.unstable_act=Ul;R.useCallback=function(e,t){return pe.current.useCallback(e,t)};R.useContext=function(e){return pe.current.useContext(e)};R.useDebugValue=function(){};R.useDeferredValue=function(e){return pe.current.useDeferredValue(e)};R.useEffect=function(e,t){return pe.current.useEffect(e,t)};R.useId=function(){return pe.current.useId()};R.useImperativeHandle=function(e,t,n){return pe.current.useImperativeHandle(e,t,n)};R.useInsertionEffect=function(e,t){return pe.current.useInsertionEffect(e,t)};R.useLayoutEffect=function(e,t){return pe.current.useLayoutEffect(e,t)};R.useMemo=function(e,t){return pe.current.useMemo(e,t)};R.useReducer=function(e,t,n){return pe.current.useReducer(e,t,n)};R.useRef=function(e){return pe.current.useRef(e)};R.useState=function(e){return pe.current.useState(e)};R.useSyncExternalStore=function(e,t,n){return pe.current.useSyncExternalStore(e,t,n)};R.useTransition=function(){return pe.current.useTransition()};R.version="18.3.1";Rl.exports=R;var x=Rl.exports;const Gl=ld(x),Sd=sd({__proto__:null,default:Gl},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=x,Id=Symbol.for("react.element"),jd=Symbol.for("react.fragment"),zd=Object.prototype.hasOwnProperty,Ed=Td.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cd={key:!0,ref:!0,__self:!0,__source:!0};function Dl(e,t,n){var o,r={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)zd.call(t,o)&&!Cd.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:Id,type:e,key:a,ref:i,props:r,_owner:Ed.current}}xr.Fragment=jd;xr.jsx=Dl;xr.jsxs=Dl;Pl.exports=xr;var c=Pl.exports,wa={},Bl={exports:{}},Te={},$l={exports:{}},Vl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,L){var P=j.length;j.push(L);e:for(;0<P;){var J=P-1>>>1,ee=j[J];if(0<r(ee,L))j[J]=L,j[P]=ee,P=J;else break e}}function n(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var L=j[0],P=j.pop();if(P!==L){j[0]=P;e:for(var J=0,ee=j.length,ko=ee>>>1;J<ko;){var It=2*(J+1)-1,Dr=j[It],jt=It+1,bo=j[jt];if(0>r(Dr,P))jt<ee&&0>r(bo,Dr)?(j[J]=bo,j[jt]=P,J=jt):(j[J]=Dr,j[It]=P,J=It);else if(jt<ee&&0>r(bo,P))j[J]=bo,j[jt]=P,J=jt;else break e}}return L}function r(j,L){var P=j.sortIndex-L.sortIndex;return P!==0?P:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],u=[],g=1,m=null,f=3,w=!1,y=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(j){for(var L=n(u);L!==null;){if(L.callback===null)o(u);else if(L.startTime<=j)o(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=n(u)}}function v(j){if(k=!1,p(j),!y)if(n(l)!==null)y=!0,Ur(S);else{var L=n(u);L!==null&&Gr(v,L.startTime-j)}}function S(j,L){y=!1,k&&(k=!1,h(I),I=-1),w=!0;var P=f;try{for(p(L),m=n(l);m!==null&&(!(m.expirationTime>L)||j&&!Re());){var J=m.callback;if(typeof J=="function"){m.callback=null,f=m.priorityLevel;var ee=J(m.expirationTime<=L);L=e.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(l)&&o(l),p(L)}else o(l);m=n(l)}if(m!==null)var ko=!0;else{var It=n(u);It!==null&&Gr(v,It.startTime-L),ko=!1}return ko}finally{m=null,f=P,w=!1}}var z=!1,E=null,I=-1,V=5,M=-1;function Re(){return!(e.unstable_now()-M<V)}function Tn(){if(E!==null){var j=e.unstable_now();M=j;var L=!0;try{L=E(!0,j)}finally{L?In():(z=!1,E=null)}}else z=!1}var In;if(typeof d=="function")In=function(){d(Tn)};else if(typeof MessageChannel<"u"){var hs=new MessageChannel,id=hs.port2;hs.port1.onmessage=Tn,In=function(){id.postMessage(null)}}else In=function(){b(Tn,0)};function Ur(j){E=j,z||(z=!0,In())}function Gr(j,L){I=b(function(){j(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){y||w||(y=!0,Ur(S))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var P=f;f=L;try{return j()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var P=f;f=j;try{return L()}finally{f=P}},e.unstable_scheduleCallback=function(j,L,P){var J=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?J+P:J):P=J,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=P+ee,j={id:g++,callback:L,priorityLevel:j,startTime:P,expirationTime:ee,sortIndex:-1},P>J?(j.sortIndex=P,t(u,j),n(l)===null&&j===n(u)&&(k?(h(I),I=-1):k=!0,Gr(v,P-J))):(j.sortIndex=ee,t(l,j),y||w||(y=!0,Ur(S))),j},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(j){var L=f;return function(){var P=f;f=L;try{return j.apply(this,arguments)}finally{f=P}}}})(Vl);$l.exports=Vl;var Ld=$l.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=x,Se=Ld;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jl=new Set,qn={};function Bt(e,t){mn(e,t),mn(e+"Capture",t)}function mn(e,t){for(qn[e]=t,e=0;e<t.length;e++)Jl.add(t[e])}var Xe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=Object.prototype.hasOwnProperty,Rd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gs={},ws={};function Nd(e){return ya.call(ws,e)?!0:ya.call(gs,e)?!1:Rd.test(e)?ws[e]=!0:(gs[e]=!0,!1)}function Md(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Od(e,t,n,o){if(t===null||typeof t>"u"||Md(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function me(e,t,n,o,r,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ae[e]=new me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ae[t]=new me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ae[e]=new me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ae[e]=new me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ae[e]=new me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ae[e]=new me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ae[e]=new me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ae[e]=new me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ae[e]=new me(e,5,!1,e.toLowerCase(),null,!1,!1)});var wi=/[\-:]([a-z])/g;function yi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wi,yi);ae[t]=new me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wi,yi);ae[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wi,yi);ae[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ae[e]=new me(e,1,!1,e.toLowerCase(),null,!1,!1)});ae.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ae[e]=new me(e,1,!1,e.toLowerCase(),null,!0,!0)});function vi(e,t,n,o){var r=ae.hasOwnProperty(t)?ae[t]:null;(r!==null?r.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Od(t,n,r,o)&&(n=null),o||r===null?Nd(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,o=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var nt=Pd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),Yt=Symbol.for("react.portal"),Kt=Symbol.for("react.fragment"),ki=Symbol.for("react.strict_mode"),va=Symbol.for("react.profiler"),ql=Symbol.for("react.provider"),Yl=Symbol.for("react.context"),bi=Symbol.for("react.forward_ref"),ka=Symbol.for("react.suspense"),ba=Symbol.for("react.suspense_list"),_i=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Kl=Symbol.for("react.offscreen"),ys=Symbol.iterator;function jn(e){return e===null||typeof e!="object"?null:(e=ys&&e[ys]||e["@@iterator"],typeof e=="function"?e:null)}var B=Object.assign,$r;function Mn(e){if($r===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$r=t&&t[1]||""}return`
`+$r+e}var Vr=!1;function Jr(e,t){if(!e||Vr)return"";Vr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var o=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){o=u}e.call(t.prototype)}else{try{throw Error()}catch(u){o=u}e()}}catch(u){if(u&&o&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=o.stack.split(`
`),i=r.length-1,s=a.length-1;1<=i&&0<=s&&r[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(r[i]!==a[s]){if(i!==1||s!==1)do if(i--,s--,0>s||r[i]!==a[s]){var l=`
`+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{Vr=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mn(e):""}function Ad(e){switch(e.tag){case 5:return Mn(e.type);case 16:return Mn("Lazy");case 13:return Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 2:case 15:return e=Jr(e.type,!1),e;case 11:return e=Jr(e.type.render,!1),e;case 1:return e=Jr(e.type,!0),e;default:return""}}function _a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kt:return"Fragment";case Yt:return"Portal";case va:return"Profiler";case ki:return"StrictMode";case ka:return"Suspense";case ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yl:return(e.displayName||"Context")+".Consumer";case ql:return(e._context.displayName||"Context")+".Provider";case bi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _i:return t=e.displayName||null,t!==null?t:_a(e.type)||"Memo";case rt:t=e._payload,e=e._init;try{return _a(e(t))}catch{}}return null}function Wd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _a(t);case 8:return t===ki?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ql(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fd(e){var t=Ql(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){o=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(i){o=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){e._valueTracker||(e._valueTracker=Fd(e))}function Xl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Ql(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function Xo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xa(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vs(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=kt(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zl(e,t){t=t.checked,t!=null&&vi(e,"checked",t,!1)}function Sa(e,t){Zl(e,t);var n=kt(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,kt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ks(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ta(e,t,n){(t!=="number"||Xo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var On=Array.isArray;function ln(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+kt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Ia(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bs(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(On(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kt(n)}}function ec(e,t){var n=kt(t.value),o=kt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function _s(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var To,nc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=To.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hd=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(e){Hd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]})});function oc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function rc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=oc(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}var Ud=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(e,t){if(t){if(Ud[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Ea(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function xi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,cn=null,un=null;function xs(e){if(e=wo(e)){if(typeof La!="function")throw Error(_(280));var t=e.stateNode;t&&(t=zr(t),La(e.stateNode,e.type,t))}}function ac(e){cn?un?un.push(e):un=[e]:cn=e}function ic(){if(cn){var e=cn,t=un;if(un=cn=null,xs(e),t)for(e=0;e<t.length;e++)xs(t[e])}}function sc(e,t){return e(t)}function lc(){}var qr=!1;function cc(e,t,n){if(qr)return e(t,n);qr=!0;try{return sc(e,t,n)}finally{qr=!1,(cn!==null||un!==null)&&(lc(),ic())}}function Kn(e,t){var n=e.stateNode;if(n===null)return null;var o=zr(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var Pa=!1;if(Xe)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{Pa=!1}function Gd(e,t,n,o,r,a,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(g){this.onError(g)}}var Hn=!1,Zo=null,er=!1,Ra=null,Dd={onError:function(e){Hn=!0,Zo=e}};function Bd(e,t,n,o,r,a,i,s,l){Hn=!1,Zo=null,Gd.apply(Dd,arguments)}function $d(e,t,n,o,r,a,i,s,l){if(Bd.apply(this,arguments),Hn){if(Hn){var u=Zo;Hn=!1,Zo=null}else throw Error(_(198));er||(er=!0,Ra=u)}}function $t(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ss(e){if($t(e)!==e)throw Error(_(188))}function Vd(e){var t=e.alternate;if(!t){if(t=$t(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ss(r),e;if(a===o)return Ss(r),t;a=a.sibling}throw Error(_(188))}if(n.return!==o.return)n=r,o=a;else{for(var i=!1,s=r.child;s;){if(s===n){i=!0,n=r,o=a;break}if(s===o){i=!0,o=r,n=a;break}s=s.sibling}if(!i){for(s=a.child;s;){if(s===n){i=!0,n=a,o=r;break}if(s===o){i=!0,o=a,n=r;break}s=s.sibling}if(!i)throw Error(_(189))}}if(n.alternate!==o)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function dc(e){return e=Vd(e),e!==null?hc(e):null}function hc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hc(e);if(t!==null)return t;e=e.sibling}return null}var pc=Se.unstable_scheduleCallback,Ts=Se.unstable_cancelCallback,Jd=Se.unstable_shouldYield,qd=Se.unstable_requestPaint,q=Se.unstable_now,Yd=Se.unstable_getCurrentPriorityLevel,Si=Se.unstable_ImmediatePriority,mc=Se.unstable_UserBlockingPriority,tr=Se.unstable_NormalPriority,Kd=Se.unstable_LowPriority,fc=Se.unstable_IdlePriority,Sr=null,Be=null;function Qd(e){if(Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Sr,e,void 0,(e.current.flags&128)===128)}catch{}}var We=Math.clz32?Math.clz32:eh,Xd=Math.log,Zd=Math.LN2;function eh(e){return e>>>=0,e===0?32:31-(Xd(e)/Zd|0)|0}var Io=64,jo=4194304;function An(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nr(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,r=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var s=i&~r;s!==0?o=An(s):(a&=i,a!==0&&(o=An(a)))}else i=n&~r,i!==0?o=An(i):a!==0&&(o=An(a));if(o===0)return 0;if(t!==0&&t!==o&&!(t&r)&&(r=o&-o,a=t&-t,r>=a||r===16&&(a&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-We(t),r=1<<n,o|=e[n],t&=~r;return o}function th(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nh(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-We(a),s=1<<i,l=r[i];l===-1?(!(s&n)||s&o)&&(r[i]=th(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}function Na(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gc(){var e=Io;return Io<<=1,!(Io&4194240)&&(Io=64),e}function Yr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-We(t),e[t]=n}function oh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-We(n),a=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~a}}function Ti(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-We(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var A=0;function wc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yc,Ii,vc,kc,bc,Ma=!1,zo=[],dt=null,ht=null,pt=null,Qn=new Map,Xn=new Map,it=[],rh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Is(e,t){switch(e){case"focusin":case"focusout":dt=null;break;case"dragenter":case"dragleave":ht=null;break;case"mouseover":case"mouseout":pt=null;break;case"pointerover":case"pointerout":Qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(t.pointerId)}}function En(e,t,n,o,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:a,targetContainers:[r]},t!==null&&(t=wo(t),t!==null&&Ii(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function ah(e,t,n,o,r){switch(t){case"focusin":return dt=En(dt,e,t,n,o,r),!0;case"dragenter":return ht=En(ht,e,t,n,o,r),!0;case"mouseover":return pt=En(pt,e,t,n,o,r),!0;case"pointerover":var a=r.pointerId;return Qn.set(a,En(Qn.get(a)||null,e,t,n,o,r)),!0;case"gotpointercapture":return a=r.pointerId,Xn.set(a,En(Xn.get(a)||null,e,t,n,o,r)),!0}return!1}function _c(e){var t=Nt(e.target);if(t!==null){var n=$t(t);if(n!==null){if(t=n.tag,t===13){if(t=uc(n),t!==null){e.blockedOn=t,bc(e.priority,function(){vc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Go(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Oa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Ca=o,n.target.dispatchEvent(o),Ca=null}else return t=wo(n),t!==null&&Ii(t),e.blockedOn=n,!1;t.shift()}return!0}function js(e,t,n){Go(e)&&n.delete(t)}function ih(){Ma=!1,dt!==null&&Go(dt)&&(dt=null),ht!==null&&Go(ht)&&(ht=null),pt!==null&&Go(pt)&&(pt=null),Qn.forEach(js),Xn.forEach(js)}function Cn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,Se.unstable_scheduleCallback(Se.unstable_NormalPriority,ih)))}function Zn(e){function t(r){return Cn(r,e)}if(0<zo.length){Cn(zo[0],e);for(var n=1;n<zo.length;n++){var o=zo[n];o.blockedOn===e&&(o.blockedOn=null)}}for(dt!==null&&Cn(dt,e),ht!==null&&Cn(ht,e),pt!==null&&Cn(pt,e),Qn.forEach(t),Xn.forEach(t),n=0;n<it.length;n++)o=it[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<it.length&&(n=it[0],n.blockedOn===null);)_c(n),n.blockedOn===null&&it.shift()}var dn=nt.ReactCurrentBatchConfig,or=!0;function sh(e,t,n,o){var r=A,a=dn.transition;dn.transition=null;try{A=1,ji(e,t,n,o)}finally{A=r,dn.transition=a}}function lh(e,t,n,o){var r=A,a=dn.transition;dn.transition=null;try{A=4,ji(e,t,n,o)}finally{A=r,dn.transition=a}}function ji(e,t,n,o){if(or){var r=Oa(e,t,n,o);if(r===null)aa(e,t,o,rr,n),Is(e,o);else if(ah(r,e,t,n,o))o.stopPropagation();else if(Is(e,o),t&4&&-1<rh.indexOf(e)){for(;r!==null;){var a=wo(r);if(a!==null&&yc(a),a=Oa(e,t,n,o),a===null&&aa(e,t,o,rr,n),a===r)break;r=a}r!==null&&o.stopPropagation()}else aa(e,t,o,null,n)}}var rr=null;function Oa(e,t,n,o){if(rr=null,e=xi(o),e=Nt(e),e!==null)if(t=$t(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rr=e,null}function xc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yd()){case Si:return 1;case mc:return 4;case tr:case Kd:return 16;case fc:return 536870912;default:return 16}default:return 16}}var lt=null,zi=null,Do=null;function Sc(){if(Do)return Do;var e,t=zi,n=t.length,o,r="value"in lt?lt.value:lt.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(o=1;o<=i&&t[n-o]===r[a-o];o++);return Do=r.slice(e,1<o?1-o:void 0)}function Bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Eo(){return!0}function zs(){return!1}function Ie(e){function t(n,o,r,a,i){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Eo:zs,this.isPropagationStopped=zs,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),t}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Ie(_n),go=B({},_n,{view:0,detail:0}),ch=Ie(go),Kr,Qr,Ln,Tr=B({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ln&&(Ln&&e.type==="mousemove"?(Kr=e.screenX-Ln.screenX,Qr=e.screenY-Ln.screenY):Qr=Kr=0,Ln=e),Kr)},movementY:function(e){return"movementY"in e?e.movementY:Qr}}),Es=Ie(Tr),uh=B({},Tr,{dataTransfer:0}),dh=Ie(uh),hh=B({},go,{relatedTarget:0}),Xr=Ie(hh),ph=B({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=Ie(ph),fh=B({},_n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gh=Ie(fh),wh=B({},_n,{data:0}),Cs=Ie(wh),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kh[e])?!!t[e]:!1}function Ci(){return bh}var _h=B({},go,{key:function(e){if(e.key){var t=yh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return e.type==="keypress"?Bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xh=Ie(_h),Sh=B({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ls=Ie(Sh),Th=B({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),Ih=Ie(Th),jh=B({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),zh=Ie(jh),Eh=B({},Tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ch=Ie(Eh),Lh=[9,13,27,32],Li=Xe&&"CompositionEvent"in window,Un=null;Xe&&"documentMode"in document&&(Un=document.documentMode);var Ph=Xe&&"TextEvent"in window&&!Un,Tc=Xe&&(!Li||Un&&8<Un&&11>=Un),Ps=" ",Rs=!1;function Ic(e,t){switch(e){case"keyup":return Lh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qt=!1;function Rh(e,t){switch(e){case"compositionend":return jc(t);case"keypress":return t.which!==32?null:(Rs=!0,Ps);case"textInput":return e=t.data,e===Ps&&Rs?null:e;default:return null}}function Nh(e,t){if(Qt)return e==="compositionend"||!Li&&Ic(e,t)?(e=Sc(),Do=zi=lt=null,Qt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var Mh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ns(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mh[e.type]:t==="textarea"}function zc(e,t,n,o){ac(o),t=ar(t,"onChange"),0<t.length&&(n=new Ei("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Gn=null,eo=null;function Oh(e){Fc(e,0)}function Ir(e){var t=en(e);if(Xl(t))return e}function Ah(e,t){if(e==="change")return t}var Ec=!1;if(Xe){var Zr;if(Xe){var ea="oninput"in document;if(!ea){var Ms=document.createElement("div");Ms.setAttribute("oninput","return;"),ea=typeof Ms.oninput=="function"}Zr=ea}else Zr=!1;Ec=Zr&&(!document.documentMode||9<document.documentMode)}function Os(){Gn&&(Gn.detachEvent("onpropertychange",Cc),eo=Gn=null)}function Cc(e){if(e.propertyName==="value"&&Ir(eo)){var t=[];zc(t,eo,e,xi(e)),cc(Oh,t)}}function Wh(e,t,n){e==="focusin"?(Os(),Gn=t,eo=n,Gn.attachEvent("onpropertychange",Cc)):e==="focusout"&&Os()}function Fh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ir(eo)}function Hh(e,t){if(e==="click")return Ir(t)}function Uh(e,t){if(e==="input"||e==="change")return Ir(t)}function Gh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var He=typeof Object.is=="function"?Object.is:Gh;function to(e,t){if(He(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!ya.call(t,r)||!He(e[r],t[r]))return!1}return!0}function As(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ws(e,t){var n=As(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=As(n)}}function Lc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pc(){for(var e=window,t=Xo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xo(e.document)}return t}function Pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dh(e){var t=Pc(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lc(n.ownerDocument.documentElement,n)){if(o!==null&&Pi(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(o.start,r);o=o.end===void 0?a:Math.min(o.end,r),!e.extend&&a>o&&(r=o,o=a,a=r),r=Ws(n,a);var i=Ws(n,o);r&&i&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),a>o?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bh=Xe&&"documentMode"in document&&11>=document.documentMode,Xt=null,Aa=null,Dn=null,Wa=!1;function Fs(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wa||Xt==null||Xt!==Xo(o)||(o=Xt,"selectionStart"in o&&Pi(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Dn&&to(Dn,o)||(Dn=o,o=ar(Aa,"onSelect"),0<o.length&&(t=new Ei("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Xt)))}function Co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zt={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionend:Co("Transition","TransitionEnd")},ta={},Rc={};Xe&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);function jr(e){if(ta[e])return ta[e];if(!Zt[e])return e;var t=Zt[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rc)return ta[e]=t[n];return e}var Nc=jr("animationend"),Mc=jr("animationiteration"),Oc=jr("animationstart"),Ac=jr("transitionend"),Wc=new Map,Hs="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _t(e,t){Wc.set(e,t),Bt(t,[e])}for(var na=0;na<Hs.length;na++){var oa=Hs[na],$h=oa.toLowerCase(),Vh=oa[0].toUpperCase()+oa.slice(1);_t($h,"on"+Vh)}_t(Nc,"onAnimationEnd");_t(Mc,"onAnimationIteration");_t(Oc,"onAnimationStart");_t("dblclick","onDoubleClick");_t("focusin","onFocus");_t("focusout","onBlur");_t(Ac,"onTransitionEnd");mn("onMouseEnter",["mouseout","mouseover"]);mn("onMouseLeave",["mouseout","mouseover"]);mn("onPointerEnter",["pointerout","pointerover"]);mn("onPointerLeave",["pointerout","pointerover"]);Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wn));function Us(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,$d(o,t,void 0,e),e.currentTarget=null}function Fc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var a=void 0;if(t)for(var i=o.length-1;0<=i;i--){var s=o[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Us(r,s,u),a=l}else for(i=0;i<o.length;i++){if(s=o[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Us(r,s,u),a=l}}}if(er)throw e=Ra,er=!1,Ra=null,e}function F(e,t){var n=t[Da];n===void 0&&(n=t[Da]=new Set);var o=e+"__bubble";n.has(o)||(Hc(t,e,2,!1),n.add(o))}function ra(e,t,n){var o=0;t&&(o|=4),Hc(n,e,o,t)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function no(e){if(!e[Lo]){e[Lo]=!0,Jl.forEach(function(n){n!=="selectionchange"&&(Jh.has(n)||ra(n,!1,e),ra(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lo]||(t[Lo]=!0,ra("selectionchange",!1,t))}}function Hc(e,t,n,o){switch(xc(t)){case 1:var r=sh;break;case 4:r=lh;break;default:r=ji}n=r.bind(null,t,n,e),r=void 0,!Pa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function aa(e,t,n,o,r){var a=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var s=o.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(i===4)for(i=o.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;i=i.return}for(;s!==null;){if(i=Nt(s),i===null)return;if(l=i.tag,l===5||l===6){o=a=i;continue e}s=s.parentNode}}o=o.return}cc(function(){var u=a,g=xi(n),m=[];e:{var f=Wc.get(e);if(f!==void 0){var w=Ei,y=e;switch(e){case"keypress":if(Bo(n)===0)break e;case"keydown":case"keyup":w=xh;break;case"focusin":y="focus",w=Xr;break;case"focusout":y="blur",w=Xr;break;case"beforeblur":case"afterblur":w=Xr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Ih;break;case Nc:case Mc:case Oc:w=mh;break;case Ac:w=zh;break;case"scroll":w=ch;break;case"wheel":w=Ch;break;case"copy":case"cut":case"paste":w=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ls}var k=(t&4)!==0,b=!k&&e==="scroll",h=k?f!==null?f+"Capture":null:f;k=[];for(var d=u,p;d!==null;){p=d;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,h!==null&&(v=Kn(d,h),v!=null&&k.push(oo(d,v,p)))),b)break;d=d.return}0<k.length&&(f=new w(f,y,null,n,g),m.push({event:f,listeners:k}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",f&&n!==Ca&&(y=n.relatedTarget||n.fromElement)&&(Nt(y)||y[Ze]))break e;if((w||f)&&(f=g.window===g?g:(f=g.ownerDocument)?f.defaultView||f.parentWindow:window,w?(y=n.relatedTarget||n.toElement,w=u,y=y?Nt(y):null,y!==null&&(b=$t(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=u),w!==y)){if(k=Es,v="onMouseLeave",h="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(k=Ls,v="onPointerLeave",h="onPointerEnter",d="pointer"),b=w==null?f:en(w),p=y==null?f:en(y),f=new k(v,d+"leave",w,n,g),f.target=b,f.relatedTarget=p,v=null,Nt(g)===u&&(k=new k(h,d+"enter",y,n,g),k.target=p,k.relatedTarget=b,v=k),b=v,w&&y)t:{for(k=w,h=y,d=0,p=k;p;p=Jt(p))d++;for(p=0,v=h;v;v=Jt(v))p++;for(;0<d-p;)k=Jt(k),d--;for(;0<p-d;)h=Jt(h),p--;for(;d--;){if(k===h||h!==null&&k===h.alternate)break t;k=Jt(k),h=Jt(h)}k=null}else k=null;w!==null&&Gs(m,f,w,k,!1),y!==null&&b!==null&&Gs(m,b,y,k,!0)}}e:{if(f=u?en(u):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var S=Ah;else if(Ns(f))if(Ec)S=Uh;else{S=Fh;var z=Wh}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Hh);if(S&&(S=S(e,u))){zc(m,S,n,g);break e}z&&z(e,f,u),e==="focusout"&&(z=f._wrapperState)&&z.controlled&&f.type==="number"&&Ta(f,"number",f.value)}switch(z=u?en(u):window,e){case"focusin":(Ns(z)||z.contentEditable==="true")&&(Xt=z,Aa=u,Dn=null);break;case"focusout":Dn=Aa=Xt=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,Fs(m,n,g);break;case"selectionchange":if(Bh)break;case"keydown":case"keyup":Fs(m,n,g)}var E;if(Li)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Qt?Ic(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Tc&&n.locale!=="ko"&&(Qt||I!=="onCompositionStart"?I==="onCompositionEnd"&&Qt&&(E=Sc()):(lt=g,zi="value"in lt?lt.value:lt.textContent,Qt=!0)),z=ar(u,I),0<z.length&&(I=new Cs(I,e,null,n,g),m.push({event:I,listeners:z}),E?I.data=E:(E=jc(n),E!==null&&(I.data=E)))),(E=Ph?Rh(e,n):Nh(e,n))&&(u=ar(u,"onBeforeInput"),0<u.length&&(g=new Cs("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:u}),g.data=E))}Fc(m,t)})}function oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ar(e,t){for(var n=t+"Capture",o=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Kn(e,n),a!=null&&o.unshift(oo(e,a,r)),a=Kn(e,t),a!=null&&o.push(oo(e,a,r))),e=e.return}return o}function Jt(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gs(e,t,n,o,r){for(var a=t._reactName,i=[];n!==null&&n!==o;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===o)break;s.tag===5&&u!==null&&(s=u,r?(l=Kn(n,a),l!=null&&i.unshift(oo(n,l,s))):r||(l=Kn(n,a),l!=null&&i.push(oo(n,l,s)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qh=/\r\n?/g,Yh=/\u0000|\uFFFD/g;function Ds(e){return(typeof e=="string"?e:""+e).replace(qh,`
`).replace(Yh,"")}function Po(e,t,n){if(t=Ds(t),Ds(e)!==t&&n)throw Error(_(425))}function ir(){}var Fa=null,Ha=null;function Ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Kh=typeof clearTimeout=="function"?clearTimeout:void 0,Bs=typeof Promise=="function"?Promise:void 0,Qh=typeof queueMicrotask=="function"?queueMicrotask:typeof Bs<"u"?function(e){return Bs.resolve(null).then(e).catch(Xh)}:Ga;function Xh(e){setTimeout(function(){throw e})}function ia(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){e.removeChild(r),Zn(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);Zn(t)}function mt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $s(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xn=Math.random().toString(36).slice(2),De="__reactFiber$"+xn,ro="__reactProps$"+xn,Ze="__reactContainer$"+xn,Da="__reactEvents$"+xn,Zh="__reactListeners$"+xn,ep="__reactHandles$"+xn;function Nt(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ze]||n[De]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$s(e);e!==null;){if(n=e[De])return n;e=$s(e)}return t}e=n,n=e.parentNode}return null}function wo(e){return e=e[De]||e[Ze],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function en(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function zr(e){return e[ro]||null}var Ba=[],tn=-1;function xt(e){return{current:e}}function H(e){0>tn||(e.current=Ba[tn],Ba[tn]=null,tn--)}function W(e,t){tn++,Ba[tn]=e.current,e.current=t}var bt={},ce=xt(bt),ye=xt(!1),Ft=bt;function fn(e,t){var n=e.type.contextTypes;if(!n)return bt;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=t[a];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ve(e){return e=e.childContextTypes,e!=null}function sr(){H(ye),H(ce)}function Vs(e,t,n){if(ce.current!==bt)throw Error(_(168));W(ce,t),W(ye,n)}function Uc(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in t))throw Error(_(108,Wd(e)||"Unknown",r));return B({},n,o)}function lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bt,Ft=ce.current,W(ce,e),W(ye,ye.current),!0}function Js(e,t,n){var o=e.stateNode;if(!o)throw Error(_(169));n?(e=Uc(e,t,Ft),o.__reactInternalMemoizedMergedChildContext=e,H(ye),H(ce),W(ce,e)):H(ye),W(ye,n)}var qe=null,Er=!1,sa=!1;function Gc(e){qe===null?qe=[e]:qe.push(e)}function tp(e){Er=!0,Gc(e)}function St(){if(!sa&&qe!==null){sa=!0;var e=0,t=A;try{var n=qe;for(A=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}qe=null,Er=!1}catch(r){throw qe!==null&&(qe=qe.slice(e+1)),pc(Si,St),r}finally{A=t,sa=!1}}return null}var nn=[],on=0,cr=null,ur=0,je=[],ze=0,Ht=null,Ye=1,Ke="";function Lt(e,t){nn[on++]=ur,nn[on++]=cr,cr=e,ur=t}function Dc(e,t,n){je[ze++]=Ye,je[ze++]=Ke,je[ze++]=Ht,Ht=e;var o=Ye;e=Ke;var r=32-We(o)-1;o&=~(1<<r),n+=1;var a=32-We(t)+r;if(30<a){var i=r-r%5;a=(o&(1<<i)-1).toString(32),o>>=i,r-=i,Ye=1<<32-We(t)+r|n<<r|o,Ke=a+e}else Ye=1<<a|n<<r|o,Ke=e}function Ri(e){e.return!==null&&(Lt(e,1),Dc(e,1,0))}function Ni(e){for(;e===cr;)cr=nn[--on],nn[on]=null,ur=nn[--on],nn[on]=null;for(;e===Ht;)Ht=je[--ze],je[ze]=null,Ke=je[--ze],je[ze]=null,Ye=je[--ze],je[ze]=null}var xe=null,_e=null,U=!1,Ae=null;function Bc(e,t){var n=Ee(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qs(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xe=e,_e=mt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xe=e,_e=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ht!==null?{id:Ye,overflow:Ke}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ee(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xe=e,_e=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Va(e){if(U){var t=_e;if(t){var n=t;if(!qs(e,t)){if($a(e))throw Error(_(418));t=mt(n.nextSibling);var o=xe;t&&qs(e,t)?Bc(o,n):(e.flags=e.flags&-4097|2,U=!1,xe=e)}}else{if($a(e))throw Error(_(418));e.flags=e.flags&-4097|2,U=!1,xe=e}}}function Ys(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xe=e}function Ro(e){if(e!==xe)return!1;if(!U)return Ys(e),U=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ua(e.type,e.memoizedProps)),t&&(t=_e)){if($a(e))throw $c(),Error(_(418));for(;t;)Bc(e,t),t=mt(t.nextSibling)}if(Ys(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_e=mt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_e=null}}else _e=xe?mt(e.stateNode.nextSibling):null;return!0}function $c(){for(var e=_e;e;)e=mt(e.nextSibling)}function gn(){_e=xe=null,U=!1}function Mi(e){Ae===null?Ae=[e]:Ae.push(e)}var np=nt.ReactCurrentBatchConfig;function Pn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var o=n.stateNode}if(!o)throw Error(_(147,e));var r=o,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var s=r.refs;i===null?delete s[a]:s[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function No(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){var t=e._init;return t(e._payload)}function Vc(e){function t(h,d){if(e){var p=h.deletions;p===null?(h.deletions=[d],h.flags|=16):p.push(d)}}function n(h,d){if(!e)return null;for(;d!==null;)t(h,d),d=d.sibling;return null}function o(h,d){for(h=new Map;d!==null;)d.key!==null?h.set(d.key,d):h.set(d.index,d),d=d.sibling;return h}function r(h,d){return h=yt(h,d),h.index=0,h.sibling=null,h}function a(h,d,p){return h.index=p,e?(p=h.alternate,p!==null?(p=p.index,p<d?(h.flags|=2,d):p):(h.flags|=2,d)):(h.flags|=1048576,d)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function s(h,d,p,v){return d===null||d.tag!==6?(d=ma(p,h.mode,v),d.return=h,d):(d=r(d,p),d.return=h,d)}function l(h,d,p,v){var S=p.type;return S===Kt?g(h,d,p.props.children,v,p.key):d!==null&&(d.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rt&&Ks(S)===d.type)?(v=r(d,p.props),v.ref=Pn(h,d,p),v.return=h,v):(v=Qo(p.type,p.key,p.props,null,h.mode,v),v.ref=Pn(h,d,p),v.return=h,v)}function u(h,d,p,v){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=fa(p,h.mode,v),d.return=h,d):(d=r(d,p.children||[]),d.return=h,d)}function g(h,d,p,v,S){return d===null||d.tag!==7?(d=Wt(p,h.mode,v,S),d.return=h,d):(d=r(d,p),d.return=h,d)}function m(h,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=ma(""+d,h.mode,p),d.return=h,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case xo:return p=Qo(d.type,d.key,d.props,null,h.mode,p),p.ref=Pn(h,null,d),p.return=h,p;case Yt:return d=fa(d,h.mode,p),d.return=h,d;case rt:var v=d._init;return m(h,v(d._payload),p)}if(On(d)||jn(d))return d=Wt(d,h.mode,p,null),d.return=h,d;No(h,d)}return null}function f(h,d,p,v){var S=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:s(h,d,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:return p.key===S?l(h,d,p,v):null;case Yt:return p.key===S?u(h,d,p,v):null;case rt:return S=p._init,f(h,d,S(p._payload),v)}if(On(p)||jn(p))return S!==null?null:g(h,d,p,v,null);No(h,p)}return null}function w(h,d,p,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return h=h.get(p)||null,s(d,h,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xo:return h=h.get(v.key===null?p:v.key)||null,l(d,h,v,S);case Yt:return h=h.get(v.key===null?p:v.key)||null,u(d,h,v,S);case rt:var z=v._init;return w(h,d,p,z(v._payload),S)}if(On(v)||jn(v))return h=h.get(p)||null,g(d,h,v,S,null);No(d,v)}return null}function y(h,d,p,v){for(var S=null,z=null,E=d,I=d=0,V=null;E!==null&&I<p.length;I++){E.index>I?(V=E,E=null):V=E.sibling;var M=f(h,E,p[I],v);if(M===null){E===null&&(E=V);break}e&&E&&M.alternate===null&&t(h,E),d=a(M,d,I),z===null?S=M:z.sibling=M,z=M,E=V}if(I===p.length)return n(h,E),U&&Lt(h,I),S;if(E===null){for(;I<p.length;I++)E=m(h,p[I],v),E!==null&&(d=a(E,d,I),z===null?S=E:z.sibling=E,z=E);return U&&Lt(h,I),S}for(E=o(h,E);I<p.length;I++)V=w(E,h,I,p[I],v),V!==null&&(e&&V.alternate!==null&&E.delete(V.key===null?I:V.key),d=a(V,d,I),z===null?S=V:z.sibling=V,z=V);return e&&E.forEach(function(Re){return t(h,Re)}),U&&Lt(h,I),S}function k(h,d,p,v){var S=jn(p);if(typeof S!="function")throw Error(_(150));if(p=S.call(p),p==null)throw Error(_(151));for(var z=S=null,E=d,I=d=0,V=null,M=p.next();E!==null&&!M.done;I++,M=p.next()){E.index>I?(V=E,E=null):V=E.sibling;var Re=f(h,E,M.value,v);if(Re===null){E===null&&(E=V);break}e&&E&&Re.alternate===null&&t(h,E),d=a(Re,d,I),z===null?S=Re:z.sibling=Re,z=Re,E=V}if(M.done)return n(h,E),U&&Lt(h,I),S;if(E===null){for(;!M.done;I++,M=p.next())M=m(h,M.value,v),M!==null&&(d=a(M,d,I),z===null?S=M:z.sibling=M,z=M);return U&&Lt(h,I),S}for(E=o(h,E);!M.done;I++,M=p.next())M=w(E,h,I,M.value,v),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?I:M.key),d=a(M,d,I),z===null?S=M:z.sibling=M,z=M);return e&&E.forEach(function(Tn){return t(h,Tn)}),U&&Lt(h,I),S}function b(h,d,p,v){if(typeof p=="object"&&p!==null&&p.type===Kt&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:e:{for(var S=p.key,z=d;z!==null;){if(z.key===S){if(S=p.type,S===Kt){if(z.tag===7){n(h,z.sibling),d=r(z,p.props.children),d.return=h,h=d;break e}}else if(z.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rt&&Ks(S)===z.type){n(h,z.sibling),d=r(z,p.props),d.ref=Pn(h,z,p),d.return=h,h=d;break e}n(h,z);break}else t(h,z);z=z.sibling}p.type===Kt?(d=Wt(p.props.children,h.mode,v,p.key),d.return=h,h=d):(v=Qo(p.type,p.key,p.props,null,h.mode,v),v.ref=Pn(h,d,p),v.return=h,h=v)}return i(h);case Yt:e:{for(z=p.key;d!==null;){if(d.key===z)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(h,d.sibling),d=r(d,p.children||[]),d.return=h,h=d;break e}else{n(h,d);break}else t(h,d);d=d.sibling}d=fa(p,h.mode,v),d.return=h,h=d}return i(h);case rt:return z=p._init,b(h,d,z(p._payload),v)}if(On(p))return y(h,d,p,v);if(jn(p))return k(h,d,p,v);No(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(h,d.sibling),d=r(d,p),d.return=h,h=d):(n(h,d),d=ma(p,h.mode,v),d.return=h,h=d),i(h)):n(h,d)}return b}var wn=Vc(!0),Jc=Vc(!1),dr=xt(null),hr=null,rn=null,Oi=null;function Ai(){Oi=rn=hr=null}function Wi(e){var t=dr.current;H(dr),e._currentValue=t}function Ja(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function hn(e,t){hr=e,Oi=rn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(we=!0),e.firstContext=null)}function Le(e){var t=e._currentValue;if(Oi!==e)if(e={context:e,memoizedValue:t,next:null},rn===null){if(hr===null)throw Error(_(308));rn=e,hr.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var Mt=null;function Fi(e){Mt===null?Mt=[e]:Mt.push(e)}function qc(e,t,n,o){var r=t.interleaved;return r===null?(n.next=n,Fi(t)):(n.next=r.next,r.next=n),t.interleaved=n,et(e,o)}function et(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var at=!1;function Hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qe(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ft(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,O&2){var r=o.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),o.pending=t,et(e,n)}return r=o.interleaved,r===null?(t.next=t,Fi(o)):(t.next=r.next,r.next=t),o.interleaved=t,et(e,n)}function $o(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Ti(e,n)}}function Qs(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pr(e,t,n,o){var r=e.updateQueue;at=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?a=u:i.next=u,i=l;var g=e.alternate;g!==null&&(g=g.updateQueue,s=g.lastBaseUpdate,s!==i&&(s===null?g.firstBaseUpdate=u:s.next=u,g.lastBaseUpdate=l))}if(a!==null){var m=r.baseState;i=0,g=u=l=null,s=a;do{var f=s.lane,w=s.eventTime;if((o&f)===f){g!==null&&(g=g.next={eventTime:w,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,k=s;switch(f=t,w=n,k.tag){case 1:if(y=k.payload,typeof y=="function"){m=y.call(w,m,f);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=k.payload,f=typeof y=="function"?y.call(w,m,f):y,f==null)break e;m=B({},m,f);break e;case 2:at=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[s]:f.push(s))}else w={eventTime:w,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},g===null?(u=g=w,l=m):g=g.next=w,i|=f;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;f=s,s=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(g===null&&(l=m),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=g,t=r.shared.interleaved,t!==null){r=t;do i|=r.lane,r=r.next;while(r!==t)}else a===null&&(r.shared.lanes=0);Gt|=i,e.lanes=i,e.memoizedState=m}}function Xs(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(_(191,r));r.call(o)}}}var yo={},$e=xt(yo),ao=xt(yo),io=xt(yo);function Ot(e){if(e===yo)throw Error(_(174));return e}function Ui(e,t){switch(W(io,t),W(ao,e),W($e,yo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ja(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ja(t,e)}H($e),W($e,t)}function yn(){H($e),H(ao),H(io)}function Kc(e){Ot(io.current);var t=Ot($e.current),n=ja(t,e.type);t!==n&&(W(ao,e),W($e,n))}function Gi(e){ao.current===e&&(H($e),H(ao))}var G=xt(0);function mr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function Di(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var Vo=nt.ReactCurrentDispatcher,ca=nt.ReactCurrentBatchConfig,Ut=0,D=null,X=null,te=null,fr=!1,Bn=!1,so=0,op=0;function ie(){throw Error(_(321))}function Bi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!He(e[n],t[n]))return!1;return!0}function $i(e,t,n,o,r,a){if(Ut=a,D=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vo.current=e===null||e.memoizedState===null?sp:lp,e=n(o,r),Bn){a=0;do{if(Bn=!1,so=0,25<=a)throw Error(_(301));a+=1,te=X=null,t.updateQueue=null,Vo.current=cp,e=n(o,r)}while(Bn)}if(Vo.current=gr,t=X!==null&&X.next!==null,Ut=0,te=X=D=null,fr=!1,t)throw Error(_(300));return e}function Vi(){var e=so!==0;return so=0,e}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?D.memoizedState=te=e:te=te.next=e,te}function Pe(){if(X===null){var e=D.alternate;e=e!==null?e.memoizedState:null}else e=X.next;var t=te===null?D.memoizedState:te.next;if(t!==null)te=t,X=e;else{if(e===null)throw Error(_(310));X=e,e={memoizedState:X.memoizedState,baseState:X.baseState,baseQueue:X.baseQueue,queue:X.queue,next:null},te===null?D.memoizedState=te=e:te=te.next=e}return te}function lo(e,t){return typeof t=="function"?t(e):t}function ua(e){var t=Pe(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var o=X,r=o.baseQueue,a=n.pending;if(a!==null){if(r!==null){var i=r.next;r.next=a.next,a.next=i}o.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,o=o.baseState;var s=i=null,l=null,u=a;do{var g=u.lane;if((Ut&g)===g)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:e(o,u.action);else{var m={lane:g,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=m,i=o):l=l.next=m,D.lanes|=g,Gt|=g}u=u.next}while(u!==null&&u!==a);l===null?i=o:l.next=s,He(o,t.memoizedState)||(we=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=l,n.lastRenderedState=o}if(e=n.interleaved,e!==null){r=e;do a=r.lane,D.lanes|=a,Gt|=a,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function da(e){var t=Pe(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do a=e(a,i.action),i=i.next;while(i!==r);He(a,t.memoizedState)||(we=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,o]}function Qc(){}function Xc(e,t){var n=D,o=Pe(),r=t(),a=!He(o.memoizedState,r);if(a&&(o.memoizedState=r,we=!0),o=o.queue,Ji(tu.bind(null,n,o,e),[e]),o.getSnapshot!==t||a||te!==null&&te.memoizedState.tag&1){if(n.flags|=2048,co(9,eu.bind(null,n,o,r,t),void 0,null),ne===null)throw Error(_(349));Ut&30||Zc(n,t,r)}return r}function Zc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=D.updateQueue,t===null?(t={lastEffect:null,stores:null},D.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eu(e,t,n,o){t.value=n,t.getSnapshot=o,nu(t)&&ou(e)}function tu(e,t,n){return n(function(){nu(t)&&ou(e)})}function nu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!He(e,n)}catch{return!0}}function ou(e){var t=et(e,1);t!==null&&Fe(t,e,1,-1)}function Zs(e){var t=Ge();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e},t.queue=e,e=e.dispatch=ip.bind(null,D,e),[t.memoizedState,e]}function co(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=D.updateQueue,t===null?(t={lastEffect:null,stores:null},D.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function ru(){return Pe().memoizedState}function Jo(e,t,n,o){var r=Ge();D.flags|=e,r.memoizedState=co(1|t,n,void 0,o===void 0?null:o)}function Cr(e,t,n,o){var r=Pe();o=o===void 0?null:o;var a=void 0;if(X!==null){var i=X.memoizedState;if(a=i.destroy,o!==null&&Bi(o,i.deps)){r.memoizedState=co(t,n,a,o);return}}D.flags|=e,r.memoizedState=co(1|t,n,a,o)}function el(e,t){return Jo(8390656,8,e,t)}function Ji(e,t){return Cr(2048,8,e,t)}function au(e,t){return Cr(4,2,e,t)}function iu(e,t){return Cr(4,4,e,t)}function su(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lu(e,t,n){return n=n!=null?n.concat([e]):null,Cr(4,4,su.bind(null,t,e),n)}function qi(){}function cu(e,t){var n=Pe();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Bi(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function uu(e,t){var n=Pe();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Bi(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function du(e,t,n){return Ut&21?(He(n,t)||(n=gc(),D.lanes|=n,Gt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,we=!0),e.memoizedState=n)}function rp(e,t){var n=A;A=n!==0&&4>n?n:4,e(!0);var o=ca.transition;ca.transition={};try{e(!1),t()}finally{A=n,ca.transition=o}}function hu(){return Pe().memoizedState}function ap(e,t,n){var o=wt(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},pu(e))mu(t,n);else if(n=qc(e,t,n,o),n!==null){var r=he();Fe(n,e,o,r),fu(n,t,o)}}function ip(e,t,n){var o=wt(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(pu(e))mu(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,s=a(i,n);if(r.hasEagerState=!0,r.eagerState=s,He(s,i)){var l=t.interleaved;l===null?(r.next=r,Fi(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=qc(e,t,r,o),n!==null&&(r=he(),Fe(n,e,o,r),fu(n,t,o))}}function pu(e){var t=e.alternate;return e===D||t!==null&&t===D}function mu(e,t){Bn=fr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fu(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Ti(e,n)}}var gr={readContext:Le,useCallback:ie,useContext:ie,useEffect:ie,useImperativeHandle:ie,useInsertionEffect:ie,useLayoutEffect:ie,useMemo:ie,useReducer:ie,useRef:ie,useState:ie,useDebugValue:ie,useDeferredValue:ie,useTransition:ie,useMutableSource:ie,useSyncExternalStore:ie,useId:ie,unstable_isNewReconciler:!1},sp={readContext:Le,useCallback:function(e,t){return Ge().memoizedState=[e,t===void 0?null:t],e},useContext:Le,useEffect:el,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jo(4194308,4,su.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jo(4,2,e,t)},useMemo:function(e,t){var n=Ge();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Ge();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=ap.bind(null,D,e),[o.memoizedState,e]},useRef:function(e){var t=Ge();return e={current:e},t.memoizedState=e},useState:Zs,useDebugValue:qi,useDeferredValue:function(e){return Ge().memoizedState=e},useTransition:function(){var e=Zs(!1),t=e[0];return e=rp.bind(null,e[1]),Ge().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=D,r=Ge();if(U){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),ne===null)throw Error(_(349));Ut&30||Zc(o,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,el(tu.bind(null,o,a,e),[e]),o.flags|=2048,co(9,eu.bind(null,o,a,n,t),void 0,null),n},useId:function(){var e=Ge(),t=ne.identifierPrefix;if(U){var n=Ke,o=Ye;n=(o&~(1<<32-We(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=so++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=op++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lp={readContext:Le,useCallback:cu,useContext:Le,useEffect:Ji,useImperativeHandle:lu,useInsertionEffect:au,useLayoutEffect:iu,useMemo:uu,useReducer:ua,useRef:ru,useState:function(){return ua(lo)},useDebugValue:qi,useDeferredValue:function(e){var t=Pe();return du(t,X.memoizedState,e)},useTransition:function(){var e=ua(lo)[0],t=Pe().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Xc,useId:hu,unstable_isNewReconciler:!1},cp={readContext:Le,useCallback:cu,useContext:Le,useEffect:Ji,useImperativeHandle:lu,useInsertionEffect:au,useLayoutEffect:iu,useMemo:uu,useReducer:da,useRef:ru,useState:function(){return da(lo)},useDebugValue:qi,useDeferredValue:function(e){var t=Pe();return X===null?t.memoizedState=e:du(t,X.memoizedState,e)},useTransition:function(){var e=da(lo)[0],t=Pe().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Xc,useId:hu,unstable_isNewReconciler:!1};function Me(e,t){if(e&&e.defaultProps){t=B({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qa(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:B({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lr={isMounted:function(e){return(e=e._reactInternals)?$t(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=he(),r=wt(e),a=Qe(o,r);a.payload=t,n!=null&&(a.callback=n),t=ft(e,a,r),t!==null&&(Fe(t,e,r,o),$o(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=he(),r=wt(e),a=Qe(o,r);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ft(e,a,r),t!==null&&(Fe(t,e,r,o),$o(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=he(),o=wt(e),r=Qe(n,o);r.tag=2,t!=null&&(r.callback=t),t=ft(e,r,o),t!==null&&(Fe(t,e,o,n),$o(t,e,o))}};function tl(e,t,n,o,r,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,a,i):t.prototype&&t.prototype.isPureReactComponent?!to(n,o)||!to(r,a):!0}function gu(e,t,n){var o=!1,r=bt,a=t.contextType;return typeof a=="object"&&a!==null?a=Le(a):(r=ve(t)?Ft:ce.current,o=t.contextTypes,a=(o=o!=null)?fn(e,r):bt),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lr,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function nl(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Lr.enqueueReplaceState(t,t.state,null)}function Ya(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Hi(e);var a=t.contextType;typeof a=="object"&&a!==null?r.context=Le(a):(a=ve(t)?Ft:ce.current,r.context=fn(e,a)),r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(qa(e,t,a,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Lr.enqueueReplaceState(r,r.state,null),pr(e,n,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function vn(e,t){try{var n="",o=t;do n+=Ad(o),o=o.return;while(o);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ka(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var up=typeof WeakMap=="function"?WeakMap:Map;function wu(e,t,n){n=Qe(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){yr||(yr=!0,ii=o),Ka(e,t)},n}function yu(e,t,n){n=Qe(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){Ka(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Ka(e,t),typeof o!="function"&&(gt===null?gt=new Set([this]):gt.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function ol(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new up;var r=new Set;o.set(t,r)}else r=o.get(t),r===void 0&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=Sp.bind(null,e,t,n),t.then(e,e))}function rl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function al(e,t,n,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qe(-1,1),t.tag=2,ft(n,t,1))),n.lanes|=1),e)}var dp=nt.ReactCurrentOwner,we=!1;function ue(e,t,n,o){t.child=e===null?Jc(t,null,n,o):wn(t,e.child,n,o)}function il(e,t,n,o,r){n=n.render;var a=t.ref;return hn(t,r),o=$i(e,t,n,o,a,r),n=Vi(),e!==null&&!we?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,tt(e,t,r)):(U&&n&&Ri(t),t.flags|=1,ue(e,t,o,r),t.child)}function sl(e,t,n,o,r){if(e===null){var a=n.type;return typeof a=="function"&&!ns(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,vu(e,t,a,o,r)):(e=Qo(n.type,null,o,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&r)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:to,n(i,o)&&e.ref===t.ref)return tt(e,t,r)}return t.flags|=1,e=yt(a,o),e.ref=t.ref,e.return=t,t.child=e}function vu(e,t,n,o,r){if(e!==null){var a=e.memoizedProps;if(to(a,o)&&e.ref===t.ref)if(we=!1,t.pendingProps=o=a,(e.lanes&r)!==0)e.flags&131072&&(we=!0);else return t.lanes=e.lanes,tt(e,t,r)}return Qa(e,t,n,o,r)}function ku(e,t,n){var o=t.pendingProps,r=o.children,a=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(sn,be),be|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,W(sn,be),be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=a!==null?a.baseLanes:n,W(sn,be),be|=o}else a!==null?(o=a.baseLanes|n,t.memoizedState=null):o=n,W(sn,be),be|=o;return ue(e,t,r,n),t.child}function bu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qa(e,t,n,o,r){var a=ve(n)?Ft:ce.current;return a=fn(t,a),hn(t,r),n=$i(e,t,n,o,a,r),o=Vi(),e!==null&&!we?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,tt(e,t,r)):(U&&o&&Ri(t),t.flags|=1,ue(e,t,n,r),t.child)}function ll(e,t,n,o,r){if(ve(n)){var a=!0;lr(t)}else a=!1;if(hn(t,r),t.stateNode===null)qo(e,t),gu(t,n,o),Ya(t,n,o,r),o=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Le(u):(u=ve(n)?Ft:ce.current,u=fn(t,u));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==o||l!==u)&&nl(t,i,o,u),at=!1;var f=t.memoizedState;i.state=f,pr(t,o,i,r),l=t.memoizedState,s!==o||f!==l||ye.current||at?(typeof g=="function"&&(qa(t,n,g,o),l=t.memoizedState),(s=at||tl(t,n,s,o,f,l,u))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),i.props=o,i.state=l,i.context=u,o=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{i=t.stateNode,Yc(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Me(t.type,s),i.props=u,m=t.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Le(l):(l=ve(n)?Ft:ce.current,l=fn(t,l));var w=n.getDerivedStateFromProps;(g=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==m||f!==l)&&nl(t,i,o,l),at=!1,f=t.memoizedState,i.state=f,pr(t,o,i,r);var y=t.memoizedState;s!==m||f!==y||ye.current||at?(typeof w=="function"&&(qa(t,n,w,o),y=t.memoizedState),(u=at||tl(t,n,u,o,f,y,l)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(o,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(o,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=y),i.props=o,i.state=y,i.context=l,o=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),o=!1)}return Xa(e,t,n,o,a,r)}function Xa(e,t,n,o,r,a){bu(e,t);var i=(t.flags&128)!==0;if(!o&&!i)return r&&Js(t,n,!1),tt(e,t,a);o=t.stateNode,dp.current=t;var s=i&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&i?(t.child=wn(t,e.child,null,a),t.child=wn(t,null,s,a)):ue(e,t,s,a),t.memoizedState=o.state,r&&Js(t,n,!0),t.child}function _u(e){var t=e.stateNode;t.pendingContext?Vs(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vs(e,t.context,!1),Ui(e,t.containerInfo)}function cl(e,t,n,o,r){return gn(),Mi(r),t.flags|=256,ue(e,t,n,o),t.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function ei(e){return{baseLanes:e,cachePool:null,transitions:null}}function xu(e,t,n){var o=t.pendingProps,r=G.current,a=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),W(G,r&1),e===null)return Va(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=o.children,e=o.fallback,a?(o=t.mode,a=t.child,i={mode:"hidden",children:i},!(o&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Nr(i,o,0,null),e=Wt(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ei(n),t.memoizedState=Za,e):Yi(t,i));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return hp(e,t,i,o,s,r,n);if(a){a=o.fallback,i=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:o.children};return!(i&1)&&t.child!==r?(o=t.child,o.childLanes=0,o.pendingProps=l,t.deletions=null):(o=yt(r,l),o.subtreeFlags=r.subtreeFlags&14680064),s!==null?a=yt(s,a):(a=Wt(a,i,n,null),a.flags|=2),a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,i=e.child.memoizedState,i=i===null?ei(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Za,o}return a=e.child,e=a.sibling,o=yt(a,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Yi(e,t){return t=Nr({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mo(e,t,n,o){return o!==null&&Mi(o),wn(t,e.child,null,n),e=Yi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hp(e,t,n,o,r,a,i){if(n)return t.flags&256?(t.flags&=-257,o=ha(Error(_(422))),Mo(e,t,i,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=o.fallback,r=t.mode,o=Nr({mode:"visible",children:o.children},r,0,null),a=Wt(a,r,i,null),a.flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,t.mode&1&&wn(t,e.child,null,i),t.child.memoizedState=ei(i),t.memoizedState=Za,a);if(!(t.mode&1))return Mo(e,t,i,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var s=o.dgst;return o=s,a=Error(_(419)),o=ha(a,o,void 0),Mo(e,t,i,o)}if(s=(i&e.childLanes)!==0,we||s){if(o=ne,o!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|i)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,et(e,r),Fe(o,e,r,-1))}return ts(),o=ha(Error(_(421))),Mo(e,t,i,o)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Tp.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,_e=mt(r.nextSibling),xe=t,U=!0,Ae=null,e!==null&&(je[ze++]=Ye,je[ze++]=Ke,je[ze++]=Ht,Ye=e.id,Ke=e.overflow,Ht=t),t=Yi(t,o.children),t.flags|=4096,t)}function ul(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ja(e.return,t,n)}function pa(e,t,n,o,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=o,a.tail=n,a.tailMode=r)}function Su(e,t,n){var o=t.pendingProps,r=o.revealOrder,a=o.tail;if(ue(e,t,o.children,n),o=G.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ul(e,n,t);else if(e.tag===19)ul(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(W(G,o),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&mr(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),pa(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&mr(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}pa(t,!0,n,null,a);break;case"together":pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=yt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pp(e,t,n){switch(t.tag){case 3:_u(t),gn();break;case 5:Kc(t);break;case 1:ve(t.type)&&lr(t);break;case 4:Ui(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;W(dr,o._currentValue),o._currentValue=r;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(W(G,G.current&1),t.flags|=128,null):n&t.child.childLanes?xu(e,t,n):(W(G,G.current&1),e=tt(e,t,n),e!==null?e.sibling:null);W(G,G.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Su(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),W(G,G.current),o)break;return null;case 22:case 23:return t.lanes=0,ku(e,t,n)}return tt(e,t,n)}var Tu,ti,Iu,ju;Tu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ti=function(){};Iu=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,Ot($e.current);var a=null;switch(n){case"input":r=xa(e,r),o=xa(e,o),a=[];break;case"select":r=B({},r,{value:void 0}),o=B({},o,{value:void 0}),a=[];break;case"textarea":r=Ia(e,r),o=Ia(e,o),a=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ir)}za(n,o);var i;n=null;for(u in r)if(!o.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in o){var l=o[u];if(s=r!=null?r[u]:void 0,o.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&F("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};ju=function(e,t,n,o){n!==o&&(t.flags|=4)};function Rn(e,t){if(!U)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function se(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function mp(e,t,n){var o=t.pendingProps;switch(Ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(t),null;case 1:return ve(t.type)&&sr(),se(t),null;case 3:return o=t.stateNode,yn(),H(ye),H(ce),Di(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ae!==null&&(ci(Ae),Ae=null))),ti(e,t),se(t),null;case 5:Gi(t);var r=Ot(io.current);if(n=t.type,e!==null&&t.stateNode!=null)Iu(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(_(166));return se(t),null}if(e=Ot($e.current),Ro(t)){o=t.stateNode,n=t.type;var a=t.memoizedProps;switch(o[De]=t,o[ro]=a,e=(t.mode&1)!==0,n){case"dialog":F("cancel",o),F("close",o);break;case"iframe":case"object":case"embed":F("load",o);break;case"video":case"audio":for(r=0;r<Wn.length;r++)F(Wn[r],o);break;case"source":F("error",o);break;case"img":case"image":case"link":F("error",o),F("load",o);break;case"details":F("toggle",o);break;case"input":vs(o,a),F("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},F("invalid",o);break;case"textarea":bs(o,a),F("invalid",o)}za(n,a),r=null;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="children"?typeof s=="string"?o.textContent!==s&&(a.suppressHydrationWarning!==!0&&Po(o.textContent,s,e),r=["children",s]):typeof s=="number"&&o.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Po(o.textContent,s,e),r=["children",""+s]):qn.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&F("scroll",o)}switch(n){case"input":So(o),ks(o,a,!0);break;case"textarea":So(o),_s(o);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(o.onclick=ir)}o=r,t.updateQueue=o,o!==null&&(t.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=i.createElement(n,{is:o.is}):(e=i.createElement(n),n==="select"&&(i=e,o.multiple?i.multiple=!0:o.size&&(i.size=o.size))):e=i.createElementNS(e,n),e[De]=t,e[ro]=o,Tu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ea(n,o),n){case"dialog":F("cancel",e),F("close",e),r=o;break;case"iframe":case"object":case"embed":F("load",e),r=o;break;case"video":case"audio":for(r=0;r<Wn.length;r++)F(Wn[r],e);r=o;break;case"source":F("error",e),r=o;break;case"img":case"image":case"link":F("error",e),F("load",e),r=o;break;case"details":F("toggle",e),r=o;break;case"input":vs(e,o),r=xa(e,o),F("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=B({},o,{value:void 0}),F("invalid",e);break;case"textarea":bs(e,o),r=Ia(e,o),F("invalid",e);break;default:r=o}za(n,r),s=r;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?rc(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nc(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yn(e,l):typeof l=="number"&&Yn(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(qn.hasOwnProperty(a)?l!=null&&a==="onScroll"&&F("scroll",e):l!=null&&vi(e,a,l,i))}switch(n){case"input":So(e),ks(e,o,!1);break;case"textarea":So(e),_s(e);break;case"option":o.value!=null&&e.setAttribute("value",""+kt(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,a!=null?ln(e,!!o.multiple,a,!1):o.defaultValue!=null&&ln(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=ir)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return se(t),null;case 6:if(e&&t.stateNode!=null)ju(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(_(166));if(n=Ot(io.current),Ot($e.current),Ro(t)){if(o=t.stateNode,n=t.memoizedProps,o[De]=t,(a=o.nodeValue!==n)&&(e=xe,e!==null))switch(e.tag){case 3:Po(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Po(o.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[De]=t,t.stateNode=o}return se(t),null;case 13:if(H(G),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(U&&_e!==null&&t.mode&1&&!(t.flags&128))$c(),gn(),t.flags|=98560,a=!1;else if(a=Ro(t),o!==null&&o.dehydrated!==null){if(e===null){if(!a)throw Error(_(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(_(317));a[De]=t}else gn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;se(t),a=!1}else Ae!==null&&(ci(Ae),Ae=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||G.current&1?Z===0&&(Z=3):ts())),t.updateQueue!==null&&(t.flags|=4),se(t),null);case 4:return yn(),ti(e,t),e===null&&no(t.stateNode.containerInfo),se(t),null;case 10:return Wi(t.type._context),se(t),null;case 17:return ve(t.type)&&sr(),se(t),null;case 19:if(H(G),a=t.memoizedState,a===null)return se(t),null;if(o=(t.flags&128)!==0,i=a.rendering,i===null)if(o)Rn(a,!1);else{if(Z!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=mr(e),i!==null){for(t.flags|=128,Rn(a,!1),o=i.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)a=n,e=o,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return W(G,G.current&1|2),t.child}e=e.sibling}a.tail!==null&&q()>kn&&(t.flags|=128,o=!0,Rn(a,!1),t.lanes=4194304)}else{if(!o)if(e=mr(i),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!U)return se(t),null}else 2*q()-a.renderingStartTime>kn&&n!==1073741824&&(t.flags|=128,o=!0,Rn(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=q(),t.sibling=null,n=G.current,W(G,o?n&1|2:n&1),t):(se(t),null);case 22:case 23:return es(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?be&1073741824&&(se(t),t.subtreeFlags&6&&(t.flags|=8192)):se(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function fp(e,t){switch(Ni(t),t.tag){case 1:return ve(t.type)&&sr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yn(),H(ye),H(ce),Di(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gi(t),null;case 13:if(H(G),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(G),null;case 4:return yn(),null;case 10:return Wi(t.type._context),null;case 22:case 23:return es(),null;case 24:return null;default:return null}}var Oo=!1,le=!1,gp=typeof WeakSet=="function"?WeakSet:Set,T=null;function an(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){$(e,t,o)}else n.current=null}function ni(e,t,n){try{n()}catch(o){$(e,t,o)}}var dl=!1;function wp(e,t){if(Fa=or,e=Pc(),Pi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,s=-1,l=-1,u=0,g=0,m=e,f=null;t:for(;;){for(var w;m!==n||r!==0&&m.nodeType!==3||(s=i+r),m!==a||o!==0&&m.nodeType!==3||(l=i+o),m.nodeType===3&&(i+=m.nodeValue.length),(w=m.firstChild)!==null;)f=m,m=w;for(;;){if(m===e)break t;if(f===n&&++u===r&&(s=i),f===a&&++g===o&&(l=i),(w=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=w}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ha={focusedElem:e,selectionRange:n},or=!1,T=t;T!==null;)if(t=T,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,T=e;else for(;T!==null;){t=T;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var k=y.memoizedProps,b=y.memoizedState,h=t.stateNode,d=h.getSnapshotBeforeUpdate(t.elementType===t.type?k:Me(t.type,k),b);h.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(v){$(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,T=e;break}T=t.return}return y=dl,dl=!1,y}function $n(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&ni(t,n,a)}r=r.next}while(r!==o)}}function Pr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function oi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zu(e){var t=e.alternate;t!==null&&(e.alternate=null,zu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[De],delete t[ro],delete t[Da],delete t[Zh],delete t[ep])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eu(e){return e.tag===5||e.tag===3||e.tag===4}function hl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ri(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ir));else if(o!==4&&(e=e.child,e!==null))for(ri(e,t,n),e=e.sibling;e!==null;)ri(e,t,n),e=e.sibling}function ai(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(ai(e,t,n),e=e.sibling;e!==null;)ai(e,t,n),e=e.sibling}var oe=null,Oe=!1;function ot(e,t,n){for(n=n.child;n!==null;)Cu(e,t,n),n=n.sibling}function Cu(e,t,n){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Sr,n)}catch{}switch(n.tag){case 5:le||an(n,t);case 6:var o=oe,r=Oe;oe=null,ot(e,t,n),oe=o,Oe=r,oe!==null&&(Oe?(e=oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):oe.removeChild(n.stateNode));break;case 18:oe!==null&&(Oe?(e=oe,n=n.stateNode,e.nodeType===8?ia(e.parentNode,n):e.nodeType===1&&ia(e,n),Zn(e)):ia(oe,n.stateNode));break;case 4:o=oe,r=Oe,oe=n.stateNode.containerInfo,Oe=!0,ot(e,t,n),oe=o,Oe=r;break;case 0:case 11:case 14:case 15:if(!le&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var a=r,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ni(n,t,i),r=r.next}while(r!==o)}ot(e,t,n);break;case 1:if(!le&&(an(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(s){$(n,t,s)}ot(e,t,n);break;case 21:ot(e,t,n);break;case 22:n.mode&1?(le=(o=le)||n.memoizedState!==null,ot(e,t,n),le=o):ot(e,t,n);break;default:ot(e,t,n)}}function pl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gp),t.forEach(function(o){var r=Ip.bind(null,e,o);n.has(o)||(n.add(o),o.then(r,r))})}}function Ne(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var a=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:oe=s.stateNode,Oe=!1;break e;case 3:oe=s.stateNode.containerInfo,Oe=!0;break e;case 4:oe=s.stateNode.containerInfo,Oe=!0;break e}s=s.return}if(oe===null)throw Error(_(160));Cu(a,i,r),oe=null,Oe=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){$(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lu(t,e),t=t.sibling}function Lu(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ne(t,e),Ue(e),o&4){try{$n(3,e,e.return),Pr(3,e)}catch(k){$(e,e.return,k)}try{$n(5,e,e.return)}catch(k){$(e,e.return,k)}}break;case 1:Ne(t,e),Ue(e),o&512&&n!==null&&an(n,n.return);break;case 5:if(Ne(t,e),Ue(e),o&512&&n!==null&&an(n,n.return),e.flags&32){var r=e.stateNode;try{Yn(r,"")}catch(k){$(e,e.return,k)}}if(o&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Zl(r,a),Ea(s,i);var u=Ea(s,a);for(i=0;i<l.length;i+=2){var g=l[i],m=l[i+1];g==="style"?rc(r,m):g==="dangerouslySetInnerHTML"?nc(r,m):g==="children"?Yn(r,m):vi(r,g,m,u)}switch(s){case"input":Sa(r,a);break;case"textarea":ec(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?ln(r,!!a.multiple,w,!1):f!==!!a.multiple&&(a.defaultValue!=null?ln(r,!!a.multiple,a.defaultValue,!0):ln(r,!!a.multiple,a.multiple?[]:"",!1))}r[ro]=a}catch(k){$(e,e.return,k)}}break;case 6:if(Ne(t,e),Ue(e),o&4){if(e.stateNode===null)throw Error(_(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(k){$(e,e.return,k)}}break;case 3:if(Ne(t,e),Ue(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Zn(t.containerInfo)}catch(k){$(e,e.return,k)}break;case 4:Ne(t,e),Ue(e);break;case 13:Ne(t,e),Ue(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Xi=q())),o&4&&pl(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(le=(u=le)||g,Ne(t,e),le=u):Ne(t,e),Ue(e),o&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!g&&e.mode&1)for(T=e,g=e.child;g!==null;){for(m=T=g;T!==null;){switch(f=T,w=f.child,f.tag){case 0:case 11:case 14:case 15:$n(4,f,f.return);break;case 1:an(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){o=f,n=f.return;try{t=o,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(k){$(o,n,k)}}break;case 5:an(f,f.return);break;case 22:if(f.memoizedState!==null){fl(m);continue}}w!==null?(w.return=f,T=w):fl(m)}g=g.sibling}e:for(g=null,m=e;;){if(m.tag===5){if(g===null){g=m;try{r=m.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=m.stateNode,l=m.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=oc("display",i))}catch(k){$(e,e.return,k)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(k){$(e,e.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ne(t,e),Ue(e),o&4&&pl(e);break;case 21:break;default:Ne(t,e),Ue(e)}}function Ue(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Eu(n)){var o=n;break e}n=n.return}throw Error(_(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Yn(r,""),o.flags&=-33);var a=hl(e);ai(e,a,r);break;case 3:case 4:var i=o.stateNode.containerInfo,s=hl(e);ri(e,s,i);break;default:throw Error(_(161))}}catch(l){$(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yp(e,t,n){T=e,Pu(e)}function Pu(e,t,n){for(var o=(e.mode&1)!==0;T!==null;){var r=T,a=r.child;if(r.tag===22&&o){var i=r.memoizedState!==null||Oo;if(!i){var s=r.alternate,l=s!==null&&s.memoizedState!==null||le;s=Oo;var u=le;if(Oo=i,(le=l)&&!u)for(T=r;T!==null;)i=T,l=i.child,i.tag===22&&i.memoizedState!==null?gl(r):l!==null?(l.return=i,T=l):gl(r);for(;a!==null;)T=a,Pu(a),a=a.sibling;T=r,Oo=s,le=u}ml(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,T=a):ml(e)}}function ml(e){for(;T!==null;){var t=T;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:le||Pr(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!le)if(n===null)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Me(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Xs(t,a,o);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Xs(t,i,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var g=u.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Zn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}le||t.flags&512&&oi(t)}catch(f){$(t,t.return,f)}}if(t===e){T=null;break}if(n=t.sibling,n!==null){n.return=t.return,T=n;break}T=t.return}}function fl(e){for(;T!==null;){var t=T;if(t===e){T=null;break}var n=t.sibling;if(n!==null){n.return=t.return,T=n;break}T=t.return}}function gl(e){for(;T!==null;){var t=T;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pr(4,t)}catch(l){$(t,n,l)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var r=t.return;try{o.componentDidMount()}catch(l){$(t,r,l)}}var a=t.return;try{oi(t)}catch(l){$(t,a,l)}break;case 5:var i=t.return;try{oi(t)}catch(l){$(t,i,l)}}}catch(l){$(t,t.return,l)}if(t===e){T=null;break}var s=t.sibling;if(s!==null){s.return=t.return,T=s;break}T=t.return}}var vp=Math.ceil,wr=nt.ReactCurrentDispatcher,Ki=nt.ReactCurrentOwner,Ce=nt.ReactCurrentBatchConfig,O=0,ne=null,K=null,re=0,be=0,sn=xt(0),Z=0,uo=null,Gt=0,Rr=0,Qi=0,Vn=null,ge=null,Xi=0,kn=1/0,Je=null,yr=!1,ii=null,gt=null,Ao=!1,ct=null,vr=0,Jn=0,si=null,Yo=-1,Ko=0;function he(){return O&6?q():Yo!==-1?Yo:Yo=q()}function wt(e){return e.mode&1?O&2&&re!==0?re&-re:np.transition!==null?(Ko===0&&(Ko=gc()),Ko):(e=A,e!==0||(e=window.event,e=e===void 0?16:xc(e.type)),e):1}function Fe(e,t,n,o){if(50<Jn)throw Jn=0,si=null,Error(_(185));fo(e,n,o),(!(O&2)||e!==ne)&&(e===ne&&(!(O&2)&&(Rr|=n),Z===4&&st(e,re)),ke(e,o),n===1&&O===0&&!(t.mode&1)&&(kn=q()+500,Er&&St()))}function ke(e,t){var n=e.callbackNode;nh(e,t);var o=nr(e,e===ne?re:0);if(o===0)n!==null&&Ts(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Ts(n),t===1)e.tag===0?tp(wl.bind(null,e)):Gc(wl.bind(null,e)),Qh(function(){!(O&6)&&St()}),n=null;else{switch(wc(o)){case 1:n=Si;break;case 4:n=mc;break;case 16:n=tr;break;case 536870912:n=fc;break;default:n=tr}n=Hu(n,Ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ru(e,t){if(Yo=-1,Ko=0,O&6)throw Error(_(327));var n=e.callbackNode;if(pn()&&e.callbackNode!==n)return null;var o=nr(e,e===ne?re:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=kr(e,o);else{t=o;var r=O;O|=2;var a=Mu();(ne!==e||re!==t)&&(Je=null,kn=q()+500,At(e,t));do try{_p();break}catch(s){Nu(e,s)}while(!0);Ai(),wr.current=a,O=r,K!==null?t=0:(ne=null,re=0,t=Z)}if(t!==0){if(t===2&&(r=Na(e),r!==0&&(o=r,t=li(e,r))),t===1)throw n=uo,At(e,0),st(e,o),ke(e,q()),n;if(t===6)st(e,o);else{if(r=e.current.alternate,!(o&30)&&!kp(r)&&(t=kr(e,o),t===2&&(a=Na(e),a!==0&&(o=a,t=li(e,a))),t===1))throw n=uo,At(e,0),st(e,o),ke(e,q()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(_(345));case 2:Pt(e,ge,Je);break;case 3:if(st(e,o),(o&130023424)===o&&(t=Xi+500-q(),10<t)){if(nr(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){he(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Ga(Pt.bind(null,e,ge,Je),t);break}Pt(e,ge,Je);break;case 4:if(st(e,o),(o&4194240)===o)break;for(t=e.eventTimes,r=-1;0<o;){var i=31-We(o);a=1<<i,i=t[i],i>r&&(r=i),o&=~a}if(o=r,o=q()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*vp(o/1960))-o,10<o){e.timeoutHandle=Ga(Pt.bind(null,e,ge,Je),o);break}Pt(e,ge,Je);break;case 5:Pt(e,ge,Je);break;default:throw Error(_(329))}}}return ke(e,q()),e.callbackNode===n?Ru.bind(null,e):null}function li(e,t){var n=Vn;return e.current.memoizedState.isDehydrated&&(At(e,t).flags|=256),e=kr(e,t),e!==2&&(t=ge,ge=n,t!==null&&ci(t)),e}function ci(e){ge===null?ge=e:ge.push.apply(ge,e)}function kp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],a=r.getSnapshot;r=r.value;try{if(!He(a(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function st(e,t){for(t&=~Qi,t&=~Rr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-We(t),o=1<<n;e[n]=-1,t&=~o}}function wl(e){if(O&6)throw Error(_(327));pn();var t=nr(e,0);if(!(t&1))return ke(e,q()),null;var n=kr(e,t);if(e.tag!==0&&n===2){var o=Na(e);o!==0&&(t=o,n=li(e,o))}if(n===1)throw n=uo,At(e,0),st(e,t),ke(e,q()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pt(e,ge,Je),ke(e,q()),null}function Zi(e,t){var n=O;O|=1;try{return e(t)}finally{O=n,O===0&&(kn=q()+500,Er&&St())}}function Dt(e){ct!==null&&ct.tag===0&&!(O&6)&&pn();var t=O;O|=1;var n=Ce.transition,o=A;try{if(Ce.transition=null,A=1,e)return e()}finally{A=o,Ce.transition=n,O=t,!(O&6)&&St()}}function es(){be=sn.current,H(sn)}function At(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kh(n)),K!==null)for(n=K.return;n!==null;){var o=n;switch(Ni(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&sr();break;case 3:yn(),H(ye),H(ce),Di();break;case 5:Gi(o);break;case 4:yn();break;case 13:H(G);break;case 19:H(G);break;case 10:Wi(o.type._context);break;case 22:case 23:es()}n=n.return}if(ne=e,K=e=yt(e.current,null),re=be=t,Z=0,uo=null,Qi=Rr=Gt=0,ge=Vn=null,Mt!==null){for(t=0;t<Mt.length;t++)if(n=Mt[t],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,a=n.pending;if(a!==null){var i=a.next;a.next=r,o.next=i}n.pending=o}Mt=null}return e}function Nu(e,t){do{var n=K;try{if(Ai(),Vo.current=gr,fr){for(var o=D.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}fr=!1}if(Ut=0,te=X=D=null,Bn=!1,so=0,Ki.current=null,n===null||n.return===null){Z=1,uo=t,K=null;break}e:{var a=e,i=n.return,s=n,l=t;if(t=re,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,g=s,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var f=g.alternate;f?(g.updateQueue=f.updateQueue,g.memoizedState=f.memoizedState,g.lanes=f.lanes):(g.updateQueue=null,g.memoizedState=null)}var w=rl(i);if(w!==null){w.flags&=-257,al(w,i,s,a,t),w.mode&1&&ol(a,u,t),t=w,l=u;var y=t.updateQueue;if(y===null){var k=new Set;k.add(l),t.updateQueue=k}else y.add(l);break e}else{if(!(t&1)){ol(a,u,t),ts();break e}l=Error(_(426))}}else if(U&&s.mode&1){var b=rl(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),al(b,i,s,a,t),Mi(vn(l,s));break e}}a=l=vn(l,s),Z!==4&&(Z=2),Vn===null?Vn=[a]:Vn.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var h=wu(a,l,t);Qs(a,h);break e;case 1:s=l;var d=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(gt===null||!gt.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=yu(a,s,t);Qs(a,v);break e}}a=a.return}while(a!==null)}Au(n)}catch(S){t=S,K===n&&n!==null&&(K=n=n.return);continue}break}while(!0)}function Mu(){var e=wr.current;return wr.current=gr,e===null?gr:e}function ts(){(Z===0||Z===3||Z===2)&&(Z=4),ne===null||!(Gt&268435455)&&!(Rr&268435455)||st(ne,re)}function kr(e,t){var n=O;O|=2;var o=Mu();(ne!==e||re!==t)&&(Je=null,At(e,t));do try{bp();break}catch(r){Nu(e,r)}while(!0);if(Ai(),O=n,wr.current=o,K!==null)throw Error(_(261));return ne=null,re=0,Z}function bp(){for(;K!==null;)Ou(K)}function _p(){for(;K!==null&&!Jd();)Ou(K)}function Ou(e){var t=Fu(e.alternate,e,be);e.memoizedProps=e.pendingProps,t===null?Au(e):K=t,Ki.current=null}function Au(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fp(n,t),n!==null){n.flags&=32767,K=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Z=6,K=null;return}}else if(n=mp(n,t,be),n!==null){K=n;return}if(t=t.sibling,t!==null){K=t;return}K=t=e}while(t!==null);Z===0&&(Z=5)}function Pt(e,t,n){var o=A,r=Ce.transition;try{Ce.transition=null,A=1,xp(e,t,n,o)}finally{Ce.transition=r,A=o}return null}function xp(e,t,n,o){do pn();while(ct!==null);if(O&6)throw Error(_(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(oh(e,a),e===ne&&(K=ne=null,re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ao||(Ao=!0,Hu(tr,function(){return pn(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ce.transition,Ce.transition=null;var i=A;A=1;var s=O;O|=4,Ki.current=null,wp(e,n),Lu(n,e),Dh(Ha),or=!!Fa,Ha=Fa=null,e.current=n,yp(n),qd(),O=s,A=i,Ce.transition=a}else e.current=n;if(Ao&&(Ao=!1,ct=e,vr=r),a=e.pendingLanes,a===0&&(gt=null),Qd(n.stateNode),ke(e,q()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(yr)throw yr=!1,e=ii,ii=null,e;return vr&1&&e.tag!==0&&pn(),a=e.pendingLanes,a&1?e===si?Jn++:(Jn=0,si=e):Jn=0,St(),null}function pn(){if(ct!==null){var e=wc(vr),t=Ce.transition,n=A;try{if(Ce.transition=null,A=16>e?16:e,ct===null)var o=!1;else{if(e=ct,ct=null,vr=0,O&6)throw Error(_(331));var r=O;for(O|=4,T=e.current;T!==null;){var a=T,i=a.child;if(T.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(T=u;T!==null;){var g=T;switch(g.tag){case 0:case 11:case 15:$n(8,g,a)}var m=g.child;if(m!==null)m.return=g,T=m;else for(;T!==null;){g=T;var f=g.sibling,w=g.return;if(zu(g),g===u){T=null;break}if(f!==null){f.return=w,T=f;break}T=w}}}var y=a.alternate;if(y!==null){var k=y.child;if(k!==null){y.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}T=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,T=i;else e:for(;T!==null;){if(a=T,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$n(9,a,a.return)}var h=a.sibling;if(h!==null){h.return=a.return,T=h;break e}T=a.return}}var d=e.current;for(T=d;T!==null;){i=T;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,T=p;else e:for(i=d;T!==null;){if(s=T,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Pr(9,s)}}catch(S){$(s,s.return,S)}if(s===i){T=null;break e}var v=s.sibling;if(v!==null){v.return=s.return,T=v;break e}T=s.return}}if(O=r,St(),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Sr,e)}catch{}o=!0}return o}finally{A=n,Ce.transition=t}}return!1}function yl(e,t,n){t=vn(n,t),t=wu(e,t,1),e=ft(e,t,1),t=he(),e!==null&&(fo(e,1,t),ke(e,t))}function $(e,t,n){if(e.tag===3)yl(e,e,n);else for(;t!==null;){if(t.tag===3){yl(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gt===null||!gt.has(o))){e=vn(n,e),e=yu(t,e,1),t=ft(t,e,1),e=he(),t!==null&&(fo(t,1,e),ke(t,e));break}}t=t.return}}function Sp(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=he(),e.pingedLanes|=e.suspendedLanes&n,ne===e&&(re&n)===n&&(Z===4||Z===3&&(re&130023424)===re&&500>q()-Xi?At(e,0):Qi|=n),ke(e,t)}function Wu(e,t){t===0&&(e.mode&1?(t=jo,jo<<=1,!(jo&130023424)&&(jo=4194304)):t=1);var n=he();e=et(e,t),e!==null&&(fo(e,t,n),ke(e,n))}function Tp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wu(e,n)}function Ip(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(_(314))}o!==null&&o.delete(t),Wu(e,n)}var Fu;Fu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ye.current)we=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return we=!1,pp(e,t,n);we=!!(e.flags&131072)}else we=!1,U&&t.flags&1048576&&Dc(t,ur,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;qo(e,t),e=t.pendingProps;var r=fn(t,ce.current);hn(t,n),r=$i(null,t,o,e,r,n);var a=Vi();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ve(o)?(a=!0,lr(t)):a=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Hi(t),r.updater=Lr,t.stateNode=r,r._reactInternals=t,Ya(t,o,e,n),t=Xa(null,t,o,!0,a,n)):(t.tag=0,U&&a&&Ri(t),ue(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=o._init,o=r(o._payload),t.type=o,r=t.tag=zp(o),e=Me(o,e),r){case 0:t=Qa(null,t,o,e,n);break e;case 1:t=ll(null,t,o,e,n);break e;case 11:t=il(null,t,o,e,n);break e;case 14:t=sl(null,t,o,Me(o.type,e),n);break e}throw Error(_(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Me(o,r),Qa(e,t,o,r,n);case 1:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Me(o,r),ll(e,t,o,r,n);case 3:e:{if(_u(t),e===null)throw Error(_(387));o=t.pendingProps,a=t.memoizedState,r=a.element,Yc(e,t),pr(t,o,null,n);var i=t.memoizedState;if(o=i.element,a.isDehydrated)if(a={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){r=vn(Error(_(423)),t),t=cl(e,t,o,n,r);break e}else if(o!==r){r=vn(Error(_(424)),t),t=cl(e,t,o,n,r);break e}else for(_e=mt(t.stateNode.containerInfo.firstChild),xe=t,U=!0,Ae=null,n=Jc(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gn(),o===r){t=tt(e,t,n);break e}ue(e,t,o,n)}t=t.child}return t;case 5:return Kc(t),e===null&&Va(t),o=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,Ua(o,r)?i=null:a!==null&&Ua(o,a)&&(t.flags|=32),bu(e,t),ue(e,t,i,n),t.child;case 6:return e===null&&Va(t),null;case 13:return xu(e,t,n);case 4:return Ui(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=wn(t,null,o,n):ue(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Me(o,r),il(e,t,o,r,n);case 7:return ue(e,t,t.pendingProps,n),t.child;case 8:return ue(e,t,t.pendingProps.children,n),t.child;case 12:return ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,a=t.memoizedProps,i=r.value,W(dr,o._currentValue),o._currentValue=i,a!==null)if(He(a.value,i)){if(a.children===r.children&&!ye.current){t=tt(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){i=a.child;for(var l=s.firstContext;l!==null;){if(l.context===o){if(a.tag===1){l=Qe(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var g=u.pending;g===null?l.next=l:(l.next=g.next,g.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ja(a.return,n,t),s.lanes|=n;break}l=l.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(_(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),Ja(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}ue(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,hn(t,n),r=Le(r),o=o(r),t.flags|=1,ue(e,t,o,n),t.child;case 14:return o=t.type,r=Me(o,t.pendingProps),r=Me(o.type,r),sl(e,t,o,r,n);case 15:return vu(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:Me(o,r),qo(e,t),t.tag=1,ve(o)?(e=!0,lr(t)):e=!1,hn(t,n),gu(t,o,r),Ya(t,o,r,n),Xa(null,t,o,!0,e,n);case 19:return Su(e,t,n);case 22:return ku(e,t,n)}throw Error(_(156,t.tag))};function Hu(e,t){return pc(e,t)}function jp(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ee(e,t,n,o){return new jp(e,t,n,o)}function ns(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zp(e){if(typeof e=="function")return ns(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bi)return 11;if(e===_i)return 14}return 2}function yt(e,t){var n=e.alternate;return n===null?(n=Ee(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qo(e,t,n,o,r,a){var i=2;if(o=e,typeof e=="function")ns(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Kt:return Wt(n.children,r,a,t);case ki:i=8,r|=8;break;case va:return e=Ee(12,n,t,r|2),e.elementType=va,e.lanes=a,e;case ka:return e=Ee(13,n,t,r),e.elementType=ka,e.lanes=a,e;case ba:return e=Ee(19,n,t,r),e.elementType=ba,e.lanes=a,e;case Kl:return Nr(n,r,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ql:i=10;break e;case Yl:i=9;break e;case bi:i=11;break e;case _i:i=14;break e;case rt:i=16,o=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=Ee(i,n,t,r),t.elementType=e,t.type=o,t.lanes=a,t}function Wt(e,t,n,o){return e=Ee(7,e,o,t),e.lanes=n,e}function Nr(e,t,n,o){return e=Ee(22,e,o,t),e.elementType=Kl,e.lanes=n,e.stateNode={isHidden:!1},e}function ma(e,t,n){return e=Ee(6,e,null,t),e.lanes=n,e}function fa(e,t,n){return t=Ee(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ep(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yr(0),this.expirationTimes=Yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function os(e,t,n,o,r,a,i,s,l){return e=new Ep(e,t,n,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ee(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hi(a),e}function Cp(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yt,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function Uu(e){if(!e)return bt;e=e._reactInternals;e:{if($t(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(ve(n))return Uc(e,n,t)}return t}function Gu(e,t,n,o,r,a,i,s,l){return e=os(n,o,!0,e,r,a,i,s,l),e.context=Uu(null),n=e.current,o=he(),r=wt(n),a=Qe(o,r),a.callback=t??null,ft(n,a,r),e.current.lanes=r,fo(e,r,o),ke(e,o),e}function Mr(e,t,n,o){var r=t.current,a=he(),i=wt(r);return n=Uu(n),t.context===null?t.context=n:t.pendingContext=n,t=Qe(a,i),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ft(r,t,i),e!==null&&(Fe(e,r,i,a),$o(e,r,i)),i}function br(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rs(e,t){vl(e,t),(e=e.alternate)&&vl(e,t)}function Lp(){return null}var Du=typeof reportError=="function"?reportError:function(e){console.error(e)};function as(e){this._internalRoot=e}Or.prototype.render=as.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));Mr(e,t,null,null)};Or.prototype.unmount=as.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dt(function(){Mr(null,e,null,null)}),t[Ze]=null}};function Or(e){this._internalRoot=e}Or.prototype.unstable_scheduleHydration=function(e){if(e){var t=kc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<it.length&&t!==0&&t<it[n].priority;n++);it.splice(n,0,e),n===0&&_c(e)}};function is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ar(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kl(){}function Pp(e,t,n,o,r){if(r){if(typeof o=="function"){var a=o;o=function(){var u=br(i);a.call(u)}}var i=Gu(t,o,e,0,null,!1,!1,"",kl);return e._reactRootContainer=i,e[Ze]=i.current,no(e.nodeType===8?e.parentNode:e),Dt(),i}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var s=o;o=function(){var u=br(l);s.call(u)}}var l=os(e,0,!1,null,null,!1,!1,"",kl);return e._reactRootContainer=l,e[Ze]=l.current,no(e.nodeType===8?e.parentNode:e),Dt(function(){Mr(t,l,n,o)}),l}function Wr(e,t,n,o,r){var a=n._reactRootContainer;if(a){var i=a;if(typeof r=="function"){var s=r;r=function(){var l=br(i);s.call(l)}}Mr(t,i,e,r)}else i=Pp(n,t,e,r,o);return br(i)}yc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=An(t.pendingLanes);n!==0&&(Ti(t,n|1),ke(t,q()),!(O&6)&&(kn=q()+500,St()))}break;case 13:Dt(function(){var o=et(e,1);if(o!==null){var r=he();Fe(o,e,1,r)}}),rs(e,1)}};Ii=function(e){if(e.tag===13){var t=et(e,134217728);if(t!==null){var n=he();Fe(t,e,134217728,n)}rs(e,134217728)}};vc=function(e){if(e.tag===13){var t=wt(e),n=et(e,t);if(n!==null){var o=he();Fe(n,e,t,o)}rs(e,t)}};kc=function(){return A};bc=function(e,t){var n=A;try{return A=e,t()}finally{A=n}};La=function(e,t,n){switch(t){case"input":if(Sa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=zr(o);if(!r)throw Error(_(90));Xl(o),Sa(o,r)}}}break;case"textarea":ec(e,n);break;case"select":t=n.value,t!=null&&ln(e,!!n.multiple,t,!1)}};sc=Zi;lc=Dt;var Rp={usingClientEntryPoint:!1,Events:[wo,en,zr,ac,ic,Zi]},Nn={findFiberByHostInstance:Nt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Np={bundleType:Nn.bundleType,version:Nn.version,rendererPackageName:Nn.rendererPackageName,rendererConfig:Nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dc(e),e===null?null:e.stateNode},findFiberByHostInstance:Nn.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{Sr=Wo.inject(Np),Be=Wo}catch{}}Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rp;Te.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!is(t))throw Error(_(200));return Cp(e,t,null,n)};Te.createRoot=function(e,t){if(!is(e))throw Error(_(299));var n=!1,o="",r=Du;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=os(e,1,!1,null,null,n,!1,o,r),e[Ze]=t.current,no(e.nodeType===8?e.parentNode:e),new as(t)};Te.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=dc(t),e=e===null?null:e.stateNode,e};Te.flushSync=function(e){return Dt(e)};Te.hydrate=function(e,t,n){if(!Ar(t))throw Error(_(200));return Wr(null,e,t,!0,n)};Te.hydrateRoot=function(e,t,n){if(!is(e))throw Error(_(405));var o=n!=null&&n.hydratedSources||null,r=!1,a="",i=Du;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gu(t,null,e,1,n??null,r,!1,a,i),e[Ze]=t.current,no(e),o)for(e=0;e<o.length;e++)n=o[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Or(t)};Te.render=function(e,t,n){if(!Ar(t))throw Error(_(200));return Wr(null,e,t,!1,n)};Te.unmountComponentAtNode=function(e){if(!Ar(e))throw Error(_(40));return e._reactRootContainer?(Dt(function(){Wr(null,null,e,!1,function(){e._reactRootContainer=null,e[Ze]=null})}),!0):!1};Te.unstable_batchedUpdates=Zi;Te.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Ar(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Wr(e,t,n,!1,o)};Te.version="18.3.1-next-f1338f8080-20240426";function Bu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bu)}catch(e){console.error(e)}}Bu(),Bl.exports=Te;var Mp=Bl.exports,bl=Mp;wa.createRoot=bl.createRoot,wa.hydrateRoot=bl.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ho.apply(this,arguments)}var ut;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ut||(ut={}));const _l="popstate";function Op(e){e===void 0&&(e={});function t(o,r){let{pathname:a,search:i,hash:s}=o.location;return ui("",{pathname:a,search:i,hash:s},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(o,r){return typeof r=="string"?r:_r(r)}return Wp(t,n,null,e)}function Q(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $u(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ap(){return Math.random().toString(36).substr(2,8)}function xl(e,t){return{usr:e.state,key:e.key,idx:t}}function ui(e,t,n,o){return n===void 0&&(n=null),ho({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Sn(t):t,{state:n,key:t&&t.key||o||Ap()})}function _r(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Sn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Wp(e,t,n,o){o===void 0&&(o={});let{window:r=document.defaultView,v5Compat:a=!1}=o,i=r.history,s=ut.Pop,l=null,u=g();u==null&&(u=0,i.replaceState(ho({},i.state,{idx:u}),""));function g(){return(i.state||{idx:null}).idx}function m(){s=ut.Pop;let b=g(),h=b==null?null:b-u;u=b,l&&l({action:s,location:k.location,delta:h})}function f(b,h){s=ut.Push;let d=ui(k.location,b,h);u=g()+1;let p=xl(d,u),v=k.createHref(d);try{i.pushState(p,"",v)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(v)}a&&l&&l({action:s,location:k.location,delta:1})}function w(b,h){s=ut.Replace;let d=ui(k.location,b,h);u=g();let p=xl(d,u),v=k.createHref(d);i.replaceState(p,"",v),a&&l&&l({action:s,location:k.location,delta:0})}function y(b){let h=r.location.origin!=="null"?r.location.origin:r.location.href,d=typeof b=="string"?b:_r(b);return d=d.replace(/ $/,"%20"),Q(h,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,h)}let k={get action(){return s},get location(){return e(r,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(_l,m),l=b,()=>{r.removeEventListener(_l,m),l=null}},createHref(b){return t(r,b)},createURL:y,encodeLocation(b){let h=y(b);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:f,replace:w,go(b){return i.go(b)}};return k}var Sl;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Sl||(Sl={}));function Fp(e,t,n){return n===void 0&&(n="/"),Hp(e,t,n)}function Hp(e,t,n,o){let r=typeof t=="string"?Sn(t):t,a=ss(r.pathname||"/",n);if(a==null)return null;let i=Vu(e);Up(i);let s=null;for(let l=0;s==null&&l<i.length;++l){let u=Zp(a);s=Kp(i[l],u)}return s}function Vu(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let r=(a,i,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Q(l.relativePath.startsWith(o),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(o.length));let u=vt([o,l.relativePath]),g=n.concat(l);a.children&&a.children.length>0&&(Q(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Vu(a.children,t,g,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:qp(u,a.index),routesMeta:g})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))r(a,i);else for(let l of Ju(a.path))r(a,i,l)}),t}function Ju(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(o.length===0)return r?[a,""]:[a];let i=Ju(o.join("/")),s=[];return s.push(...i.map(l=>l===""?a:[a,l].join("/"))),r&&s.push(...i),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Up(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Yp(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const Gp=/^:[\w-]+$/,Dp=3,Bp=2,$p=1,Vp=10,Jp=-2,Tl=e=>e==="*";function qp(e,t){let n=e.split("/"),o=n.length;return n.some(Tl)&&(o+=Jp),t&&(o+=Bp),n.filter(r=>!Tl(r)).reduce((r,a)=>r+(Gp.test(a)?Dp:a===""?$p:Vp),o)}function Yp(e,t){return e.length===t.length&&e.slice(0,-1).every((o,r)=>o===t[r])?e[e.length-1]-t[t.length-1]:0}function Kp(e,t,n){let{routesMeta:o}=e,r={},a="/",i=[];for(let s=0;s<o.length;++s){let l=o[s],u=s===o.length-1,g=a==="/"?t:t.slice(a.length)||"/",m=Qp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},g),f=l.route;if(!m)return null;Object.assign(r,m.params),i.push({params:r,pathname:vt([a,m.pathname]),pathnameBase:om(vt([a,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(a=vt([a,m.pathnameBase]))}return i}function Qp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=Xp(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:o.reduce((u,g,m)=>{let{paramName:f,isOptional:w}=g;if(f==="*"){let k=s[m]||"";i=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const y=s[m];return w&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function Xp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$u(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,l)=>(o.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),o]}function Zp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ss(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function em(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:r=""}=typeof e=="string"?Sn(e):e;return{pathname:n?n.startsWith("/")?n:tm(n,t):t,search:rm(o),hash:am(r)}}function tm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ga(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nm(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function qu(e,t){let n=nm(e);return t?n.map((o,r)=>r===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function Yu(e,t,n,o){o===void 0&&(o=!1);let r;typeof e=="string"?r=Sn(e):(r=ho({},e),Q(!r.pathname||!r.pathname.includes("?"),ga("?","pathname","search",r)),Q(!r.pathname||!r.pathname.includes("#"),ga("#","pathname","hash",r)),Q(!r.search||!r.search.includes("#"),ga("#","search","hash",r)));let a=e===""||r.pathname==="",i=a?"/":r.pathname,s;if(i==null)s=n;else{let m=t.length-1;if(!o&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),m-=1;r.pathname=f.join("/")}s=m>=0?t[m]:"/"}let l=em(r,s),u=i&&i!=="/"&&i.endsWith("/"),g=(a||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||g)&&(l.pathname+="/"),l}const vt=e=>e.join("/").replace(/\/\/+/g,"/"),om=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rm=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,am=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function im(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ku=["post","put","patch","delete"];new Set(Ku);const sm=["get",...Ku];new Set(sm);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},po.apply(this,arguments)}const ls=x.createContext(null),lm=x.createContext(null),Vt=x.createContext(null),Fr=x.createContext(null),Tt=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Qu=x.createContext(null);function cm(e,t){let{relative:n}=t===void 0?{}:t;vo()||Q(!1);let{basename:o,navigator:r}=x.useContext(Vt),{hash:a,pathname:i,search:s}=Zu(e,{relative:n}),l=i;return o!=="/"&&(l=i==="/"?o:vt([o,i])),r.createHref({pathname:l,search:s,hash:a})}function vo(){return x.useContext(Fr)!=null}function Hr(){return vo()||Q(!1),x.useContext(Fr).location}function Xu(e){x.useContext(Vt).static||x.useLayoutEffect(e)}function cs(){let{isDataRoute:e}=x.useContext(Tt);return e?xm():um()}function um(){vo()||Q(!1);let e=x.useContext(ls),{basename:t,future:n,navigator:o}=x.useContext(Vt),{matches:r}=x.useContext(Tt),{pathname:a}=Hr(),i=JSON.stringify(qu(r,n.v7_relativeSplatPath)),s=x.useRef(!1);return Xu(()=>{s.current=!0}),x.useCallback(function(u,g){if(g===void 0&&(g={}),!s.current)return;if(typeof u=="number"){o.go(u);return}let m=Yu(u,JSON.parse(i),a,g.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:vt([t,m.pathname])),(g.replace?o.replace:o.push)(m,g.state,g)},[t,o,i,a,e])}function dm(){let{matches:e}=x.useContext(Tt),t=e[e.length-1];return t?t.params:{}}function Zu(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=x.useContext(Vt),{matches:r}=x.useContext(Tt),{pathname:a}=Hr(),i=JSON.stringify(qu(r,o.v7_relativeSplatPath));return x.useMemo(()=>Yu(e,JSON.parse(i),a,n==="path"),[e,i,a,n])}function hm(e,t){return pm(e,t)}function pm(e,t,n,o){vo()||Q(!1);let{navigator:r}=x.useContext(Vt),{matches:a}=x.useContext(Tt),i=a[a.length-1],s=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=Hr(),g;if(t){var m;let b=typeof t=="string"?Sn(t):t;l==="/"||(m=b.pathname)!=null&&m.startsWith(l)||Q(!1),g=b}else g=u;let f=g.pathname||"/",w=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Fp(e,{pathname:w}),k=ym(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},s,b.params),pathname:vt([l,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:vt([l,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,o);return t&&k?x.createElement(Fr.Provider,{value:{location:po({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ut.Pop}},k):k}function mm(){let e=_m(),t=im(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:r},n):null,null)}const fm=x.createElement(mm,null);class gm extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(Tt.Provider,{value:this.props.routeContext},x.createElement(Qu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wm(e){let{routeContext:t,match:n,children:o}=e,r=x.useContext(ls);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Tt.Provider,{value:t},o)}function ym(e,t,n,o){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=o)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let g=i.findIndex(m=>m.route.id&&(s==null?void 0:s[m.route.id])!==void 0);g>=0||Q(!1),i=i.slice(0,Math.min(i.length,g+1))}let l=!1,u=-1;if(n&&o&&o.v7_partialHydration)for(let g=0;g<i.length;g++){let m=i[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=g),m.route.id){let{loaderData:f,errors:w}=n,y=m.route.loader&&f[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||y){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((g,m,f)=>{let w,y=!1,k=null,b=null;n&&(w=s&&m.route.id?s[m.route.id]:void 0,k=m.route.errorElement||fm,l&&(u<0&&f===0?(Sm("route-fallback"),y=!0,b=null):u===f&&(y=!0,b=m.route.hydrateFallbackElement||null)));let h=t.concat(i.slice(0,f+1)),d=()=>{let p;return w?p=k:y?p=b:m.route.Component?p=x.createElement(m.route.Component,null):m.route.element?p=m.route.element:p=g,x.createElement(wm,{match:m,routeContext:{outlet:g,matches:h,isDataRoute:n!=null},children:p})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?x.createElement(gm,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:d(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):d()},null)}var ed=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ed||{}),td=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(td||{});function vm(e){let t=x.useContext(ls);return t||Q(!1),t}function km(e){let t=x.useContext(lm);return t||Q(!1),t}function bm(e){let t=x.useContext(Tt);return t||Q(!1),t}function nd(e){let t=bm(),n=t.matches[t.matches.length-1];return n.route.id||Q(!1),n.route.id}function _m(){var e;let t=x.useContext(Qu),n=km(),o=nd();return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function xm(){let{router:e}=vm(ed.UseNavigateStable),t=nd(td.UseNavigateStable),n=x.useRef(!1);return Xu(()=>{n.current=!0}),x.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,po({fromRouteId:t},a)))},[e,t])}const Il={};function Sm(e,t,n){Il[e]||(Il[e]=!0)}function Tm(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Rt(e){Q(!1)}function Im(e){let{basename:t="/",children:n=null,location:o,navigationType:r=ut.Pop,navigator:a,static:i=!1,future:s}=e;vo()&&Q(!1);let l=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:a,static:i,future:po({v7_relativeSplatPath:!1},s)}),[l,s,a,i]);typeof o=="string"&&(o=Sn(o));let{pathname:g="/",search:m="",hash:f="",state:w=null,key:y="default"}=o,k=x.useMemo(()=>{let b=ss(g,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:w,key:y},navigationType:r}},[l,g,m,f,w,y,r]);return k==null?null:x.createElement(Vt.Provider,{value:u},x.createElement(Fr.Provider,{children:n,value:k}))}function jm(e){let{children:t,location:n}=e;return hm(di(t),n)}new Promise(()=>{});function di(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(o,r)=>{if(!x.isValidElement(o))return;let a=[...t,r];if(o.type===x.Fragment){n.push.apply(n,di(o.props.children,a));return}o.type!==Rt&&Q(!1),!o.props.index||!o.props.children||Q(!1);let i={id:o.props.id||a.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(i.children=di(o.props.children,a)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},hi.apply(this,arguments)}function zm(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Em(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Cm(e,t){return e.button===0&&(!t||t==="_self")&&!Em(e)}const Lm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Pm="6";try{window.__reactRouterVersion=Pm}catch{}const Rm="startTransition",jl=Sd[Rm];function Nm(e){let{basename:t,children:n,future:o,window:r}=e,a=x.useRef();a.current==null&&(a.current=Op({window:r,v5Compat:!0}));let i=a.current,[s,l]=x.useState({action:i.action,location:i.location}),{v7_startTransition:u}=o||{},g=x.useCallback(m=>{u&&jl?jl(()=>l(m)):l(m)},[l,u]);return x.useLayoutEffect(()=>i.listen(g),[i,g]),x.useEffect(()=>Tm(o),[o]),x.createElement(Im,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:i,future:o})}const Mm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Om=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,de=x.forwardRef(function(t,n){let{onClick:o,relative:r,reloadDocument:a,replace:i,state:s,target:l,to:u,preventScrollReset:g,viewTransition:m}=t,f=zm(t,Lm),{basename:w}=x.useContext(Vt),y,k=!1;if(typeof u=="string"&&Om.test(u)&&(y=u,Mm))try{let p=new URL(window.location.href),v=u.startsWith("//")?new URL(p.protocol+u):new URL(u),S=ss(v.pathname,w);v.origin===p.origin&&S!=null?u=S+v.search+v.hash:k=!0}catch{}let b=cm(u,{relative:r}),h=Am(u,{replace:i,state:s,target:l,preventScrollReset:g,relative:r,viewTransition:m});function d(p){o&&o(p),p.defaultPrevented||h(p)}return x.createElement("a",hi({},f,{href:y||b,onClick:k||a?o:d,ref:n,target:l}))});var zl;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zl||(zl={}));var El;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(El||(El={}));function Am(e,t){let{target:n,replace:o,state:r,preventScrollReset:a,relative:i,viewTransition:s}=t===void 0?{}:t,l=cs(),u=Hr(),g=Zu(e,{relative:i});return x.useCallback(m=>{if(Cm(m,n)){m.preventDefault();let f=o!==void 0?o:_r(u)===_r(g);l(e,{replace:f,state:r,preventScrollReset:a,relative:i,viewTransition:s})}},[u,l,g,o,r,n,e,a,i,s])}const Wm="_header_n3yy8_1",Fm="_inner_n3yy8_15",Hm="_logo_n3yy8_24",Um="_nav_n3yy8_42",Gm="_themeToggle_n3yy8_75",Dm="_themeIcon_n3yy8_90",qt={header:Wm,inner:Fm,logo:Hm,nav:Um,themeToggle:Gm,themeIcon:Dm};function Bm({theme:e,onToggleTheme:t}){return c.jsx("header",{className:qt.header,children:c.jsxs("div",{className:qt.inner,children:[c.jsx(de,{to:"/",className:qt.logo,children:"Matthew Gerstman"}),c.jsxs("nav",{className:qt.nav,children:[c.jsx(de,{to:"/",children:"Writing"}),c.jsx(de,{to:"/talks",children:"Talks"}),c.jsx(de,{to:"/career",children:"Career"}),c.jsx("button",{className:qt.themeToggle,onClick:t,"aria-label":"Toggle theme",children:c.jsx("span",{className:qt.themeIcon,children:e==="dark"?"":""})})]})]})})}function $m(){const[e,t]=x.useState(0);return x.useEffect(()=>{const n=()=>{const o=document.body.scrollTop||document.documentElement.scrollTop,r=document.documentElement.scrollHeight-document.documentElement.clientHeight;t(o/r*100)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),e}const Vm="_progressBar_1q8l6_1",Jm={progressBar:Vm};function qm(){const e=$m();return c.jsx("div",{className:Jm.progressBar,style:{width:`${e}%`}})}function Cl(e,t){e=e.toLowerCase(),t=t.toLowerCase();let n=0,o=0,r=0,a=0;for(;n<e.length&&o<t.length;)e[n]===t[o]?(r+=1+a,a++,n++):a=0,o++;return n!==e.length?{matched:!1,score:0}:{matched:!0,score:r}}function Ym(e,t){return t?e.map(n=>{const o=Cl(t,n.title),r=n.excerpt?Cl(t,n.excerpt):{matched:!1,score:0},a=(o.matched?o.score*2:0)+(r.matched?r.score:0);return{post:n,matched:o.matched||r.matched,score:a}}).filter(n=>n.matched).sort((n,o)=>o.score-n.score).map(n=>n.post):e}function us(e){if(!e||e.trim().length===0)return 0;const t=e.trim().split(/\s+/).length;return Math.ceil(t/200)}function od(e){return!e||e.trim().length===0?0:e.trim().split(/\s+/).length}const ds={"all-in-on-homekit":"https://www.matthewgerstman.com/content/images/size/w2000/2022/01/01-1.jpeg","es-everything":"https://www.matthewgerstman.com/content/images/size/w2000/2020/01/scott-trento-xrBxbPiK2w8-unsplash.jpg","functional-programming-fundamentals":"https://www.matthewgerstman.com/content/images/2019/01/alex-perez-512610-unsplash.jpg","hello-there":"https://www.matthewgerstman.com/content/images/2019/01/01.jpeg","history-of-the-web":"https://www.matthewgerstman.com/content/images/size/w2000/2021/05/benjamin-voros-phIFdC6lA4E-unsplash.jpg","how-i-prepare-a-talk":"https://www.matthewgerstman.com/content/images/2019/04/israel-palacio-683476-unsplash.jpg","how-redux-works-part-1":"https://www.matthewgerstman.com/content/images/2019/01/joshua-earle-183374-unsplash.jpg","how-redux-works-part-2":"https://www.matthewgerstman.com/content/images/2019/01/joshua-earle-183374-unsplash-1.jpg","map-filter-reduce":"https://www.matthewgerstman.com/content/images/2019/03/markus-spiske-221494-unsplash.jpg","mary-had-a-little-lambda":"https://www.matthewgerstman.com/content/images/2019/01/veeterzy-118209-unsplash.jpg","performance-testing-anonymous-functions":"https://www.matthewgerstman.com/content/images/2019/09/scott-webb-102825-unsplash.jpg","reduce-reduce-reduce":"https://www.matthewgerstman.com/content/images/2019/03/barn-images-523848-unsplash.jpg","redux-with-code-splitting-and-type-checking":"https://www.matthewgerstman.com/content/images/2019/01/sebastian-unrau-47679-unsplash.jpg","surviving-the-technical-interview":"https://www.matthewgerstman.com/content/images/2019/09/you-x-ventures-470005-unsplash.jpg","throttle-and-debounce":"https://www.matthewgerstman.com/content/images/2019/03/markus-spiske-221494-unsplash-1.jpg","ts-tricks-higher-order-components":"https://www.matthewgerstman.com/content/images/2019/01/david-clode-369257-unsplash.jpg","ts-tricks-type-guards":"https://www.matthewgerstman.com/content/images/2019/01/markus-spiske-221494-unsplash-2.jpg","ts-tricks-type-safe-reducers":"https://www.matthewgerstman.com/content/images/2019/01/sebastian-unrau-47679-unsplash-1.jpg","what-the-functor":"https://www.matthewgerstman.com/content/images/2019/01/alex-perez-512610-unsplash-1.jpg","bay-area-internship":"https://www.matthewgerstman.com/content/images/2019/05/maarten-van-den-heuvel-400626-unsplash.jpg"},Km="_overlay_npiux_1",Qm="_modal_npiux_16",Xm="_input_npiux_26",Zm="_results_npiux_41",ef="_resultItem_npiux_46",tf="_selected_npiux_61",nf="_icon_npiux_65",of="_placeholder_npiux_74",rf="_content_npiux_83",af="_title_npiux_88",sf="_meta_npiux_98",lf="_empty_npiux_103",fe={overlay:Km,modal:Qm,input:Xm,results:Zm,resultItem:ef,selected:tf,icon:nf,placeholder:of,content:rf,title:af,meta:sf,empty:lf};function cf({isOpen:e,onClose:t,posts:n}){const[o,r]=x.useState(""),[a,i]=x.useState([]),[s,l]=x.useState(0),u=x.useRef(null),g=cs();x.useEffect(()=>{e&&(r(""),i([]),l(0),setTimeout(()=>{var w;return(w=u.current)==null?void 0:w.focus()},100))},[e]),x.useEffect(()=>{if(!o){i([]),l(0);return}const w=Ym(n,o).slice(0,8);i(w),l(0)},[o,n]);const m=w=>{w.key==="ArrowDown"?(w.preventDefault(),l(y=>Math.min(y+1,a.length-1))):w.key==="ArrowUp"?(w.preventDefault(),l(y=>Math.max(y-1,0))):w.key==="Enter"&&a[s]?(w.preventDefault(),g(`/tech/${a[s].slug}`),t()):w.key==="Escape"&&t()},f=w=>{g(`/tech/${w.slug}`),t()};return e?c.jsx("div",{className:fe.overlay,onClick:t,children:c.jsxs("div",{className:fe.modal,onClick:w=>w.stopPropagation(),children:[c.jsx("input",{ref:u,type:"text",className:fe.input,placeholder:"Search articles...",value:o,onChange:w=>r(w.target.value),onKeyDown:m,autoComplete:"off"}),c.jsxs("div",{className:fe.results,children:[!o&&c.jsx("div",{className:fe.empty,children:"Type to search articles..."}),o&&a.length===0&&c.jsx("div",{className:fe.empty,children:"No articles found"}),a.map((w,y)=>{const k=ds[w.slug],b=us(w.content);return c.jsxs("div",{className:`${fe.resultItem} ${y===s?fe.selected:""}`,onClick:()=>f(w),children:[k?c.jsx("img",{src:k,alt:w.title,className:fe.icon}):c.jsx("div",{className:`${fe.icon} ${fe.placeholder}`,children:""}),c.jsxs("div",{className:fe.content,children:[c.jsx("div",{className:fe.title,children:w.title}),c.jsxs("div",{className:fe.meta,children:[w.date,"  ",b," min read"]})]})]},w.id)})]})]})}):null}const uf="_container_rd6yi_1",df="_input_rd6yi_16",hf="_matches_rd6yi_29",pf="_controls_rd6yi_30",mf="_button_rd6yi_32",zt={container:uf,input:df,matches:hf,controls:pf,button:mf};function ff({isOpen:e,onClose:t}){const[n,o]=x.useState(""),[r,a]=x.useState(0),[i,s]=x.useState(0),[l,u]=x.useState([]),g=x.useRef(null);x.useEffect(()=>{e?(o(""),a(0),s(0),u([]),setTimeout(()=>{var b;return(b=g.current)==null?void 0:b.focus()},100)):document.querySelectorAll(".find-match").forEach(b=>{b.classList.remove("find-match","find-current")})},[e]),x.useEffect(()=>{if(document.querySelectorAll(".find-match").forEach(h=>{h.classList.remove("find-match","find-current")}),!n){s(0),a(0),u([]);return}const b=m(n);u(b),s(b.length),b.length>0&&(a(1),f(b,0))},[n]);const m=b=>{const h=document.querySelector(".article-body");if(!h)return[];const d=[],p=b.toLowerCase(),v=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,{acceptNode:E=>{const I=E.parentElement;return I&&(I.tagName==="SCRIPT"||I.tagName==="STYLE")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),S=[];let z;for(;z=v.nextNode();)z.textContent&&z.textContent.toLowerCase().includes(p)&&S.push(z);return S.forEach(E=>{const I=E.parentElement;I&&I.textContent&&I.textContent.toLowerCase().includes(p)&&(I.classList.contains("find-match")||(I.classList.add("find-match"),d.push(I)))}),d},f=(b,h)=>{if(!b[h])return;b.forEach(S=>S.classList.remove("find-current")),b[h].classList.add("find-current");const v=b[h].getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:v,behavior:"smooth"}),setTimeout(()=>{var S;return(S=g.current)==null?void 0:S.focus()},100)},w=()=>{if(l.length===0)return;const b=r>=l.length?1:r+1;a(b),f(l,b-1)},y=()=>{if(l.length===0)return;const b=r<=1?l.length:r-1;a(b),f(l,b-1)},k=b=>{b.key==="Enter"?(b.preventDefault(),b.shiftKey?y():w()):b.key==="Escape"&&t()};return e?c.jsxs("div",{className:zt.container,children:[c.jsx("input",{ref:g,type:"text",className:zt.input,placeholder:"Find in page...",value:n,onChange:b=>o(b.target.value),onKeyDown:k,autoComplete:"off"}),i>0&&c.jsxs("div",{className:zt.matches,children:[r," / ",i]}),c.jsxs("div",{className:zt.controls,children:[c.jsx("button",{className:zt.button,onClick:y,disabled:i===0,title:"Previous",onMouseDown:b=>b.preventDefault(),children:""}),c.jsx("button",{className:zt.button,onClick:w,disabled:i===0,title:"Next",onMouseDown:b=>b.preventDefault(),children:""}),c.jsx("button",{className:zt.button,onClick:t,title:"Close",onMouseDown:b=>b.preventDefault(),children:""})]})]}):null}const gf="_card_12bef_6",wf="_link_12bef_16",yf="_title_12bef_22",vf="_metaBar_12bef_37",kf="_date_12bef_45",bf="_badge_12bef_51",_f="_excerpt_12bef_60",xf="_banner_12bef_66",Ve={card:gf,link:wf,title:yf,metaBar:vf,date:kf,badge:bf,excerpt:_f,banner:xf};function Sf({post:e,index:t}){const n=us(e.content),o=od(e.content),r=ds[e.slug];return c.jsx("article",{className:Ve.card,style:{animationDelay:`${Math.min(t*.1,.5)}s`},children:c.jsxs(de,{to:`/tech/${e.slug}`,className:Ve.link,children:[c.jsx("h2",{className:Ve.title,children:e.title}),c.jsxs("div",{className:Ve.metaBar,children:[c.jsx("span",{className:Ve.date,children:e.date}),c.jsxs("span",{className:Ve.badge,children:[n," min read"]}),c.jsxs("span",{className:Ve.badge,children:[o.toLocaleString()," words"]})]}),e.excerpt&&c.jsx("p",{className:Ve.excerpt,children:e.excerpt}),r&&c.jsx("img",{src:r,alt:e.title,className:Ve.banner})]})})}const Tf="_container_ar6qj_1",If="_sortControls_ar6qj_2",jf="_sortButton_ar6qj_3",zf="_active_ar6qj_5",Ef="_posts_ar6qj_6",Et={container:Tf,sortControls:If,sortButton:jf,active:zf,posts:Ef};function Ll({posts:e}){const[t,n]=x.useState("newest"),o=[...e].sort((r,a)=>t==="newest"?new Date(a.date).getTime()-new Date(r.date).getTime():new Date(r.date).getTime()-new Date(a.date).getTime());return c.jsxs("div",{className:Et.container,children:[c.jsxs("div",{className:Et.sortControls,children:[c.jsx("button",{className:`${Et.sortButton} ${t==="newest"?Et.active:""}`,onClick:()=>n("newest"),children:"Newest First"}),c.jsx("button",{className:`${Et.sortButton} ${t==="oldest"?Et.active:""}`,onClick:()=>n("oldest"),children:"Oldest First"})]}),c.jsx("main",{className:Et.posts,children:o.map((r,a)=>c.jsx(Sf,{post:r,index:a},r.id))})]})}function rd(e){x.useEffect(()=>{const t=n=>{var r,a,i,s,l,u,g;const o=n.target;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"){if(n.key==="Escape"){(r=e.onEscape)==null||r.call(e);return}if((n.metaKey||n.ctrlKey)&&n.key==="k"){n.preventDefault(),(a=e.onSearch)==null||a.call(e);return}return}(n.metaKey||n.ctrlKey)&&n.key==="k"&&(n.preventDefault(),(i=e.onSearch)==null||i.call(e)),n.key==="/"&&(n.preventDefault(),(s=e.onFindInPage)==null||s.call(e)),n.key==="Escape"&&((l=e.onEscape)==null||l.call(e)),n.key==="j"&&(n.preventDefault(),(u=e.onNext)==null||u.call(e)),n.key==="k"&&(n.preventDefault(),(g=e.onPrevious)==null||g.call(e))};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}const Cf="_article_og4an_1",Lf="_header_og4an_2",Pf="_title_og4an_3",Rf="_metaBar_og4an_4",Nf="_date_og4an_5",Mf="_badge_og4an_6",Of="_banner_og4an_7",Af="_body_og4an_8",Wf="_authorBio_og4an_24",Ff="_authorName_og4an_25",Hf="_authorTitle_og4an_26",Uf="_authorText_og4an_27",Gf="_navigation_og4an_28",Df="_navPost_og4an_29",Bf="_navLabel_og4an_31",$f="_navTitle_og4an_32",Y={article:Cf,header:Lf,title:Pf,metaBar:Rf,date:Nf,badge:Mf,banner:Of,body:Af,authorBio:Wf,authorName:Ff,authorTitle:Hf,authorText:Uf,navigation:Gf,navPost:Df,navLabel:Bf,navTitle:$f};function Vf({posts:e}){const{slug:t}=dm(),n=cs(),[o,r]=x.useState(null);x.useEffect(()=>{if(!t){n("/");return}const m=e.find(f=>f.slug===t);if(!m){n("/");return}r(m),window.scrollTo(0,0),setTimeout(()=>{window.hljs&&document.querySelectorAll("pre code").forEach(f=>{const w=f.textContent||"";!f.className&&(w.includes("$ ")||w.includes("Matthew at "))&&f.classList.add("language-bash"),window.hljs.highlightElement(f);const y=f.parentElement;if(y&&!y.querySelector(".copy-button")){const k=document.createElement("button");k.className="copy-button",k.textContent="Copy",k.onclick=()=>{navigator.clipboard.writeText(f.textContent||""),k.textContent="Copied!",setTimeout(()=>k.textContent="Copy",2e3)},y.style.position="relative",y.insertBefore(k,y.firstChild)}}),document.querySelectorAll(".article-body h2").forEach((f,w)=>{f.id=`heading-${w}`})},100)},[t,e,n]);const a=o?e.findIndex(m=>m.id===o.id):-1,i=a>0?e[a-1]:null,s=a<e.length-1?e[a+1]:null;if(rd({onNext:()=>{s&&n(`/tech/${s.slug}`)},onPrevious:()=>{i&&n(`/tech/${i.slug}`)}}),!o)return null;const l=us(o.content),u=od(o.content),g=ds[o.slug];return c.jsxs("article",{className:Y.article,children:[c.jsxs("header",{className:Y.header,children:[c.jsx("h1",{className:Y.title,children:o.title}),c.jsxs("div",{className:Y.metaBar,children:[c.jsx("span",{className:Y.date,children:o.date}),c.jsxs("span",{className:Y.badge,children:[l," min read"]}),c.jsxs("span",{className:Y.badge,children:[u.toLocaleString()," words"]})]}),g&&c.jsx("img",{src:g,alt:o.title,className:Y.banner})]}),c.jsx("div",{className:`${Y.body} article-body`,"data-reading-time":l,dangerouslySetInnerHTML:{__html:o.content}}),c.jsxs("div",{className:Y.authorBio,children:[c.jsx("div",{className:Y.authorName,children:"Matthew Gerstman"}),c.jsx("div",{className:Y.authorTitle,children:"Software Engineer & Tech Writer"}),c.jsx("p",{className:Y.authorText,children:"Matthew is a software engineer with over a decade of experience building web applications. He's passionate about JavaScript, TypeScript, React, and teaching others about web development. Previously at Dropbox and Bluecore, he now writes about the web and gives talks at conferences."})]}),c.jsxs("div",{className:Y.navigation,children:[i&&c.jsxs(de,{to:`/tech/${i.slug}`,className:Y.navPost,children:[c.jsx("div",{className:Y.navLabel,children:" Previous (k)"}),c.jsx("div",{className:Y.navTitle,children:i.title})]}),s&&c.jsxs(de,{to:`/tech/${s.slug}`,className:Y.navPost,children:[c.jsx("div",{className:Y.navLabel,children:"Next (j) "}),c.jsx("div",{className:Y.navTitle,children:s.title})]})]})]})}const Jf=[{id:1,title:"TypeScript: Seeing Past the Hype",subtitle:"ReactiveConf",video:"KdvEGPiULAQ"},{id:2,title:"Nothing Generic About It",subtitle:"Advanced TypeScript",video:"1YWrc21Uv9g?start=530"},{id:3,title:"Building a Typesafe Code Split React-Redux Application",subtitle:"",video:"Mumy5YZZ2gs"},{id:4,title:"TypeScript: Seeing Past the Hype",subtitle:"React Loop",video:"veXkJq0Z2Qk"},{id:5,title:"Double Your Salary With This One Simple Trick",subtitle:"",video:"m1XdasrstCc"},{id:6,title:"Functional Programming Fundamentals",subtitle:"",video:"kkRyjXDpYqg"}],qf="_container_1g5sb_1",Yf="_header_1g5sb_2",Kf="_talks_1g5sb_4",Qf="_talkItem_1g5sb_5",Xf="_title_1g5sb_6",Zf="_subtitle_1g5sb_8",eg="_videoWrapper_1g5sb_9",Ct={container:qf,header:Yf,talks:Kf,talkItem:Qf,title:Xf,subtitle:Zf,videoWrapper:eg};function tg(){return c.jsxs("div",{className:Ct.container,children:[c.jsx("header",{className:Ct.header,children:c.jsx("h1",{children:"Talks"})}),c.jsx("div",{className:Ct.talks,children:Jf.map(e=>c.jsxs("div",{className:Ct.talkItem,children:[c.jsx("h2",{className:Ct.title,children:e.title}),e.subtitle&&c.jsx("div",{className:Ct.subtitle,children:e.subtitle}),c.jsx("div",{className:Ct.videoWrapper,children:c.jsx("iframe",{src:`https://www.youtube.com/embed/${e.video}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:e.title})})]},e.id))})]})}const ng="_container_1nkel_1",og="_hero_1nkel_7",rg="_subtitle_1nkel_20",ag="_lead_1nkel_26",ig="_section_1nkel_33",sg="_job_1nkel_58",lg="_jobTitle_1nkel_77",cg="_projectCard_1nkel_83",ug="_projectCompany_1nkel_101",dg="_btn_1nkel_108",hg="_techGrid_1nkel_125",pg="_techCategory_1nkel_133",mg="_strengths_1nkel_140",fg="_contactLinks_1nkel_152",C={container:ng,hero:og,subtitle:rg,lead:ag,section:ig,job:sg,jobTitle:lg,projectCard:cg,projectCompany:ug,btn:dg,techGrid:hg,techCategory:pg,strengths:mg,contactLinks:fg},gg=()=>c.jsxs("div",{className:C.container,children:[c.jsxs("header",{className:C.hero,children:[c.jsx("h1",{children:"Matthew Gerstman"}),c.jsx("p",{className:C.subtitle,children:"Software Engineer"}),c.jsx("p",{className:C.lead,children:"Over 12 years building complex, performant systems that make sophisticated technology feel simple. I specialize in bridging powerful capabilities with production-ready interfaces, with a proven track record of leading technical initiatives from concept to full rollout at scale companies."})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Professional Summary"}),c.jsx("p",{children:"Frontend Product Engineer with deep full-stack experience, focused on building systems that scale across teams and organizations. I thrive at the intersection of complex technical challenges and user experience, with particular expertise in making non-deterministic systems feel reliable and trustworthy."}),c.jsxs("div",{className:C.strengths,children:[c.jsx("h3",{children:"Core Strengths"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Systems thinking and scalable architecture design"}),c.jsx("li",{children:"Performance engineering and optimization"}),c.jsx("li",{children:"Technical leadership and knowledge sharing"}),c.jsx("li",{children:"End-to-end product ownership"}),c.jsx("li",{children:"Migration expertise and organizational change management"})]})]})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Career Timeline"}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"Datadog"}),c.jsx("p",{className:C.jobTitle,children:"Senior Software Engineer | September 2022 - Present"}),c.jsx("p",{children:"Leading development of collaborative data science tooling and dashboard infrastructure. Focus on real-time collaboration, PDF reporting systems, and frontend platform improvements."}),c.jsx(de,{to:"/career/datadog",className:C.btn,children:"View Datadog Projects "})]}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"Bluecore"}),c.jsx("p",{className:C.jobTitle,children:"Staff Engineer | June 2021 - September 2022"}),c.jsx("p",{children:"Led frontend platform architecture, TypeScript migration, and component library modernization for marketing technology platform."}),c.jsx(de,{to:"/career/bluecore",className:C.btn,children:"View Bluecore Projects "})]}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"Dropbox"}),c.jsx("p",{className:C.jobTitle,children:"Software Engineer  Senior Software Engineer | June 2017 - June 2021"}),c.jsx("p",{children:"Architected Redux state management systems, led frontend architecture for greenfield applications, and founded JavaScript Guild for organizational best practices."}),c.jsx(de,{to:"/career/dropbox",className:C.btn,children:"View Dropbox Projects "})]}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"TodayTix"}),c.jsx("p",{className:C.jobTitle,children:"Software Engineer | January 2016 - June 2017"}),c.jsx("p",{children:"Full-stack development for theater ticketing platform. Achieved 95% page load reduction (8s  400ms) and built complete React + Redux application from scratch."}),c.jsx(de,{to:"/career/todaytix",className:C.btn,children:"View TodayTix Projects "})]}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"Zetta.net"}),c.jsx("p",{className:C.jobTitle,children:"Intern  Software Engineer | June 2012 - December 2015"}),c.jsx("p",{children:"Cloud storage platform development. Led SVN  Git migration, established CI/CD practices, and built core data lifecycle features."}),c.jsx(de,{to:"/career/zetta",className:C.btn,children:"View Zetta.net Projects "})]}),c.jsxs("div",{className:C.job,children:[c.jsx("h3",{children:"Dance Marathon at University of Florida"}),c.jsx("p",{className:C.jobTitle,children:"Technology Captain  Technology Overall Director | September 2010 - April 2013"}),c.jsx("p",{children:"Led technology strategy for one of the largest student-run philanthropies. Built engagement apps used by thousands of participants for 5+ years."}),c.jsx(de,{to:"/career/dance-marathon",className:C.btn,children:"View Dance Marathon Projects "})]})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Technical Expertise"}),c.jsxs("div",{className:C.techGrid,children:[c.jsxs("div",{className:C.techCategory,children:[c.jsx("h4",{children:"Languages & Frameworks"}),c.jsx("p",{children:"TypeScript, JavaScript, React, Redux, Node.js, Python, PHP, SQL"})]}),c.jsxs("div",{className:C.techCategory,children:[c.jsx("h4",{children:"Specializations"}),c.jsx("p",{children:"Real-time collaboration systems, Complex UI, Performance optimization, State management at scale, API architecture"})]}),c.jsxs("div",{className:C.techCategory,children:[c.jsx("h4",{children:"Leadership & Process"}),c.jsx("p",{children:"Technical mentorship, Migration planning, Community building, Cross-functional coordination"})]})]}),c.jsx(de,{to:"/career/skills",className:C.btn,children:"Full Skills & Philosophy "})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Featured Projects"}),c.jsxs("div",{className:C.projectCard,children:[c.jsx("h3",{children:"Notebooks 2.0"}),c.jsx("p",{className:C.projectCompany,children:"Datadog, 2024"}),c.jsx("p",{children:"Complete rebuild of collaborative data science tooling with real-time multi-user editing."})]}),c.jsxs("div",{className:C.projectCard,children:[c.jsx("h3",{children:"PDF Reporting System"}),c.jsx("p",{className:C.projectCompany,children:"Datadog, 2023"}),c.jsx("p",{children:"Built horizontally scalable Node.js/Puppeteer system, improving widget fidelity from ~70% to near 100%."})]}),c.jsxs("div",{className:C.projectCard,children:[c.jsx("h3",{children:"Redux State Management"}),c.jsx("p",{className:C.projectCompany,children:"Dropbox, 2018"}),c.jsx("p",{children:"Designed Redux architecture adopted by ~10 teams across ~25 features, becoming company standard."})]}),c.jsxs("div",{className:C.projectCard,children:[c.jsx("h3",{children:"Page Load Optimization"}),c.jsx("p",{className:C.projectCompany,children:"TodayTix, 2016"}),c.jsx("p",{children:"Achieved 95% reduction in page load time (8 seconds  400ms) through systematic optimization."})]})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Origin Story"}),c.jsx("p",{children:"Started programming at age 11 with Visual Basic, driven by curiosity about how programs work. Built websites at 12, explored networking protocols at 13, and ran a freelance tech support business in high school."}),c.jsx("p",{children:"Won the Don Estridge Award for technical achievement in middle school. Formal CS education covered algorithms, data structures, and hardware fundamentals. Early experiences emphasized deep technical understanding, strong communication, and user empathyprinciples that continue to shape my work today."})]}),c.jsxs("section",{className:C.section,children:[c.jsx("h2",{children:"Contact & Links"}),c.jsxs("ul",{className:C.contactLinks,children:[c.jsx("li",{children:c.jsx("a",{href:"https://matthewgerstman.com",children:"Blog: matthewgerstman.com"})}),c.jsx("li",{children:c.jsx("a",{href:"https://github.com/matthewgerstman",children:"GitHub: github.com/matthewgerstman"})}),c.jsx("li",{children:c.jsx("a",{href:"https://linkedin.com/in/matthewgerstman",children:"LinkedIn: linkedin.com/in/matthewgerstman"})})]})]})]}),wg="_container_1agki_1",yg="_backLink_1agki_7",vg="_hero_1agki_19",kg="_subtitle_1agki_32",bg="_lead_1agki_38",_g="_section_1agki_45",xg="_projectDetail_1agki_57",Sg="_subsection_1agki_70",Tg="_techTags_1agki_98",Ig="_techTag_1agki_98",jg="_impactStat_1agki_114",zg="_themesList_1agki_125",N={container:wg,backLink:yg,hero:vg,subtitle:kg,lead:bg,section:_g,projectDetail:xg,subsection:Sg,techTags:Tg,techTag:Ig,impactStat:jg,themesList:zg},Eg=()=>c.jsxs("div",{className:N.container,children:[c.jsx(de,{to:"/career",className:N.backLink,children:" Back to Career Overview"}),c.jsxs("header",{className:N.hero,children:[c.jsx("h1",{children:"Datadog Projects"}),c.jsx("p",{className:N.subtitle,children:"Senior Software Engineer | September 2022 - Present"}),c.jsx("p",{className:N.lead,children:"Leading development of collaborative data science tooling and dashboard infrastructure at one of the world's leading observability platforms."})]}),c.jsxs("section",{className:N.section,children:[c.jsxs("div",{className:N.projectDetail,children:[c.jsx("h2",{children:"Notebooks 2.0 (2024)"}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"The Challenge"}),c.jsx("p",{children:"Complete rebuild of collaborative data science tooling to support real-time multi-user editing and complex notebook interactions at scale."})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Technical Approach"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Architected real-time collaboration system for data science notebooks"}),c.jsx("li",{children:"Built complex state management for multi-user editing scenarios"}),c.jsx("li",{children:"Implemented sophisticated UI for notebook cell interactions"}),c.jsx("li",{children:"Designed for performance with large datasets and visualizations"}),c.jsx("li",{children:"Created robust testing framework for complex UI interactions"})]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Technologies"}),c.jsxs("div",{className:N.techTags,children:[c.jsx("span",{className:N.techTag,children:"TypeScript"}),c.jsx("span",{className:N.techTag,children:"React"}),c.jsx("span",{className:N.techTag,children:"Real-time Collaboration"}),c.jsx("span",{className:N.techTag,children:"Complex State Management"})]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Impact"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Shipped production-ready collaborative editing platform"}),c.jsx("li",{children:"Enabled data scientists to work together in real-time"}),c.jsx("li",{children:"Established patterns for complex collaborative UI development"}),c.jsx("li",{children:"Created foundation for future notebook features"})]})]})]}),c.jsxs("div",{className:N.projectDetail,children:[c.jsx("h2",{children:"PDF Reporting System (2023)"}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"The Challenge"}),c.jsx("p",{children:"Legacy email-based widget snapshot system had ~70% success rate with flaky rendering and poor user experience. Needed reliable, scalable solution for dashboard PDF generation."})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Technical Approach"}),c.jsx("h4",{children:"Architecture Design"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Built stateless, horizontally scalable Node.js/Puppeteer system"}),c.jsx("li",{children:"Created report-printer service for PDF generation"}),c.jsx("li",{children:"Designed print-shop orchestration service for queuing and job management"}),c.jsx("li",{children:"Implemented pull-based job system with heartbeat monitoring"})]}),c.jsx("h4",{children:"Complex Client/Server Handshake"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Coordinated 50+ widget types across virtualized dashboards"}),c.jsx("li",{children:"Built PrintModeAdapter component to aggregate render status"}),c.jsx("li",{children:"Solved DOM flush detection using invisible button technique"}),c.jsx("li",{children:"Handled edge cases like split graphs and non-fetching widgets"})]}),c.jsx("h4",{children:"Performance Optimization"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Reduced dev loop from 30 minutes to 1 minute"}),c.jsx("li",{children:"Disabled expensive interaction logic in print mode"}),c.jsx("li",{children:"Optimized rendering pipeline for dashboards with 10,000+ widgets"})]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Technologies"}),c.jsxs("div",{className:N.techTags,children:[c.jsx("span",{className:N.techTag,children:"Node.js"}),c.jsx("span",{className:N.techTag,children:"Puppeteer"}),c.jsx("span",{className:N.techTag,children:"TypeScript"}),c.jsx("span",{className:N.techTag,children:"React"}),c.jsx("span",{className:N.techTag,children:"gRPC"}),c.jsx("span",{className:N.techTag,children:"Python"})]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Impact"}),c.jsx("div",{className:N.impactStat,children:"Widget fidelity: 70%  100% (~10x improvement)"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Horizontally scalable architecture supporting production load"}),c.jsx("li",{children:"Infrastructure reused by 15+ services across organization"}),c.jsx("li",{children:"Revenue-generating feature heavily used by customers"}),c.jsx("li",{children:"Established Node.js as viable technology at Datadog"})]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Leadership"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Drove technology selection and architecture decisions"}),c.jsx("li",{children:"Led 6-week prototyping process with weekly stakeholder reviews"}),c.jsx("li",{children:"Navigated organizational challenges around Node.js adoption"}),c.jsx("li",{children:"Coordinated with multiple teams (backend, frontend, email platform)"})]})]})]}),c.jsxs("div",{className:N.projectDetail,children:[c.jsx("h2",{children:"Dashboard Type Safety Initiative (2023-2024)"}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"The Challenge"}),c.jsxs("p",{children:["Dashboards codebase had excessive TypeScript ",c.jsx("code",{children:"any"})," usage, leading to runtime errors and poor developer experience."]})]}),c.jsxs("div",{className:N.subsection,children:[c.jsx("h3",{children:"Impact"}),c.jsx("div",{className:N.impactStat,children:"Cut TypeScript 'any' usage by 50%"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Reduced runtime type errors"}),c.jsx("li",{children:"Improved developer experience and code confidence"}),c.jsx("li",{children:"Set standards for type safety across organization"})]})]})]})]}),c.jsxs("section",{className:N.section,children:[c.jsx("h2",{children:"Key Themes"}),c.jsxs("ul",{className:N.themesList,children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Systems Thinking:"})," Built scalable architectures that serve as organizational infrastructure"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Performance Focus:"})," Consistently optimized for speed without sacrificing maintainability"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Technical Leadership:"})," Drove major initiatives and established new technology standards"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Quality Standards:"})," Pioneered testing patterns and type safety initiatives"]})]})]})]});function Cg(){const[e,t]=x.useState(()=>{const o=localStorage.getItem("theme");return o==="light"||o==="dark"?o:"dark"});return x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)},[e]),{theme:e,toggleTheme:()=>{t(o=>o==="dark"?"light":"dark")}}}const Lg=[{id:17,slug:"performance-testing-anonymous-functions",title:"Performance Testing React With Anonymous Functions",date:"September 26, 2019",excerpt:`Over the past couple of years, anonymous functions have really taken off the React community.

There have been a lot of claims of "this might affect performance." Up until now I haven't seen any real `,content:`<p>Over the past couple of years, anonymous functions have really taken off the React community. A few days ago, I was on twitter and saw the following exchange:</p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">inline functions <a href="https://t.co/ISOsnigUtg">pic.twitter.com/ISOsnigUtg</a></p>&mdash; Kitze (@thekitze) <a href="https://twitter.com/thekitze/status/1175822194565361665?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>Kitze was kidding (I hope), but for a while this was a very real debate. Especially when render props were first taking off. Since then, Hooks have made anonymous (inline) functions even more popular.</p><p>There have been a lot of claims of "this might affect performance" which is often countered with "well that's a micro-optimization." Up until now I haven't seen any real numbers, so I decided to get them on my own.</p><p>At first, I did this just by running a simple node script with various numbers for NUM_EXECUTIONS.</p><pre><code class="language-Javascript">function runAnonymous() {
  for (let i = 0; i &lt; NUM_EXECUTIONS; i++) {
    (() =&gt; {
      // noop
    })();
  }
}

function named() {
  // noop
}

function runNamed() {
  for (let i = 0; i &lt; NUM_EXECUTIONS; i++) {
    named();
  }
}

const startNamed = new Date();
runNamed();
const endNamed = new Date();
const diffNamed = endNamed - startNamed;
console.log(\`Named took \${diffNamed} ms\`);

const startAnonymous = new Date();
runAnonymous();
const endAnonymous = new Date();
const diffAnonymous = endAnonymous - startAnonymous;
console.log(\`Anonymous took \${diffAnonymous} ms\`);

const factor = diffAnonymous / diffNamed;
console.log(\`Thats a factor of \${factor.toFixed(2)}x!\`);
</code></pre><p>This code is hopefully straightforward. First it runs a loop where it generates an anonymous function and executes it, second it creates a named function then loops over it and runs it the same number of times.</p><p>For anything less than 10,000 executions I couldn't profile a difference. Both the named and anonymous executions took 0 ms.</p><p>At 10,000 executions we start to get some results</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 4 ms
Thats a factor of Infinityx!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 4 ms
Thats a factor of Infinityx!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 3 ms
Thats a factor of Infinityx!</code></pre><p>Creating an anonymous function 10,000 times took about 3-4 ms to execute. I decided to crank it up a notch and see how many executions it took to see a real difference.</p><p>At a million executions I was able to see the named function actually take some time to run.</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1 ms
Anonymous took 3 ms
Thats a factor of 3.00x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 2 ms
Anonymous took 4 ms
Thats a factor of 2.00x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 2 ms
Anonymous took 3 ms
Thats a factor of 1.50x!</code></pre><p>These results were pretty inconsistent ranging from 1.5x to 3.0x. Just for fun, I decided to crank it up to a billion.</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1240 ms
Anonymous took 4117 ms
Thats a factor of 3.32x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1053 ms
Anonymous took 4153 ms
Thats a factor of 3.94x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1054 ms
Anonymous took 3798 ms
Thats a factor of 3.60x!</code></pre><p>Now we're getting some meaningful data. Creating an anonymous function and executing it takes roughly 3.5 times as long as calling a function that already exists.</p><p>This initial data tells me that anonymous functions don't make a meaningful difference to the performance of your application. In the above example we're averaging around 3 <strong>nanoseconds </strong>to allocate an anonymous function. For that to matter, we need to be operating at an unimaginably large scale.</p><h1 id="moving-on-to-react">Moving On To React</h1><p>The above example is pretty contrived. In a vacuum we see that anonymous functions have a negligible impact on performance, but what about in a real React application?</p><p>I decided to throw together a simple React application to see if anonymous functions made any difference to rendering a simple component. That looks roughly like this</p><pre><code class="language-Javascript">function AnonymousNumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number getNumber={() =&gt; i} key={i} /&gt;);
  }
  return list;
}

function NumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number number={i} key={i} /&gt;);
  }
  return list;
}

function Number({number, getNumber}) {
  return (
    &lt;h1 style={{color: number != null ? 'red' : 'blue'}}&gt;
      {number != null ? number : getNumber()}
    &lt;/h1&gt;
  );
}</code></pre><p>In this example, we can render a large number of <code>h1</code> tags and see if using an anonymous function makes any difference from just passing a raw prop. I opened up the React DevTools and profiled how long it took to render each set of elements.</p><h3 id="without-anonymous-functions">Without Anonymous Functions</h3><!--kg-card-begin: html--><table>
    <thead>
    <th>Number of Elements</th>
        <th>Time to Render</th>
    </thead>
<tr><td>100</td><td>5.1 ms</td></tr>
<tr><td>1000</td><td>41.7ms</td></tr>
<tr><td>10000</td><td>201.8ms</td></tr>
<tr><td>25000</td><td>518ms</td></tr>
</table><!--kg-card-end: html--><h3 id="with-anonymous-functions">With Anonymous Functions</h3><!--kg-card-begin: html--><table>
    <thead>
    <th>Number of Elements</th>
        <th>Time to Render</th>
    </thead>
    <tr><td>100</td><td>6.1 ms</td></tr>
<tr><td>1000</td><td>43 ms</td></tr>
<tr><td>10000</td><td>210.9 ms</td></tr>
<tr><td>25000</td><td>453 ms</td></tr>
</table><!--kg-card-end: html--><p>This data is not at all scientific, but it was pretty representative of what I've found. Having a single anonymous function as a prop makes no meaningful difference to React performance.</p><p>I did have one serious takeaway though.</p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">FWIW I was trying  to profile if anonymous functions in a render make any difference to performance.<br><br>The short answer I found was &quot;not until you&#39;ve reached a scale where you have a lot of other lower hanging fruit to fix&quot;</p>&mdash; Matthew Trevor Gerstman (@MatthewGerstman) <a href="https://twitter.com/MatthewGerstman/status/1175897335378927621?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I thought my experiment was over, but Rick Hanlon had other thoughts.</p><h1 id="let-s-play-with-react-memo">Let's Play With React.memo</h1><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">I was thinking about doing the same today<br><br>What about<br><br>&lt;Root&gt;<br>&lt;Parent&gt; &lt;-- anon function<br>&lt;ExpensiveChild&gt; &lt;-- expensive render<br><br>Child should be pure/memo, the expensive render could be sorting a large array of todo items. Compare with/without passing anon function into the child</p>&mdash; Ricky (@rickhanlonii) <a href="https://twitter.com/rickhanlonii/status/1175907744299327489?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I thought this was pretty interesting and decided to take this experiment a step further. How does React behave when you give it a really expensive component to render?</p><pre><code class="language-Javascript">function sleep(seconds) {
  const startTime = new Date();
  const endTime = startTime.setSeconds(startTime.getSeconds() + seconds);
  console.log({startTime, endTime});
  while (new Date() &lt; endTime) {
    // wait;
    continue;
  }

  return;
}

const ExpensiveComponent = React.memo(() =&gt; {
  sleep(1);
  return 'expensive';
});
</code></pre><p>To do this, I made a sleep function that blocks the main thread for a full second and a component that calls it. I then memoized that component.</p><p>I quickly discovered that React.memo is memoization per instance as opposed to per set of props for that component. For 10 components, this code will always take roughly 10 seconds for the first render.</p><pre><code class="language-Javascript">function NumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number number={i} key={i} /&gt;);
  }
  return list;
}

function Number({number, getNumber}) {
  return (
    &lt;h1 style={{color: number != null ? 'red' : 'blue'}}&gt;
      {number != null ? number : getNumber()}
      &lt;ExpensiveComponent  /&gt;
    &lt;/h1&gt;
  );
}</code></pre><p>We haven't learned anything new yet, or at least nothing that isn't mentioned in the React docs.</p><p>Next up was profiling the overhead of React.memo. I decided to generate a big object with the following code.</p><pre><code>const bigObject = {};
for (let i = 0; i &lt; n; i++) {
  bigObject[\`\${i}\`] = \`\${i}\`;
}

&lt;ExpensiveComponent {...bigObject} /&gt;</code></pre><!--kg-card-begin: html--><table>
    <thead><th>Value of n</th><th>Overhead for React.memo</th></thead>
    <tr><td>100</td><td>0.1 ms</td></tr>
<tr><td>1,000</td><td>0.5 ms</td></tr>
<tr><td>10,000</td><td>3 ms</td></tr>
<tr><td>100,000</td><td>100 ms</td></tr>
<tr><td>1,000,000</td><td>675 ms</td></tr>
</table><!--kg-card-end: html--><p>These results were promising. I can't imagine a production scenario with more than 1,000 individual props. The overhead for memo is negligible for reasonable quantities.</p><p>In fact, I quickly realized that this isn't just the overhead for React.memo, <strong>this is also the overhead for prop spreading on the component.</strong></p><p>As a sanity check I ran the 1,000,000 prop approach again on a non memoized component. It took roughly 300ms to render that component. We can approximate that it takes 375 ms for React.memo to check 1,000,000 props.</p><h1 id="combining-with-anonymous-functions">Combining With Anonymous Functions</h1><p>As a final followup, I rendered my expensive, memoized component with an anonymous function as a prop</p><pre><code class="language-javascript">&lt;ExpensiveComponent anon={() =&gt; {}} /&gt;</code></pre><p>This did what I expected, it broke memoization. It once again took a full second for each render of each <code>ExpensiveComponent</code>.</p><p>While the overhead of using React.memo is negligible, this is a footgun to watch out for. An inexperienced developer could easily break memoization without realizing it.</p><p>To be clear, this has nothing to do with the anonymous function. This is because we're passing a new reference on each render to a memoized component. This code would also cause repeated rerenders.</p><pre><code class="language-javascript">&lt;ExpensiveComponent obj={{ foo: 'bar'}} /&gt;</code></pre><h2 id="a-note-on-science">A Note On Science</h2><p>This data isn't terribly scientific. I ran this experiment a small number of times on a single machine. In order to really collect data, we would need to run this code in a wide variety of environments many many times. I'm not a statistician, so I'll leave it to the experts to run a truly conclusive experiment.</p><h2 id="conclusions">Conclusions</h2><p>That said, I am very comfortable with the statement that <strong>inline anonymous functions have a negligible impact on application performance. </strong>Use all the hooks and render props you'd like.</p><p>You can see my full source <a href="http://github.com/matthew-gerstman/react-perf">here</a>. Also feel free to tweet me <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> with questions.</p>`,tags:["Tech","react"]},{id:16,slug:"surviving-the-technical-interview",title:"Surviving The Technical Interview",date:"September 25, 2019",excerpt:`I've found myself giving a bunch of advise on technical interviews lately and thought it'd make for a good blog post. 

Here's my guide to surviving interviews.`,content:`<p>I've found myself giving a bunch of advise on technical interviews lately and thought it'd make for a good blog post. While most of us acknowledge that technical interviews have a lot of false negatives, the industry as a whole hasn't come up with a better alternative. Here's my guide to surviving interviews.</p><h1 id="practice">Practice</h1><p>This one seems obvious, but I need to say it up front. Practice, practice, practice. <em>Proper planning prevents poor performance</em>. I've personally done almost every problem in <a href="https://amzn.to/2l8CeGG">Cracking The Coding Interview</a> and I can't recommend that book enough. It helps you get into the mindset of interviewing.</p><p>A big failure mode with this book though is how it's organized. The problems are all neatly organized by what tool you need to solve them. For example theres a chapter with array problems and a chapter with tree problems. Real interviews won't be like this. You'll have to identify what tools to use on the problem when it's given to you.</p><p>The advanced chapters in the back are really helpful here because they don't provide any context, they're just problems to solve.</p><h1 id="turn-your-inner-monologue-inside-out">Turn Your Inner Monologue Inside Out</h1><p>This is so important. As an interviewer I need to get a sense of how you solve the problem. If you silently struggle, I can't give you the hint you need to succeed. Talk to yourself as you work through the practice problems. It may feel silly at first, but you need to practice saying out loud what's going through your head. Really say out loud everything going through your head.</p><p>Even say out loud the bad ideas and why they won't work. During the interview, I'm looking for <strong>signal</strong>, either positive or negative that we should hire you. If you mention something that won't work and why, that's really positive signal. It shows me that you can think through multiple solutions and know their tradeoffs.</p><p>It's also important to state your assumptions. Sometimes it might seem like you intuitively figured out a key part of the problem, but I need to verify that. Often if a candidate seems to just know something I'll ask some followup questions that seem really simple, just to confirm we're on the same page.</p><h1 id="if-you-re-stuck-make-a-magic-function">If You're Stuck, Make a Magic Function</h1><p>This one took me years to learn. When you're stuck on part of a problem, for example you don't know how to sort something, or organize a data structure, just pretend you have a function that does it for you. You will need to implement that magic function later, but this will help you get unstuck for the time being.</p><p>In fact, this is really positive signal for me. It shows me you can break down the problem into multiple steps, and that you can write clean code. It's often difficult to parse giant single-function solutions.</p><h1 id="take-a-deep-breath">Take a Deep Breath</h1><p>During some interview somewhere, you'll probably get stuck and flustered. Don't go into panic mode. Getting stuck on a small part of the problem is totally okay, and expected. Take a deep breath and go back to the basics to wrap your head around it.</p><p>For on-sites, you'll often do several interviews back to back. Remember that each interview has no bearing on the next one. You can fail one interview, pass the rest, and that interview becomes an outlier. When you finish an interview put it in the past, and move onto the next one.</p><h1 id="i-m-taking-notes">I'm Taking Notes</h1><p>This is important. I take notes throughout the whole interview to make sure I'm giving a fair evaluation. Here's what they might look like. </p><blockquote>5:06 PM Explained question<br>5:08 PM Candidate asked if they can assume a type of input, I say yes.<br>5:10 PM Candidate started writing error checking, i told them to assume it's valid input.<br>5:13 PM Candidate has the first part of the implementation.<br>5:14 PM Asked candidate to walk me through at a high level.<br>5:14 PM Candidates solution works like this ____________________<br>5:16 PM I asked what their data structure looks like.<br>5:18 PM They showed me they know what it looks like, now I can give them a sample input.<br>5:19 PM They're very caught up on this section. I'm asking them what would happen if they had a magic function to do it for them.<br>5:24 PM I asked what the code looks like for this simpler case.<br>5:29 PM Algo works for simple case, I told them I see a bug.<br>5:31 PM I told them "I would wager they could make this function work for the advanced case"<br>5:31 PM They figured out the advanced case.<br>5:35 PM There's a bug on line 33.<br>5:36 PM They found the bug on line 33 on their own.<br>5:40 PM I suggest a big scary edge case.<br>5:43 PM Candidate has a high level solution for edge case.<br>5:48 PM Candidate has implemented psuedocode around this.<br>5:53 PM We hit a good stopping point for questions.</blockquote><p>These are intentionally vague, but it's encapsulates the things I need to remember:</p><ol><li>How long did each part of the problem take the candidate?</li><li>When did they get stuck?</li><li>Were they able to figure it out the bugs on their own?</li></ol><p>After doing the same question dozens (or sometimes hundreds) of times, I have a pretty good sense of how the interview should go, what types of solutions a candidate may have, and when they're likely to get stuck.</p><h1 id="be-honest">Be Honest</h1><p>It's very likely at some point you'll be asked a question you've seen before. There are only so many interview questions out there. When this happens, tell the interviewer! I can usually tell if a candidate knows the question in advance and it feels like I'm being lied to. When this happens, I have to flag this suspicion and recommend we reinterview them.</p><h1 id="it-s-a-numbers-game">It's a Numbers Game</h1><p>Interviewing is it's own skill you need to hone; it can take years of practice. When I was going from my first to my second job I talked to 50 tech companies (and failed a lot of interviews). The more interviews you do, the better you'll get at it.</p><p>If you're just ramping up on a job search, consider scheduling the companies you're less excited about earlier. This will help you practice with less pressure. You'll feel more ready when you get to the interview you really care about.</p>`,tags:["Tech"]},{id:13,slug:"reduce-reduce-reduce",title:"Reduce, Reduce, Reduce",date:"March 18, 2019",excerpt:"After my last article on map, filter, and reduce there was an outpour of requests to do an article on just reduce. This time lets dive into all the fun things you can do with reduce.",content:`<p>After my last article on <a href="http://matthewgerstman.com/map-filter-reduce/" rel="noreferrer nofollow noopener">map, filter, and reduce</a> there was an outpour of requests to do an article on just reduce. This time lets dive into all the fun things you can do with reduce. Before we do that though, lets make sure we really understand how it works.</p><h1 id="why-s-it-called-reduce">Whys it Called Reduce?</h1><p>I find it helpful if we look at the dictionary definition for the word reduce <a href="https://www.merriam-webster.com/dictionary/reduce" rel="noreferrer nofollow noopener"><strong>[1]</strong></a></p><blockquote><strong><em>a: </em></strong><em>To draw together or cause to converge, or consolidate</em><br>Example: reduce all the questions to one<br><br><strong><em>b: </em></strong><em>To diminish in size, amount, extent, or number</em><br>Example: reduce taxes<br>Example: reduce the likelihood of war<br><br><strong>c: </strong>To<em> decrease the volume and concentrate the flavor of by boiling</em><br>Example: add the wine and <em>reduce </em>the sauce for two minutes</blockquote><p>In all three of these, were taking a group of things and consolidating, or shrinking them through some process.</p><p>In programming its the same. Were taking a <strong>list</strong> of <strong>items</strong> and consolidating the list into to one new <strong>value</strong> using an <strong>accumulator</strong>.</p><h1 id="function-signature">Function Signature</h1><p>Now lets take look at the function signature for reduce.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/500644ef1e9020822f10bd7b0aea69bc.js"><\/script><!--kg-card-end: html--><p>This part is pretty straightforward, reduce takes a <strong>callback</strong>, and an <strong>initialValue</strong> to seed the <strong>accumulator</strong>. Most of the complexity here is in the function signature for the callback. Lets dive into that.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d9647985a89f0dc4a76c4270a4c49554.js"><\/script><!--kg-card-end: html--><p>This is a bit more intimidating, so lets break it down.</p><p>The <strong>accumulator </strong>is thing were trying to reduce our list down to. It <em>accumulates </em>the list of items into one value. That value could be an object or even a new array, but its considered one value.</p><p>Whatever gets returned from the callback is passed in as the <strong>accumulator </strong>to the next iteration. When we're done, the final state of the <strong>accumulator </strong>is returned as the <strong>value.</strong></p><p><strong>currentValue </strong>is less scary, its the current item in the list were iterating over. This might be more familiar if we use <code>for loop</code> syntax.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/977f044c735adba039b79a07f2df1c9f.js"><\/script><!--kg-card-end: html--><p>Next is <strong>currentIndex</strong>. In the example above this would be <code>i</code>. We can make this a bit more explicit though.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4aa9c545944ae55a3cd0f306b161ef9b.js"><\/script><!--kg-card-end: html--><p>Lastly, <strong>list. </strong>This is the entire list were iterating over. This can be useful if you want to access some other element in the original list. To be honest, Ive never needed to access the original <strong>list</strong>, but its available.</p><h1 id="implementation">Implementation</h1><p>Now that we understand the function signature, lets implement it from scratch. </p><p>One caveat, to avoid complexity this implementation takes the list as an argument as opposed to adding it to the prototype of array. You can see a proper polyfill at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">MDN [2].</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a13a16798ada747f047bb62637440014.js"><\/script><!--kg-card-end: html--><p>As you can see, the bulk of this function is error checking. We check to make sure we have a valid <strong>list </strong>and <strong>callback</strong>. We also ensure the user has either provided an <strong>initialValue</strong> or we can derive one from the list.</p><p>In fact if we assume that the user always provides valid input this is the entire function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e62b0aa35577350a050211cdcb893f6c.js"><\/script><!--kg-card-end: html--><p>This function takes a <strong>list</strong>, iterates over it, and calls a <strong>callback</strong> on the previous value along with each item in the list. it then returns the final <strong>value</strong>.</p><h1 id="all-of-the-examples">All of The Examples</h1><p>Hopefully you now understand <strong>how </strong>reduce works, but it may not be clear <strong>why </strong>you would want to use it. First, lets get the sample data out of the way. This is the same <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener">data as last time.</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b024143766f91edf8278415568aa235a.js"><\/script><!--kg-card-end: html--><h2 id="keyby">keyBy</h2><p>Now that we have the sample data out of the way, lets look at our first example, <code>keyBy</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6263edd4c352fcbcabc2b8415bec2bd3.js"><\/script><!--kg-card-end: html--><p>This function takes a list of objects and a key, and keys those objects by a property on them. In this example our <strong>initialValue </strong>is <code>{}</code>.We iterate over each item in the list, get <code>item[key]</code> and use it as our key in the accumulator.</p><p>As an aside, this implementation is naive and will overwrite on conflict.</p><p>Given the list of <code>wizards</code> above, we could call <code>keyBy(wizards, 'name')</code> and get the following output.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/93f21471ba9d6ce80e9d9d5f41915360.js"><\/script><!--kg-card-end: html--><h2 id="groupby">groupBy</h2><p>Next up is <code>groupBy</code>, this function takes a <strong>list</strong> and groups the <strong>items</strong> by the output of a given function<strong>,</strong> or <code>iteratee</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/be19558f74230249742cbaa7de944bf0.js"><\/script><!--kg-card-end: html--><p>Again, we take a list, but this time we take a function, or <code>iteratee</code>. We call <code>iteratee</code> on each <code>item</code> in the list and use this to determine what key on the <strong>accumulator,</strong> or <code>acc</code>, we place the item in.</p><p>We then make sure theres an array allocated at the key and push the item onto that array.</p><p>If we call <code>groupBy(wizards, wizard =&gt; wizard.house)</code>, well get the following output.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39070315478e7abd4198b87c3953354a.js"><\/script><!--kg-card-end: html--><h2 id="chunk">chunk</h2><p>Another popular example, <code>chunk</code>. In this case we want to take a big <strong>list</strong> and split it into a <strong>list</strong> of smaller lists.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8185bfc898629b3ea9716c21cdfa5c53.js"><\/script><!--kg-card-end: html--><p>Above, we take a <code>list</code> and a <code>size</code> for our sub-lists. Our <strong>initialValue </strong>is an array with a single empty array inside of it.</p><p>We then iterate over the list and make our smaller lists. Every time one of our sub-lists reaches <code>size</code>, we move on to the next one.</p><p>If we call const <code>chunkedWizards = chunk(wizards, 3)</code>, well get the following value for <code>chunkedWizards</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/eb44f0bf2033f53e889ef64ba024604e.js"><\/script><!--kg-card-end: html--><p>We now have 3 lists of 3 wizards. Its worth noting that this worked out nicely because we had exactly 9 wizards. If we had 8 total wizards, our final list would be of size 2. If we had 10 total wizards, our final list would be of size 1.</p><h1 id="flatten">flatten</h1><p>Weve chunked <code>wizards</code> into <code>chunkedWizards</code>, but what if we want to undo that? Well thats what flatten is for.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4f39158a4b0349807f36640011402a96.js"><\/script><!--kg-card-end: html--><p>In this example we take a <code>list</code> and iterate over it. Whenever we see an array, we <code>concat</code> it with the <strong>accumulator, </strong>or <code>acc</code>. Whenever we see anything else we push it onto the <strong>accumulator</strong>. Our <strong>initialValue </strong>for our <strong>accumulator</strong> this time is an empty array or <code>[]</code>.</p><p>If we call <code>flatten(chunkedWizards)</code> we get our original list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c2e3823a0b063c3fc311eaa1e5e26333.js"><\/script><!--kg-card-end: html--><h2 id="flatmap">flatMap</h2><p>We can take this a step further with flatMap. This <a href="__GHOST_URL__/map-filter-reduce/"><strong>maps</strong></a> over the list and flattens any results from the given function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/31a1fc7ad9ef71acd0d9ed5ee3503e90.js"><\/script><!--kg-card-end: html--><p>Hopefully by now youre getting the hang of it. We iterate over the <code>list</code> and call <code>func</code> on each item. We then <code>flatten</code> the output of <code>func</code>.</p><p>Lets look at a function call:</p><p><code>flatMap(wizards, wizard =&gt; [wizard.name, wizard.house, wizard.points])</code></p><p>This takes a wizard and returns all of its properties as items in an array. The output of this is one big array.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a98fbd728d753141306aaff42aaa4db3.js"><\/script><!--kg-card-end: html--><h1 id="map-and-filter">Map and Filter</h1><p>One last fun fact, we can implement <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener"><strong>map</strong></a><strong> </strong>and <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener"><strong>filter</strong></a><strong> </strong>with reduce.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/77c2e270789dbcff7f02ea123ffd3cb2.js"><\/script><!--kg-card-end: html--><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6ec04a34ba7d97df3e8f9677c20fe9e5.js"><\/script><!--kg-card-end: html--><p>If you're looking for reasons to use map or filter, check out my previous article, <a href="__GHOST_URL__/map-filter-reduce/">map, filter, reduce</a>.</p><h1 id="wrapping-up">Wrapping Up</h1><p>Reduce is one of the most powerful functions built into JavaScript. While most of the functions above are available in <a href="http://lodash.com/" rel="noreferrer nofollow noopener">lodash</a> <a href="http://lodash.com/" rel="noreferrer nofollow noopener">[3]</a>, theyre good examples of when you may want to use reduce. Give them a try and feel free to tweet questions <a href="https://twitter.com/MatthewGerstman" rel="noreferrer nofollow noopener">@MatthewGerstman.</a></p><hr><h1 id="references">References</h1><ol><li><a href="https://www.merriam-webster.com/dictionary/reduce" rel="noreferrer nofollow noopener">https://www.merriam-webster.com/dictionary/reduce</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" rel="noreferrer nofollow noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce</a></li><li><a href="http://lodash.com/" rel="noreferrer nofollow noopener">http://lodash.com</a></li></ol>`,tags:["Tech","functional-programming"]},{id:11,slug:"map-filter-reduce",title:"Map, Filter, Reduce",date:"March 03, 2019",excerpt:"In this article we'll go back to basics and cover three of the most important functions in functional programming, map, filter, and reduce.",content:`<p>In this article we'll go <a href="__GHOST_URL__/functional-programming-fundamentals/">back to basics</a> and cover three of the most important functions in <a href="__GHOST_URL__/functional-programming-fundamentals/">functional programming</a>, map, filter, and reduce.</p><p>All three of these are useful functions for iterating over a list (or array) and doing some kind of transformation or computation. This will then produce a new list or the result of the computation done across the previous list.</p><h1 id="types">Types</h1><p>Before we dive into map, filter, and reduce, let's set up the list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ad7693f7583a07cf038bd38ab931152a.js"><\/script><!--kg-card-end: html--><p>As per usual, we're going to be operating on wizards. Each wizard object has a name, a house, and the number of points they've earned for their house. Let's declare a bunch of wizards and put them in a list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/44860c22b93656ab0391243e8f579666.js"><\/script><!--kg-card-end: html--><h1 id="map-function map() { [native code] }1">Map</h1><p>Now that we've got the boilerplate out of the way, let's dive in. The first function is the simplest one, map. Map iterates (or loops) over a list, applies a function to each item in that list and then returns a new list of the transformed items. Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c02b0634780f0e6c6ef00d5390e6ec42.js"><\/script><!--kg-card-end: html--><p>This function iterates over the list of wizards, gets their name, and puts it into a new array. The result of this looks something like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/29ebae139d7839eb981fb110e9c1723f.js"><\/script><!--kg-card-end: html--><p>Now in this example we were using a <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda</a> (aka an anonymous function), but we can also use a named function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3d64ba545ca863db2fc3c6abd558abe7.js"><\/script><!--kg-card-end: html--><p>In this example we have a function called <code>wizardToString</code> and we pass that directly to map. It will then return a new list that looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/bf416ade6e4e95b9ce568a2df5449754.js"><\/script><!--kg-card-end: html--><h1 id="filter-function filter() { [native code] }1">Filter</h1><p>Next up is filter. Filter behaves like map in that it iterates over the list, but it instead of transforming each item, it transforms the whole list. Filter takes a function that returns true or false or <a href="__GHOST_URL__/mary-had-a-little-lambda/">predicate</a>. It then returns a new list with items where the predicate returns <code>true</code>. Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fe6468ae65e0e7a1e11c9d726b09b0ca.js"><\/script><!--kg-card-end: html--><p>In this example we filter over the list and only include wizards who are in the house Slytherin. The result would be this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/048d64ccc3719ba07a2b52a886bf6437.js"><\/script><!--kg-card-end: html--><p>As an aside, Taylor and Lin are two of the most acclaimed Slytherins of our day.</p><p>Just like with map, we don't need to use a <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda</a>, we can also use a predefined function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/884e4116282875442d860d44cb97eac3.js"><\/script><!--kg-card-end: html--><p>In this example we make two lists, the list of Slytherins who have earned points (winners), and the list of Slytherins who have lost points (losers). We can see those results below.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/496b2fa8c97d505d79f2aacaa1cb155e.js"><\/script><!--kg-card-end: html--><h1 id="reduce-function reduce() { [native code] }1">Reduce</h1><p>Now we get to the most interesting function, reduce. Reduce iterates over a list and produces a single value. Let's look at an example.</p><p>Suppose we want to get the total number of points across all wizards. We can use reduce to do that.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39da3b9782f8f3e4a59315c28a3523c9.js"><\/script><!--kg-card-end: html--><p>What's going on here? Well reduce is a function that takes two arguments, a function and an initial value for the accumulator. The accumulator is the name of the thing reduce returns. In this case we start our point count at 0.</p><p>Now the function takes the current state of the accumulator and the item in the list it's supposed to process. For the first wizard, it will pass 0 for the accumulator. This function then returns <code>accumulator + points</code>. This will eventually sum up all the points. If you're curious, the result is 5487.</p><p>Now the accumulator can be anything, we can even use reduce to produce an object. Let's look at an example where we add up the points for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/49909068b01b9285c0f18d6177a36b19.js"><\/script><!--kg-card-end: html--><p>In this case, we initialize our accumulator or <code>acc</code> with <code>{}</code>. Then for each wizard we call a function that adds the number of points that wizard has earned for their house. If you're curious that result looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e4b620c523337b30cb44075b8be2bdd8.js"><\/script><!--kg-card-end: html--><p>Let's look at one more example, let's say we want the best wizard for each house. We can tweak our previous function to use the best wizard for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5428d9c0713e7ddab3dfa3a8beb675c6.js"><\/script><!--kg-card-end: html--><p>If you're curious, the result of that looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fdac1cee43ba855a48af1abe0ba86629.js"><\/script><!--kg-card-end: html--><p>Just a little more fun now, we can use <code>Object.values</code> to transform this map.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/98890f863a695769975f6eafebd2480b.js"><\/script><!--kg-card-end: html--><p>Now we have nice strings for the best person in each house.</p><h1 id="wrapping-up">Wrapping Up</h1><p>Hopefully you're more comfortable with map, filter, and reduce now. If you'd like a deeper dive into practical FP check out my article, <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a>.</p><p>If you're looking for more abstract stuff check out <a href="__GHOST_URL__/what-the-functor/"><strong>What the Functor?</strong></a><strong> </strong>and <strong><a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda.</a> </strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p>`,tags:["Tech","functional-programming"]},{id:12,slug:"throttle-and-debounce",title:"Throttle and Debounce",date:"March 03, 2019",excerpt:"In this article, we're going to talk about two of the most important functions in frontend development, throttle and debounce.",content:`<p>In this article, we're going to talk about two of the most important functions in frontend development, throttle and debounce.</p><p>Both of these functions are commonly used to deal with situations where a user is causing an event handler to fire on repeat and we want to slow down the underlying function call. Think scroll handlers, keyboard events, or even just clicking a button rapidly.</p><h1 id="throttle">Throttle</h1><p>Throttle is a <a href="http://matthewgerstman.com/functional-programming-fundamentals/">higher order function</a> that takes a function and a timeout and only allows that function at most once per the amount of time specified.</p><p>Before we use throttle. Let's start with an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c5d7a590204043ad7982946b3ca63a5c.js"><\/script><!--kg-card-end: html--><p>In this example above we have a piece of state <code>numSpells</code> and a function that can increment this state <code>castSpell</code>. We have a button we can click that increments <code>numSpells</code>. You can play with it below.</p><!--kg-card-begin: html--><iframe frameBorder="0" height="130px" src="https://debounce-throttle.matthewgerstman.dev/basic"></iframe><!--kg-card-end: html--><p>Now you can click this button as quickly as you want and it will increment the number of spells cast. Now spells take some time to recharge, so we can use throttle to slow down the user.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/cc13aaffdcf78987efb8a61d403324bc.js"><\/script><!--kg-card-end: html--><p>We now have a button that call <code>castSpellThrottled</code> when the user clicks it. Try it out below.</p><!--kg-card-begin: html--><iframe frameBorder="0" height="130px" src="https://debounce-throttle.matthewgerstman.dev/throttle"></iframe><!--kg-card-end: html--><p>Now that we understand what it does, lets dive into the source of throttle.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d8d2090f84290dbcfe92ba51ef5dc6a8.js"><\/script><!--kg-card-end: html--><p>What's going on here? Throttle is a function that takes a function and a timeout. Throttle returns a new function that forms a closure around the original one.</p><p>We keep track of a <code>boolean</code> called <code>ready</code> that stops the inner function from firing unless the timeout has elapsed. If we fire the function we also fire a timeout that will set <code>ready</code> to true when the timeout has elapsed. Pretty cool, huh?</p><h1 id="debounce">Debounce</h1><p>Debounce is a bit different from throttle. With throttle we slow down function calls as they happen, with debounce we don't fire at all until the user has stopped calling it.</p><p>This is really useful if you want to perform a computation or hit an api when the user is done typing or done scrolling. Let's play with another example.</p><!--kg-card-begin: html--><iframe frameBorder="0" height="130px" src="https://debounce-throttle.matthewgerstman.dev"></iframe><!--kg-card-end: html--><p>You'll notice, you can click Cast Spell Debounced as many times as you'd like, but it will only fire after you've stopped clicking it. The source for this is similar to the previous component.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d4fea64d5553a71058bbaef129d08d09.js"><\/script><!--kg-card-end: html--><p>Now that we know what it does, let's see how it works.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f9b5c2df747a4e50b46ea4cc2e7e68b0.js"><\/script><!--kg-card-end: html--><p>While the last one relied on a simple boolean, with this one we need to maintain access to the timer. We do this because we need to clear the previous timeout every time the function gets called again. We then set a new timeout to call the inner function.</p><h1 id="real-world">Real World</h1><p>Now these implementations of throttle and debounce were both very naive. If you take a look at the <a href="https://github.com/lodash/lodash/blob/master/debounce.js">lodash source</a> you can see a much more advanced version of debounce that considers things like calling the function before or after we set the timeout.</p><p>It also allows fancy things like a <code>maxWait</code> and a <code>cancel</code>. They even implement <a href="https://github.com/lodash/lodash/blob/master/throttle.js">throttle with debounce.</a></p><h1 id="wrapping-up">Wrapping Up</h1><p>Hopefully you've learned a bit about debounce and throttle. For more real world code, check out some of my other articles <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamental</strong></a><strong> </strong>or <a href="__GHOST_URL__/map-filter-reduce/"><strong>Map, Filter, Reduce</strong></a><strong>.</strong></p><p>If you're looking for more abstract stuff check out <a href="__GHOST_URL__/what-the-functor/"><strong>What the Functor?</strong></a><strong> </strong>and <strong><a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda.</a> </strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p>`,tags:["Tech"]},{id:19,slug:"history-of-the-web",title:"History of the Web: Part 1",date:"June 01, 2021",excerpt:"Today I'm going to share twenty years of context on the web. We'll talk about how the web evolved into what we have today, and why it makes building web applications so hard in 2021. ",content:`<p>Hey Technical Friends! It's been a while since I wrote anything. 2020 was well, 2020. Anyway, I started working at Bluecore! I've been tasked with leading frontend. As a result, I've been teaching a whole lot of people about the web.</p><p>If you didn't know, I've been toying with the web for over twenty years now. I started as a kid sometime around the year 2000. I remember learning about HTML 4 when it was brand new. As a teenager, I built websites for local businesses.</p><p>I started in the industry in 2012, working for <a href="https://blogs.gartner.com/martin-kihn/cookies-chaos-and-the-browser-meet-lou-montulli/">Lou Montulli</a> and I've been doing one thing or another on the web ever since.</p><p>As I get ramped up on a new job, I keep thinking about the sheer number of tools we take the time to configure. I've been writing proposals for frontend architecture and laying out a vision for a north star.</p><p>In the process of this, I've realized how important all this context on the web is. Knowing where we came from can help us figure out where we should go. It's also a mountain of technical debt, and we're collectively building on top of it.</p><p>Forgive me if I skip the wonderful stories of Macromedia Flash, Java in the browser, or whatever other detour you can think of. While those were important to development of the web, most of us will never run into them again.</p><hr><h1 id="back-to-basics">Back to Basics</h1><p>The first <strong>Hyper Text Markup Language (HTML)</strong> spec was released in <strong>1993</strong> as a way to represent web pages, then documents. Initially, HTML was completely static, requiring a full page reload to change. </p><pre><code class="language-html">&lt;!-- An entire web page could look like this: --&gt;
&lt;form action="/api/doctor"&gt;
  &lt;div class="row"&gt;
      &lt;label for="actor"&gt;Actor: &lt;/label&gt;
      &lt;input id="actor" placeholder="David Tennant"/&gt;
  &lt;/div&gt;
  &lt;div class="row"&gt;
      &lt;label for="companions"&gt;Companions: &lt;/label&gt;
      &lt;input id="companions" placeholder="Rose, Martha, Donna"/&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/form&gt;
&lt;!-- Note: Many of these tags were unavailable in HTML 1.0 --&gt;</code></pre><p><strong>JavaScript </strong>appeared in <strong>1995</strong> and provided a weakly typed scripting language for handling events. It was only occasionally used to change the contents of the page. </p><p><strong>CSS</strong> arrived in <strong>1996</strong> and provided a new way of declaring the look and feel of a website, separate from the primary content in the document.</p><p>For dynamically rendered pages, we would use a language like <strong>PHP (1995)</strong> that could provide a server generated HTML document in response to a request. JavaScript was mostly sprinkled in to add interactivity to the page.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-17.png" class="kg-image" alt loading="lazy" width="550" height="518"><figcaption><em>Mosaic, One of the first browsers</em></figcaption></figure><h2 id="the-dom">The DOM</h2><p>Things really got interesting when the<strong> Document Object Model (DOM)</strong> was introduced in <strong>1998. </strong>The DOM<strong> </strong>is a cross-platform and language-independent interface that treats an XML or HTML document as a tree structure. Each node is an object representing a part of the document. (<em><a href="https://en.wikipedia.org/wiki/Document_Object_Model">Thanks Wikipedia</a>)</em></p><p>This provided a <em>mostly</em> consistent interface across browsers for JavaScript based applications to make changes to the content being displayed in the browser. Before the DOM, we had similar tree-based structures, but they weren't yet standardized across browsers. As a result, the APIs were wildly inconsistent. The function <code>getElementById</code> wasn't standardized until 2000. Keyboard event handling wasn't standard until 2004.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-2.png" class="kg-image" alt loading="lazy" width="500" height="600"></figure><h2 id="s-websites-web-applications-g">s/Websites/Web Applications/g</h2><p>In the early 2000s websites began to go from simple pages to complex applications. Some of the most notable first web applications were Myspace (2003), Gmail (2004), Digg (2004), Google Maps (2005), </p><p>These were some of the first applications to use AJAX (<a href="https://web.archive.org/web/20050222032831/http://www.adaptivepath.com/publications/essays/archives/000385.php">Asynchronous JavaScript and XML</a>). This was a watershed moment for the web, as we were finally able to update an app without reloading the whole page.</p><p>Each browser implemented the JavaScript spec, <strong>ECMAScript (1997), </strong>slightly differently.<em> Aside, If you must know, it was previously the European Computer Manufacturers Association, but now its just Ecma.</em></p><p>This meant that application developers were constantly writing hacks like this:</p><pre><code>if (isIE()) {
  // ie.stuff()
} else {
  alert("Sorry, please use Internet Explorer");
}</code></pre><p>You can bet that <code>// ie.stuff()</code> was a thousand lines of code inside of an if else block.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-3.png" class="kg-image" alt loading="lazy" width="450" height="300"></figure><h2 id="browser-history">Browser History</h2><p>To understand how fragmented the web was, we need to discuss some browser history.</p><p>Netscape was the original market leader in 1994.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-4.png" class="kg-image" alt loading="lazy" width="1023" height="576" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-4.png 600w, __GHOST_URL__/content/images/size/w1000/2021/05/image-4.png 1000w, __GHOST_URL__/content/images/2021/05/image-4.png 1023w" sizes="(min-width: 720px) 720px"><figcaption>Netscape showing the Ask Jeeves homepage.</figcaption></figure><p></p><p>Internet Explorer gained relevance in 1996 with their plugin architecture ActiveX.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-6.png" class="kg-image" alt loading="lazy" width="920" height="576" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-6.png 600w, __GHOST_URL__/content/images/2021/05/image-6.png 920w" sizes="(min-width: 720px) 720px"></figure><p>Internet explorer was the clear leader for a very long time. Its market share didn't go under 50% until 2010!</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn.statcdn.com/Infographic/images/normal/1438.jpeg" class="kg-image" alt loading="lazy"><figcaption><em>Taken from <a href="https://www.statista.com/chart/1438/browser-market-share-since-2008/">Statista</a></em></figcaption></figure><p>Even the Mac ran Internet Explorer until 2003 when Apple released Safari.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-10.png" class="kg-image" alt loading="lazy" width="770" height="433" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-10.png 600w, __GHOST_URL__/content/images/2021/05/image-10.png 770w" sizes="(min-width: 720px) 720px"><figcaption>Safari 1.0 on Mac OS</figcaption></figure><p>Internet Explorer's demise began when Netscape was reborn as Mozilla Firefox in 2004. Firefox was considered much more secure than Internet Explorer and included features like tabs and an integrated pop-up blocker.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-5.png" class="kg-image" alt loading="lazy" width="410" height="293"><figcaption>Mozilla Firefox 1.0 on Windows XP</figcaption></figure><p>We didn't see Chrome until 2008  amusingly, it was considered a big deal that Google was creating a browser. </p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-8.png" class="kg-image" alt loading="lazy" width="770" height="526" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-8.png 600w, __GHOST_URL__/content/images/2021/05/image-8.png 770w" sizes="(min-width: 720px) 720px"></figure><p>For a while we had four browsers with meaningful marketshare. This meant the web had to standardize on the open source ECMAScript as opposed to something proprietary. </p><h2 id="web-2-0">Web 2.0</h2><p>While all this browser nonsense was happening, application complexity was going up. Web 2.0 brought about new expectations with regards to interactivity. Instead of statically generated sites, users uploaded their own content. This required lots of client-side business logic that was previously unnecessary.</p><p>Two of my favorite Web 2.0 era sites were Digg and Meebo.</p><p>Digg was one of the first social news sites, featuring user submitted stories and upvotes. It even spun off one of the very first podcasts, Diggnation.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-12.png" class="kg-image" alt loading="lazy" width="400" height="300"></figure><p>Meebo was a popular messaging app that allowed users to sign into multiple messaging services at once, from anywhere.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2021/05/image-11.png" class="kg-image" alt loading="lazy" width="560" height="460"></figure><hr><h2 id="jquery">jQuery</h2><p>We now have increasing feature requirements built on a language spec that no one could agree to. This meant application developers were left to deal with it.</p><p>jQuery abstracted that problem away. Instead of writing different code for two or three browsers, you could write once using a simple library. jQuery 1.0 was a decent amount of code, but we weren't concerned about bundle size yet, and we needed our stuff to work.</p><p>Code looked like this:</p><pre><code>var doctor = $('.doctor').attr('data-actor').value()
if (doctor === "David Tennant") {
  callRoseTyler();
} else if (doctor === "Matt Smith") {
  callAmyPond();
}</code></pre><p>Furthermore it provided a simple interface for making API requests against a server, now we could do things like make API requests and issue callbacks in response to those requests.</p><p>This was revolutionary, and kicked off the next wave of complex web applications. Here's what the source of one of those applications might look like.</p><figure class="kg-card kg-code-card"><pre><code>var companions = [];
var enemies = [];
var number = 10;

$.get("/api/companion/1", function (companion) {
  $('.name', companion.name); // Rose Tyler
  $('.seasons', companion.seasons); // Seasons 1 and 2
  companions.push(companion);
});

$(document).on("click", ".display_tardis", function (e) {
  e.preventDefault();
  $(".container").html("&lt;img src=/tardis /&gt;");
});

// Another thousand lines of code that looks like this.</code></pre><figcaption>f</figcaption></figure><p>We're now hitting APIs, storing state, and changing page markup  sometimes at the response of a button. As these apps grew in size we had to figure out how to provide some structure. From there, we started to see MVC frameworks.</p><h2 id="mvc">MVC</h2><p>The Model View Controller pattern was widely popular on the backend and it seemed logical to bring it to the frontend. Most engineers were used to working with a backend MVC framework, and they could reason with the way frontend worked.</p><p>The two most popular frontend frameworks were Backbone and Angular.</p><p>In an MVC world we have a model for storing data, a view for presenting it, and a controller for the business logic in between. MVC is object oriented, with different objects having different functions. For example, models could sync their state against a REST api.</p><p><em>Aside: we were collectively really into the full REST pattern for a while, but we're mostly back to GETs and POSTs.</em></p><p>These frameworks were very much a precursor to the modern React ecosystem. They featured built in templating languages and separated the logic of updating the DOM and manipulating application state.</p><p>That said, state management was still difficult. Different models were constantly falling out of sync with each other and imperative DOM mutations meant race-conditions galore.</p><h2 id="bundle-size">Bundle Size</h2><p>This is when bundle size became a problem. While the dependencies weren't huge, we were writing so much code on top of it. We also weren't consistently serving minified or even gzipped files. It was also expensive to make a round trip to the server to serve some JS only to fetch some more.</p><p>To solve this, we needed to concatenate the files to reduce requests, minify them to reduce file size, and gzip them to reduce size over the wire. This would often lower the payload size by 5x.</p><p>However the client still had to parse it! A few years ago, I profiled this and it took roughly 1 millisecond per uncompressed kilobyte of javascript to parse it and run it for the first time. Even with modern frameworks, each file has to execute at least once before the page is interactive to put all the functions in place.</p><p>Regardless. We focused on reducing the amount of code sent over the wire. That could mean shrinking it, or optimizing when we loaded it. It's important to remember that before this, we would serve each unminified source file separately.</p><p><strong>This was how we became obsessed with tooling.</strong> We needed to do a bunch of things to our code before we shipped it down. We needed to concatenate source files into bundles grouped by functionality, minify them, and put a hash in the filename for cache busting. It got complicated, and this lead to an entire ecosystem of tools: npm, grunt, gulp, and eventually webpack.</p><h2 id="language">Language</h2><p>After we introduced a build step, we were able to begin tweaking the language itself. In 2009 CoffeeScript was released. It was a brand new langauge that compiled to JavaScript and had new features like arrow functions, optional chaining, and modern string interpolation.</p><p>Much like jQuery ascended into modern DOM apis, CoffeeScript ascended into JavaScript. Many of its more novel features made their way into ECMAScript and we moved off of it.</p><p>In addition, we had libraries like underscore and lodash influencing JavaScript. ES6 gave us map, filter, and reduce right in the language. This rendered the bulk of these libraries obsolete.</p><p>In 2014, 6to5 (later babel) was introduced. This allowed us to write source code using the new ES6 (ECMAScript 6) spec without dropping support for older browsers. It worked by transpiling newer ES6 into ES5. </p><p>This was one of the biggest developments the web has ever seen. The ability to improve the language without worrying about old browsers. Development on ES6 was accelerated and <a href="__GHOST_URL__/tech/es-everything/">TC39</a> were able to move to yearly releases.</p><p>CSS and HTML evolved as well. HTML 5 was released in 2014 and brought about a whole set of new tags we could implement against. CSS saw new dialects like SASS (2006) and LESS (2009) that were supported by the same build tooling we used for JavaScript.</p><h1 id="almost-there">Almost There</h1><p>We've reached the point where the JavaScript ecosystem looked a lot like the modern web. Let's take a look at a very common stack in 2015.</p><ul><li><strong>Language: </strong>ES6 was new and CoffeeScript was still heavily in use. New codebases were using babel, but many were still in CoffeeScript or even ES5.</li><li><strong>Libraries: </strong>jQuery was evolving into everyone's favorite piece of tech debt. Lodash was still very popular.</li><li><strong>Tooling: </strong>Build tools like Grunt and Gulp were largely task runners. One was config heavy the other was code heavy.</li><li><strong>Performance: </strong>Serving had gotten faster, but we were still doing DOM mutations by hand which was slow and error prone.</li><li><strong>Styling: </strong>LESS and SASS were actually pretty good for their time.</li></ul><h1 id="modules">Modules</h1><p>We haven't discussed modules yet. For a very long time we would include JavaScript on a page via a series of <code>&lt;script /&gt;</code> tags and make sure to load it in the right order.</p><p>For a while there were two competing standards/tools for modularizing JavaScript: commonJS, and AMD (asynchronous module definition). ESModules weren't <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">standard until 2018.</a></p><p>There were also a number of tools that shipped between 2009-2013, most notably requireJS. These tools provided a mechanism for isolating JavaScript and declaring dependencies within projects.</p><p>The problem was it was a nightmare to write. Here's what a standard file looked like with requireJS.</p><pre><code>requirejs(["jQuery", "underscore", "backbone"], function($, _, Backbone) {
  // This function is called when all of its dependencies have loaded.
  // Above, we have a 1:1 mapping of path to module export.
});</code></pre><p>These require statements got sufficiently large and they were written by hand for a long time. </p><p>Webpack was first released in 2014 and it was the first mainstream tool to combine building and dependency management all-in-one. It included the new <code>import</code> statement which compiled down to whatever <code>require</code> statement was necessary.</p><p>We haven't even discussed Node, but around this time isomorphic JavaScript was becoming popular (running the same code on the client and the server).</p><h1 id="react">React</h1><p>Seemingly out of nowhere, Facebook released React at the end of 2013. There were a bunch of problems with the current state of web development and React aimed to solve them:</p><ol><li>We were intermingling business logic with DOM mutations.</li><li>We were storing data on actual DOM nodes.</li><li>Reading/writing to the DOM was expensive.</li><li>State management was a nightmare, everything was constantly falling out of sync with everything.</li></ol><p>In 2014 Facebook gave a now legendary talk titled: <em>Hacker Way: Rethinking Web App Development at Facebook. </em></p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/nYkdrAPrdcw?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><p>This talk detailed how they introduced React and adopted the Flux pattern to simplify web development. React made one simple promise, UI is a function of state.</p><p>The flux pattern works as follows. We have a datastore sitting at the top of our application, React would read from that datastore and render UI, whenever it needed a state change it would issue an action that updated the data store. This would trigger a rerender of the entire application.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-15.png" class="kg-image" alt loading="lazy" width="1280" height="866" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-15.png 600w, __GHOST_URL__/content/images/size/w1000/2021/05/image-15.png 1000w, __GHOST_URL__/content/images/2021/05/image-15.png 1280w" sizes="(min-width: 720px) 720px"><figcaption><em>Taken from the<a href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts"> Redux Docs</a></em></figcaption></figure><p>But there was magic! React introduced the virtual DOM which effectively eliminated the imperative DOM mutation problem.</p><p>React provides an interface for writing declarative components. This means you tell React <em>take this state and turn it into this UI. </em>What it doesn't do is tell you how to get from (State A, UI A) to (State B, UI B); React did all of that under the hood.</p><p>React would do a full render of State A, later it would do a full render of State B and then it would do a diff on two virtual DOMs (as opposed to the slow real DOM) and determine the minimum set of changes to make to the DOM.</p><p>React also introduced a syntax called JSX, a way to write html-like markup directly inside a JavaScript module. This allowed developers to create components with business logic adjacent to markup, without actually putting HTML strings in code.</p><p>This made applications both faster and more predictable, a win for everyone. Eventually, Redux became the most popular flux implementation. This led to the popularity of <a href="__GHOST_URL__/tech/functional-programming-fundamentals/">functional programming</a> on the web.</p><p>Here's what some React code might look like.</p><pre><code class="language-javascript">import React from "react";

function TheDoctor({ number, actor, companions }) {
  return (
    &lt;div&gt;
      &lt;h1&gt;The {number} Doctor&lt;/h1&gt;
      &lt;h2&gt;Played by {actor}&lt;/h2&gt;
      &lt;div className="companions"&gt;
        {companions.map((companion) =&gt; (
          &lt;Companion {...companion} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
&lt;TheDoctor
  number="Twelfth"
  actor="Peter Capaldi"
  companions={["Clara Oswald", "Nardole", "Bill Potts"]}
/&gt;;
</code></pre><h1 id="typescript">TypeScript</h1><p>Over the years JavaScript kept getting better. We moved from big releases like ES6 to iterative yearly releases like ES2021. It only made sense that someone would add types.</p><p>TypeScript is a statically typed language that compiles down to traditional JavaScript. It enforces type checking at compile time however the runtime code is still untyped. This works well enough even if it's not perfect.</p><p>While TypeScript was first released in 2008, it didn't get mainstream adoption until a decade later, in 2019. As far as I'm aware, Dropbox was one of the first companies to adopt <a href="https://dropbox.tech/frontend/the-great-coffeescript-to-typescript-migration-of-2017">TypeScript at scale in 2015</a>, or maybe I'm just really proud of the migration we did.</p><p>TypeScript started to get good during the 2.x phase. These versions brought strict null checks, async functions, enums, <code>Pick</code>, and a whole range of utilities we take for granted today. Since then, it's become more and more powerful, and has quickly rose to be the most popular dialect of Javascript.</p><p>With the advent of types, we could now enforce contracts between different parts of the codebase.</p><pre><code>type DoctorProps = {
  number: string;
  actor: string;
  companions: string[];
}

function TheDoctor({ number, actor, companions }: DoctorProps) {
  // Function Body
}

&lt;TheDoctor
  // Type 'number' is not assignable to type 'string'. ts(2322)
  number={13}
  actor="Jodie Whittaker"
  companions={["Graham", "Ryan", "Yasmin"]}
 /&gt;</code></pre><p>If you're curious, I once gave a talk on why TypeScript is amazing.</p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/KdvEGPiULAQ?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><hr><h1 id="the-mountain-of-technical-debt">The Mountain of Technical Debt</h1><p>All of that history, and we've reached web development in 2021. We also skipped a lot: GraphQL, advancements in CSS (modules, styled components, etc), and the entire node ecosystem.</p><p>When looked through the lens that <a href="https://blog.professorbeekums.com/all-code-is-debt/">all code is technical debt</a>, there's a mountain. We're still building web applications using fundamentally the same tools we were 20 years ago: JavaScript, HTML, and CSS.</p><p>They've evolved quite a bit, but they continue to maintain support for every website ever built. Furthermore, any sufficiently large codebase will include artifacts from its past. How many of us claim to be running TypeScript + React, but secretly have some backbone, some jQuery, or some checked-in-decaffeinated CoffeeScript? And that's just the stuff I can think of.</p><p>Even with the latest features in ES2021, the vast majority of websites are still targeting ES5, a language released in 2009. We can add types and declarative runtimes, but it will eventually execute in a typeless and imperative environment.</p><p>Our obsession with tools has reached new heights. Let's take a look at a pretty standard setup for a modern application:</p><ul><li><strong>TypeScript </strong>- Adds support for types and newer ES features. Usually compiles to ES5.</li><li><strong>React 17 + React DOM - </strong>About 35kb gzipped runtime that allows for declarative programming.</li><li><strong>Apollo - </strong>Popular graphql library for API requests. About 33kb gzipped.</li><li><strong>NPM - </strong>Package manager, supports pulling in third party dependencies (including the ones listed here).</li><li><strong>Webpack - </strong>Build tool, runs the underlying TypeScript compiler and handles minification, bundle splitting, etc.</li><li><strong>ESLint - </strong>Lints code for style and potentially runtime errors.</li><li><strong>Prettier </strong>- Code formatter, standardizes whitespace, quotes, and semicolons.</li><li><strong>CSS Modules - </strong>Allows importing CSS directly in JavaScript files.</li><li><strong>Jest - </strong>Unit test runner.</li><li><strong>Cypress - </strong>End to end test runner.</li></ul><p>That's a lot of tools! Today's web developers need to know about all of them, how they interact with each other, and how they interact with all that <em>legacy</em> code that isn't going anywhere.</p><p>The list keeps going, and the worst part, all of these tools are written in JavaScript, which leads to extended build times, test runtimes, and one dragged out feedback loop.</p><p>In fact, most of the recent developments in performance have been achieved by writing JavaScript tooling in other languages! The esbuild team saw 150x performance gains over webpack 5 by writing their bundler in go.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2021/05/image-16.png" class="kg-image" alt loading="lazy" width="800" height="150" srcset="__GHOST_URL__/content/images/size/w600/2021/05/image-16.png 600w, __GHOST_URL__/content/images/2021/05/image-16.png 800w" sizes="(min-width: 720px) 720px"><figcaption>Taken from the <a href="l">esbuild docs</a></figcaption></figure><h2 id="page-loads">Page Loads</h2><p>This is just in our terminal! Even if we fix the tools, we still have to ship code down to the browser. Here's what an average pageload might look like.</p><ul><li>Http requests comes in to server</li><li>Server provides initial HTML markup</li><li>HTML is scanned, <code>&lt;script /&gt;</code> tags are loaded.</li><li>JavaScript comes down over the wire, is parsed and executed for the first time.</li><li>JavaScript code makes a network request for content over a JSON API.</li><li>API request comes back, JavaScript renders page, the page is finally interactive.</li><li>Lazy loaded code begins loading.</li><li>Modules pop into the page as we fetch and render code/content asyncronously.</li></ul><p>There are tons and tons of performance optimizations we can do here, but at the end of the day we either have to pay this cost in the form of time or complexity. Any performance optimization we do makes serving more complex and creates more places for our stuff to break.</p><hr><h1 id="the-future">The Future</h1><p>The two projects I find most interesting are <a href="https://svelte.dev/">Svelte</a> and <a href="https://deno.land/">Deno</a>. There are a number of competitors to React, most notably Vue and Angular 2. While they have their own approaches to application development, they still ship a runtime down to the browser.</p><p>Svelte is different, it has no runtime. It does all of its work at compile time so that you can send down as little code as possible. While Svelte hasn't been meaningfully adopted at scale, I believe whatever takes the throne from React won't have a runtime.</p><p>Deno is a secure runtime for TypeScript. Its built in rust and totally overhauls how we run v8 in the server. While it still runs V8, they've largely abstracted that away from the user, allowing it to be swapped out in the future.</p><p>I believe we've found the correct interfaces for web development. TypeScript and React provide an incredible developer experience with the constraints they're built on. What if we took TypeScript and React and honest-to-god compiled it. What if we could ship the React runtime as part of the browser? What if we took advantage of type data at runtime?</p><p>If we started to do this, we would take the existing paradigms frontend engineers are familiar with, but turbocharge their implementation. Until then, we're going to keep executing our code in the same environment we were in 1998.</p>`,tags:["Tech","frontend","javascript","typescript"]},{id:7,slug:"how-redux-works-2",title:"How Redux Works - Part 2",date:"January 30, 2019",excerpt:"In this post we'll cover the various other files in the library. While some of these contain simple utilities, others are much more complex. We'll also cover the infamous redux-thunk.",content:`<p><em><em>This is part </em>two <em>of a two part series. For part </em>one<em> </em><a href="__GHOST_URL__/how-redux-works/">see here.</a></em></p><p>In our <a href="__GHOST_URL__/how-redux-works/">last post</a> we covered the bulk of how Redux works with <code><a href="https://www.matthewgerstman.com/how-redux-works/">createStore</a></code>. In this post we'll cover the various other files in the library. While some of these contain simple utilities, others are much more complex. We'll also cover the infamous redux-thunk. Before we get to redux-thunk though we need to cover <strong>applyMiddleware.</strong></p><p><em><em>A note on embedded source: The most up to date redux source is <a href="https://github.com/reduxjs/redux/tree/master/src">available here</a>. I'll be embedding source code as of when this post was written</em>.</em></p><h1 id="applymiddleware">applyMiddleware</h1><p>Now you might remember from <a href="__GHOST_URL__/how-redux-works/"><a href="__GHOST_URL__/how-redux-works/">part </a>one</a> that we have the notion of a store enhancer. These wrap the store and can modify it's exported functions. In this case, <code>applyMiddleware</code> is a store enhancer that wraps <code>dispatch</code>.</p><p>So when we create our store, we pass <code>applyMiddleware</code> with a middleware as the second argument.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/398b682e6c20d20e426e9334f01a3dec.js"><\/script><!--kg-card-end: html--><p>This second argument triggers the following block from <code>createStore</code>:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9388c9b6dd4c167424a05c6b72a49168.js"><\/script><!--kg-card-end: html--><p>Once again we're gonna be looking at functions all the way down. Enhancer is a function that takes <code>createStore</code> and returns a new version of <code>createStore</code>. </p><p>Upstream we've passed <code>applyMiddleware(thunk)</code> as the <code>enhancer</code>.</p><p>Let's take a look at just the function signature of <code>applyMiddleware</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/79fa2ae4cb62e6594c50193fef69d00b.js"><\/script><!--kg-card-end: html--><p>The first layer of <code>applyMiddleware</code> takes a list of functions, or middleware, that we're going to apply. Here's how we might call <code>applyMiddleware</code> in our application.</p><p>In this case we're only passing <code>thunk</code> but in another application we may want to pass more. <code>applyMiddleware</code> then returns a new function that takes <code>createStore</code> as it's argument. </p><p>This then returns a third function which takes the arguments that we would pass to <code>createStore</code>. In the code sample above, that would be <code>reducer</code> and <code>preloadedState</code>.</p><p>As an aside, the process of returning functions that each require a single argument is called currying. You can read more about that in <a href="__GHOST_URL__/functional-programming-fundamentals/">Functional Programming Fundamentals</a>.</p><p>Okay this third function is now the bulk of <code>applyMiddleware</code>. It has a bound copy of <code>middlewares</code> and <code>createStore</code> and takes whatever arguments we're going to pass to <code>createStore</code>.</p><p>Let's examine the body of this function, or at least the first half of it.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5c27fe5e7f0ddb7df39052b88eb982ba.js"><\/script><!--kg-card-end: html--><p>The first thing it does is, surprise, calls <code>createStore</code> with these arguments. Then it temporarily overwrites <code>dispatch</code> to make sure our consumers don't accidentally call it while we're setting up the store. This pattern should look familiar from <a href="__GHOST_URL__/how-redux-works/"><a href="__GHOST_URL__/how-redux-works/">part </a>one</a>, we're validating before doing business logic.</p><p>Okay now let's look at the entire function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8d79f0ff97192a91bea13f8534aa5b3a.js"><\/script><!--kg-card-end: html--><p>This function then loops over the list of middleware, which are functions, and calls them with the <code>middlewareAPI</code>. This gives those functions a bound reference to dispatch and <code>getState</code>. It then <code>composes</code> the list of middleware together (more on that later) and gives this new function access to the original <code>dispatch</code> that can only take a plain object.</p><p>Finally, it returns a new object with all the old methods on the store plus this new, wrapped dispatch.</p><h2 id="redux-thunk">Redux Thunk</h2><p>While we're composing middleware, this is a great time to take a look at my personal favorite, Redux Thunk.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4860c96843b35db2438c52767fa230a5.js"><\/script><!--kg-card-end: html--><p>Wow, thats a dense 14 lines of code, and once again it's functions all the way down. Now might be a good time to refresh on <a href="__GHOST_URL__/functional-programming-fundamentals/">currying</a>. Let's step through this line by line.</p><p>The first bit is <code>createThunkMiddleware</code>, this function allows us to bind an extra argument to all thunks. This can be used as a way to inject dependencies into all of your action creators at runtime. For example, you might want to only allow API calls from within an action creator. This would let you enforce that.</p><p>You'll notice that by default this function exports a thunk middleware with no extra argument. Most people just use thunk without an extra argument.</p><p>Lines 2-8 are the bulk of the logic here. We return a function that takes <code>{dispatch, getState</code>. This is the same <code>middlewareAPI</code> you saw above. So now we have a bound function with <code>dispatch</code>, <code>getState</code>, and maybe an <code>extraArgument</code>.</p><p>Two more functions to go. This returns a function that takes the <code>next</code> middleware to call. This is effectively calling a chain of middlewares until we get to the plain <code>dispatch</code>. Finally, this returns a function that takes an <code>action</code>.</p><p>Lines 3-7 are now the actual <code>thunk</code> logic. If the action is a function, we call it and pass it <code>dispatch</code>, <code>getState</code>, and <code>extraArgument</code>. If it's a plain action, we just pass that on to the next middleware or the original <code>dispatch</code>. </p><p>As an aside, this process is called trampolining in computer science.</p><h1 id="compose">Compose</h1><p>Okay we've now seen <code>applyMiddleware</code> and <code>redux-thunk</code>. Let's zero back in on a section of <code>applyMiddleware</code> that should make a little more sense now.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c8468374cb8a814f9dbf7b7b2cce1436.js"><\/script><!--kg-card-end: html--><p>This section calls each middleware with the <code>middlewareAPI</code> and then composes that chain together, with a final call to the original <code>store.dispatch</code>. Let's take a look at compose.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e139975425a5f190461c20c6b671650e.js"><\/script><!--kg-card-end: html--><p>What's this doing? Well compose takes a list of <strong>single argument </strong>functions and passes them to each other from right to left. So <code>compose(f, g, h)</code>would be the same as <code>(...args) =&gt; f(g(h(...args)))</code>.</p><p>You'll remember each middleware only takes a single argument at each phase, in this case that's <code>next</code>. </p><p>The first 8 lines are just optimizations. If we don't have any functions return an identity function and if we only have one function return that.</p><p>This last bit is the intimidating part:</p><p><code>return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))</code></p><p>What's going on here? Well, it's a reduce, another FP paradigm. It loops over <code>funcs</code> and then calls the function given to it with two arguments <code>accumulator</code> and <code>value</code>. In this case <code>a</code> is <code>accumulator</code> and <code>b</code> is <code>value</code>. <code>accumulator</code> is the return value of the previous function call.</p><p>Let's say we call <code>compose(f, g, h)</code>. First it loops over the array <code>[f, g, h]</code>. Then this logic happens <code>accumulator = (..args) = &gt; f(..args)</code>. Then we get to <code>g</code> and call <code>accumulator = accumulator(g)</code> or <code>accumulator = (...args) =&gt; f(g(..args))</code>. Finally it gets to <code>h</code> and calls <code>accumulator(h)</code> which is equivalent to <code>accumulator = (...args) =&gt; f(g(h(..args)))</code>.</p><p>If this is difficult to reason follow, don't stress. It took me a few hours to wrap my head around it.</p><h1 id="bindactioncreators">bindActionCreators</h1><p>While we're on the subject of actions. Let's talk about how our actions actually get access to <code>dispatch</code>. If you're using <code>react-redux</code> you probably just pass your action creators to <code>mapDispatchToProps</code> and let it take care of things for you. Well under the hood it's calling a function called <code>bindActionCreators</code>. Let's take a look:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d10b5bdb1aa3ea0ef0854e29749404e2.js"><\/script><!--kg-card-end: html--><p>Holy validation batman. Guess what, thats virtually all this function is doing. <code>bindActionCreators</code> either takes a map of action creators or a function that returns one. If it gets a function it just calls the singular <code>bindActionCreator</code> which we'll get to.</p><p>Otherwise it does a whole bunch of validation to make sure that our map is in the correct format.</p><p>Assuming that goes well, lines 15-23 loop over the map and create a new map with each function passed to <code>bindActionCreator</code>. Let's dig into that inner function now.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5855b7de59a79fe4f59036bf9d2b10e2.js"><\/script><!--kg-card-end: html--><p>Were you expecting something other than a closure? <code>bindActionCreator</code> returns an anonymous function that calls the original function <code>actionCreator</code> with whatever arguments the anonymous function got and then passes the result of <code>actionCreator</code> to dispatch. Crazy, huh?</p><h2 id="combinereducers">combineReducers</h2><p>There's one file left in <code>src</code> and that's <code>combineReducers.js</code>. It's a relatively big one, 178 lines, so we'll break it down. Much like the rest of redux, there's a lot of validation however it only exports one function <code>combineReducers</code>.</p><p>This function takes a map of keys to <code>reducer</code> and returns a new <code>rootReducer</code> that slices up the redux state amongst these keys. The callsite looks like this</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/191b00ffe4f3e2a052f762285bbe6e68.js"><\/script><!--kg-card-end: html--><p>In this case the <code>wizardReducer</code> will receive the slice of the store from the <code>wizard</code> key down and the <code>muggleReducer</code> will receive the slice of the store from the <code>muggle</code> key down.</p><p>Back to the actual redux source, let's take a look at the declaration for <code>combineReducers</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c7239957990bb935ec15f811d369d490.js"><\/script><!--kg-card-end: html--><p>These 29 lines are once again validation on our arguments. Redux loops over all the keys, makes sure they're all defined and point to a function. Interestingly, if it's not a function it doesn't bother complaining.</p><p>It also sets up the <code>unexpectedKeyCache</code> which is a reference to any unexpected keys we've warned about. </p><p>It then calls <code>assertReducerShape</code> our first big validation function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/56f2164f455995a358e022491aed7845.js"><\/script><!--kg-card-end: html--><p>This is a pretty nifty function, it loops over each key and makes sure they handle an <code>INIT</code> action and a randomly generated <code>PROBE_UNKNOWN_ACTION</code> properly. This ensures that all reduces return a <code>defaultState</code> when given no <code>initialState</code> and return <em>something </em>when they get an unknown action.</p><p>Back to <code>combineReducers</code>, after the validation phase it returns our new <code>rootReducer</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ec4d29d127c357c12e3a66286a3daa94.js"><\/script><!--kg-card-end: html--><p>But obviously, our <code>rootReducer</code> must do some validation of it's own! First off, if <code>assertReducerShape</code> threw an error, it throws that error on every single invocation. It doesn't allow us to fail silently here.</p><p>Second, if we're in dev mode it calls <code>getUnexpectedStateShapeWarningMessage</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3c30a9214369f63cc99643e137fc161f.js"><\/script><!--kg-card-end: html--><p>This is a big function but the bulk of the logic is right here.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0119aa89e891b33f7c2489d554b5e59d.js"><\/script><!--kg-card-end: html--><p>Basically, loop over the reducer keys and make sure they're identical to the state keys. Also remember any keys we've warned about in the past so we don't warn about the same issue repeatedly.</p><p>Finally, we get to the real logic below.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/176fa2cd86bc6edc34d4720ac1cf8b5c.js"><\/script><!--kg-card-end: html--><p>This loop takes every action and passes it to each reducer with the state it previously generated. It then does a simple reference check on each reducer's new state. If any of them are different, it returns a new object. Otherwise it just returns the previous state so upstream functions can memoize.</p><p>And that's redux! I hope you enjoyed this.</p>`,tags:["Tech","redux"]},{id:2,slug:"how-redux-works",title:"How Redux Works - Part 1",date:"January 29, 2019",excerpt:"In this article we'll be covering createStore. This is the function that sets up the redux store and provides access to getState, dispatch, subscribe, and replaceReducer. ",content:`<p><em>This is part one of a two part series. For part two <a href="__GHOST_URL__/how-redux-works-2/">see here</a>.</em></p><h1 id="create-store">Create Store</h1><p>I spend a lot of time walking people through Redux best practices and how to use it, and throughout this process I've found it really helpful to dive into the source itself. While this source is very readable and well commented, I thought I'd put together a blog post to break it down and add some more context.</p><p>In this article we'll be covering <code><a href="https://github.com/reduxjs/redux/blob/master/src/createStore.js">createStore</a></code>. This is the function that sets up the redux store and provides access to <code>getState</code>, <code>dispatch</code>, <code>subscribe</code>, and <code>replaceReducer</code>. </p><p><em>A note on embedded source: The most up to date redux source is <a href="https://github.com/reduxjs/redux/tree/master/src">available here</a>. I'll be embedding source code as of when this post was written.</em></p><h1 id="three-principals">Three Principals</h1><p>Before we get started we should reexamine the <a href="https://redux.js.org/introduction/three-principles">three principals</a> of redux. Below is an excerpt from the redux docs.</p><h3 id="single-source-of-truth">Single source of truth</h3><p>The <a href="https://redux.js.org/glossary#state">state</a> of your whole application is stored in an object tree within a single <a href="https://redux.js.org/glossary#store">store</a>.</p><h3 id="state-is-read-only">State is read-only</h3><p>The only way to change the state is to emit an <a href="https://redux.js.org/glossary#action">action</a>, an object describing what happened.</p><h3 id="changes-are-made-with-pure-functions">Changes are made with pure functions</h3><p>To specify how the state tree is transformed by actions, you write pure <a href="https://redux.js.org/glossary#reducer">reducers</a>.</p><h3 id="takeaway">Takeaway</h3><p>The important bit here is that everything is done with pure functions. As a result of this we prevent consumers from doing things like calling <code>dispatch</code> or <code>getState</code> from within a reducer.</p><p>As we talk about <code>createStore</code> we'll notice that the majority of the code enforces these constraints.</p><h1 id="function-signature">Function Signature</h1><p>Now that we've introduced this, let's dive into <code>createStore</code>. We'll start with the function signature.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/23ad2daace19787621102bf7c04e6d3a.js"><\/script><!--kg-card-end: html--><p>This takes three arguments <code>reducer</code> <code>preloadedState</code> and <code>enhancer</code>.</p><h2 id="reducer">Reducer</h2><p>The first one is hopefully straightforward. This is the <code>rootReducer</code> for your application. It's a pure function that takes a <code>state</code> and an <code>action</code> and returns a new <code>state</code>. It's most likely generated by <code><a href="https://github.com/reduxjs/redux/blob/master/src/combineReducers.js">combineReducers</a></code> which we'll cover in part 2.</p><h2 id="preloadedstate">preloadedState</h2><p>This is simply the state you'd like to start with. Most likely if you're using <code>preloadedState</code> you're doing one of two things. You have a server side rendered the page, or you have a data payload coming down with your source. Either way you have data you want loaded into redux as soon as the app is instantiated.</p><p>If you're not doing one of these you should probably just dispatch an action after the store is created.</p><h2 id="enhancer">enhancer</h2><p>I sometimes like to call this the <em>enchanter </em>because it really does some magic. The most common uses for this are the <a href="https://github.com/zalmoxisus/redux-devtools-extension">redux devtools</a> or adding <a href="https://github.com/reduxjs/redux/blob/master/src/applyMiddleware.js">middleware</a>, another thing we'll see in part 2.</p><h1 id="argument-validation-and-enhancing">Argument Validation and Enhancing</h1><p>The next lines of code are mostly argument validation. You can read the full source below but here's what it's doing:</p><ol><li>Ensures you've passed at most three arguments</li><li>Allow the user to only pass <code>reducer</code> and <code>enhancer</code>. If this happens it swaps the argument order.</li><li>Ensures the reducer is an actual function.</li></ol><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8268324853199df738b0e3b82670b703.js"><\/script><!--kg-card-end: html--><p>There is one <em>very interesting </em>thing going on here though. You can see it on line 22 in the gist above.</p><p><code>enhancer(createStore)(reducer, preloadedState)</code></p><p>If an <code>enhancer</code> function is provided it calls it with <code>createStore</code> as an argument. This function then returns a new <code>createStore</code> function which only takes <code>reducer</code> and <code>preloadedState</code>.</p><p>This pattern is very common in the redux source, wrapping functions in other functions. In fact I like to say it's functions all the way down.</p><p>This is also how <a href="https://github.com/zalmoxisus/redux-devtools-extension">redux devtools</a> works. It wraps the createStore function so it can inject wrappers around every exported function and listen to their inputs and outputs. We won't dive too deeply into this, but you can check out <a href="https://github.com/zalmoxisus/redux-devtools-extension/blob/7b0be59e5b28162ca00e99dcd2f092b8df493a47/src/browser/extension/inject/pageScript.js">that source here</a>.</p><h1 id="internal-state">Internal State</h1><p>Before we get to the function declarations, <code>createStore</code> needs to set up some internal state.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3a6d6b547dfb5b01b5f7b3f7aa1287a6.js"><\/script><!--kg-card-end: html--><p>Let's walk through each of these.</p><ul><li><code>currentReducer</code> - The root reducer redux calls.</li><li><code>currentState</code> - A reference to the key/value object that represents state</li><li><code>currentListeners</code> - This is a list of functions that have subscribed to redux.</li><li><code>nextListeners</code> - This is a reference to the updated listeners before a dispatch.</li><li><code>isDispatching</code> - Effectively a semaphore to block us from dispatching more than one action at a time.</li></ul><p>If these don't make total sense yet, especially the latter three, don't worry. We'll cover these more later.</p><h1 id="function-declarations">Function Declarations</h1><p>We're still inside of <code>createStore</code> but now we're declaring functions that will be used throughout the lifecycle of the store. Some of these will be returned as part of the store, others will only be used internally. I'll label each as we're going.</p><h2 id="ensurecanmutatenextlisteners">ensureCanMutateNextListeners</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/acf68892b5ffce759b6c7ff1114c8287.js"><\/script><!--kg-card-end: html--><p>This function seems inconsequential but it's actually very important. Redux supports pub-sub or publish-subscribe. We have no invariants around when a consumer may decide to subscribe to our store or unsubscribe from it. As a result <code>nextListeners</code> needs to be mutable at all times. </p><p>Consider, a listener might even unsubscribe as a result of being called!</p><p>As a result of this we only call listeners in <code>currentListeners</code> and let any new subscriptions modify <code>nextListeners</code>. </p><p>Under the hood, this works because <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">Array.prototype.slice</a></code> returns a new reference to the list so <code>currentListeners</code> and <code>nextListeners</code> point to different arrays.</p><h2 id="getstate">getState</h2><p>This is a fan favorite, this is the function that returns <code>state</code>. It get's returned as part of the store and returns a reference to the current underlying <code>state</code> object.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/73d678df7c701ec3a3478d536d0e46c1.js"><\/script><!--kg-card-end: html--><p>You'll notice there's an invariant here that prevents us from calling this function during a dispatch. There's a good reason for this. When reducers are combined they only get a slice of the state, more on that in part 2. We don't want a reducer to get access to this function and derive it's state from another namespace state tree. As a result this throws if we're in the middle of a dispatch.</p><p>You may be thinking, but I call <code>getState</code> from a thunk! We're specifically referring to the plain action <code>dispatch</code>, not thunk <code>dispatch</code>. We'll cover thunks in part 2.</p><h2 id="subscribe">Subscribe</h2><p>The next function created is <code>subscribe</code>. This is what notifies listeners that something in the store has changed. This function is returned as part of the store.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/91a474355477ea619c32005de42d318a.js"><\/script><!--kg-card-end: html--><p>Hopefully this pattern is starting to look familiar. Subscribe takes a function that gets called every time the internal <code>state</code> updates. It also does the following validation:</p><ol><li>Make sure the argument is actually a function.</li><li>Make sure we're not attaching a subscribe in the middle of a dispatch.</li><li>Make sure we can mutate listeners, otherwise we couldn't subscribe!</li></ol><p>It also creates some internal state, <code>isSubscribed</code>. This is used in the <code>unsubscribe</code> function it returns.</p><h2 id="unsubscribe-">Unsubscribe.</h2><p>We've covered how we start listening to things, we call <code>subscribe</code>. But how do we stop? Well <code>subscribe</code> conveniently returns a function called <code>unsubscribe</code> that allows us to stop paying attention to redux.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3600b8330c4a40417ea3bbc5c874beb1.js"><\/script><!--kg-card-end: html--><p>This function is very similar to <code>subscribe</code>. It checks <code>isSubscribed</code> (internal state) to see if it's already been called, and does some validation to make sure we're not currently <code>dispatching</code>. </p><p>Then it removes listener from the list.</p><h2 id="mapstatetoprops">mapStateToProps</h2><p>You might be thinking. I've been using redux for years, I've never called these functions. That's because most integration libraries will abstract all this away for us. In the case of the react-redux library this is taken care of in the <code><a href="https://github.com/reduxjs/react-redux/blob/85fb553ba8e3f4b0efc158d2e48aafb4c18a04d4/src/components/Provider.js">&lt;Provider /&gt;</a></code> component. We won't delve too far into that library but you can check out the <a href="https://github.com/reduxjs/react-redux">full source here</a>.</p><h1 id="dispatch">Dispatch</h1><p>It's worth a reminder that all of this is still being done in the context of the <code>createStore</code> function. The next function is the most important one, <code>dispatch</code>. This is the thing that updates the store and notifies listeners. Let's walk through it.</p><h2 id="validation">Validation</h2><p>Like every other function we've encountered. <code>dispatch</code> starts with a bunch of validation.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1d2e71c16f656255bc7edc5d79c5f387.js"><\/script><!--kg-card-end: html--><p>You can see above it's enforcing the following rules</p><ol><li>We're only dispatching a plain object.</li><li>That object has a property called <code>type</code>.</li><li>We are not currently dispatching.</li></ol><p>But once again you might be thinking, but I dispatch functions! This is taken care of by the thunk middleware, something to look forward to in part 2 of this article.</p><h2 id="business-logic">Business Logic</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/dd42acdb76fdeb65f66a5a45be266cac.js"><\/script><!--kg-card-end: html--><p>Now that we've made it this far, this function is probably much less impressive than you expected. Here's what it's doing.</p><ol><li>Set the <code>isDispatching</code> semaphore to <code>true</code></li><li>Call <code>currentReducer</code> with <code>currentState</code> and <code>action</code>. This returns a brand new state for our listeners.</li><li>Update listeners with the next set.</li><li>Loop through the list of listeners and call each of them.</li></ol><p>This is also where it's important that we keep <code>currentListeners</code> and <code>nextListeners</code> separate. While the reducer must be a synchronous pure function, there is no such invariant around any given listeners.</p><p>A listener may be async, take a long time, modify some global state, etc. It might even unsubscribe as a result of being called.</p><h1 id="two-more-functions">Two More Functions</h1><p>We've now covered the bulk of the business logic in <code>createStore</code>. There are now just two functions we need to mention, <code>replaceReducer</code> and <code>observable</code>.</p><h3 id="replacereducer">replaceReducer</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ab3646462fcbac0eea9b6f4d4d75a75.js"><\/script><!--kg-card-end: html--><p>The function itself seems pretty straightforward, we take a new reducer and replace the one we use in the store. Then we dispatch an action announcing this has happened.</p><p>This action will also have the "side effect" of copying over any state that the new reducer needs to know about.</p><p>Why would you need this? This function is particularly useful for <a href="http://matthewgerstman.com/redux-code-split-typecheck/">code splitting. </a>I wrote an entire article about how to <a href="http://matthewgerstman.com/redux-code-split-typecheck/">code split a redux store</a> so I'll leave that as a followup.</p><h2 id="observable">Observable</h2><p>This last bit I've never actually used, so I don't think I'm qualified to go into too much detail about it. Effectively it adds support for to support <code>observables</code>, a proposal to ecmascript. It's just a simple wrapper around <code>subscribe</code>/<code>unsubscribe</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/198ebd8fb599fe4563c0db2df6ad052a.js"><\/script><!--kg-card-end: html--><h1 id="wrapping-up">Wrapping Up</h1><p>The very last bit in <code>createStore</code> is initializing the state tree and exporting functions.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/005294ffb5ff7563607cf1fa35a84638.js"><\/script><!--kg-card-end: html--><p>This is how users get access to <code>store.getState</code>, <code>store.dispatch</code>, <code>store.subscribe</code>, and <code>replaceReducer</code>. </p><h1 id="next-time-">Next Time!</h1><p>In our next article we'll be covering a lot of the tooling around redux. We'll talk about <code>applyMiddleware</code>, <code>bindActionCreators</code>, thunks, and more!</p><p>Part two is now available <a href="__GHOST_URL__/how-redux-works-2/">here</a>!</p>`,tags:["Tech","redux"]},{id:6,slug:"ts-tricks-higher-order-components",title:"TS Tricks: Higher Order Components",date:"January 27, 2019",excerpt:"",content:`<p>Higher order components are a useful pattern for creating composable logic within a React application. While they're not as popular as other tools like render props or hooks, they're still worth knowing.</p><p>How do higher order components work? Well as we discussed in <a href="__GHOST_URL__/functional-programming-fundamentals/">Functional Programming Fundamentals</a>, higher order functions take a function as an argument and/or returns an argument as it's result.</p><p>In this case, higher order components are functions that take a component as an argument and return a new supercharged component as a result. This poses an interesting problem for typing.</p><p>We want to expose a component that only needs require the props <em>not</em> provided by the HOC, but we still want to be able to access the original uncomposed component.</p><p>Let's walk through an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/343b3bb2726bb1b63c80406ecca419c8.js"><\/script><!--kg-card-end: html--><p>We start with a super basic component, <code>TomRiddle</code>. Now it matters not what someone is born, but what they chose to be. <code>TomRiddle</code> takes an <code>isEvil</code> prop that determines if it renders "Tom Marvolo Riddle" or "I am Lord Voldemort".</p><p>Tom isn't such a great guy and wants to learn how to make horcruxes. How do we teach him? Well we could make him into a class component and add some state. Let's see what that looks like.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1fa3633692b86a5be34229777d0cae1d.js"><\/script><!--kg-card-end: html--><p>This totally works. We've taught Tom how to make horcruxes. Now Tom wants to recruit some followers, he calls those Death Eaters. Let's add another prop for those. While we're at it, let's derive <code>isEvil</code> from the number of horcruxes the wizard has. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/008edec62ba9f1a661910071327e554e.js"><\/script><!--kg-card-end: html--><p>Now this component is doing a bit too much. It's rendering to the DOM and it's managing state. Also, anyone can learn to make horcruxes, what if we take that functionality and make it into a higher order component. </p><p>Before we get to typing this, let's take a look at what this would look like in vanilla JS.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9f09e9aed1cc76125902ddbf58e1ad37.js"><\/script><!--kg-card-end: html--><p><code>EvilWizard</code> is a function that takes a component, <code>Wizard</code>, and passes that component the following props <code>numHorcruxes</code>, and <code>makeHorcrux</code>. It also manages this state for them.</p><p>Now, two minor gotchas with HOCs, we need to set the <code>displayName</code> and <code>hoistNonReactStatics</code>.</p><p>Okay now let's type this thing. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/984fd1a6f9473dca0bb9004ee66b5438.js"><\/script><!--kg-card-end: html--><p>What's going on here? A lot actually. Let's break it down. We export a type called <code>WithEvilWizardProps</code>. This type takes <code>T</code>, a generic, and returns an intersection type of <code>T</code> and <code>EvilWizardInnerProps</code>.</p><p>The function <code>EvilWizard</code> takes a <code>Wizard</code> that is either a <code>ComponentClass</code> or a <code>FunctionComponent</code>. The props of this component is of type <code>EvilWizardInnerProps &amp; T</code>. Now here's the real magic. The component we're returning is a class of type <code>React.ComponentClass&lt;T&gt;</code>. </p><p>What does this mean? Well because we're using an intersection type, Typescript is smart enough to unpack this and return a component that only requires the props <strong>not</strong> provided by the HOC.</p><p>One last thing, let's update <code>TomRiddle</code> to use this new HOC.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/12e3e8ed7234df320490df373841a091.js"><\/script><!--kg-card-end: html--><p>We've now extracted all that state back out and we're using <code>WithEvilWizardProps</code> when declaring <code>TomRiddleProps</code>. Now let's use our components!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f63c4028e796863f55f991bb815b5ce0.js"><\/script><!--kg-card-end: html--><p>As you can see above, we have the option of using <code>LordVoldemort</code> the output of <code>EvilWizard(TomRiddle)</code> or we can just call <code>TomRiddle</code> directly. This is particularly useful if you want to test the behavior of the inner component without the HOC.</p>`,tags:["Tech"]},{id:4,slug:"ts-tricks-type-guards",title:"TS Tricks: Type Guards",date:"January 23, 2019",excerpt:"With everyone getting excited about Typescript I thought it'd be fun to do a walkthrough of one of my favorite features, type guards. These are type-safe functions that allow us to assert that an argu",content:`<p>With everyone getting excited about Typescript I thought it'd be fun to do a walkthrough of one of my favorite features, <strong>type guards. </strong>These are type-safe functions that allow us to assert that an argument matches a certain type. The best part is these work at runtime!</p><p>Let's start with a basic example below:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0e70421835c3fcc14c9151a8d34d1eed.js"><\/script><!--kg-card-end: html--><p>We've declared some interfaces here: <code>Person</code>, <code>Wizard</code>, and <code>Muggle</code>. <code>Wizard</code> and <code>Muggle</code> are both instances of <code>Person</code>, however they have an extra property. Pretty standard so far.</p><p>But now let's create a type guard!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9f079fa3524a9c9b0f78a0e82b6c2f23.js"><\/script><!--kg-card-end: html--><p>We now have functions called <code>isWizard</code> and <code>isMuggle</code>. These functions return a boolean at runtime, but in Typescript land they return <code>person is Wizard</code> or <code>person is Muggle</code>. At compile time we'll get static type checking on our instances.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ea79189fee729dbfa5607ca4d1625a79.js"><\/script><!--kg-card-end: html--><p>These functions are all 100% type-safe. In fact, if we were to try to get spells off a <code>Muggle</code> we would get a type error.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f07d362eb60a5981a4404a77b4e8400f.js"><\/script><!--kg-card-end: html--><p>These functions always return the right thing because we have validation at both runtime and compile time. It's basically a free unit test! </p><p>Note: It's <em>one</em> free unit test per function, you should write others.</p><p>Let's make this more complicated now, let's extend <code>Wizard</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f2899f9720f277f1c54a45ec528bd78d.js"><\/script><!--kg-card-end: html--><p>Now each <code>Wizard</code> has a <code>house</code> property for a Hogwarts house. Just like before we could make new interfaces for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/231f405cb2d526e232102dc1113054d5.js"><\/script><!--kg-card-end: html--><p>And once again, we can make simple type guards for each house. But this time we'll also reuse our <code>isWizard</code> guard. After all, only wizards can go to Hogwarts!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b201ff33316b4dd51d0de74769f9f549.js"><\/script><!--kg-card-end: html--><p>Let's have some fun now, let's throw together a makeshift datastore and do some functional programming. If you're new to FP you can check out my <a href="http://matthewgerstman.com/functional-programming-fundamentals/">previous article here</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ee14f44a05c33d0b89d6ed45ccfd9e25.js"><\/script><!--kg-card-end: html--><p>Now we have an array of people. These people may or may not be Wizards and their Hogwarts houses vary. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/76ec3695c4cc6a5fb0bea0375f756f2a.js"><\/script><!--kg-card-end: html--><p>We can now make functions that <code>filter</code> over the list of people and return the ones that match a type.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ec5f1bf68038a83cf8dc1dbf835c4dc.js"><\/script><!--kg-card-end: html--><p>We can also combine these with a <code>map</code> to get data we care about.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1f879a3c4b038e0875d6b7b09b2b1a20.js"><\/script><!--kg-card-end: html--><p>If these look like redux selectors, it's because this pattern is very commonly used to get data out of a typed redux store. If you want to know more about that, I wrote an article about <a href="http://matthewgerstman.com/redux-code-split-typecheck/">building a typed and code-split</a> redux store.</p>`,tags:["Tech","typescript"]},{id:5,slug:"ts-tricks-type-safe-reducers",title:"TS Tricks: Type-safe Reducers",date:"January 23, 2019",excerpt:" We're going to talk about how to build a type-safe reducer. Now, I use these for redux reducers, but these principles could apply to any function.",content:`<p>If you enjoyed my post on <a href="__GHOST_URL__/ts-tricks-type-guards/">type guards</a>, this one might tickle your fancy. We're going to talk about how to build a type-safe reducer. Now, I use these for redux reducers, but these principles could apply to any function.</p><p>Let's start by typing some actions.</p><!--kg-card-begin: html--><script src="https://gist.github.com/e44f3e0a9181aa543480a23b0c18409b.js"><\/script><!--kg-card-end: html--><p>You'll notice we've created two action types <code>MakeFriend</code> and <code>LearnSpell</code>. Each of these has a <code>type</code> and a <code>payload</code>. The <code>payload</code> of each however is a different shape. In this case it's an object with a single key, but you can imagine a much more complex scenario.</p><p>Now at the bottom we have a type called <code>WizardActions</code>. This is what's called a <em>discriminated union. </em>What this means is that we can take an argument of type <code>WizardActions</code> and it will be exactly <em>one</em> the types in the union. Let's look at some more code to elaborate.</p><!--kg-card-begin: html--><script src="https://gist.github.com/075e46c391c59d48b1ee8dc6977c9606.js"><\/script><!--kg-card-end: html--><p>We now have a reducer that takes a <code>state</code> and an <code>action</code> and returns the current state. Don't worry, we'll handle these actions later. Now the <code>action</code> argument is of type <code>WizardActions</code> which means it's going to be of type <code>MakeFriend</code> or of type <code>LearnSpell</code>.</p><p>Let's expand on our reducer and keep going.</p><!--kg-card-begin: html--><script src="https://gist.github.com/bfc303ff9ca54f1bdaba392a1e2d470b.js"><\/script><!--kg-card-end: html--><p>If you're used to redux, this should look familiar. We have a switch statement on the action type and we're handling each payload differently. For <code>MakeFriend</code> actions we append a friend to the list of friends. For <code>LearnSpell</code> actions we append a spell to the list of spells.</p><p>We actually don't need the default case because this is an exhaustive type-check, but it's still good to be defensive in case someone upstream uses an <code>any</code>. It's also necessary if we integrate this with redux.</p><p>How does this work? Well Typescript is pretty smart. It figures out on it's own that checking <code>type</code> will guarantee the payload is a certain shape. When we go to access that payload, it knows what properties to expect. If we attempted to check the <code>spell</code> of a <code>MakeFriend</code> action we would get a type error.</p><p>Let's have some fun now and call our reducer. First let's make some friends.</p><!--kg-card-begin: html--><script src="https://gist.github.com/a3829b4e82aa81ba62bf73c6fcda7c26.js"><\/script><!--kg-card-end: html--><p>This reducer works how we expect at runtime; Harry meets Ron, then he meets Hermione. Let's learn some spells.</p><!--kg-card-begin: html--><script src="https://gist.github.com/dec12d44c109ac5142d862c93eb5d2ba.js"><\/script><!--kg-card-end: html--><p>Now Harry learns <em>Expelliarmus </em>and <em>Expecto Patronum!</em></p><p>If you want to know more about typing redux, I wrote an article about <a href="http://matthewgerstman.com/redux-code-split-typecheck/">building a typed and code-split</a> redux store.</p>`,tags:["Tech","typescript","redux"]},{id:3,slug:"functional-programming-fundamentals",title:"Functional Programming Fundamentals",date:"January 21, 2019",excerpt:"In this post, well discuss the fundamentals of Functional Programming and how they apply to modern JavaScript. Well also avoid unnecessary jargon like monads and functors and stick to concepts that ",content:`<p>In the past few years, React and Redux have generated a surge of Functional Programming which we often take for granted. However many of us never got a chance to learn the fundamentals.</p><p>In this post, well cover the fundamentals of Functional Programming and how they apply to modern JavaScript. Well also avoid unnecessary jargon like monads and functors and stick to concepts that will make our code better.</p><p>If you'd like to learn all the unnecessary jargon, check out my other posts, <a href="__GHOST_URL__/what-the-functor/">What The Functor</a> and <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>. I also have an article on <a href="__GHOST_URL__/map-filter-reduce/">map, filter, and reduce.</a></p><p><em>Note: If you wanna see this post in talk form you can <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg">here</a>.</em></p><hr><h1 id="none-of-this-is-new">None of this is new</h1><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2019/01/image.png" class="kg-image" alt loading="lazy"><figcaption>https://xkcd.com/297/</figcaption></figure><p>Before we dive into actual concepts, I want to lead by saying that none of this is new. Functional Programming as existed for over 60 years. <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a>, a popular FP programming language, was first developed in 1958.</p><p>What is new is the popularity of FP, which has surged in the past few years.</p><hr><h1 id="when-is-functional-programming-most-useful">When is Functional Programming most useful?</h1><p>Before we cover <em>what</em> functional programming is. I think it's helpful to define when we use it.</p><p>Functional Programming is most useful when were doing 1 to 1 data transformations.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e1a796c632887ce0c1004824553f9542.js"><\/script><!--kg-card-end: html--><p>In the code snipped above we have some types listed for a data store, a component, and a functional layer in between them.</p><p>This functional layer, <code>convertUserMapToArray</code>, converts the data from a format that makes sense to the store to a format that makes sense for the UI. This is what we're going to zero in on today.</p><hr><h1 id="what-is-functional-programming">What is Functional Programming?</h1><p><strong>Functional programming </strong>(often abbreviated FP) is the process of building software by composing <strong>pure functions. </strong>A <strong>pure function </strong>is a function which given the same inputs, always returns the same output, and has no side-effects. <a href="https://jetpacmonkey.github.io/fp-slides/" rel="noreferrer nofollow noopener">[9]</a></p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://www.dropbox.com/s/wj4p4s1bvvzc9o4/image%20(12).png?raw=1" class="kg-image" alt loading="lazy"><figcaption><a href="https://www.fpcomplete.com/blog/2017/04/pure-functional-programming" rel="noreferrer nofollow noopener">[3]</a></figcaption></figure><p>For example, we can trust that 2 + 2 is always 4 and 3 x 3 is always 9.</p><hr><h1 id="side-effects">Side Effects</h1><p>The no side-effects bit is particularly important, because this is what allows us to trust that a function will always behave the same in any environment. This will help with future concepts.</p><p>Now side-effects aren't inherently bad, but you should isolate them to parts of your codebase where you can easily identify them.</p><p>Let's take a look a some examples of side effects.</p><h2 id="mutation">Mutation</h2><p>Modifying the argument thats passed in <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/73ef079b4f0d418938062615c601757f.js"><\/script><!--kg-card-end: html--><p>In this example above, we're changing the value of <code>arr</code> at the reference it lives at. As a result, we can't predict what this function will return at any point. What happens when <code>arr</code> runs out of values? </p><h2 id="shared-state">Shared State</h2><p>Using some form of global state <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6d0ca6210f3dc13a7ff031b8ab88fb0d.js"><\/script><!--kg-card-end: html--><p>In this example, we can't predict what these functions will return because they depend on some external value. The order of the function calls will matter.</p><p>Furthermore what happens if someone else changes the value of <code>i</code>? Do you feel like googling what <code>string++</code> is? </p><h2 id="asynchronous-code">Asynchronous Code</h2><p>Code that doesn't execute immediately <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4cdb5608124ab2e4ea3d1679ef89a63a.js"><\/script><!--kg-card-end: html--><p>This one deserves an extra mention because its a necessity. We have to do some things asynchronously. We have to hit APIs; we have to fetch data.</p><p>This brings me back to my earlier point. Side effects aren't inherently bad, but they should be properly isolated to make your code more predictable.</p><hr><h1 id="example-time">Example Time</h1><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/44a40f904f1e6016c9fd0682e9f60c5c.js"><\/script><!--kg-card-end: html--><p>Looking at the code above, we would expect it to produce the following:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b44e6a7990f0c96439b17ed94417c5d7.js"><\/script><!--kg-card-end: html--><p>Unfortunately, this isn't what we get. This is:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/00d4010a7a5a1dde0b4f6449f65bb69f.js"><\/script><!--kg-card-end: html--><p>What happened?</p><p>Well the first function, <code>clone</code> is a pure function and works as expected. It produced a new object at a new reference.</p><p><code>killParents</code> is not a pure function. It mutates the given argument and marks the parent as dead. It does however return the object so it <em>appears</em> we're getting a new copy.</p><p><code>addScar</code> really doesn't care. It mutates the original object, and then returns nothing, so <code>addScar(c)</code> returns <code>undefined</code> even though it also modifies <code>c</code>.</p><p>As a result <code>a</code> is pointing to the original reference, <code>b</code> and <code>c</code> are pointing to the cloned copy (with dead parents and a scar), and <code>d</code> is pointing to nothing.</p><hr><h1 id="declarative-and-imperative">Declarative and Imperative</h1><p><strong>Declarative code describes what it does.</strong></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2998e01ec2f15a2fe5d63ebcda6609ac.js"><\/script><!--kg-card-end: html--><h3 id="imperative-code-describes-how-it-does-it-">Imperative code describes how it does it.</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5a7da58e7074d3168dcb63d80da86e52.js"><\/script><!--kg-card-end: html--><p>Looking at the two code samples above, we can see a stark contrast. The top block is written using React and just says "we want a counter on the page." This code trusts React, the declarative library, to get it right.</p><p>The bottom block is using vanilla JS. It explicitly finds a DOM node and updates it. While this is fine for such a simple example this won't scale well. What happens when we want multiple counters in multiple locations? React is ready for that, with vanilla JS we have a lot of work to do.</p><p>Now it's worth noting that declarative code will always end up either compiling down to or being processed by something imperative. What do I mean by that? Well <em>something</em> has to do the DOM mutation. In this case that's React. Even with functional languages like Lisp or Haskell they <em>eventually</em> get compiled to imperative machine code.</p><h2 id="example">Example</h2><h3 id="imperative">Imperative</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9fc233a7e7dcd880912a25f5fec938c0.js"><\/script><!--kg-card-end: html--><h3 id="declarative">Declarative</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f4b604ff5b55acda3300866195d4d0bf.js"><\/script><!--kg-card-end: html--><p>Now these two functions achieve the exact same thing. They take a list of <code>files</code> and return a dictionary of files where the key is <code>file.id</code>.</p><p>But the imperative one is sloppier. It's 8 lines of code instead of 3. It also leaves a lot of room for error.</p><p>What happens if a file doesn't have an <code>id</code>? What happens if we get our exit clause wrong? And fun fact, there are faster ways to do for loops (they're ugly), but we can trust lodash to do those under the hood.</p><hr><h1 id="functional-concepts">Functional Concepts</h1><p>It's now time to move onto functional concepts. Let's take these in pairs, the first two <strong>separation </strong>and <strong>composition.</strong></p><h2 id="separation">Separation</h2><blockquote><em>If you try to perform effects and logic at the same time, you may create hidden side effects which cause bugs in the logic. Keep functions small. Do one thing at a time, and do it well. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><h2 id="composition">Composition</h2><blockquote><em>Plan for composition. Write functions whose outputs will naturally work as inputs to many other functions. Keep function signatures as simple as possible. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><p>I pulled these quotes from an article called <em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd">The Dao of Immutability</a>. </em>What we're saying here is we want small functions that easily chain together to make larger ones. Let's take a look at an example:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/cb7622935829a6ce49badfdc1af3974e.js"><\/script><!--kg-card-end: html--><p>These three functions are all super simple. They take one argument and do a transformation on that argument. The first function sorts the list of files.</p><p>The second function is a <code>filter</code>. <code>filter</code> is an FP term for filtering in, as opposed to filtering out. So this code returning an array of files who's extensions are PDFs.</p><p>The last function is just a <code>map</code>. <code>map</code> is another FP term, a 1:1 transformation over a list to a new version of that list. In this case we're looping over the list of files and returning the key <code>name</code> from each of them.</p><p>Now we can combine them together:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e49ca9b4e211c8eda34ea078ee88645f.js"><\/script><!--kg-card-end: html--><p>Now both of these functions are equivalent. They take a list of files, filter for pdfs, get their names, and return a sorted list of file names.</p><p><code>lodash.flow</code> does have some optimizations under the hood, but the second syntax might be more readable to you. Do whatever you think is best.</p><p>Let's move on to the next set of concepts.</p><h2 id="immutability">Immutability</h2><blockquote><em>The true constant is change. Mutation hides change. Hidden change manifests chaos. Therefore, the wise embrace history. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><h2 id="memoization">Memoization</h2><blockquote><em>Memoization is an optimization technique used primarily to speed up computer programs by storing the results of expensive function calls and returning the cached result when the same inputs occur again. </em><a href="https://en.wikipedia.org/wiki/Memoization" rel="noreferrer nofollow noopener"><em>[5]</em></a></blockquote><p>These pair really nicely. Immutability says we're never gonna mutate an argument only return a new one, and memoization allows us to remember outputs. Let's look at an example combining them.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/47fe2834b2da7bab88c705095db096de.js"><\/script><!--kg-card-end: html--><p>What's going on here? Well we have a function called <code>killSibling</code> (dark I know), that takes a wizard. It copies over the wizard and decrements the number of siblings that wizard has. Please ignore any glaring bugs here, I wanted to keep this simple.</p><p>We then pass <code>killSibling</code> to <code>lodash.memoize</code>, this produces a new function called <code>killSiblingMemoized</code>. Now when we call <code>killSiblingMemoized</code> on <code>ron</code>, it returns a brand new object. If we do a strict equality check it returns false. Of course it does, his brother died, he's a different person now.</p><p>Because we've memoized this, if we repeat this call to <code>killSiblingMemoized</code> we'll get the exact same version of <code>ron</code> we got after the first call.</p><p>We've covered a lot, now let's move onto some advanced topics.</p><hr><h1 id="higher-order-functions">Higher Order Functions</h1><p>In mathematics and computer science, a <strong>higher-order function </strong>is a function that does at least one of the following:</p><ul><li>takes one or more functions as arguments(i.e.,procedural parameters),</li><li>returns a function as its result. <a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="noreferrer nofollow noopener">[6]</a></li></ul><p>This seems much more intimidating than it actually is. In fact I bet you've written some of these before without realizing it.</p><h2 id="function-that-takes-a-function">Function that takes a function</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ed44a6db0c48aaf8ca0da717154d4427.js"><\/script><!--kg-card-end: html--><p>These are just <strong>callbacks.</strong> In this case <code>then</code> is the higher order function that takes an anonymous function as its argument.</p><h2 id="function-that-returns-a-function">Function that returns a function</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3ccbd0608ba61e231d1a1858106d56d1.js"><\/script><!--kg-card-end: html--><p>Another thing you've probably done before, <strong>closures. </strong>In this case <code>counterGenerator</code> is the higher order function because it returns a function.</p><h2 id="function-that-takes-a-function-and-returns-a-function">Function that takes a function and returns a function</h2><p>Last, the final form, a function that does both. But you've already seen these.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/484c1aecc9e69ba39377afb4fd1f89d4.js"><\/script><!--kg-card-end: html--><p>Both <code>memoize</code> and <code>flow</code> were higher order functions that take a function (or several) as arguments and return a new function.</p><hr><h1 id="currying">Currying</h1><blockquote><em>Currying is the technique of translating the evaluation of a function that takes multiple arguments (or a tuple of arguments) into evaluating a sequence of functions, each with a single argument. </em><a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer nofollow noopener"><em>[7]</em></a></blockquote><p>This seems a little intimidating but I think an example will help.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d31c96725e9d1cbc76abc3b4a89b00e8.js"><\/script><!--kg-card-end: html--><p>We have a function <code>sum</code> which takes arguments <code>a</code>, <code>b</code>, and <code>c</code>. When we pass <code>sum</code> to <code>lodash.curry</code> (a higher order function), it becomes a new function that keeps returning functions until <code>a</code>, <code>b</code>, and <code>c</code> have all been filled.</p><p>If we give it arguments <code>1,2,3</code> then it executes immediately and returns 6. If we give it just <code>2,3</code> it returns a new function waiting for one more argument.</p><p>This works for all permutations of arguments.</p><hr><h1 id="partial-application">Partial Application</h1><blockquote><em>Partial application (or partial function application) refers to the process of fixing a number of arguments to a function, producing another function of smaller arity. </em><a href="https://en.wikipedia.org/wiki/Partial_application" rel="noreferrer nofollow noopener"><em>[8]</em></a></blockquote><p><em>Note: Arity is just a term for the number of arguments a function takes. <a href="https://github.com/hemanth/functional-programming-jargon" rel="noreferrer nofollow noopener">[2]</a></em></p><p>With partial application, we can take a function and bind arguments to it. Let's take a look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/79394bccde6191763a31f48c32f47f39.js"><\/script><!--kg-card-end: html--><p>In this case we have a function called <code>learnSpell</code> that takes a <code>spell</code> and a <code>wizard</code>. If we pass these functions to <code>lodash.partial</code> with a spell, it will create a new function that teaches a wizard a predefined spell. In this case we can generate <code>learnExpelliarmus</code> and <code>learnExpectoPatronum</code>.</p><p>We actually saw some examples of this earlier when we were talking about composition. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/bfb76754ceff4093a1511e13cf06e127.js"><\/script><!--kg-card-end: html--><p>All of these functions are partially applying an argument to a lodash function. In fact it's functionally equivalent to this block.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2d72d421f0a81aecf3aa6399964ff7e5.js"><\/script><!--kg-card-end: html--><p>Much like with <code>flow</code> you should do what you're comfortable with here. Both methods works well.</p><hr><h1 id="what-are-we-optimizing-for">What Are We Optimizing For?</h1><ol><li>Make our code more readable</li><li>Make our code easier to reason about</li><li>Make our code easier to test</li><li>Make our users happier </li></ol><p>We're not trying to reduce lines of code.</p><hr><h1 id="thanks">Thanks</h1><p>Thanks so much for reading! If you'd like to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><p>If you'd like to learn all the scary jargon check out my other posts <a href="__GHOST_URL__/what-the-functor/">What The Functor</a>, <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>, and <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce.</a></p><hr><h1 id="references">References</h1><ol><li><a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0</a></li><li><a href="https://github.com/hemanth/functional-programming-jargon" rel="noreferrer nofollow noopener">https://github.com/hemanth/functional-programming-jargon</a></li><li><a href="https://www.fpcomplete.com/blog/2017/04/pure-functional-programming" rel="noreferrer nofollow noopener">https://www.fpcomplete.com/blog/2017/04/pure-functional-programming</a></li><li><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener">https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd</a></li><li><a href="https://en.wikipedia.org/wiki/Memoization" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Memoization</a></li><li><a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Higher-order_function</a></li><li><a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Currying</a></li><li><a href="https://en.wikipedia.org/wiki/Partial_application" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Partial_application</a></li><li><a href="https://jetpacmonkey.github.io/fp-slides/" rel="noreferrer nofollow noopener">https://jetpacmonkey.github.io/fp-slides/</a></li><li><a href="https://xkcd.com/297/" rel="noreferrer nofollow noopener">https://xkcd.com/297/</a></li><li><a href="https://xkcd.com/1270/" rel="noreferrer nofollow noopener">https://xkcd.com/1270/</a></li><li><a href="https://xkcd.com/1312/" rel="noreferrer nofollow noopener">https://xkcd.com/1312/</a></li></ol><h1></h1>`,tags:["Tech","functional-programming"]},{id:1,slug:"redux-code-split-typecheck",title:"Redux with Code-Splitting and Type Checking",date:"January 17, 2019",excerpt:"How do you code-split your store so youre not serving unnecessary JavaScript on a single page? And while youre working on code splitting, how do you get it to play nicely with TypeScript so that you",content:'<h1 id="before-we-get-started">Before We Get Started</h1><p>This article assumes a working knowledge of Redux, React, React-Redux, TypeScript, and uses a little bit of Lodash for convenience. If youre not familiar with those subjects, you might need to do some Googling. You can find the final version of all the code <a href="https://github.com/matthew-gerstman/redux-codesplit-typechecl-example/tree/master" rel="noopener">here</a>. Also, follow me on Twitter <a href="https://twitter.com/matthewgerstman" rel="noopener">@MatthewGerstman.</a></p><h1 id="introduction">Introduction</h1><p>Redux has become the go-to state management system for React applications. While plenty of material exists about Redux best practices in Single Page Applications (SPAs), there isnt a lot of material on putting together a store for a large, monolithic application.</p><p>What happens when you only need a few reducers on each page, but it could be any permutation of the total number of reducers you support? How do you code-split your store so youre not serving unnecessary JavaScript on a single page? And while youre working on code splitting, how do you get it to play nicely with TypeScript so that you can trust whats going in and coming out of the store?</p><h1 id="the-architecture">The Architecture</h1><p>Before we dive into code, lets outline the architecture were about to build.</p><p><strong>We need to create the store in such a way that we can register reducers asynchronously. </strong>This allows us to async load code associated with those reducers.</p><p><strong>We need to type the store in such a way that it knows about all possible reducers we can register. </strong>This allows us to ensure static typing of all components at runtime.</p><h1 id="creating-the-store">Creating the Store</h1><p>In order to code split, we need to instantiate the store in a way that allows us to register reducers after store creation. We start with the following code:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2094e725ecbda01342b8ec973f240f58.js"><\/script><!--kg-card-end: html--><p>Whats going on here? Were instantiating the store with the file and weve also exported two functions. One called <code>getStore</code>, which is simply a wrapper around the store and doesnt need much further explanation, and <code>registerReducer</code>.</p><p><code>registerReducer</code> is the more interesting function. We maintain a map of existing reducers internal to the module and then replace add new ones as they come in. We then call <code><a href="https://redux.js.org/api/store#replaceReducer" rel="noopener">replaceReducer</a></code> on the store and replace it wholesale. <code><a href="https://redux.js.org/api/store#replaceReducer" rel="noopener">replaceReducer</a></code> is smart enough to maintain the state of the reducers that were previously there and fires an <code>INIT</code> action for the new ones to populate their default state.</p><p>This is what makes code-splitting possible. We dont care when the reducer is registered and all of that code can be loaded after the store is created.</p><h1 id="type-safety">Type Safety</h1><p>Now lets dig into what makes this type safe. Well, lets dig into our <code>types.ts</code> file.</p><!--kg-card-begin: markdown--><script src="https://gist.github.com/matthew-gerstman/cacb21238ab545930a86b68aec0d9b71.js"><\/script><!--kg-card-end: markdown--><p>Youll notice we import <code>MuggleNamespaceShape</code> and <code>WizardNamespaceShape</code>from elsewhere in the codebase. This is okay. Because these are type-only imports, most build systems wont actually bundle them in when building packages. This is where the statically typed code splitting magic happens.</p><p>We then export types <code>StoreShape</code> and <code>ReducerMap</code>, which allow us to register all possible types on the actual state object in advance. Because we colocate the namespace keys in the types file, our developers can ensure that there are no key conflicts.</p><p>Youll notice these types are both <code>Partial</code>, so how do we enforce that a reducer is actually registered? Well, we do that in the selector layer.</p><h1 id="selectors">Selectors</h1><p>Our selector layer is what ensures that we always have the reducers registered that we need. We can do this with a simple helper function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0f5d8c39386d508f53cf4d27fd140619.js"><\/script><!--kg-card-end: html--><p>In short, <code>getStateAtNamespaceKey</code> complains <strong>very loudly </strong>if you attempt to access a namespace that hasnt been registered yet. This is the only way we should access our data. As long as you call <code>registerReducer</code> in the same part of your tree as your <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#provider-store" rel="noopener">&lt;Provider /&gt;</a></code> component, your namespace should be registered by the time you get down to a <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options]" rel="noopener">connect</a></code>. Well elaborate on this in a moment.</p><h1 id="writing-actual-product-code">Writing Actual Product Code</h1><p>This is is all well and good, but lets talk about what our product code looks like.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39db0e7769d346bddf35d34f02e72770.js"><\/script><!--kg-card-end: html--><p>The code above is (hopefully) straightforward. We connect to the Redux store using <code>react-redux</code>and use the <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#provider-store" rel="noopener">&lt;Provider /</a>&gt;</code>and <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" rel="noopener">connect</a></code>component/HOC respectively. We take a list of wizards and render them out to the screen, along with information about what spells they know and the status of their parents. Spoiler: Were getting to a certain boy wizard with a lightning scar.</p><p>The two novel bits of code here are <code>getStoreForWizardApp</code>and <code>getWizards</code>. Lets dig into them both.</p><h2 id="getstoreforwizardapp">getStoreForWizardApp</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fc3befd0a3e2230d0915bdeb44f00f61.js"><\/script><!--kg-card-end: html--><p>In the above code, you saw what we call the <code>registerReducer</code>and <code>getStore</code>functions that we declared before. We pass <code>registerReducer</code>a map with the key for the Wizard namespace and the Wizard reducer. Another important note: if we try to pass the wrong key or even the wrong reducer to <code>registerReducer</code>, type checking will complain about it.</p><p>One last but crucial bit. We wrap <code>getStoreForWizardApp</code> in <code><a href="https://lodash.com/docs/4.17.10#once" rel="noopener">lodash.once</a></code>. This ensures that we only register the reducer once and then always return the same instance of the store. While this isnt <em>strictly</em>required, <code>replaceReducer</code>is an expensive noop, if called repeatedly.</p><h2 id="getwizards">getWizards</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fe22e16974ae0c706b085c33ae44ab65.js"><\/script><!--kg-card-end: html--><p>This one is much more straightforward. We call <code>getStateAtNamespaceKey</code>and spit out the wizards to the user.</p><h2 id="actions">Actions</h2><p>Sweet! Weve set up the store, registered our reducer, and even built some components. Now lets talk about how we can strongly type our actions. We do this in both the action layer and the reducer layer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ce621d79bf0b86a31d9174634d89a47.js"><\/script><!--kg-card-end: html--><p>Youll notice that we have two action types: <code>LearnSpellAction</code>and <code>KillParentsAction</code>. These actions each have a strongly-typed payload and their type is a predetermined string enum. We also export <code>WizardAction</code>, which is useful in our reducer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/7447b9ae50d93c4f6123a970bcb170b3.js"><\/script><!--kg-card-end: html--><p>This is one of those occasions where TypeScript is truly brilliant. Our given action type is any of the <code>WizardActionTypes</code>. Because each of them has their own defined <code>type</code>property, our switch statement will actually strongly type <code>action.payload</code>after we determine its type. If we were to put any invalid code here, TypeScript would complain.</p><h2 id="store-hydration">Store Hydration</h2><p>The last question to answer here is: How do we get initial data into the store? Thats done through a process called store hydration. What this means is that were going to dispatch an action that sets the state. Lets take a look at this code.</p><p>First, we update our <code>actions.ts</code>file as shown.</p><!--kg-card-begin: markdown--><script src="https://gist.github.com/matthew-gerstman/81a26bbfbe2ffd616dd7a836ef2c3198.js"><\/script><!--kg-card-end: markdown--><p>Second, we add another switch statement to our reducer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/74cb2c46fabadca1a7d8d5be996aada8.js"><\/script><!--kg-card-end: html--><p>Third, we need to make an action creator.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e544e1e35f1e88c6c011a832910479a4.js"><\/script><!--kg-card-end: html--><p>Finally, we dispatch the hydration action from our store creation function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/97162d4992692dd6daa90bc6f0ed3d93.js"><\/script><!--kg-card-end: html--><p>The <code><a href="https://lodash.com/docs/4.17.10#once" rel="noopener">lodash.once</a></code>is now extra useful because we will only ever populate the store once.</p><h1 id="conclusions">Conclusions</h1><p>I hope this article helped you get started with Redux. At compile time, our store is strongly typed and has knowledge of the entire system. At runtime, we can code split however wed like.</p><h1 id="glossary-of-functions">Glossary of Functions</h1><p>This is a list of the core functions and types and the roles they serve in this architecture.</p><h2 id="types">Types</h2><ul><li><strong>NamespaceKey</strong>A key for a reducer or namespace within the state object.</li><li><strong>ReducerMap</strong>Object of all possible keys we can have on our store and their matching reducers. Is declared as a partial because it is not guaranteed that any given namespace is on the store.</li><li><strong>StoreShape</strong>Object of all possible keys we can have on our store and their state shapes. Is declared as a partial because it is not guaranteed that any given namespace is on the store.</li></ul><h2 id="functions">Functions</h2><ul><li><strong>hydrateWizardNamespace</strong>Product layer function that provides initial state for the wizard namespace after the reducer is registered.</li><li><strong>getStoreForWizardApp</strong>Product layer function that registers the wizard namespace within the store.</li><li><strong>getStateAtNamespaceKey</strong>Function that grabs a namespace from the state object and fails quickly if that namespace is unregistered. Used to make our selectors type safe.</li><li><strong>registerReducer</strong>Function that injects a reducer into the store after page load. Ensures that we only register known reducers at the typing layer.</li></ul><h1 id="thanks">Thanks</h1><p>Publishing an article like this takes a village. I want thank a whole bunch of people for their contributions.</p><p><a href="https://twitter.com/acemarke" rel="noopener">@acemarke</a>For maintaining Redux and inspiring me to write this article.</p><p><a href="https://twitter.com/brianlink" rel="noopener">@brianlink</a>Typo patrol.</p><p><a href="https://twitter.com/donavon" rel="noopener">@donavon</a>For adding and removing commas like a boss.</p><p><a href="https://twitter.com/goingglacial" rel="noopener">@goingglacial</a>For a thorough code review before merging the source this is based on.</p><p><a href="https://twitter.com/hswolff" rel="noopener">@hswolff</a>For teaching me Redux in the first place.</p><p><a href="https://twitter.com/jetpacmonkey" rel="noopener">@jetpacmonkey</a>For finding a bug in this article.</p><p><a href="https://twitter.com/peterpme" rel="noopener">@peterpme</a>For code reviewing the article.</p><p><a href="https://twitter.com/swyx" rel="noopener">@swyx</a>For providing technical feedback on this article.</p><p>Andrew HFor article feedback</p><p>Justin KFor copy editing and fixing my atrocious grammar.</p><p>Matt SFor relevant life advice.</p><p>Yoeun PFor pair programming with me when I wrote the source this is based on.</p><h1></h1>',tags:["Tech","redux","typescript","code-splitting"]},{id:14,slug:"hello-there",title:"Hello There",date:"January 15, 2019",excerpt:"I have a habit of rambling on the internet and thought it'd be nice to consolidate all these ramblings into one place.",content:`<p>My name is Matthew Gerstman, I'm a software engineer with a bunch of hobbies. What hobbies you ask? Well, I see a lot of theater, give tech talks regularly, and travel so much I'm writing this from an airplane. I'm also a Harry Potter enthusiast, long time Green Day listener, and I adore New York City.</p><p>I have a habit of rambling on the internet and thought it'd be nice to consolidate all these ramblings into one place. </p><h1 id="theater">Theater</h1><p>Last year I saw about 50 shows. On Broadway, off Broadway, everything from tiny one-person shows to Hamilton in London. If the show has something that looks like a Playbill I'll probably get around to seeing it. In fact here's a gif of everything I have that looks like a Playbill from 2018.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2019/01/giphy-2.gif" class="kg-image" alt loading="lazy"><figcaption>For those wondering, I use this <a href="https://amzn.to/2DgdXok">playbill binder</a> with <a href="https://amzn.to/2suwkzL">these sheets</a>.</figcaption></figure><p>I'm hoping to do reviews of the shows I see on here, and if a miracle occurs, get asked to write them.</p><h1 id="tech">Tech</h1><p>By day I'm a software engineer at Dropbox. Now would be a good time to note opinions on this blog are mine, not theirs. I also spend a lot of time in the greater JavaScript community.</p><p>I'm hella active on Twitter and enjoy external validation quite a bit. Please follow me <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman. </a></p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">This guy says follow me on Twitter. <a href="https://twitter.com/ken_wheeler?ref_src=twsrc%5Etfw">@ken_wheeler</a> <a href="https://t.co/lLX3nAw2M6">pic.twitter.com/lLX3nAw2M6</a></p>&mdash; Matthew Gerstman (Slytherin) (@MatthewGerstman) <a href="https://twitter.com/MatthewGerstman/status/1075207374552662016?ref_src=twsrc%5Etfw">December 19, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I also give tech talks on everything ranging from <a href="https://www.youtube.com/watch?v=m1XdasrstCc&amp;t=2s">salary negotiation</a> to <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg&amp;t=534s">functional programming</a>. Last year I got the opportunity to speak at <a href="https://www.youtube.com/watch?v=Pjc1AnBLG8c">ReactNext in Tel Aviv</a> and this summer you can catch me at React Norway.</p><p>One more thing! I'm a co-host on the popular podcast <a href="https://theconsolelog.com">The Console Log!</a> Every week we talk about the latest in the JavaScript world and make some pretty great puns (if I do say so myself).</p><h1 id="travel">Travel</h1><p>I imagine I'll blog the least about this but Theater, Tech, and Travel sounds much better with the third T. Or maybe this will be the unexpected star of the blog. Anything is possible on the internet!</p><p>I get on an airplane about 15 times a year and go somewhere. Most of the time its San Francisco (work) or Florida (family), but I'm known to pick random spots in the US. Once or twice a year I feel adventurous and hop over the Atlantic or Pacific. This year it might be more.</p><p>Being on a plane inspired me to write this blog so really it's earned this mention.</p><h1 id="harry-potter">Harry Potter</h1><p>Harry Potter has had a profound impact on my life. So much that I've been sitting on a very personal letter to JK Rowling I've never had the courage to send. One day I'll get to it.</p><p>Aside from that I collect copies of the series, I have about 90 books these days. I've also seen <a href="https://amzn.to/2suNvRI">Puffs</a> 10ish times, and even <em>liked</em> Cursed Child when I saw it on stage. MuggleNet is a long standing member of my bookmarks bar and I find nothing more soothing than the voice of Jim Dale reading the series.</p><p>Here's a picture of me at Hogwarts in Japan.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2019/01/15591301_10154860545531913_6449567889596819102_o.jpg" class="kg-image" alt loading="lazy"></figure><h1 id="green-day">Green Day</h1><p>When I was eight years old I decided Green Day was going to be my favorite band. I'm very good at keeping my commitments. 20 years later and nothing makes me happier than hearing Green Day when I'm not expecting it.</p><p>I actually love music as a whole though. My record collection is around 250 records now, and my day to day listening is mostly <a href="https://www.amazon.com/Frank-Turner/e/B001LHXD5K/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=754e625d523c4b3cbad801b972e21d7e&amp;camp=1789&amp;creative=9325">Frank Turner</a>, <a href="https://www.amazon.com/Taylor-Swift/e/B0017PE36O/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=44320b27d000550fcda6add6243d1363&amp;camp=1789&amp;creative=9325">Taylor Swift</a>, and showtunes.</p><p>Last year I met Billie Joe Armstrong for the first time; we made extremely awkward small talk.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2019/01/30171707_10156356082131913_483646314901718704_o.jpg" class="kg-image" alt loading="lazy"></figure><p>Surprisingly less awkward, dancing on stage with <a href="https://www.amazon.com/Frank-Turner/e/B001LHXD5K/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=754e625d523c4b3cbad801b972e21d7e&amp;camp=1789&amp;creative=9325">Frank Turner.</a></p><figure class="kg-card kg-embed-card"><iframe width="459" height="344" src="https://www.youtube.com/embed/HlLkJ_YDFkU?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><h1 id="new-york">New York</h1><p>Finally, I'd be remise not to mention that I adore New York City. I moved here in December of 2015 and I immediately realized I was home. I'm never moving, please don't ask me to consider it.</p><h1 id="thanks-">Thanks!</h1><p>I'm shocked anyone made it this far in a self-indulgent blog post where I talk about all the things I love, but thanks for reading. I hope to start blogging regularly about all the things I mentioned above and we'll see what comes of it. </p>`,tags:["Tech","Theater","Travel"]},{id:18,slug:"es-everything",title:"ES-Everything: an ECMA Explainer",date:"January 06, 2020",excerpt:`Whats ES6? What about ESNext? TC39? ECMA? Transpilers? 

There's an entire ecosystem around shipping new-ish JavaScript to older browsers and how we decide what features get added to JavaScript in the`,content:`<p>You've done it, you've built your first web application. It does everything you expect. You've tested it rigorously. It works everywhere, your Macbook, your iPhone, your friend's android. You're so proud of yourself, you send it to your parents; they tell you it's just a blank page.</p><p>You poke around and realize they're still using that Dell desktop they bought in 2006. It's running Windows 7. They're using Internet Explorer 10. Your web-app doesn't work on this machine.</p><p>So you Google how to make your app work in IE 10, or 11, or whatever. You're quickly flooded with acronyms and terms you've never heard before ES5, ES6, ESNext, ES2020, TC39, ECMA. What's a transpiler? People are debating about polyfills and ponyfills; is there a difference?</p><p>If you're overwhelmed, that's okay, it's a lot. This article will attempt to cover the entire ecosystem around shipping new-ish JavaScript to older browsers and how the community decides what features get added to JavaScript in the first place; let's dive in.</p><h1 id="let-s-talk-about-ecma">Let's Talk About ECMA</h1><p>ECMA is the European Computer Manufacturers Association. They have many committees that handle many things. One of these committees is TC39 or Technical Committee 39. They maintain a specification, or spec, called ECMAScript. Whenever you hear ES5, ES6, or ESAnything, the ES refers to ECMAScript.</p><p>ECMAScript is the spec which JavaScript is built upon. It's a formal in-writing agreement of how JavaScript should work. Each browser has their own implementation of JavaScript but they all conform to the same spec (or they do their best). This is why your code may run slightly differently in Safari or Firefox or Chrome. The browser vendors are implementing an engine that takes your JavaScript and runs it on the machine.</p><h2 id="es5-es6-esnext">ES5, ES6, ESNext</h2><p>Now, this underlying spec is constantly changing. JavaScript gets new features and browsers evolve. In 2009, ES5 was standardized across browsers. This was the largest release for a long time. If you've ever read <a href="https://amzn.to/2MWOggZ">JavaScript: The Good Parts</a> it was based on ES5. </p><p>It wasn't until 2015 that ES6 was released with major changes to the language. Some of the bigger features in ES6 included Promises, Arrow Functions, and Classes.</p><p>ES6 was a massive release. It was so big, and took so long, that TC39 decided to stop numbering ECMAScript altogether. At this point they decided to rebrand ES6 as ES2015 and brand all future versions by year. Examples include ES2016, ES2017, etc.</p><p>They also introduced the concept of ESNext, a living breathing version of the latest JavaScript. ESNext includes all the features that have been formally agreed upon by the committee.</p><h3 id="a-note-on-es6">A Note On ES6</h3><p>You may be thinking: I thought ES6 was the latest version of JavaScript. This is a misnomer. For a number of reasons, people often refer to anything after ES5 as ES6. This is mostly due to the fact that ES6 was a very large release, and the last one to have a simple version number.</p><p>If you hear someone say ES6, they likely mean ESNext.</p><h2 id="tc39">TC39</h2><p>Technical Committee 39 meet semi-regularly, usually on the West Coast of the United States, but sometimes elsewhere. You can see all their meeting agendas <a href="https://github.com/tc39/agendas">here</a>. They're made up of individuals from major tech companies who are members of ECMA. For most large companies, for example Google or Facebook, it costs about $70,000 for membership. There are significant discounts for very small or non-profit companies. You can see the full list of members <a href="https://www.ecma-international.org/memento/members.htm">here</a>.</p><h2 id="new-javascript-features">New JavaScript Features</h2><p>Anybody can submit a proposal for a new JavaScript feature, but every proposal eventually needs a "champion" from the committee in order to be adopted. Proposals are submitted by opening a pull request on the <a href="https://github.com/tc39/proposals">proposals repo</a>.</p><p>Features go through stages from 0 to 4. At the end of the year, all features in Stage 4 are considered in that year's version of ECMAScript. You can see the full list of finished proposals <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">here</a>.</p><h3 id="stage-0-strawperson">Stage 0: Strawperson</h3><p>These are strawperson proposals. This is the idea stage. The only requirement to get to Stage 0 is the initial PR.</p><h3 id="stage-1-proposal">Stage 1: Proposal</h3><p>This is the stage where the committee agrees they will spend time discussing on the feature. They assign a champion to the proposal, determine the high level API, and potentially implement a demo. It is expected that a feature will spend a good chunk of time being worked on in Stage 1 before reaching Stage 2.</p><h3 id="stage-2-draft">Stage 2: Draft</h3><p>At this point, a there should be a formal specification for the feature. It may still have lots of TODOs and room for improvement, but it's mostly there. If a significant issue is discovered, the feature may have to go back to Stage 1.</p><h3 id="stage-3-candidate">Stage 3: Candidate</h3><p>This is when the feature is mostly complete. The committee agrees that they are unable to find any issues until someone attempts to implement the feature. If a browser vendor attempts to implement the feature and finds an issue, the feature may go back to Stage 2.</p><h3 id="stage-4-finished">Stage 4: Finished</h3><p>A feature is considered done when it's been implemented in not one, but two different browsers. For example, if a feature becomes stable in both Firefox and Chrome, it's considered finished. The committee will then merge in a pull request to the ECMAScript spec.</p><p>The full ECMAScript spec is available <a href="https://tc39.es/ecma262/">here</a>.</p><h1 id="running-your-code">Running Your Code</h1><p>We often want to use the latest features in our code, but older browsers won't support them. To do this, we use transpilers and polyfills.</p><h2 id="transpilers">Transpilers</h2><p>A transpiler is a type of compiler that takes source code written in a high level language and produces equivalent source code in another high level language. This is in contrast to a compiler, which takes source code written in a high level language and compiles it to a low level language like assembly.</p><p>Transpilers can also be used to convert from one version of a language to another one. This is how we can write JavaScript using the newest features but still execute our code in browsers that don't support them natively.</p><p>For example we can compile an arrow function to a traditional one.</p><pre><code class="language-javascript">const func = () =&gt; {
  console.log('foo');
}

const func = function () {
  console.log('foo');
}
</code></pre><h3 id="babel">Babel</h3><p>One of the most popular transpilers is <a href="https://babeljs.io">Babel</a>. Babel is the go-to test environment for early JavaScript features. It does this by implementing a rich plugin architecture that allows developers to test syntax while it is still in it's earliest stages.</p><h3 id="typescript">TypeScript</h3><p>TypeScript goes a step further and adds type-checking to JavaScript. As part of this, it offers a built in transpiler to build your ESNext code for older browsers. While Babel has the ecosystem to support Stage 2 and below features, Typescript does not.</p><p>Sometimes developers will chose to use both so they can get type-checking and the latest features.</p><h3 id="targets">Targets</h3><p>When building our code we'll pick a target version of JavaScript. This is most commonly ES5 however we could compile to any arbitrary version of the ECMAScript spec. The tradeoff is that older targets generate more source code, but newer targets will run in fewer browsers.</p><p>The reason we often want to generate less source is performance. Fewer bytes means less to send over the network, less to parse, and less to execute.</p><h2 id="polyfills">Polyfills</h2><p>Transpiling is enough for syntax changes, but what about new functions and classes? That's where polyfills come in. A polyfill is the implementation of a newer feature written in an older version of ES. The polyfill usually check if the browser has it's own version of the feature and if not inject it.</p><p>For example a fetch polyfill might look like this:</p><pre><code class="language-javascript">if (window.fetch === undefined) {
  window.fetch = function() {
   // Implementation of fetch here
  }
}
</code></pre><p>Babel and Typescript will support a configuration to automatically include any necessary polyfills in your source code.</p><p>Under the hood, most most polyfills rely on a project called <a href="https://github.com/zloirock/core-js">core-js</a>.</p><h3 id="ponyfill">Ponyfill</h3><p>While polyfills automatically inject an implementation of the feature, ponyfills will treat them as any other dependency. There are a few advantages to this. Ponyfills don't polute the global scope. In addition, the implementation of a feature may vary between browsers and the polyfill. This allows engineers to use a consistent implementation of a feature.</p><p>For example a fetch ponyfill might look like this:</p><pre><code class="language-javascript">const fetch = window.fetch || require('fetch-ponyfill');
</code></pre><p>It is commonly debated which approach is better. I'll leave that exercise up to the reader.</p><h2 id="where-you-run-your-code-matters">Where You Run Your Code Matters</h2><p>When deciding what version of ES to target and what polyfills to include, it's important to consider where your code is running.</p><p>We often focus on which browsers and which versions of those browsers we support, but JavaScript can run many places. For example, if you're building an Electron application, you may not need to transpile/polyfill at all. The same thing applies to node applications. If you're building for one specific environment, you only need to worry about how your code runs in that environment.</p><h1 id="thanks">Thanks</h1><p>I hope this post was useful! Follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> for more content like this.</p><h1 id="references">References</h1><ul><li><a href="https://www.ecma-international.org/memento/tc39-m.htm">https://www.ecma-international.org/memento/tc39-m.htm</a></li><li><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">https://github.com/tc39/proposals/blob/master/finished-proposals.md</a></li><li><a href="https://en.wikipedia.org/wiki/ECMAScript#ES2019">https://en.wikipedia.org/wiki/ECMAScript</a></li><li><a href="https://tc39.es/process-document/">https://tc39.es/process-document/</a></li><li><a href="https://en.wikipedia.org/wiki/Source-to-source_compiler">https://en.wikipedia.org/wiki/Source-to-source_compiler</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill">https://developer.mozilla.org/en-US/docs/Glossary/Polyfill</a></li></ul>`,tags:["javascript","tc39","ecmascript","Tech"]},{id:20,slug:"all-in-on-homekit",title:"All in on HomeKit",date:"January 04, 2022",excerpt:`I've shared a lot of pictures of my apartment, but I haven't spent a whole lot of time talking about how automated this place is. I put a lot of work into automating it and thought I'd do a writeup.

`,content:`<p>I've shared a lot of pictures of my apartment, but I haven't spent a whole lot of time talking about how automated this place is. I put a lot of work into automating it and thought I'd do a writeup. Also all of the amazon links are affiliate links so I might make a dollar if you buy something.</p><p>I'm an Apple Enthusiast and I consistently opt in to whatever they provide in their ecosystem. We're up to two HomePod Classics, four HomePod Minis, multiple Macs, and several dozen iPods. Also the latest iPhone, iPad Pro, and the Apple Watch.</p><p>To put simply, if Apple has a product category, I've opted in. It's no surprise I went with HomeKit for my home operating system. HomeKit presents different challenges from the Alexa and Google ecosystems. For example, HomeKit requires developers register with Apple and meet certain hardware requirements on their products. As a result there are significantly fewer accessories that work with HomeKit. I do however find they generally perform better than non-HomeKit equivalents I've set up in other homes.</p><h2 id="layout">Layout</h2><p>We've got three main rooms in the apartment: The Office (or Guest Room), The Living Room, and The Bedroom. The bulk of the equipment is in The Office, so we'll start there.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/2020-10-31-14.14.12.jpg" class="kg-image" alt loading="lazy" width="775" height="595" srcset="__GHOST_URL__/content/images/size/w600/2022/01/2020-10-31-14.14.12.jpg 600w, __GHOST_URL__/content/images/2022/01/2020-10-31-14.14.12.jpg 775w" sizes="(min-width: 720px) 720px"><figcaption><em>Marked up floorplan I used when planning.</em></figcaption></figure><h1 id="the-office">The Office</h1><p>The Office or The Guest Room, is where I spend the bulk of my day working from home. I picked green because it's a color that helps me stay awake and focus. Also it goes nicely with plants.</p><p>My work machine is a 2020 16" intel MacBook, a <a href="https://amzn.to/3EOlw2c">Dell 27" monitor</a>, and a <a href="https://amzn.to/337e992">Dell 24" monitor</a> vertically oriented. I also have my personal iMac which is a plex server for the apartment. Behind the iMac I use a <a href="https://amzn.to/3zq4HJK">variety</a> of <a href="https://amzn.to/3HE2a1k">cable management</a> boxes to hide the wires and a pair of <a href="https://amzn.to/3eOib8P">Philips Hue Play Bars</a> and <a href="https://amzn.to/3ztY9dk">Philips Hue Blooms</a> for lighting. Below is what it looks like on an average day.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/11.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/11.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/11.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/11.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/11.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Office Doorway</figcaption></figure><p>There's a pair of HomePod Minis as a studio pair I can use with either of the Macs. I also use my Airpods Max while working and for conference calls. </p><p>Behind the closet I've got a FreeNas, networking equipment, and hubs for the hue lights, shades, and overhead lights. I recently added a smart power switch so I can power cycle these from my phone. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0735.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0735.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0735.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0735.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/IMG_0735.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Server Closet</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/15.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/15.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/15.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/15.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/15.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Office - Bed and Bookshelf</figcaption></figure><p>This room has a few lamps, most notably the <a href="https://amzn.to/3GbaPbD">hydra lamp</a>, and the <a href="https://amzn.to/3eSkUOA">hotel style usb lamp</a>. I also have a <a href="https://amzn.to/3mVrwQu">charging station</a> at the bed for guests. The various lamps in the room are all <a href="https://amzn.to/3t1W7Qe">Philips Hue White bulbs</a> with <a href="https://amzn.to/3pVRvcG">VOCOLinc smart plugs</a> for the bookshelf lights and lava lamp. </p><h2 id="networking">Networking</h2><p>The apartment network is powered by a Ubiquity Dream Machine, a ton of <a href="https://amzn.to/3F7jjzb">UniFi switches</a>, and a few <a href="https://amzn.to/3eVBvRi">WiFi 6 access points</a>. The Dream Machine lives behind the iMac with the bulk of the switches in the server closet. I also have a <a href="https://amzn.to/3mVla3A">Raspberry Pi</a> running <a href="https://pi-hole.net">Pi-hole</a> as a DNS level ad-blocker.</p><p>I drilled a small hole in the walls against the Living Room and Bedroom to send an ethernet cable to the other room.</p><h1 id="the-living-room">The Living Room</h1><p>The Living Room is where I watch TV with the cats or hangout with friends I'm entertaining. <a href="https://amzn.to/3mRqtBd">AppleTV</a> was a no-brainer. The display is a <a href="https://amzn.to/3JKwc5t">LG GX65 OLED</a>. Theres a <a href="https://amzn.to/3JH08zz">Philips Hue Gradient Strip</a> along with <a href="https://amzn.to/3qIxSUu">two Play Bar lights</a> synced with the <a href="https://amzn.to/3pSpZws">Hue Play Sync Box</a>.</p><p>This is hooked up to a <a href="https://amzn.to/3pQ0j3z">Sonos Arc</a>, Two Rear <a href="https://amzn.to/3EUDxMl">Sonos One SLs</a>, and a <a href="https://amzn.to/3zr4PIT">Sonos Sub</a>. Each of these is connected via ethernet using wires running under and behind the furniture. I use these <a href="https://amzn.to/3pU8UCh">cord protectors</a> to keep the cables neat and protected from the cats. I have <a href="https://amzn.to/3r7548z">this charging station</a> on the end table, along with chargers next to the AC unit for on-couch charging.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/02.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/02.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/02.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/02.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/02.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Living Room</figcaption></figure><h2 id="lighting">Lighting</h2><p>Separate from the television lighting system, every light in the apartment is smart. </p><p>Most of the Living Room bulbs are <a href="https://amzn.to/3t1W7Qe">Philips Hue White bulbs</a>, however the <a href="https://amzn.to/32ZhBSU">couch lamps</a> are using <a href="https://amzn.to/3pSLXPS">Philips Hue Color bulbs</a> for fun scenes. I tried syncing these with the TV but it ended up being more annoying than fun.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/03.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/03.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/03.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/03.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/03.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Living Room - Behind the couch</figcaption></figure><p>In the dining room I have this <a href="https://amzn.to/334npKL">larger lamp</a> along with the three bulb unit I got at a local hardware store. The overhead lights are using <a href="https://amzn.to/3JBbDsl">Caseta Lutron</a> switches. The water fountain for the cats is hooked up to a <a href="https://amzn.to/3nimFJB">VOCOLinc smart plug</a> so I can turn it on/off with the lights.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/04.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/04.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/04.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/04.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/04.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Dining Room</figcaption></figure><h1 id="kitchen">Kitchen</h1><p>The kitchen has a surprising amount of tech packed into it. Under the cabinets are <a href="https://amzn.to/3EPLsdD">Philips Hue lightstrips</a> that can change color. I mostly use these to light the countertops. I attempted to use these for the office bookshelf but it was a nightmare splicing them and I went with a cheaper IKEA solution. There's a HomePod mini in the kitchen that I use mostly for siri but occasionally for music. </p><p>I also have a <a href="https://amzn.to/31r0J77">GE Opal ice maker</a> that I adore. It's a nightmare to clean though.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/07.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/07.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/07.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/07.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/07.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Kitchen</figcaption></figure><h1 id="the-entryway">The Entryway</h1><p>The first thing you see when you walk into the apartment is a television hooked up to a raspberry pi. I use <a href="https://dakboard.com/site">DakboardOS</a> to power a display that shows me my daily calendar along with updating news. This is exceptionally useful when I'm pacing between my office and the kitchen during the work day.</p><p>Most of the panels were available out of the box, but I had to roll my own <a href="http://github.com/matthew-gerstman/tweetonescreen">tweet visualizer</a> in the lower left hand corner.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0737.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0737.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0737.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0737.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/IMG_0737.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Entryway Dakboard</figcaption></figure><p>I also have <a href="https://amzn.to/3pWhdxm">Eufy Pan and Tilt cameras</a> here and in every other room so I can watch the cats or check on the apartment when I'm out of town. </p><h2 id="the-bedroom">The Bedroom</h2><p>In the the bedroom I took things up a notch with <a href="https://amzn.to/3324wYS">White Ambiance</a> bulbs. I like these because the temperature is warmer at night and easier on the eyes. The television is connected to an Apple TV with two HomePod Classics in a stereo pair. I connected my vintage turntable to the Homepods with <a href="https://amzn.to/3zshGuH">this adapter</a>, a <a href="https://amzn.to/3pSkOfY">Behringer USB preamp</a> and <a href="https://www.airchordapp.com">AirChord</a> running on my old iPad.</p><p>There are a pair of <a href="https://amzn.to/3sYnMkX">Philips Hue Edison Bulbs</a> in <a href="https://amzn.to/3pUGDvC">these lamps</a>. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/16.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/16.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/16.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/16.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/16.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Bedroom</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/18.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/18.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/18.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/18.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/18.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Bedroom Media</figcaption></figure><h1 id="scenes">Scenes</h1><p>All this integration means I can do a lot of nifty things with scenes. First, theres some simple automation. The couch lamps and the steel lamp both turn off at 5 PM every day. The bedroom shade automatically lifts at 7:30 AM on weekdays which abruptly informs the cats its time to wake me up.</p><p>The AC is controlled with a <a href="https://amzn.to/3FV8AZv">Sensibo Air</a> to make the window units smart.</p><p>The scenes I use every day are Good Morning and Good Night. Good Morning opens every shade, turns on every light to 100%, and boots the entryway TV up. Good Night turns off every light. There's another scene: Make it Dark, that turns off every light and closes every shade. </p><p>Each room has a <a href="https://amzn.to/31oY8dQ">hue dimmer switch</a> that controls the whole room. I made two scenes for each room, Room One and Room Zero. Those turn off every light and control the shades. In between those I have scenes that brings an assorted set of lights on. For example in the kitchen I have a scene that only turns on the countertop lights.</p><p>My favorite scene is Lullaby which turns off my TV, closes my shades, and begins playing a playlist in the bedroom currently composed of The Postal Service, Taylor Swift, The Postal Service again, and Billie Eilish. There's also Nap Time which does all this and turns off the bedroom lights.</p><p>In the same vein, Nightlight turns on a dim light in the master bathroom, kitchen, and living room. </p><p>For anything Marvel, I put on TV Time which closes the shades and turns off any light that I can see from the Living Room, including the entryway TV. It's counterspell is Chill, which opens all shades and turns every light in the apartment to 50%. I used <a href="http://leviosashades.com">Leviosa Shades</a> which integrate with HomeKit, although I wish the bridge was more reliable.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0001.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0001.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0001.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0001.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0001.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0002.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0002.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0002.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0002.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0002.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot - Bedroom</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0003.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0003.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0003.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0003.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0003.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot - Kitchen</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0004.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0004.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0004.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0004.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0004.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot - Living Room</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0005.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0005.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0005.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0005.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0005.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot - Office</figcaption></figure><h1 id="speakers-and-music">Speakers and Music</h1><p>I've already touched on the speakers but I'll reiterate and be a bit more thorough this time. The Office has a paired set of HomePod mini's that I use with the computers. The bookshelf has a <a href="https://amzn.to/31tr0lo">Sonos Five</a> connected to a <a href="https://amzn.to/3mZjuGj">Fluance RT85</a> turntable for vinyl. This can stream vinyl throughout the entire apartment.</p><p>The Bedroom has a pair of HomePod Classics for primary listening. The turntable is a vintage Sanyo with an <a href="https://amzn.to/331ORsA">Ortofon Blue cartridge</a>. I like to read and listen to records on this setup. I occasionally put the <a href="https://amzn.to/3pSzN9K">Sonos roam</a> in here if I'm doing a project where I'm running between rooms and want to listen to vinyl.</p><p>I've also got one of two iPod displays in the Bedroom. I love iPods, they were iconic during my formative years and are a form of Apple Nostalgia for me. The iPod Mini display includes one of each color with a different artist on each. They are from left to right Green Day, Taylor Swift, Coldplay, Blink 182, and Frank Turner. They also work! I stream them to an old Zenith radio using an iTrip.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0554.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0554.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0554.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0554.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/IMG_0554.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>iPod Mini Display</figcaption></figure><p>The Living Room is where the magic happens. The main system is a <a href="https://amzn.to/3pQ0j3z">Sonos Arc</a>, two rear <a href="https://amzn.to/3EUDxMl">Sonos One SLs</a>, and a <a href="https://amzn.to/3zr4PIT">Sonos Sub</a>. This sounds fantastic for movies and is also a great party system.</p><p>To the right I have the iPod Classic display. This contains each generation of iPod and the first five generations of iPhone. All of these devices work and are loaded with content.</p><p>There's also an iPod Hi-Fi that can accept any of the iPods with dock connectors and play their music. Inside the box is an Airport Express to pair this speaker to AirPlay 2. I mostly use this speaker when I'm working out in the landing strip between the carpet and the display or when I'm drunk and feel like dancing.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/05.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/05.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/05.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/05.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/05.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Photo Wall With iPod Display</figcaption></figure><p>Finally, there's a HomePod mini tucked away in the back that I exclusively use for Siri.</p><h1 id="legacy-macs">Legacy Macs</h1><p>Behind the couch is my legacy mac setup. There's a few machines here. There's a 2014 Macbook Pro I use to manage all of my devices. A 2009 Macbook Pro I use to manage some legacy iPads. and my favorite, a 2007 Black Macbook that's dual booting Snow Leopard and Windows XP.</p><p>These are mostly toys, but they all work and I use them for projects.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0741.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0741.jpeg 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0741.jpeg 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0741.jpeg 1600w, __GHOST_URL__/content/images/size/w2400/2022/01/IMG_0741.jpeg 2400w" sizes="(min-width: 720px) 720px"><figcaption>2007 Macbook running WIndows XP</figcaption></figure><h1 id="bugs">Bugs</h1><p>I'm really proud of this thing I built, but it definitely has it's quirks. The various bridges all need to be reset from time to time, and I once just turned off the circuit breaker to turn off everything at once and reboot the whole apartment. Recently, I added a <a href="https://amzn.to/3HvAuvy">smart power switch</a> so I could power cycle the bridges from my phone. The Pi-hole DNS is one of the most likely things to crash so I have that plugged into it as well.</p><p>Scenes featuring music are particularly unreliable. Lullaby and Nightlight will work for a while and then stop. I used to have a scene called Tunes that would play a playlist on every speaker in the house, but I gave up after too many failures.</p><p>There's also an issue where the living room AppleTV is slightly out of sync with other AirPlay devices. I work around this by unplugging the Sonos Arc and airplaying directly to it when I want to use multiple speakers at once.</p><p>Another issue is Siri always feels the need to tell me when one or more devices didn't respond. This is great in theory, but is almost never useful. I consistently repeat the request and it works the second time. It also doesn't give me any insight into which device failed. Many of my scenes are controlling 30+ accessories so I have no way of knowing if a bridge is down or the bathroom light is just off. It'd be nice if the home app gave me this info.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2022/01/IMG_0006.PNG" class="kg-image" alt loading="lazy" width="2000" height="1397" srcset="__GHOST_URL__/content/images/size/w600/2022/01/IMG_0006.PNG 600w, __GHOST_URL__/content/images/size/w1000/2022/01/IMG_0006.PNG 1000w, __GHOST_URL__/content/images/size/w1600/2022/01/IMG_0006.PNG 1600w, __GHOST_URL__/content/images/2022/01/IMG_0006.PNG 2388w" sizes="(min-width: 720px) 720px"><figcaption>Home App Screenshot - Misc</figcaption></figure><p></p><h1 id="wrap-up-and-feature-requests">Wrap Up and Feature Requests</h1><p>The main tools I used to make this apartment smart were Philips Hue bulbs and fixtures, Apple devices, the Leviosa Shades, and a bunch of VOCOLinc adapters. From there it was a massive time investment to get everything working the way I wanted it to.</p><p>Scenes are a small nightmare to compose. Any time I add or move I light I need to modify every single scene it's in. I would love to see composable scenes where I can say "this is the office in chill mode" or "this is the bedroom 100%". This way I could make Good Morning the composition of Bedroom One, Living Room One, and Office One.</p><p>I would also love a guest mode. Whenever I have someone visiting I need to be careful with apartment-wide scenes while they're sleeping. It would be great if I could just make a room automonmous for a period.</p><p>The home app is overdue for a makeover. It was perfect when I lived in a 350 sqft studio apartment, but now that I have multiple rooms, many accessories, and many scenes it's unweildy and unreliable. I'm hoping that Apple improves this in a future release.</p><p>Overall though, I'm happy I went with HomeKit. It integrates with everything else I own and Apple's track record on privacy is next to none. I really hope Apple improves the stability of HomeKit and HomePods over the next few years, but until then I'll keep tinkering.</p>`,tags:["Tech"]},{id:9,slug:"what-the-functor",title:"What the Functor?",date:"February 24, 2019",excerpt:"A monad is just a monoid in the category of endofunctors, what's the problem? Hopefully, you'll understand this when we're done.",content:`<p>My <a href="__GHOST_URL__/functional-programming-fundamentals">last post</a> aimed to make <a href="__GHOST_URL__/functional-programming-fundamentals">functional programming</a> as straightforward as possible. An explicit goal of that article was to <em>avoid unnecessary jargon like monads and functors and stick to concepts that will make our code better. </em></p><p>This time around let's dive into all the scary terms and make them not so scary. While knowing these terms might not make your code better, they're fun to know. </p><p>The one thing we skip in this article is <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda calculus</a>, check out <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a> for more on that. I also have an article called <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce</a> that is more practical.</p><p>As a warning, we're gonna be diving into some abstract mathematics. This XKCD is now more relevant than ever.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2019/02/image-5.png" class="kg-image" alt loading="lazy"><figcaption>Functional programming combines the flexibility and power of abstract mathematics with the intuitive clarity of abstract mathematics.<a href="https://xkcd.com/1270/" rel="noreferrer nofollow noopener">[11]</a></figcaption></figure><p>A monad is just a monoid in the category of endofunctors, what's the problem? <a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">[7]</a> <a href="https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/3870310#3870310">[8]</a>. Hopefully, you'll understand this when we're done.</p><p>One final disclaimer, I didn't know any of this when I set out to write this article. I've heavily annotated this post with resources I used to learn this stuff as I was going. If you're already knowledgeable on category theory, please be gentle when correcting me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="functors">Functors</h1><p>What fun would it be if we didn't start with the titular term, functor.</p><p>A <em>functor </em>is anything that can be mapped over. This is most commonly a list, but really it's any object that can be mapped over.</p><p>For example, we can make a <code>Wizard</code> that can be mapped over.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4f20482a242e565ea455ebb78f0a617a.js"><\/script><!--kg-card-end: html--><p><em>Note: in most practical situations, a functor would be parametric (containing a type parameter like <code>String</code> in <code>Array&lt;String&gt;</code>), but <code>Wizard</code> does fulfill the basic definition of a functor.</em></p><p>Now the <code>map</code> function also needs to meet the following criteria.</p><h2 id="identity-law-1-">Identity Law <a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">[1]</a></h2><p>If map is given an identity function it must return the exact same object. Like so:</p><p><code>functor.map(x =&gt; x) === functor</code></p><p>This one is hopefully straightforward.</p><h2 id="composition-law-1-">Composition Law <a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">[1]</a></h2><p><code>functor.map(x =&gt; f(g(x))) === functor.map(g).map(f)</code></p><p>Woah that's intimidating. What does this actually mean? Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a9a6c8392e87e7a936a3e383fa0f2be5.js"><\/script><!--kg-card-end: html--><p>We have <code>joinGryffindor</code> and <code>learnExpelliarmous</code>. If we call </p><p><code>wizard.map(joinGryffindor).map(learnExpelliarmous)</code> it needs to be equivalent to <code>wizard.map(w =&gt; learnExpelliarmous(joinGryffindor(w)))</code>. </p><p>Now it's worth calling out, it needs to be functionally equivalent. In abstract mathematics we're not worried about pointers and references so we can consider this good enough. This is also known as "Fast and Loose Reasoning is morally correct." <a href="http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html">[13]</a></p><hr><h1 id="category">Category</h1><p>The next term we need to dive into is a category. A category is an algebraic structure that models objects and their relationships with each other.</p><p>Below we can see a category of int, string, and float. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2019/02/image-3.png" class="kg-image" alt loading="lazy"><figcaption>Taken from article by Nikolay Grozev <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5]</a>.</figcaption></figure><p>The category is the entire chart. It's how we convert from int to string, float to string, or int to float, or float to int. </p><p>Now while in practice, a functor is just a thing we can map over, it has a more advanced explanation. In category theory, a functor is a transformation between two categories <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5]</a>. This is a transformation of the <strong>entire category.</strong> </p><p>For example, we can transform the entire category above with a <code>List</code> functor. The relationships between all of the types goes from a function like <code>toString</code> to <code>map(func)</code> or <code>map(toString)</code>. This also applies to <code>toFloat</code>, <code>round</code>, and any other functions in our category.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="__GHOST_URL__/content/images/2019/02/image-4.png" class="kg-image" alt loading="lazy"><figcaption>Taken from article by Nikolay Grozev <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5].</a></figcaption></figure><hr><h1 id="endofunctor">Endofunctor</h1><p>Now that we have functors and categories, let's discuss endofunctors. An endofunctor is a functor that transforms a category into itself. </p><p>I spent several hours trying to grok this, and more importantly, understand how it's relevant in software. After reading <em>many</em> articles I stumbled on <a href="https://www.youtube.com/watch?v=8XGFFMPHG0o"><a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">this talk [6]</a> </a>by <a href="https://twitter.com/DanielaSfregola">@<a href="https://twitter.com/DanielaSfregola">DanielaSfregola</a></a> and it clicked.</p><p>For all intents and purposes, all functors in programming are endofunctors. A functor is really just metadata around a value that allows us to map over it.</p><p>The objects in our category are our types, and the arrows are the relationships between those types. These relationships are fundamental to the language so we can't just create a wrapper (functor) that changes how these types are interrelated. </p><p>We can't change how types are related unless we change the definition of the type altogether. Even in JavaScript, which has gnarly behaviors around <code>NaN</code>, <code>undefined</code>, and other types, the relationship between them is still defined in the spec and can't be changed with a simple functor.</p><p>Practically speaking, all functors in programming are endofunctors. There are all sorts of nuanced exceptions to this rule but those are out of scope here. Think of it like physics 101 when we pretended friction wasn't a thing.</p><p>Seriously though, watch <a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">that talk</a>, I closed so many tabs after watching that talk.</p><hr><h1 id="monoid">Monoid</h1><p>Cool cool, cool cool cool. We've defined some of the scariest terms in functional programming, let's move on to monoids. </p><p>A monoid is a category with one object. A monoid has three important rules: identity, composition, and associativity. In programming, it's a wrapper around an object that enforces these rules.</p><ul><li><strong>Identity: </strong>This states that there must be a way to use the monoid such that it returns itself.</li><li><strong>Composition: </strong>This states that we must be able to combine values using the monoid.</li><li><strong>Associative: </strong>This states that the order of operations remains constant so <code>(a +b) + c === a + (b + c)</code>.</li></ul><p>If these seem vague and generalized, well thats how abstract math works. Let's look at a practical example, a string monoid. <a href="http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446">[9]</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3f97a78df599085a01bd8663e80cc9ec.js"><\/script><!--kg-card-end: html--><p>Above, we can see our <code>StringMonoid</code> with an <code>identity</code> value and a <code>compose</code> function.</p><p>We can use the compose function to produce a new string.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5a095ebd187f2be8098bd5ba2a05c2fa.js"><\/script><!--kg-card-end: html--><p>If we compose with the identity value we get the same value.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/571a8bab94ee65d77013aef7913b9c23.js"><\/script><!--kg-card-end: html--><p>Finally, if we call compose on the same arguments it doesn't matter which pair we do first.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/7f76d38e33fbed7a2a82c7a303fec776.js"><\/script><!--kg-card-end: html--><p>Here are some other examples of monoids in JavaScript:</p><ul><li>Adding and multiplying numbers (with 0 and 1 as the identity value respectively).</li><li>Joining multiple arrays.</li><li>Composing multiple functions together.</li></ul><hr><h1 id="monads">Monads</h1><p>We did it! We made it to Monads.</p><p>Before we dive in let's take a step back. Functors and monoids were both wrappers around a value that allow us to execute operations on them. In the case of functors it was <code>map</code> in the case of monoids it was <code>compose</code>, where compose is a single operation.</p><p>Now monads. Monad's are both a functor and a monoid. That doesn't make this any simpler though. Let's define this in simpler terms.</p><p>A monad is a wrapper around some value that makes it easier to compose functions around it. This is often used to abstract away things like API calls or IO. In fact a <code>Promise</code> is a monad.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b5d20d2d6c2dace042376db4810336dd.js"><\/script><!--kg-card-end: html--><p>If we look at these types above, we have a <code>Wizard</code> and a function that returns a <code>Promise&lt;Wizard&gt;</code>. This promise allows us to compose functions on top of it without worrying about the underlying IO needed to go fetch a <code>Wizard</code> from the server.</p><p>Lets break down further.</p><p>A monad is based on a simple symmetryA way to wrap a value into a context, and a way to unwrap the value from the context <a href="https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8">[10]</a>.</p><h3 id="lift">Lift</h3><p>A monad allows us to <em>lift</em> a type into the monad context. In this case we're going from <code>Wizard</code> to <code>Promise&lt;Wizard&gt;</code>. The process of wrapping the <code>Wizard</code> in a <code>Promise</code> is called lifting.</p><h3 id="map-function map() { [native code] }1">Map</h3><p>A monad also allows us to map from one wrapped type to another. So we can call <code>wizardPromise.then(joinGryffindor).then(learnExpelliarmous)</code> to update the underlying wizard in the promise. </p><p>I should mention that the monad <code>map</code> is the same <code>map</code> we get with a functor. This is because monads are a type of functor.</p><p>Now it's worth noting that Promises don't explicitly provide a <code>map</code> function, but <code>then</code> gets us close enough.</p><h3 id="flatmap">FlatMap</h3><p>Finally, monads give us a way of going from <code>Promise&lt;Promise&lt;Wizard&gt;&gt;</code> to <code>Promise&lt;Wizard&gt;</code>. We should be able to have an arbitrarily nested monad and get to the original underlying value. We should also be able to do a <code>flatMap</code> on it. This is commonly done with a <code>chain</code> function.</p><h2 id="back-to-monads">Back to Monads</h2><p>Now it's worth noting that Promises don't perfectly map to monads, but they're close enough to understand the data type.</p><p>This also seems like a good time to reiterate, monads are an advanced abstract mathematical type. We're bringing these into our understanding of programming. They don't always line up perfectly with every construct in JavaScript. That's okay! </p><p>The point here isn't to make our code perfectly mathematical, we're just trying to understand some of the advanced math that powers our languages.</p><hr><h1 id="wrapping-up">Wrapping Up</h1><p>I'm going to admit. This article was challenging to write. I learned a lot in the process. I'd like to reiterate, none of this is important to your day to day code. But if you were curious what all those scary FP terms mean hopefully this satisfied that curiosity.</p><p>If you'd like something that will make your code better, check out <a href="http://matthewgerstman.com/functional-programming-fundamentals/">Functional Programming Fundamentals</a>. You can also check out <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce.</a> If you want to learn about <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda calculus</a> check out <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>.</p><p>Special thank you to <a href="https://twitter.com/glittershark1">@glittershark1</a> and <a href="https://twitter.com/jetpacmonkey">@<a href="https://twitter.com/jetpacmonkey">jetpacmonkey</a></a> for reviewing this.</p><p>Thank you to <a href="https://twitter.com/drboolean">@drboolean</a> for correcting my functor <a href="https://twitter.com/drboolean/status/1104145856452677633">example on Twitter.</a></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="references">References</h1><p><em>Note: I didn't end up quoting all of these directly, but I consulted all of them while writing this article.</em></p><ol><li><a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6</a></li><li><a href="https://medium.com/javascript-scene/functors-categories-61e031bac53f">https://medium.com/javascript-scene/functors-categories-61e031bac53f</a></li><li><a href="https://medium.com/@l.mugnaini/functors-applicatives-and-monads-in-pictures-784c2b5786f7">https://medium.com/@l.mugnaini/functors-applicatives-and-monads-in-pictures-784c2b5786f7</a></li><li><a href="https://medium.com/@lettier/your-easy-guide-to-monads-applicatives-functors-862048d61610">https://medium.com/@lettier/your-easy-guide-to-monads-applicatives-functors-862048d61610</a></li><li><a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/</a></li><li><a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">https://www.youtube.com/watch?v=8XGFFMPHG0o</a></li><li><a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html</a></li><li><a href="https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/3870310#3870310">https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/</a></li><li><a href="http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446">http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446</a></li><li><a href="https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8">https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8</a></li><li><a href="https://xkcd.com/1270/">https://xkcd.com/1270/</a></li><li><a href="https://gist.github.com/ericelliott/ea925c58410f0ae74aef">https://gist.github.com/ericelliott/ea925c58410f0ae74aef</a></li><li><a href="http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html">http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html</a></li></ol>`,tags:["Tech","functional-programming"]},{id:10,slug:"mary-had-a-little-lambda",title:"Mary Had a Little Lambda",date:"February 24, 2019",excerpt:`Originally I set out to write a sequel to Functional Programming Fundamentals that covered all of the scary jargon.  This quickly evolved into What the Functor? 

In that article I covered monads, mon`,content:`<p>Originally I set out to write a sequel to <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a> that covered all of the scary jargon. This quickly evolved into <strong><a href="__GHOST_URL__/what-the-functor/">What the Functor?</a> </strong></p><p>In that article I covered monads, monoids, and functors. Now we have one last bit of scary functional jargon, lambdas.</p><figure class="kg-card kg-image-card"><img src="__GHOST_URL__/content/images/2019/02/image-7.png" class="kg-image" alt loading="lazy"></figure><h1 id="lambda">Lambda</h1><p>A lambda is an anonymous function that can be treated like a value.<a href="https://github.com/hemanth/functional-programming-jargon"> [2]</a></p><p>We actually saw some of these in the <a href="__GHOST_URL__/what-the-functor/">previous post</a>. These were <code>learnExpelliarmous</code> and <code>joinGryffindor</code>. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/82876b9911bc8b1bba5c5cc733b2427d.js"><\/script><!--kg-card-end: html--><p>In this case we create an anonymous function and assign it to the variable <code>joinGryffindor</code>. We then pass this as an argument to <code>map</code>. We could also just pass this anonymous function directly like so:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/61fb080c43c384ecc6d34bc7fba30ce3.js"><\/script><!--kg-card-end: html--><p>This is a common pattern, passing a lambda, or an anonymous function to a <a href="http://matthewgerstman.com/functional-programming-fundamentals/">higher order function</a>.</p><h1 id="lambda-calculus">Lambda Calculus</h1><p>Now the scarier term Lambda Calculus. Let's break this down. Lambdas are anonymous functions, we just learned that. </p><p>Why don't we define calculus now? If we pull up the dictionary definition we get the following</p><blockquote><em>A method of computation or calculation in a special notation (as of logic or symbolic logic. <a href="https://www.merriam-webster.com/dictionary/calculus">[3]</a></em></blockquote><p><strong>Lambda Calculus is just a formal way of defining functions using special notation. Less scary now, right?</strong></p><p>Let's dive just a little more into it. Lambda Calculus, or the formal notation for defining functions, is composed of three elements <strong>variables, functions, </strong>and <strong>applications</strong>. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><p>I'm going to go ahead and heavily paraphrase <a href="https://learnxinyminutes.com/docs/lambda-calculus/">this great article from learn x in y minutes</a>.</p><h2 id="variables">Variables </h2><p>We know these, variables are used in programming all the time, and we can name them anything. Lets go with one named <code>x</code>. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><h2 id="function">Function</h2><p>We know these too! We use functions in our code, and that's why you're reading an article on functional programming. In lambda calculus they use a special syntax: <code>&lt;parameters&gt;.&lt;body&gt;</code>. As an example <code>x.x</code> is the identity function. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><h2 id="application">Application</h2><p>This is a new word, but we see this all the time too. This is the act of calling a function. So if a function is the function declaration, this is the actual function call.</p><p>The syntax for this even involves parentheses! <code>(x.x)a</code> calls the identity function with the argument <code>a</code>.</p><p>Here's a useful table taken from the <a href="https://learnxinyminutes.com/docs/lambda-calculus/">article mentioned above.</a> <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><!--kg-card-begin: html--><table><thead>
<tr>
<th>Name</th>
<th>Syntax</th>
<th>Example</th>
<th>Explanation</th>
</tr>
</thead><tbody>
<tr>
<td>Variable</td>
<td><code>&lt;name&gt;</code></td>
<td><code>x</code></td>
<td>a variable named x</td>
</tr>
<tr>
<td>Function</td>
<td><code>&lt;parameters&gt;.&lt;body&gt;</code></td>
<td><code>x.x</code></td>
<td>a function with parameter x and body x</td>
</tr>
<tr>
<td>Application</td>
<td><code>&lt;function&gt;&lt;variable or function&gt;</code></td>
<td><code>(x.x)a</code></td>
<td>calling the function x.x with argument a</td>
</tr>
</tbody></table><!--kg-card-end: html--><p>This took me a while to grok. If you're looking for more resources I recommend Computerphiles <a href="https://www.youtube.com/watch?v=eis11j_iGMs">excellent video on Lambda Calculus</a> and the sequel on <a href="https://www.youtube.com/watch?v=9T8A89jgeTI">Y Combinators.</a></p><hr><h1 id="predicate">Predicate</h1><p>Let's finish up with a comparatively straightforward term. What is a predicate? A predicate is just a function that returns true or false [<a href="https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science">5</a>]. It's most commonly used as criteria for a filter.</p><p>Here's a predicate:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3951b37d8edeb0ee55153a2d76d0655c.js"><\/script><!--kg-card-end: html--><hr><h1 id="wrapping-up">Wrapping Up</h1><p>I'd like to reiterate, none of this is important to your day to day code. But if you were curious what all those scary FP terms mean hopefully this satisfied that curiosity.</p><p>If you'd like something that will make your code better, check out <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a>. If you want even scarier terms check out <strong><a href="__GHOST_URL__/what-the-functor/">What the Functor?</a></strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="ads">Ads</h1><p>These ads help me pay to keep this site up. Feel free to buy, watch, listen or ignore these like any other ad.</p><!--kg-card-begin: html--><div id="amzn-assoc-ad-28dd1412-99f1-4930-a348-0d0afedbb7ce"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=28dd1412-99f1-4930-a348-0d0afedbb7ce"><\/script><!--kg-card-end: html--><hr><h1 id="references">References</h1><ol><li><a href="https://www.youtube.com/watch?v=eis11j_iGMs">https://www.youtube.com/watch?v=eis11j_iGMs</a></li><li><a href="https://github.com/hemanth/functional-programming-jargon">https://github.com/hemanth/functional-programming-jargon</a></li><li><a href="https://www.merriam-webster.com/dictionary/calculus">https://www.merriam-webster.com/dictionary/calculus</a></li><li><a href="https://learnxinyminutes.com/docs/lambda-calculus/">https://learnxinyminutes.com/docs/lambda-calculus/</a></li><li><a href="https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science">https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science</a></li></ol>`,tags:["Tech","functional-programming"]},{id:8,slug:"everything-i-wish-i-knew-before-my-first-bay-area-internship",title:"Everything I Wish I Knew Before My First Internship",date:"February 18, 2019",excerpt:`In 2012 I spent my first summer as an intern in the Bay Area. While it was a invaluable experience, there's so much I wish I knew before then. Here's a run-through of everything I wish I knew.
`,content:`<p>In 2012 I spent my first summer as an intern in the Bay Area. While it was a invaluable experience, there's so much I wish I knew before then. Here's a run-through of everything I wish I knew.</p><p><em>Note: While I mention the Bay Area a few times in this post, this is really relevant to any location.</em></p><h1 id="application-process">Application Process</h1><p>Apply early and often. Interviews are a numbers game. The more companies you apply to, the better chance youll have. Interview processes for internships range in difficulty, but most will put you through a technical interview.</p><p>Most technical interviews focus on data structures. If you haven't taken that course yet, I would recommend getting ahead as most of it directly translates to the interview process. I also highly recommend the book <a href="https://amzn.to/2DQP0Pt">Cracking the Coding Interview</a> for practice. </p><p>Also I would definitely recommend applying to all of the big companies (Google, Apple, Facebook, Amazon, etc). Even if you dont get the internship this summer, youll put yourself on their radar in the future.</p><p>I do have some more advice on the subject though.</p><h3 id="real-interviews-don-t-tell-you-what-kind-of-problem-it-is-in-advance-">Real interviews don't tell you what kind of problem it is in advance.</h3><p>In <a href="https://amzn.to/2DQP0Pt">Cracking the Coding Interview</a>, problems are broken down by strings, arrays, trees, searches, sorts, etc. In a real interview you're going to get a vague prompt and have to figure out what kind of problem it is.</p><h3 id="failure">Failure</h3><p>You're going to fail a lot of interviews before you pass one. Technical interviews are hard and require a lot of practice, don't get discouraged. Do <a href="https://amzn.to/2DQP0Pt">practice problems</a> with your friends and keep your head up. Interviewing is a skillset completely separate from day to day coding, and unfortunately it's one you need to master.</p><h3 id="your-last-interview-has-no-bearing-on-the-current-one-">Your last interview has no bearing on the current one.</h3><p>If you bombed the last interview, shrug it off and move on. I know it's a stressful situation but do your best. This is doubly true for onsite interviews where you have multiple rounds in a row.</p><p>Here's a tip on interviews, you really only need to get one person excited about hiring you. The rest can be lukewarm. If you pass that bar you'll probably get an offer.</p><h2 id="number-of-internships">Number of Internships</h2><p>I recommend most people try and get two internships while they're in college. Usually it's the summers before Junior and Senior year.</p><p>You should still look for ways to write code during your first Summer (before Sophomore year). Apply to small (and big) companies, volunteer at a nonprofit, or just build an app and publish it. </p><p>Get <em>something </em>to put on your resume each summer.</p><h1 id="big-vs-small-companies">Big vs Small Companies</h1><p>One of the bigger decisions youll make is whether to go to a big or small company. Here are some of the pros of each.</p><h2 id="small-company">Small Company</h2><ul><li><strong>Wide variety of projects.</strong> Startups have more projects than they have resources. Youll be able to work on projects across the entire tech stack and learn what they like.</li><li><strong><strong><strong>Access to leadership. </strong></strong></strong>At a startup youll much more access to the leadership than you would at a company like google.</li></ul><h2 id="big-company">Big Company</h2><ul><li><strong><strong><strong>Structured internship programs. </strong></strong></strong>The big companies essentially create a summer camp for their interns. They make sure youre constantly entertained with activities. Theyll also set you up with a mentor.</li><li><strong><strong><strong>Pay/Housing.</strong></strong></strong> The bigger companies will usually pay you more and set you up with housing.</li><li><strong><strong><strong>Resume.</strong></strong></strong> People are shallow, Google will always look great on your resume.</li></ul><h1 id="resume">Resume</h1><p>Your resume should always fit on one page. Most recruiters will go through dozens of resumes at once and spend 30 seconds on each of them. A short resume thats all quality content will sell better than a long one with a lot of fluff.</p><p>I know the one page thing seems daunting at first, but trust me on this one. Heres <a href="https://www.businessinsider.com/elons-musk-resume-all-on-one-page-2016-4">an example of Elon Musks resume</a> shortened to one page. Google Docs has a ton of great templates these days.</p><p>Also, always submit your resume as a PDF. You never know how a <code>.docx</code> or <code>.pages</code> file is going be displayed on someone else's machine, or even worse, their printer.</p><p>One last thing, use your personal email. You wont have your school email forever and you never know who youre going to want to reach out to in 5 years. If its not already, I recommend your email be some version of firstname.lastname@gmail.com.</p><h1 id="once-you-start-your-internship">Once You Start Your Internship</h1><p>Always be aware that your internship is a 3 month long interview process. People will be submitting feedback on you. If they like you theyll often extend an offer for when you graduate. Also remember that the interview process is a two way street. Id recommend paying attention to how happy the full time employees are.</p><h1 id="intern-community">Intern Community</h1><p>The Bay Area brings in over 5,000 interns every summer. Some of the friends you make now will be both friends and industry connections you have for the rest of your career.</p><p>There will also be lots of intern focused events that are great for both social and professional networking. Keep in mind when attending these, the hosts always have their own motives. Usually theyre looking to recruit engineers. Youll still get a lot of value out of attending these events, but be aware no one is hosting it out of kindness of their heart.</p><h1 id="some-general-advice">Some General Advice</h1><p><strong>Always be learning. </strong>The tech industry moves incredibly quickly and you should always make sure youre keeping up. If you ever feel like youve stopped learning at your job, its probably time to look for a new one.</p><p><strong>Find Mentors</strong>. The best thing you can do for your career is to find people you look up to. They don't need to be that far ahead of you, 2-3 years is enough. But they should have seen enough of the road ahead to give you direction. But remember this is your life, do what you think is best.</p><p><strong>Dont Drop Out. </strong>Youll find a lot of people trying to convince you to drop out and join their startup, dont. Your CS degree will be valuable for at least the first 10 years of your career. I see lots of candidates who know how to code but cant handle real engineering tasks, youll learn that in school.</p><p><strong>Ship Code. </strong>Build apps, web-apps or whatever you feel like, but get the experience of writing something that people actually use. I meet lots of recent college grads who can pass a technical interview but have never watched someone use their software. Its humbling to say the least. Also, try adding features to something you wrote a year ago. Youll learn a lot about writing maintainable code that way.</p><p><strong>Learn Git</strong>. Learn how git works and upload everything you write to github. Github will eventually be your second resume. Dont be embarrassed about publishing your code. Git is one of the most important tools youll use in the industry and most schools dont teach it. <em>Disclaimer: Make sure youre allowed to upload your class projects.</em></p><h1 id="the-most-important-advice">The Most Important Advice</h1><p><strong>You are in charge of your own happiness.</strong> Remember this forever. I grew up on the east coast and firmly belong here. I spent years trying to convince myself to like the Bay Area, when really it just wasn't a good fit.</p><p>Try everything once, live somewhere you're not used to, but when it comes time to figure out what makes you happy, do what you think is best.</p>`,tags:["Tech","internship","bay-area"]},{id:15,slug:"how-i-prepare-a-talk",title:"How I Prepare A Tech Talk",date:"April 01, 2019",excerpt:"Almost weekly someone will ask me how do I put together a tech talk. I'd like to think I've gotten pretty good at answering. In fact I've gotten so used to sharing The Matthew Gerstman Method that it ",content:`<p>Almost weekly someone will ask me <em>how do I put together a tech talk.</em> I'd like to think I've gotten pretty good at answering. In fact I've gotten so used to sharing <em>The Matthew Gerstman Method </em>that it might as well be it's own talk.</p><p>That's too meta for me, so I went with a blog post. This probably isn't that different from anyone else's strategy, but it works for me.</p><h1 id="figuring-out-the-topic">Figuring Out The Topic</h1><p>The very first step is figuring out what I actually want to talk about. Different talks will come from variou sources of inspiration.</p><p>My <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg">Functional Programming talk</a> came out of a desire to evangelize Lodash after we migrated from <a href="https://blogs.dropbox.com/tech/2018/09/migrating-from-underscore-to-lodash/">Underscore at Dropbox</a>. I gave a talk on <a href="https://www.youtube.com/watch?v=m1XdasrstCc">Salary Negotiation </a>that is filled with advice I've given on repeat.</p><p>Currently I'm developing three talks. Building a Typed and Code Split React App, TypeScript: Seeing Past The Hype, and Nothing Generic About It. All three of these came directly out things I've learned at Dropbox. More importantly, these are things I'm passionate about and that should come through when I'm delivering them.</p><h1 id="outlining">Outlining</h1><p>The next step is the rough technical outline. I usually do this offline, walking around Manhattan, running errands, or cleaning my apartment. I generally try to get myself into a headspace where my thoughts can run wild and I can think about the general structure for the talk.</p><p>I might think a little bit about how I want to handle certain subjects, and ideas for code samples may come up, but overall it's high level.</p><p>When I get home I start to type it up. I plug away into <a href="http://paper.dropbox.com">Paper</a> and build a proper outline. Seeing it in front of me, I can reorganize topics and start to add more detail as it comes to me.</p><h1 id="research">Research</h1><p>This is often the hardest part of the talk. Researching the topic.</p><p>I try to learn everything I can about the subject I'm talking about and I make sure to cite sources. At this point it's more of a blog post than a tech talk. It's a lot of information in a Paper doc that I can share.</p><p>At this point I'm generally just copy pasting from articles I find into Paper and saving where I got the info.</p><p>Slowly this mass of content will become actual slides. I'll put in line breaks and figure out the flow of my talk. This is also where I write any relevant sample code.</p><p>Also, this is when jokes usually start coming to me. I might start stockpiling gifs, although that's not necessarily important yet.</p><h1 id="starting-the-slides">Starting The Slides</h1><p>At this stage I export from Paper to markdown and switch over to <a href="https://github.com/jxnblk/mdx-deck">mdx-deck</a>. It's a really nice project that lets you write your slides in markdown and include live code samples. If you're curious, I host my slides on Netlify.</p><p>I'm not terribly concerned about getting my slides perfect. The most important thing for now is the content itself. Secondly, I like to make sure theres comic relief when things get too technical.</p><p>Arguably, you should avoid spending time refining your slides here because they're so likely to change. Fonts, colors, and alignment can all wait. </p><p>Instead, I start running through the slides at home. I time myself on each practice run. More often than not, I need to cut content rather than add more, but your mileage may vary.</p><h1 id="workshopping">Workshopping</h1><p>This is one of my favorite parts, testing the talk out with friends. I usually find a couple of co-workers and give the talk to them in private. This allows me to see how the talk flows when someone is listening, how they respond to various things I might say, and most importantly, gather feedback.</p><p>Often I'll get feedback that something was confusing, or a few slides could have been rearranged. I might also get feedback like <em>this is irrelevant,</em> or <em>you need to expand on this</em>. Most importantly, I get to see if my jokes are funny.</p><p>When I was first getting started, I would have someone count my <em>ums</em>. This is a really useful exercise, because it gets you in the habit of breaking your awkward mannerisms. We all have them, and it takes practice to fix them.</p><p>I also recommend timing yourself, and asking your friend(s) to hold feedback until the end. I usually give them a pen and paper to take notes that I can hold onto afterwards.</p><h1 id="refining">Refining</h1><p>After two or three of these one on one sessions I'm in refinement mode. Getting the talk down to a science, and making sure I have all my points together.</p><p>This is the stage when I start trying to make my slides perfect. I check that everything is aligned properly. I also start adding speaker notes. </p><p>There's one thing I don't do though; I don't memorize anything. I make it a point to speak naturally every time I give the talk. This makes the delivery feel much more organic. I avoid writing down full sentences in my speaker notes and stick to bullet points. If I miss something during any given speech it's not that big a deal.</p><p>I also make sure my gif game is on point. To be honest, I spend hours on Google images looking for the perfect gifs.</p><h1 id="practicing-in-public">Practicing In Public</h1><p>The talk is 90% done now, but it still hasn't been given to an audience. I'll set a date with a local meetup and give the talk to a smaller group, usually 50-100 people. This is my first chance to give the talk in public and see how it lands. Usually people will come up to me after the talk and ask questions or give feedback. This is very helpful for the final version.</p><p>From here on, I'll update my slides as necessary, change up any jokes that didn't get laughs, and really hone my delivery. These tend to be minor tweaks, but they make a difference.</p><h1 id="the-big-event">The Big Event</h1><p>The week of the conference or event I'm speaking at I'll practice my talk every day to stay fresh. In the hours before I give it for real, I'll practice it two-three times by myself just to make sure I'm on point. I tend to get pretty nervous the day of so I just keep practicing in my hotel room to fight my nerves.</p><h1 id="reusing-a-talk">Reusing a Talk</h1><p>Giving a talk multiple times is totally okay. You've done all that work, you should get as much out of it as you can. However, you should ask yourself the question, <em>is this audience different from the one I originally spoke to?</em></p><p>There are a lot of reasons that answer could be yes. There are React conferences, TypeScript conferences, and vanilla JavaScript conferences. It's a safe bet that those audiences will all have different levels of familiarity with parts of your talk.</p><p>You should also consider cultural differences. Last year I gave my Functional Programming talk in Israel. I made it a point to replace all my Taylor Swift references with Natalie Portman to localize.</p><h1 id="wrapping-up">Wrapping Up</h1><p>If this sounds like a lot of work, it is. I estimate I spend one to two hours on every minute I'm speaking. The point of this is to know how to spend those fourty to sixty hours and get the most for your time.</p><p>Good luck with your talk! Feel free to tweet <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> with questions.</p><h2></h2>`,tags:["Tech","public-speaking"]}],Fo=Lg;function Pg(){const{theme:e,toggleTheme:t}=Cg(),[n,o]=x.useState(!1),[r,a]=x.useState(!1);return rd({onSearch:()=>o(!0),onEscape:()=>{o(!1),a(!1)},onFindInPage:()=>a(!0)}),c.jsxs(Nm,{basename:"/",children:[c.jsx(qm,{}),c.jsx(Bm,{theme:e,onToggleTheme:t}),c.jsx(cf,{isOpen:n,onClose:()=>o(!1),posts:Fo}),c.jsx(ff,{isOpen:r,onClose:()=>a(!1)}),c.jsxs(jm,{children:[c.jsx(Rt,{path:"/",element:c.jsx(Ll,{posts:Fo})}),c.jsx(Rt,{path:"/tech/:slug",element:c.jsx(Vf,{posts:Fo})}),c.jsx(Rt,{path:"/talks",element:c.jsx(tg,{})}),c.jsx(Rt,{path:"/career",element:c.jsx(gg,{})}),c.jsx(Rt,{path:"/career/datadog",element:c.jsx(Eg,{})}),c.jsx(Rt,{path:"*",element:c.jsx(Ll,{posts:Fo})})]})]})}const ad=document.getElementById("root");if(!ad)throw new Error("Root element not found");wa.createRoot(ad).render(c.jsx(Gl.StrictMode,{children:c.jsx(Pg,{})}));
