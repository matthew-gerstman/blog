function xd(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(o,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function Sd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $l={exports:{}},za={},Gl={exports:{}},N={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Id=Symbol.for("react.fragment"),_d=Symbol.for("react.strict_mode"),jd=Symbol.for("react.profiler"),zd=Symbol.for("react.provider"),Cd=Symbol.for("react.context"),Ed=Symbol.for("react.forward_ref"),Pd=Symbol.for("react.suspense"),Nd=Symbol.for("react.memo"),Rd=Symbol.for("react.lazy"),xs=Symbol.iterator;function Ld(e){return e===null||typeof e!="object"?null:(e=xs&&e[xs]||e["@@iterator"],typeof e=="function"?e:null)}var Yl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vl=Object.assign,ql={};function Tn(e,t,n){this.props=e,this.context=t,this.refs=ql,this.updater=n||Yl}Tn.prototype.isReactComponent={};Tn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jl(){}Jl.prototype=Tn.prototype;function xi(e,t,n){this.props=e,this.context=t,this.refs=ql,this.updater=n||Yl}var Si=xi.prototype=new Jl;Si.constructor=xi;Vl(Si,Tn.prototype);Si.isPureReactComponent=!0;var Ss=Array.isArray,Ql=Object.prototype.hasOwnProperty,Ti={current:null},Kl={key:!0,ref:!0,__self:!0,__source:!0};function Xl(e,t,n){var o,a={},r=null,i=null;if(t!=null)for(o in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(r=""+t.key),t)Ql.call(t,o)&&!Kl.hasOwnProperty(o)&&(a[o]=t[o]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(o in s=e.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:yo,type:e,key:r,ref:i,props:a,_owner:Ti.current}}function Md(e,t){return{$$typeof:yo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ii(e){return typeof e=="object"&&e!==null&&e.$$typeof===yo}function Ad(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ts=/\/+/g;function Ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ad(""+e.key):t.toString(36)}function Go(e,t,n,o,a){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case yo:case Td:i=!0}}if(i)return i=e,a=a(i),e=o===""?"."+Ja(i,0):o,Ss(a)?(n="",e!=null&&(n=e.replace(Ts,"$&/")+"/"),Go(a,t,n,"",function(c){return c})):a!=null&&(Ii(a)&&(a=Md(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Ts,"$&/")+"/")+e)),t.push(a)),1;if(i=0,o=o===""?".":o+":",Ss(e))for(var s=0;s<e.length;s++){r=e[s];var l=o+Ja(r,s);i+=Go(r,t,n,l,a)}else if(l=Ld(e),typeof l=="function")for(e=l.call(e),s=0;!(r=e.next()).done;)r=r.value,l=o+Ja(r,s++),i+=Go(r,t,n,l,a);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function _o(e,t,n){if(e==null)return e;var o=[],a=0;return Go(e,o,"","",function(r){return t.call(n,r,a++)}),o}function Wd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var he={current:null},Yo={transition:null},Fd={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:Yo,ReactCurrentOwner:Ti};function Zl(){throw Error("act(...) is not supported in production builds of React.")}N.Children={map:_o,forEach:function(e,t,n){_o(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _o(e,function(){t++}),t},toArray:function(e){return _o(e,function(t){return t})||[]},only:function(e){if(!Ii(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};N.Component=Tn;N.Fragment=Id;N.Profiler=jd;N.PureComponent=xi;N.StrictMode=_d;N.Suspense=Pd;N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fd;N.act=Zl;N.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Vl({},e.props),a=e.key,r=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,i=Ti.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Ql.call(t,l)&&!Kl.hasOwnProperty(l)&&(o[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];o.children=s}return{$$typeof:yo,type:e.type,key:a,ref:r,props:o,_owner:i}};N.createContext=function(e){return e={$$typeof:Cd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zd,_context:e},e.Consumer=e};N.createElement=Xl;N.createFactory=function(e){var t=Xl.bind(null,e);return t.type=e,t};N.createRef=function(){return{current:null}};N.forwardRef=function(e){return{$$typeof:Ed,render:e}};N.isValidElement=Ii;N.lazy=function(e){return{$$typeof:Rd,_payload:{_status:-1,_result:e},_init:Wd}};N.memo=function(e,t){return{$$typeof:Nd,type:e,compare:t===void 0?null:t}};N.startTransition=function(e){var t=Yo.transition;Yo.transition={};try{e()}finally{Yo.transition=t}};N.unstable_act=Zl;N.useCallback=function(e,t){return he.current.useCallback(e,t)};N.useContext=function(e){return he.current.useContext(e)};N.useDebugValue=function(){};N.useDeferredValue=function(e){return he.current.useDeferredValue(e)};N.useEffect=function(e,t){return he.current.useEffect(e,t)};N.useId=function(){return he.current.useId()};N.useImperativeHandle=function(e,t,n){return he.current.useImperativeHandle(e,t,n)};N.useInsertionEffect=function(e,t){return he.current.useInsertionEffect(e,t)};N.useLayoutEffect=function(e,t){return he.current.useLayoutEffect(e,t)};N.useMemo=function(e,t){return he.current.useMemo(e,t)};N.useReducer=function(e,t,n){return he.current.useReducer(e,t,n)};N.useRef=function(e){return he.current.useRef(e)};N.useState=function(e){return he.current.useState(e)};N.useSyncExternalStore=function(e,t,n){return he.current.useSyncExternalStore(e,t,n)};N.useTransition=function(){return he.current.useTransition()};N.version="18.3.1";Gl.exports=N;var x=Gl.exports;const _i=Sd(x),Dd=xd({__proto__:null,default:_i},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=x,Bd=Symbol.for("react.element"),Ud=Symbol.for("react.fragment"),Hd=Object.prototype.hasOwnProperty,$d=Od.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gd={key:!0,ref:!0,__self:!0,__source:!0};function ec(e,t,n){var o,a={},r=null,i=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)Hd.call(t,o)&&!Gd.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)a[o]===void 0&&(a[o]=t[o]);return{$$typeof:Bd,type:e,key:r,ref:i,props:a,_owner:$d.current}}za.Fragment=Ud;za.jsx=ec;za.jsxs=ec;$l.exports=za;var h=$l.exports,Ir={},tc={exports:{}},Ie={},nc={exports:{}},oc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,E){var P=j.length;j.push(E);e:for(;0<P;){var G=P-1>>>1,Z=j[G];if(0<a(Z,E))j[G]=E,j[P]=Z,P=G;else break e}}function n(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var E=j[0],P=j.pop();if(P!==E){j[0]=P;e:for(var G=0,Z=j.length,To=Z>>>1;G<To;){var Et=2*(G+1)-1,qa=j[Et],Pt=Et+1,Io=j[Pt];if(0>a(qa,P))Pt<Z&&0>a(Io,qa)?(j[G]=Io,j[Pt]=P,G=Pt):(j[G]=qa,j[Et]=P,G=Et);else if(Pt<Z&&0>a(Io,P))j[G]=Io,j[Pt]=P,G=Pt;else break e}}return E}function a(j,E){var P=j.sortIndex-E.sortIndex;return P!==0?P:j.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],c=[],g=1,m=null,f=3,w=!1,k=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(j){for(var E=n(c);E!==null;){if(E.callback===null)o(c);else if(E.startTime<=j)o(c),E.sortIndex=E.expirationTime,t(l,E);else break;E=n(c)}}function v(j){if(y=!1,p(j),!k)if(n(l)!==null)k=!0,Ya(T);else{var E=n(c);E!==null&&Va(v,E.startTime-j)}}function T(j,E){k=!1,y&&(y=!1,d(_),_=-1),w=!0;var P=f;try{for(p(E),m=n(l);m!==null&&(!(m.expirationTime>E)||j&&!Re());){var G=m.callback;if(typeof G=="function"){m.callback=null,f=m.priorityLevel;var Z=G(m.expirationTime<=E);E=e.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(l)&&o(l),p(E)}else o(l);m=n(l)}if(m!==null)var To=!0;else{var Et=n(c);Et!==null&&Va(v,Et.startTime-E),To=!1}return To}finally{m=null,f=P,w=!1}}var z=!1,C=null,_=-1,$=5,R=-1;function Re(){return!(e.unstable_now()-R<$)}function zn(){if(C!==null){var j=e.unstable_now();R=j;var E=!0;try{E=C(!0,j)}finally{E?Cn():(z=!1,C=null)}}else z=!1}var Cn;if(typeof u=="function")Cn=function(){u(zn)};else if(typeof MessageChannel<"u"){var ks=new MessageChannel,kd=ks.port2;ks.port1.onmessage=zn,Cn=function(){kd.postMessage(null)}}else Cn=function(){b(zn,0)};function Ya(j){C=j,z||(z=!0,Cn())}function Va(j,E){_=b(function(){j(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,Ya(T))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var P=f;f=E;try{return j()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,E){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var P=f;f=j;try{return E()}finally{f=P}},e.unstable_scheduleCallback=function(j,E,P){var G=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?G+P:G):P=G,j){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=P+Z,j={id:g++,callback:E,priorityLevel:j,startTime:P,expirationTime:Z,sortIndex:-1},P>G?(j.sortIndex=P,t(c,j),n(l)===null&&j===n(c)&&(y?(d(_),_=-1):y=!0,Va(v,P-G))):(j.sortIndex=Z,t(l,j),k||w||(k=!0,Ya(T))),j},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(j){var E=f;return function(){var P=f;f=E;try{return j.apply(this,arguments)}finally{f=P}}}})(oc);nc.exports=oc;var Yd=nc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=x,Te=Yd;function S(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ac=new Set,Xn={};function Vt(e,t){wn(e,t),wn(e+"Capture",t)}function wn(e,t){for(Xn[e]=t,e=0;e<t.length;e++)ac.add(t[e])}var tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_r=Object.prototype.hasOwnProperty,qd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Is={},_s={};function Jd(e){return _r.call(_s,e)?!0:_r.call(Is,e)?!1:qd.test(e)?_s[e]=!0:(Is[e]=!0,!1)}function Qd(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kd(e,t,n,o){if(t===null||typeof t>"u"||Qd(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pe(e,t,n,o,a,r,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ae[e]=new pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ae[t]=new pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ae[e]=new pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ae[e]=new pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ae[e]=new pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ae[e]=new pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ae[e]=new pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ae[e]=new pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ae[e]=new pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ji=/[\-:]([a-z])/g;function zi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ji,zi);ae[t]=new pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ji,zi);ae[t]=new pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ji,zi);ae[t]=new pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ae[e]=new pe(e,1,!1,e.toLowerCase(),null,!1,!1)});ae.xlinkHref=new pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ae[e]=new pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ci(e,t,n,o){var a=ae.hasOwnProperty(t)?ae[t]:null;(a!==null?a.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kd(t,n,a,o)&&(n=null),o||a===null?Jd(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,o=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var rt=Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Xt=Symbol.for("react.portal"),Zt=Symbol.for("react.fragment"),Ei=Symbol.for("react.strict_mode"),jr=Symbol.for("react.profiler"),rc=Symbol.for("react.provider"),ic=Symbol.for("react.context"),Pi=Symbol.for("react.forward_ref"),zr=Symbol.for("react.suspense"),Cr=Symbol.for("react.suspense_list"),Ni=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),sc=Symbol.for("react.offscreen"),js=Symbol.iterator;function En(e){return e===null||typeof e!="object"?null:(e=js&&e[js]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,Qa;function Dn(e){if(Qa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qa=t&&t[1]||""}return`
`+Qa+e}var Ka=!1;function Xa(e,t){if(!e||Ka)return"";Ka=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),r=o.stack.split(`
`),i=a.length-1,s=r.length-1;1<=i&&0<=s&&a[i]!==r[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==r[s]){if(i!==1||s!==1)do if(i--,s--,0>s||a[i]!==r[s]){var l=`
`+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{Ka=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Dn(e):""}function Xd(e){switch(e.tag){case 5:return Dn(e.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return e=Xa(e.type,!1),e;case 11:return e=Xa(e.type.render,!1),e;case 1:return e=Xa(e.type,!0),e;default:return""}}function Er(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zt:return"Fragment";case Xt:return"Portal";case jr:return"Profiler";case Ei:return"StrictMode";case zr:return"Suspense";case Cr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ic:return(e.displayName||"Context")+".Consumer";case rc:return(e._context.displayName||"Context")+".Provider";case Pi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ni:return t=e.displayName||null,t!==null?t:Er(e.type)||"Memo";case st:t=e._payload,e=e._init;try{return Er(e(t))}catch{}}return null}function Zd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Er(t);case 8:return t===Ei?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eh(e){var t=lc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){o=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(i){o=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zo(e){e._valueTracker||(e._valueTracker=eh(e))}function cc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=lc(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pr(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zs(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Tt(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uc(e,t){t=t.checked,t!=null&&Ci(e,"checked",t,!1)}function Nr(e,t){uc(e,t);var n=Tt(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rr(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rr(e,t.type,Tt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cs(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rr(e,t,n){(t!=="number"||oa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var On=Array.isArray;function dn(e,t,n,o){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Tt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,o&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(S(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Es(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(S(92));if(On(n)){if(1<n.length)throw Error(S(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tt(n)}}function dc(e,t){var n=Tt(t.value),o=Tt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function Ps(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Co,pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},th=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){th.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hn[t]=Hn[e]})});function mc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+t).trim():t+"px"}function gc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,a=mc(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,a):e[n]=a}}var nh=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ar(e,t){if(t){if(nh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(S(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(S(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(S(61))}if(t.style!=null&&typeof t.style!="object")throw Error(S(62))}}function Wr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function Ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dr=null,hn=null,pn=null;function Ns(e){if(e=ko(e)){if(typeof Dr!="function")throw Error(S(280));var t=e.stateNode;t&&(t=Ra(t),Dr(e.stateNode,e.type,t))}}function fc(e){hn?pn?pn.push(e):pn=[e]:hn=e}function wc(){if(hn){var e=hn,t=pn;if(pn=hn=null,Ns(e),t)for(e=0;e<t.length;e++)Ns(t[e])}}function yc(e,t){return e(t)}function bc(){}var Za=!1;function vc(e,t,n){if(Za)return e(t,n);Za=!0;try{return yc(e,t,n)}finally{Za=!1,(hn!==null||pn!==null)&&(bc(),wc())}}function eo(e,t){var n=e.stateNode;if(n===null)return null;var o=Ra(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(S(231,t,typeof n));return n}var Or=!1;if(tt)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Or=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Or=!1}function oh(e,t,n,o,a,r,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(g){this.onError(g)}}var $n=!1,aa=null,ra=!1,Br=null,ah={onError:function(e){$n=!0,aa=e}};function rh(e,t,n,o,a,r,i,s,l){$n=!1,aa=null,oh.apply(ah,arguments)}function ih(e,t,n,o,a,r,i,s,l){if(rh.apply(this,arguments),$n){if($n){var c=aa;$n=!1,aa=null}else throw Error(S(198));ra||(ra=!0,Br=c)}}function qt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rs(e){if(qt(e)!==e)throw Error(S(188))}function sh(e){var t=e.alternate;if(!t){if(t=qt(e),t===null)throw Error(S(188));return t!==e?null:e}for(var n=e,o=t;;){var a=n.return;if(a===null)break;var r=a.alternate;if(r===null){if(o=a.return,o!==null){n=o;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return Rs(a),e;if(r===o)return Rs(a),t;r=r.sibling}throw Error(S(188))}if(n.return!==o.return)n=a,o=r;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,o=r;break}if(s===o){i=!0,o=a,n=r;break}s=s.sibling}if(!i){for(s=r.child;s;){if(s===n){i=!0,n=r,o=a;break}if(s===o){i=!0,o=r,n=a;break}s=s.sibling}if(!i)throw Error(S(189))}}if(n.alternate!==o)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?e:t}function xc(e){return e=sh(e),e!==null?Sc(e):null}function Sc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sc(e);if(t!==null)return t;e=e.sibling}return null}var Tc=Te.unstable_scheduleCallback,Ls=Te.unstable_cancelCallback,lh=Te.unstable_shouldYield,ch=Te.unstable_requestPaint,Y=Te.unstable_now,uh=Te.unstable_getCurrentPriorityLevel,Li=Te.unstable_ImmediatePriority,Ic=Te.unstable_UserBlockingPriority,ia=Te.unstable_NormalPriority,dh=Te.unstable_LowPriority,_c=Te.unstable_IdlePriority,Ca=null,Ye=null;function hh(e){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ca,e,void 0,(e.current.flags&128)===128)}catch{}}var De=Math.clz32?Math.clz32:gh,ph=Math.log,mh=Math.LN2;function gh(e){return e>>>=0,e===0?32:31-(ph(e)/mh|0)|0}var Eo=64,Po=4194304;function Bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sa(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,a=e.suspendedLanes,r=e.pingedLanes,i=n&268435455;if(i!==0){var s=i&~a;s!==0?o=Bn(s):(r&=i,r!==0&&(o=Bn(r)))}else i=n&~a,i!==0?o=Bn(i):r!==0&&(o=Bn(r));if(o===0)return 0;if(t!==0&&t!==o&&!(t&a)&&(a=o&-o,r=t&-t,a>=r||a===16&&(r&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-De(t),a=1<<n,o|=e[n],t&=~a;return o}function fh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wh(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-De(r),s=1<<i,l=a[i];l===-1?(!(s&n)||s&o)&&(a[i]=fh(s,t)):l<=t&&(e.expiredLanes|=s),r&=~s}}function Ur(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jc(){var e=Eo;return Eo<<=1,!(Eo&4194240)&&(Eo=64),e}function er(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-De(t),e[t]=n}function yh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-De(n),r=1<<a;t[a]=0,o[a]=-1,e[a]=-1,n&=~r}}function Mi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-De(n),a=1<<o;a&t|e[o]&t&&(e[o]|=t),n&=~a}}var M=0;function zc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cc,Ai,Ec,Pc,Nc,Hr=!1,No=[],gt=null,ft=null,wt=null,to=new Map,no=new Map,ct=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ms(e,t){switch(e){case"focusin":case"focusout":gt=null;break;case"dragenter":case"dragleave":ft=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":to.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(t.pointerId)}}function Nn(e,t,n,o,a,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[a]},t!==null&&(t=ko(t),t!==null&&Ai(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function vh(e,t,n,o,a){switch(t){case"focusin":return gt=Nn(gt,e,t,n,o,a),!0;case"dragenter":return ft=Nn(ft,e,t,n,o,a),!0;case"mouseover":return wt=Nn(wt,e,t,n,o,a),!0;case"pointerover":var r=a.pointerId;return to.set(r,Nn(to.get(r)||null,e,t,n,o,a)),!0;case"gotpointercapture":return r=a.pointerId,no.set(r,Nn(no.get(r)||null,e,t,n,o,a)),!0}return!1}function Rc(e){var t=Wt(e.target);if(t!==null){var n=qt(t);if(n!==null){if(t=n.tag,t===13){if(t=kc(n),t!==null){e.blockedOn=t,Nc(e.priority,function(){Ec(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$r(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Fr=o,n.target.dispatchEvent(o),Fr=null}else return t=ko(n),t!==null&&Ai(t),e.blockedOn=n,!1;t.shift()}return!0}function As(e,t,n){Vo(e)&&n.delete(t)}function kh(){Hr=!1,gt!==null&&Vo(gt)&&(gt=null),ft!==null&&Vo(ft)&&(ft=null),wt!==null&&Vo(wt)&&(wt=null),to.forEach(As),no.forEach(As)}function Rn(e,t){e.blockedOn===t&&(e.blockedOn=null,Hr||(Hr=!0,Te.unstable_scheduleCallback(Te.unstable_NormalPriority,kh)))}function oo(e){function t(a){return Rn(a,e)}if(0<No.length){Rn(No[0],e);for(var n=1;n<No.length;n++){var o=No[n];o.blockedOn===e&&(o.blockedOn=null)}}for(gt!==null&&Rn(gt,e),ft!==null&&Rn(ft,e),wt!==null&&Rn(wt,e),to.forEach(t),no.forEach(t),n=0;n<ct.length;n++)o=ct[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<ct.length&&(n=ct[0],n.blockedOn===null);)Rc(n),n.blockedOn===null&&ct.shift()}var mn=rt.ReactCurrentBatchConfig,la=!0;function xh(e,t,n,o){var a=M,r=mn.transition;mn.transition=null;try{M=1,Wi(e,t,n,o)}finally{M=a,mn.transition=r}}function Sh(e,t,n,o){var a=M,r=mn.transition;mn.transition=null;try{M=4,Wi(e,t,n,o)}finally{M=a,mn.transition=r}}function Wi(e,t,n,o){if(la){var a=$r(e,t,n,o);if(a===null)ur(e,t,o,ca,n),Ms(e,o);else if(vh(a,e,t,n,o))o.stopPropagation();else if(Ms(e,o),t&4&&-1<bh.indexOf(e)){for(;a!==null;){var r=ko(a);if(r!==null&&Cc(r),r=$r(e,t,n,o),r===null&&ur(e,t,o,ca,n),r===a)break;a=r}a!==null&&o.stopPropagation()}else ur(e,t,o,null,n)}}var ca=null;function $r(e,t,n,o){if(ca=null,e=Ri(o),e=Wt(e),e!==null)if(t=qt(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ca=e,null}function Lc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uh()){case Li:return 1;case Ic:return 4;case ia:case dh:return 16;case _c:return 536870912;default:return 16}default:return 16}}var ht=null,Fi=null,qo=null;function Mc(){if(qo)return qo;var e,t=Fi,n=t.length,o,a="value"in ht?ht.value:ht.textContent,r=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(o=1;o<=i&&t[n-o]===a[r-o];o++);return qo=a.slice(e,1<o?1-o:void 0)}function Jo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ro(){return!0}function Ws(){return!1}function _e(e){function t(n,o,a,r,i){this._reactName=n,this._targetInst=a,this.type=o,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(r):r[s]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ro:Ws,this.isPropagationStopped=Ws,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=_e(In),vo=U({},In,{view:0,detail:0}),Th=_e(vo),tr,nr,Ln,Ea=U({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ln&&(Ln&&e.type==="mousemove"?(tr=e.screenX-Ln.screenX,nr=e.screenY-Ln.screenY):nr=tr=0,Ln=e),tr)},movementY:function(e){return"movementY"in e?e.movementY:nr}}),Fs=_e(Ea),Ih=U({},Ea,{dataTransfer:0}),_h=_e(Ih),jh=U({},vo,{relatedTarget:0}),or=_e(jh),zh=U({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Ch=_e(zh),Eh=U({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ph=_e(Eh),Nh=U({},In,{data:0}),Ds=_e(Nh),Rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mh[e])?!!t[e]:!1}function Oi(){return Ah}var Wh=U({},vo,{key:function(e){if(e.key){var t=Rh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(e){return e.type==="keypress"?Jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fh=_e(Wh),Dh=U({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=_e(Dh),Oh=U({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),Bh=_e(Oh),Uh=U({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=_e(Uh),$h=U({},Ea,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gh=_e($h),Yh=[9,13,27,32],Bi=tt&&"CompositionEvent"in window,Gn=null;tt&&"documentMode"in document&&(Gn=document.documentMode);var Vh=tt&&"TextEvent"in window&&!Gn,Ac=tt&&(!Bi||Gn&&8<Gn&&11>=Gn),Bs=" ",Us=!1;function Wc(e,t){switch(e){case"keyup":return Yh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var en=!1;function qh(e,t){switch(e){case"compositionend":return Fc(t);case"keypress":return t.which!==32?null:(Us=!0,Bs);case"textInput":return e=t.data,e===Bs&&Us?null:e;default:return null}}function Jh(e,t){if(en)return e==="compositionend"||!Bi&&Wc(e,t)?(e=Mc(),qo=Fi=ht=null,en=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ac&&t.locale!=="ko"?null:t.data;default:return null}}var Qh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qh[e.type]:t==="textarea"}function Dc(e,t,n,o){fc(o),t=ua(t,"onChange"),0<t.length&&(n=new Di("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Yn=null,ao=null;function Kh(e){Qc(e,0)}function Pa(e){var t=on(e);if(cc(t))return e}function Xh(e,t){if(e==="change")return t}var Oc=!1;if(tt){var ar;if(tt){var rr="oninput"in document;if(!rr){var $s=document.createElement("div");$s.setAttribute("oninput","return;"),rr=typeof $s.oninput=="function"}ar=rr}else ar=!1;Oc=ar&&(!document.documentMode||9<document.documentMode)}function Gs(){Yn&&(Yn.detachEvent("onpropertychange",Bc),ao=Yn=null)}function Bc(e){if(e.propertyName==="value"&&Pa(ao)){var t=[];Dc(t,ao,e,Ri(e)),vc(Kh,t)}}function Zh(e,t,n){e==="focusin"?(Gs(),Yn=t,ao=n,Yn.attachEvent("onpropertychange",Bc)):e==="focusout"&&Gs()}function ep(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pa(ao)}function tp(e,t){if(e==="click")return Pa(t)}function np(e,t){if(e==="input"||e==="change")return Pa(t)}function op(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Be=typeof Object.is=="function"?Object.is:op;function ro(e,t){if(Be(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var a=n[o];if(!_r.call(t,a)||!Be(e[a],t[a]))return!1}return!0}function Ys(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vs(e,t){var n=Ys(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ys(n)}}function Uc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hc(){for(var e=window,t=oa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oa(e.document)}return t}function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ap(e){var t=Hc(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Uc(n.ownerDocument.documentElement,n)){if(o!==null&&Ui(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,r=Math.min(o.start,a);o=o.end===void 0?r:Math.min(o.end,a),!e.extend&&r>o&&(a=o,o=r,r=a),a=Vs(n,r);var i=Vs(n,o);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rp=tt&&"documentMode"in document&&11>=document.documentMode,tn=null,Gr=null,Vn=null,Yr=!1;function qs(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yr||tn==null||tn!==oa(o)||(o=tn,"selectionStart"in o&&Ui(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vn&&ro(Vn,o)||(Vn=o,o=ua(Gr,"onSelect"),0<o.length&&(t=new Di("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=tn)))}function Lo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nn={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},ir={},$c={};tt&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function Na(e){if(ir[e])return ir[e];if(!nn[e])return e;var t=nn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $c)return ir[e]=t[n];return e}var Gc=Na("animationend"),Yc=Na("animationiteration"),Vc=Na("animationstart"),qc=Na("transitionend"),Jc=new Map,Js="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _t(e,t){Jc.set(e,t),Vt(t,[e])}for(var sr=0;sr<Js.length;sr++){var lr=Js[sr],ip=lr.toLowerCase(),sp=lr[0].toUpperCase()+lr.slice(1);_t(ip,"on"+sp)}_t(Gc,"onAnimationEnd");_t(Yc,"onAnimationIteration");_t(Vc,"onAnimationStart");_t("dblclick","onDoubleClick");_t("focusin","onFocus");_t("focusout","onBlur");_t(qc,"onTransitionEnd");wn("onMouseEnter",["mouseout","mouseover"]);wn("onMouseLeave",["mouseout","mouseover"]);wn("onPointerEnter",["pointerout","pointerover"]);wn("onPointerLeave",["pointerout","pointerover"]);Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Un));function Qs(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,ih(o,t,void 0,e),e.currentTarget=null}function Qc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],a=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var i=o.length-1;0<=i;i--){var s=o[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==r&&a.isPropagationStopped())break e;Qs(a,s,c),r=l}else for(i=0;i<o.length;i++){if(s=o[i],l=s.instance,c=s.currentTarget,s=s.listener,l!==r&&a.isPropagationStopped())break e;Qs(a,s,c),r=l}}}if(ra)throw e=Br,ra=!1,Br=null,e}function W(e,t){var n=t[Kr];n===void 0&&(n=t[Kr]=new Set);var o=e+"__bubble";n.has(o)||(Kc(t,e,2,!1),n.add(o))}function cr(e,t,n){var o=0;t&&(o|=4),Kc(n,e,o,t)}var Mo="_reactListening"+Math.random().toString(36).slice(2);function io(e){if(!e[Mo]){e[Mo]=!0,ac.forEach(function(n){n!=="selectionchange"&&(lp.has(n)||cr(n,!1,e),cr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mo]||(t[Mo]=!0,cr("selectionchange",!1,t))}}function Kc(e,t,n,o){switch(Lc(t)){case 1:var a=xh;break;case 4:a=Sh;break;default:a=Wi}n=a.bind(null,t,n,e),a=void 0,!Or||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),o?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ur(e,t,n,o,a){var r=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var s=o.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(i===4)for(i=o.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;i=i.return}for(;s!==null;){if(i=Wt(s),i===null)return;if(l=i.tag,l===5||l===6){o=r=i;continue e}s=s.parentNode}}o=o.return}vc(function(){var c=r,g=Ri(n),m=[];e:{var f=Jc.get(e);if(f!==void 0){var w=Di,k=e;switch(e){case"keypress":if(Jo(n)===0)break e;case"keydown":case"keyup":w=Fh;break;case"focusin":k="focus",w=or;break;case"focusout":k="blur",w=or;break;case"beforeblur":case"afterblur":w=or;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=_h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Bh;break;case Gc:case Yc:case Vc:w=Ch;break;case qc:w=Hh;break;case"scroll":w=Th;break;case"wheel":w=Gh;break;case"copy":case"cut":case"paste":w=Ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Os}var y=(t&4)!==0,b=!y&&e==="scroll",d=y?f!==null?f+"Capture":null:f;y=[];for(var u=c,p;u!==null;){p=u;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,d!==null&&(v=eo(u,d),v!=null&&y.push(so(u,v,p)))),b)break;u=u.return}0<y.length&&(f=new w(f,k,null,n,g),m.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",f&&n!==Fr&&(k=n.relatedTarget||n.fromElement)&&(Wt(k)||k[nt]))break e;if((w||f)&&(f=g.window===g?g:(f=g.ownerDocument)?f.defaultView||f.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?Wt(k):null,k!==null&&(b=qt(k),k!==b||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(y=Fs,v="onMouseLeave",d="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(y=Os,v="onPointerLeave",d="onPointerEnter",u="pointer"),b=w==null?f:on(w),p=k==null?f:on(k),f=new y(v,u+"leave",w,n,g),f.target=b,f.relatedTarget=p,v=null,Wt(g)===c&&(y=new y(d,u+"enter",k,n,g),y.target=p,y.relatedTarget=b,v=y),b=v,w&&k)t:{for(y=w,d=k,u=0,p=y;p;p=Qt(p))u++;for(p=0,v=d;v;v=Qt(v))p++;for(;0<u-p;)y=Qt(y),u--;for(;0<p-u;)d=Qt(d),p--;for(;u--;){if(y===d||d!==null&&y===d.alternate)break t;y=Qt(y),d=Qt(d)}y=null}else y=null;w!==null&&Ks(m,f,w,y,!1),k!==null&&b!==null&&Ks(m,b,k,y,!0)}}e:{if(f=c?on(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var T=Xh;else if(Hs(f))if(Oc)T=np;else{T=ep;var z=Zh}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=tp);if(T&&(T=T(e,c))){Dc(m,T,n,g);break e}z&&z(e,f,c),e==="focusout"&&(z=f._wrapperState)&&z.controlled&&f.type==="number"&&Rr(f,"number",f.value)}switch(z=c?on(c):window,e){case"focusin":(Hs(z)||z.contentEditable==="true")&&(tn=z,Gr=c,Vn=null);break;case"focusout":Vn=Gr=tn=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":Yr=!1,qs(m,n,g);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":qs(m,n,g)}var C;if(Bi)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else en?Wc(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Ac&&n.locale!=="ko"&&(en||_!=="onCompositionStart"?_==="onCompositionEnd"&&en&&(C=Mc()):(ht=g,Fi="value"in ht?ht.value:ht.textContent,en=!0)),z=ua(c,_),0<z.length&&(_=new Ds(_,e,null,n,g),m.push({event:_,listeners:z}),C?_.data=C:(C=Fc(n),C!==null&&(_.data=C)))),(C=Vh?qh(e,n):Jh(e,n))&&(c=ua(c,"onBeforeInput"),0<c.length&&(g=new Ds("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:c}),g.data=C))}Qc(m,t)})}function so(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ua(e,t){for(var n=t+"Capture",o=[];e!==null;){var a=e,r=a.stateNode;a.tag===5&&r!==null&&(a=r,r=eo(e,n),r!=null&&o.unshift(so(e,r,a)),r=eo(e,t),r!=null&&o.push(so(e,r,a))),e=e.return}return o}function Qt(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ks(e,t,n,o,a){for(var r=t._reactName,i=[];n!==null&&n!==o;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===o)break;s.tag===5&&c!==null&&(s=c,a?(l=eo(n,r),l!=null&&i.unshift(so(n,l,s))):a||(l=eo(n,r),l!=null&&i.push(so(n,l,s)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var cp=/\r\n?/g,up=/\u0000|\uFFFD/g;function Xs(e){return(typeof e=="string"?e:""+e).replace(cp,`
`).replace(up,"")}function Ao(e,t,n){if(t=Xs(t),Xs(e)!==t&&n)throw Error(S(425))}function da(){}var Vr=null,qr=null;function Jr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qr=typeof setTimeout=="function"?setTimeout:void 0,dp=typeof clearTimeout=="function"?clearTimeout:void 0,Zs=typeof Promise=="function"?Promise:void 0,hp=typeof queueMicrotask=="function"?queueMicrotask:typeof Zs<"u"?function(e){return Zs.resolve(null).then(e).catch(pp)}:Qr;function pp(e){setTimeout(function(){throw e})}function dr(e,t){var n=t,o=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(o===0){e.removeChild(a),oo(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=a}while(n);oo(t)}function yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function el(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _n=Math.random().toString(36).slice(2),Ge="__reactFiber$"+_n,lo="__reactProps$"+_n,nt="__reactContainer$"+_n,Kr="__reactEvents$"+_n,mp="__reactListeners$"+_n,gp="__reactHandles$"+_n;function Wt(e){var t=e[Ge];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nt]||n[Ge]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=el(e);e!==null;){if(n=e[Ge])return n;e=el(e)}return t}e=n,n=e.parentNode}return null}function ko(e){return e=e[Ge]||e[nt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function on(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(S(33))}function Ra(e){return e[lo]||null}var Xr=[],an=-1;function jt(e){return{current:e}}function F(e){0>an||(e.current=Xr[an],Xr[an]=null,an--)}function A(e,t){an++,Xr[an]=e.current,e.current=t}var It={},le=jt(It),we=jt(!1),Ut=It;function yn(e,t){var n=e.type.contextTypes;if(!n)return It;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var a={},r;for(r in n)a[r]=t[r];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ye(e){return e=e.childContextTypes,e!=null}function ha(){F(we),F(le)}function tl(e,t,n){if(le.current!==It)throw Error(S(168));A(le,t),A(we,n)}function Xc(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var a in o)if(!(a in t))throw Error(S(108,Zd(e)||"Unknown",a));return U({},n,o)}function pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||It,Ut=le.current,A(le,e),A(we,we.current),!0}function nl(e,t,n){var o=e.stateNode;if(!o)throw Error(S(169));n?(e=Xc(e,t,Ut),o.__reactInternalMemoizedMergedChildContext=e,F(we),F(le),A(le,e)):F(we),A(we,n)}var Ke=null,La=!1,hr=!1;function Zc(e){Ke===null?Ke=[e]:Ke.push(e)}function fp(e){La=!0,Zc(e)}function zt(){if(!hr&&Ke!==null){hr=!0;var e=0,t=M;try{var n=Ke;for(M=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}Ke=null,La=!1}catch(a){throw Ke!==null&&(Ke=Ke.slice(e+1)),Tc(Li,zt),a}finally{M=t,hr=!1}}return null}var rn=[],sn=0,ma=null,ga=0,je=[],ze=0,Ht=null,Xe=1,Ze="";function Lt(e,t){rn[sn++]=ga,rn[sn++]=ma,ma=e,ga=t}function eu(e,t,n){je[ze++]=Xe,je[ze++]=Ze,je[ze++]=Ht,Ht=e;var o=Xe;e=Ze;var a=32-De(o)-1;o&=~(1<<a),n+=1;var r=32-De(t)+a;if(30<r){var i=a-a%5;r=(o&(1<<i)-1).toString(32),o>>=i,a-=i,Xe=1<<32-De(t)+a|n<<a|o,Ze=r+e}else Xe=1<<r|n<<a|o,Ze=e}function Hi(e){e.return!==null&&(Lt(e,1),eu(e,1,0))}function $i(e){for(;e===ma;)ma=rn[--sn],rn[sn]=null,ga=rn[--sn],rn[sn]=null;for(;e===Ht;)Ht=je[--ze],je[ze]=null,Ze=je[--ze],je[ze]=null,Xe=je[--ze],je[ze]=null}var Se=null,xe=null,D=!1,Fe=null;function tu(e,t){var n=Ce(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ol(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Se=e,xe=yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Se=e,xe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ht!==null?{id:Xe,overflow:Ze}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ce(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Se=e,xe=null,!0):!1;default:return!1}}function Zr(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ei(e){if(D){var t=xe;if(t){var n=t;if(!ol(e,t)){if(Zr(e))throw Error(S(418));t=yt(n.nextSibling);var o=Se;t&&ol(e,t)?tu(o,n):(e.flags=e.flags&-4097|2,D=!1,Se=e)}}else{if(Zr(e))throw Error(S(418));e.flags=e.flags&-4097|2,D=!1,Se=e}}}function al(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Se=e}function Wo(e){if(e!==Se)return!1;if(!D)return al(e),D=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jr(e.type,e.memoizedProps)),t&&(t=xe)){if(Zr(e))throw nu(),Error(S(418));for(;t;)tu(e,t),t=yt(t.nextSibling)}if(al(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xe=yt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xe=null}}else xe=Se?yt(e.stateNode.nextSibling):null;return!0}function nu(){for(var e=xe;e;)e=yt(e.nextSibling)}function bn(){xe=Se=null,D=!1}function Gi(e){Fe===null?Fe=[e]:Fe.push(e)}var wp=rt.ReactCurrentBatchConfig;function Mn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var o=n.stateNode}if(!o)throw Error(S(147,e));var a=o,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(i){var s=a.refs;i===null?delete s[r]:s[r]=i},t._stringRef=r,t)}if(typeof e!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,e))}return e}function Fo(e,t){throw e=Object.prototype.toString.call(t),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rl(e){var t=e._init;return t(e._payload)}function ou(e){function t(d,u){if(e){var p=d.deletions;p===null?(d.deletions=[u],d.flags|=16):p.push(u)}}function n(d,u){if(!e)return null;for(;u!==null;)t(d,u),u=u.sibling;return null}function o(d,u){for(d=new Map;u!==null;)u.key!==null?d.set(u.key,u):d.set(u.index,u),u=u.sibling;return d}function a(d,u){return d=xt(d,u),d.index=0,d.sibling=null,d}function r(d,u,p){return d.index=p,e?(p=d.alternate,p!==null?(p=p.index,p<u?(d.flags|=2,u):p):(d.flags|=2,u)):(d.flags|=1048576,u)}function i(d){return e&&d.alternate===null&&(d.flags|=2),d}function s(d,u,p,v){return u===null||u.tag!==6?(u=br(p,d.mode,v),u.return=d,u):(u=a(u,p),u.return=d,u)}function l(d,u,p,v){var T=p.type;return T===Zt?g(d,u,p.props.children,v,p.key):u!==null&&(u.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===st&&rl(T)===u.type)?(v=a(u,p.props),v.ref=Mn(d,u,p),v.return=d,v):(v=na(p.type,p.key,p.props,null,d.mode,v),v.ref=Mn(d,u,p),v.return=d,v)}function c(d,u,p,v){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=vr(p,d.mode,v),u.return=d,u):(u=a(u,p.children||[]),u.return=d,u)}function g(d,u,p,v,T){return u===null||u.tag!==7?(u=Bt(p,d.mode,v,T),u.return=d,u):(u=a(u,p),u.return=d,u)}function m(d,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=br(""+u,d.mode,p),u.return=d,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case jo:return p=na(u.type,u.key,u.props,null,d.mode,p),p.ref=Mn(d,null,u),p.return=d,p;case Xt:return u=vr(u,d.mode,p),u.return=d,u;case st:var v=u._init;return m(d,v(u._payload),p)}if(On(u)||En(u))return u=Bt(u,d.mode,p,null),u.return=d,u;Fo(d,u)}return null}function f(d,u,p,v){var T=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return T!==null?null:s(d,u,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case jo:return p.key===T?l(d,u,p,v):null;case Xt:return p.key===T?c(d,u,p,v):null;case st:return T=p._init,f(d,u,T(p._payload),v)}if(On(p)||En(p))return T!==null?null:g(d,u,p,v,null);Fo(d,p)}return null}function w(d,u,p,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return d=d.get(p)||null,s(u,d,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:return d=d.get(v.key===null?p:v.key)||null,l(u,d,v,T);case Xt:return d=d.get(v.key===null?p:v.key)||null,c(u,d,v,T);case st:var z=v._init;return w(d,u,p,z(v._payload),T)}if(On(v)||En(v))return d=d.get(p)||null,g(u,d,v,T,null);Fo(u,v)}return null}function k(d,u,p,v){for(var T=null,z=null,C=u,_=u=0,$=null;C!==null&&_<p.length;_++){C.index>_?($=C,C=null):$=C.sibling;var R=f(d,C,p[_],v);if(R===null){C===null&&(C=$);break}e&&C&&R.alternate===null&&t(d,C),u=r(R,u,_),z===null?T=R:z.sibling=R,z=R,C=$}if(_===p.length)return n(d,C),D&&Lt(d,_),T;if(C===null){for(;_<p.length;_++)C=m(d,p[_],v),C!==null&&(u=r(C,u,_),z===null?T=C:z.sibling=C,z=C);return D&&Lt(d,_),T}for(C=o(d,C);_<p.length;_++)$=w(C,d,_,p[_],v),$!==null&&(e&&$.alternate!==null&&C.delete($.key===null?_:$.key),u=r($,u,_),z===null?T=$:z.sibling=$,z=$);return e&&C.forEach(function(Re){return t(d,Re)}),D&&Lt(d,_),T}function y(d,u,p,v){var T=En(p);if(typeof T!="function")throw Error(S(150));if(p=T.call(p),p==null)throw Error(S(151));for(var z=T=null,C=u,_=u=0,$=null,R=p.next();C!==null&&!R.done;_++,R=p.next()){C.index>_?($=C,C=null):$=C.sibling;var Re=f(d,C,R.value,v);if(Re===null){C===null&&(C=$);break}e&&C&&Re.alternate===null&&t(d,C),u=r(Re,u,_),z===null?T=Re:z.sibling=Re,z=Re,C=$}if(R.done)return n(d,C),D&&Lt(d,_),T;if(C===null){for(;!R.done;_++,R=p.next())R=m(d,R.value,v),R!==null&&(u=r(R,u,_),z===null?T=R:z.sibling=R,z=R);return D&&Lt(d,_),T}for(C=o(d,C);!R.done;_++,R=p.next())R=w(C,d,_,R.value,v),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?_:R.key),u=r(R,u,_),z===null?T=R:z.sibling=R,z=R);return e&&C.forEach(function(zn){return t(d,zn)}),D&&Lt(d,_),T}function b(d,u,p,v){if(typeof p=="object"&&p!==null&&p.type===Zt&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case jo:e:{for(var T=p.key,z=u;z!==null;){if(z.key===T){if(T=p.type,T===Zt){if(z.tag===7){n(d,z.sibling),u=a(z,p.props.children),u.return=d,d=u;break e}}else if(z.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===st&&rl(T)===z.type){n(d,z.sibling),u=a(z,p.props),u.ref=Mn(d,z,p),u.return=d,d=u;break e}n(d,z);break}else t(d,z);z=z.sibling}p.type===Zt?(u=Bt(p.props.children,d.mode,v,p.key),u.return=d,d=u):(v=na(p.type,p.key,p.props,null,d.mode,v),v.ref=Mn(d,u,p),v.return=d,d=v)}return i(d);case Xt:e:{for(z=p.key;u!==null;){if(u.key===z)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){n(d,u.sibling),u=a(u,p.children||[]),u.return=d,d=u;break e}else{n(d,u);break}else t(d,u);u=u.sibling}u=vr(p,d.mode,v),u.return=d,d=u}return i(d);case st:return z=p._init,b(d,u,z(p._payload),v)}if(On(p))return k(d,u,p,v);if(En(p))return y(d,u,p,v);Fo(d,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(n(d,u.sibling),u=a(u,p),u.return=d,d=u):(n(d,u),u=br(p,d.mode,v),u.return=d,d=u),i(d)):n(d,u)}return b}var vn=ou(!0),au=ou(!1),fa=jt(null),wa=null,ln=null,Yi=null;function Vi(){Yi=ln=wa=null}function qi(e){var t=fa.current;F(fa),e._currentValue=t}function ti(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function gn(e,t){wa=e,Yi=ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fe=!0),e.firstContext=null)}function Pe(e){var t=e._currentValue;if(Yi!==e)if(e={context:e,memoizedValue:t,next:null},ln===null){if(wa===null)throw Error(S(308));ln=e,wa.dependencies={lanes:0,firstContext:e}}else ln=ln.next=e;return t}var Ft=null;function Ji(e){Ft===null?Ft=[e]:Ft.push(e)}function ru(e,t,n,o){var a=t.interleaved;return a===null?(n.next=n,Ji(t)):(n.next=a.next,a.next=n),t.interleaved=n,ot(e,o)}function ot(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lt=!1;function Qi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function et(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bt(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,L&2){var a=o.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),o.pending=t,ot(e,n)}return a=o.interleaved,a===null?(t.next=t,Ji(o)):(t.next=a.next,a.next=t),o.interleaved=t,ot(e,n)}function Qo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Mi(e,n)}}function il(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var a=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?a=r=i:r=r.next=i,n=n.next}while(n!==null);r===null?a=r=t:r=r.next=t}else a=r=t;n={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ya(e,t,n,o){var a=e.updateQueue;lt=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,c=l.next;l.next=null,i===null?r=c:i.next=c,i=l;var g=e.alternate;g!==null&&(g=g.updateQueue,s=g.lastBaseUpdate,s!==i&&(s===null?g.firstBaseUpdate=c:s.next=c,g.lastBaseUpdate=l))}if(r!==null){var m=a.baseState;i=0,g=c=l=null,s=r;do{var f=s.lane,w=s.eventTime;if((o&f)===f){g!==null&&(g=g.next={eventTime:w,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var k=e,y=s;switch(f=t,w=n,y.tag){case 1:if(k=y.payload,typeof k=="function"){m=k.call(w,m,f);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=y.payload,f=typeof k=="function"?k.call(w,m,f):k,f==null)break e;m=U({},m,f);break e;case 2:lt=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[s]:f.push(s))}else w={eventTime:w,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},g===null?(c=g=w,l=m):g=g.next=w,i|=f;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;f=s,s=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(g===null&&(l=m),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=g,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else r===null&&(a.shared.lanes=0);Gt|=i,e.lanes=i,e.memoizedState=m}}function sl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],a=o.callback;if(a!==null){if(o.callback=null,o=n,typeof a!="function")throw Error(S(191,a));a.call(o)}}}var xo={},Ve=jt(xo),co=jt(xo),uo=jt(xo);function Dt(e){if(e===xo)throw Error(S(174));return e}function Ki(e,t){switch(A(uo,t),A(co,e),A(Ve,xo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mr(t,e)}F(Ve),A(Ve,t)}function kn(){F(Ve),F(co),F(uo)}function su(e){Dt(uo.current);var t=Dt(Ve.current),n=Mr(t,e.type);t!==n&&(A(co,e),A(Ve,n))}function Xi(e){co.current===e&&(F(Ve),F(co))}var O=jt(0);function ba(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pr=[];function Zi(){for(var e=0;e<pr.length;e++)pr[e]._workInProgressVersionPrimary=null;pr.length=0}var Ko=rt.ReactCurrentDispatcher,mr=rt.ReactCurrentBatchConfig,$t=0,B=null,K=null,ee=null,va=!1,qn=!1,ho=0,yp=0;function re(){throw Error(S(321))}function es(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Be(e[n],t[n]))return!1;return!0}function ts(e,t,n,o,a,r){if($t=r,B=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ko.current=e===null||e.memoizedState===null?xp:Sp,e=n(o,a),qn){r=0;do{if(qn=!1,ho=0,25<=r)throw Error(S(301));r+=1,ee=K=null,t.updateQueue=null,Ko.current=Tp,e=n(o,a)}while(qn)}if(Ko.current=ka,t=K!==null&&K.next!==null,$t=0,ee=K=B=null,va=!1,t)throw Error(S(300));return e}function ns(){var e=ho!==0;return ho=0,e}function $e(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ee===null?B.memoizedState=ee=e:ee=ee.next=e,ee}function Ne(){if(K===null){var e=B.alternate;e=e!==null?e.memoizedState:null}else e=K.next;var t=ee===null?B.memoizedState:ee.next;if(t!==null)ee=t,K=e;else{if(e===null)throw Error(S(310));K=e,e={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null},ee===null?B.memoizedState=ee=e:ee=ee.next=e}return ee}function po(e,t){return typeof t=="function"?t(e):t}function gr(e){var t=Ne(),n=t.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=e;var o=K,a=o.baseQueue,r=n.pending;if(r!==null){if(a!==null){var i=a.next;a.next=r.next,r.next=i}o.baseQueue=a=r,n.pending=null}if(a!==null){r=a.next,o=o.baseState;var s=i=null,l=null,c=r;do{var g=c.lane;if(($t&g)===g)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var m={lane:g,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=m,i=o):l=l.next=m,B.lanes|=g,Gt|=g}c=c.next}while(c!==null&&c!==r);l===null?i=o:l.next=s,Be(o,t.memoizedState)||(fe=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=l,n.lastRenderedState=o}if(e=n.interleaved,e!==null){a=e;do r=a.lane,B.lanes|=r,Gt|=r,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fr(e){var t=Ne(),n=t.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=e;var o=n.dispatch,a=n.pending,r=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do r=e(r,i.action),i=i.next;while(i!==a);Be(r,t.memoizedState)||(fe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,o]}function lu(){}function cu(e,t){var n=B,o=Ne(),a=t(),r=!Be(o.memoizedState,a);if(r&&(o.memoizedState=a,fe=!0),o=o.queue,os(hu.bind(null,n,o,e),[e]),o.getSnapshot!==t||r||ee!==null&&ee.memoizedState.tag&1){if(n.flags|=2048,mo(9,du.bind(null,n,o,a,t),void 0,null),te===null)throw Error(S(349));$t&30||uu(n,t,a)}return a}function uu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=B.updateQueue,t===null?(t={lastEffect:null,stores:null},B.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function du(e,t,n,o){t.value=n,t.getSnapshot=o,pu(t)&&mu(e)}function hu(e,t,n){return n(function(){pu(t)&&mu(e)})}function pu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Be(e,n)}catch{return!0}}function mu(e){var t=ot(e,1);t!==null&&Oe(t,e,1,-1)}function ll(e){var t=$e();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t.queue=e,e=e.dispatch=kp.bind(null,B,e),[t.memoizedState,e]}function mo(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=B.updateQueue,t===null?(t={lastEffect:null,stores:null},B.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function gu(){return Ne().memoizedState}function Xo(e,t,n,o){var a=$e();B.flags|=e,a.memoizedState=mo(1|t,n,void 0,o===void 0?null:o)}function Ma(e,t,n,o){var a=Ne();o=o===void 0?null:o;var r=void 0;if(K!==null){var i=K.memoizedState;if(r=i.destroy,o!==null&&es(o,i.deps)){a.memoizedState=mo(t,n,r,o);return}}B.flags|=e,a.memoizedState=mo(1|t,n,r,o)}function cl(e,t){return Xo(8390656,8,e,t)}function os(e,t){return Ma(2048,8,e,t)}function fu(e,t){return Ma(4,2,e,t)}function wu(e,t){return Ma(4,4,e,t)}function yu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bu(e,t,n){return n=n!=null?n.concat([e]):null,Ma(4,4,yu.bind(null,t,e),n)}function as(){}function vu(e,t){var n=Ne();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&es(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function ku(e,t){var n=Ne();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&es(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function xu(e,t,n){return $t&21?(Be(n,t)||(n=jc(),B.lanes|=n,Gt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fe=!0),e.memoizedState=n)}function bp(e,t){var n=M;M=n!==0&&4>n?n:4,e(!0);var o=mr.transition;mr.transition={};try{e(!1),t()}finally{M=n,mr.transition=o}}function Su(){return Ne().memoizedState}function vp(e,t,n){var o=kt(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Tu(e))Iu(t,n);else if(n=ru(e,t,n,o),n!==null){var a=de();Oe(n,e,o,a),_u(n,t,o)}}function kp(e,t,n){var o=kt(e),a={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tu(e))Iu(t,a);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,s=r(i,n);if(a.hasEagerState=!0,a.eagerState=s,Be(s,i)){var l=t.interleaved;l===null?(a.next=a,Ji(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}n=ru(e,t,a,o),n!==null&&(a=de(),Oe(n,e,o,a),_u(n,t,o))}}function Tu(e){var t=e.alternate;return e===B||t!==null&&t===B}function Iu(e,t){qn=va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _u(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Mi(e,n)}}var ka={readContext:Pe,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useInsertionEffect:re,useLayoutEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useMutableSource:re,useSyncExternalStore:re,useId:re,unstable_isNewReconciler:!1},xp={readContext:Pe,useCallback:function(e,t){return $e().memoizedState=[e,t===void 0?null:t],e},useContext:Pe,useEffect:cl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xo(4194308,4,yu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xo(4,2,e,t)},useMemo:function(e,t){var n=$e();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=$e();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=vp.bind(null,B,e),[o.memoizedState,e]},useRef:function(e){var t=$e();return e={current:e},t.memoizedState=e},useState:ll,useDebugValue:as,useDeferredValue:function(e){return $e().memoizedState=e},useTransition:function(){var e=ll(!1),t=e[0];return e=bp.bind(null,e[1]),$e().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=B,a=$e();if(D){if(n===void 0)throw Error(S(407));n=n()}else{if(n=t(),te===null)throw Error(S(349));$t&30||uu(o,t,n)}a.memoizedState=n;var r={value:n,getSnapshot:t};return a.queue=r,cl(hu.bind(null,o,r,e),[e]),o.flags|=2048,mo(9,du.bind(null,o,r,n,t),void 0,null),n},useId:function(){var e=$e(),t=te.identifierPrefix;if(D){var n=Ze,o=Xe;n=(o&~(1<<32-De(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=ho++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sp={readContext:Pe,useCallback:vu,useContext:Pe,useEffect:os,useImperativeHandle:bu,useInsertionEffect:fu,useLayoutEffect:wu,useMemo:ku,useReducer:gr,useRef:gu,useState:function(){return gr(po)},useDebugValue:as,useDeferredValue:function(e){var t=Ne();return xu(t,K.memoizedState,e)},useTransition:function(){var e=gr(po)[0],t=Ne().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:cu,useId:Su,unstable_isNewReconciler:!1},Tp={readContext:Pe,useCallback:vu,useContext:Pe,useEffect:os,useImperativeHandle:bu,useInsertionEffect:fu,useLayoutEffect:wu,useMemo:ku,useReducer:fr,useRef:gu,useState:function(){return fr(po)},useDebugValue:as,useDeferredValue:function(e){var t=Ne();return K===null?t.memoizedState=e:xu(t,K.memoizedState,e)},useTransition:function(){var e=fr(po)[0],t=Ne().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:cu,useId:Su,unstable_isNewReconciler:!1};function Ae(e,t){if(e&&e.defaultProps){t=U({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ni(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:U({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Aa={isMounted:function(e){return(e=e._reactInternals)?qt(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=de(),a=kt(e),r=et(o,a);r.payload=t,n!=null&&(r.callback=n),t=bt(e,r,a),t!==null&&(Oe(t,e,a,o),Qo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=de(),a=kt(e),r=et(o,a);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=bt(e,r,a),t!==null&&(Oe(t,e,a,o),Qo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=de(),o=kt(e),a=et(n,o);a.tag=2,t!=null&&(a.callback=t),t=bt(e,a,o),t!==null&&(Oe(t,e,o,n),Qo(t,e,o))}};function ul(e,t,n,o,a,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,r,i):t.prototype&&t.prototype.isPureReactComponent?!ro(n,o)||!ro(a,r):!0}function ju(e,t,n){var o=!1,a=It,r=t.contextType;return typeof r=="object"&&r!==null?r=Pe(r):(a=ye(t)?Ut:le.current,o=t.contextTypes,r=(o=o!=null)?yn(e,a):It),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Aa,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function dl(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Aa.enqueueReplaceState(t,t.state,null)}function oi(e,t,n,o){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Qi(e);var r=t.contextType;typeof r=="object"&&r!==null?a.context=Pe(r):(r=ye(t)?Ut:le.current,a.context=yn(e,r)),a.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(ni(e,t,r,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Aa.enqueueReplaceState(a,a.state,null),ya(e,n,a,o),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xn(e,t){try{var n="",o=t;do n+=Xd(o),o=o.return;while(o);var a=n}catch(r){a=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:a,digest:null}}function wr(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ai(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ip=typeof WeakMap=="function"?WeakMap:Map;function zu(e,t,n){n=et(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Sa||(Sa=!0,mi=o),ai(e,t)},n}function Cu(e,t,n){n=et(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var a=t.value;n.payload=function(){return o(a)},n.callback=function(){ai(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){ai(e,t),typeof o!="function"&&(vt===null?vt=new Set([this]):vt.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function hl(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Ip;var a=new Set;o.set(t,a)}else a=o.get(t),a===void 0&&(a=new Set,o.set(t,a));a.has(n)||(a.add(n),e=Dp.bind(null,e,t,n),t.then(e,e))}function pl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ml(e,t,n,o,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=et(-1,1),t.tag=2,bt(n,t,1))),n.lanes|=1),e)}var _p=rt.ReactCurrentOwner,fe=!1;function ue(e,t,n,o){t.child=e===null?au(t,null,n,o):vn(t,e.child,n,o)}function gl(e,t,n,o,a){n=n.render;var r=t.ref;return gn(t,a),o=ts(e,t,n,o,r,a),n=ns(),e!==null&&!fe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,at(e,t,a)):(D&&n&&Hi(t),t.flags|=1,ue(e,t,o,a),t.child)}function fl(e,t,n,o,a){if(e===null){var r=n.type;return typeof r=="function"&&!hs(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,Eu(e,t,r,o,a)):(e=na(n.type,null,o,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&a)){var i=r.memoizedProps;if(n=n.compare,n=n!==null?n:ro,n(i,o)&&e.ref===t.ref)return at(e,t,a)}return t.flags|=1,e=xt(r,o),e.ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,o,a){if(e!==null){var r=e.memoizedProps;if(ro(r,o)&&e.ref===t.ref)if(fe=!1,t.pendingProps=o=r,(e.lanes&a)!==0)e.flags&131072&&(fe=!0);else return t.lanes=e.lanes,at(e,t,a)}return ri(e,t,n,o,a)}function Pu(e,t,n){var o=t.pendingProps,a=o.children,r=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},A(un,ve),ve|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,A(un,ve),ve|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:n,A(un,ve),ve|=o}else r!==null?(o=r.baseLanes|n,t.memoizedState=null):o=n,A(un,ve),ve|=o;return ue(e,t,a,n),t.child}function Nu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ri(e,t,n,o,a){var r=ye(n)?Ut:le.current;return r=yn(t,r),gn(t,a),n=ts(e,t,n,o,r,a),o=ns(),e!==null&&!fe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,at(e,t,a)):(D&&o&&Hi(t),t.flags|=1,ue(e,t,n,a),t.child)}function wl(e,t,n,o,a){if(ye(n)){var r=!0;pa(t)}else r=!1;if(gn(t,a),t.stateNode===null)Zo(e,t),ju(t,n,o),oi(t,n,o,a),o=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pe(c):(c=ye(n)?Ut:le.current,c=yn(t,c));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==o||l!==c)&&dl(t,i,o,c),lt=!1;var f=t.memoizedState;i.state=f,ya(t,o,i,a),l=t.memoizedState,s!==o||f!==l||we.current||lt?(typeof g=="function"&&(ni(t,n,g,o),l=t.memoizedState),(s=lt||ul(t,n,s,o,f,l,c))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),i.props=o,i.state=l,i.context=c,o=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{i=t.stateNode,iu(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ae(t.type,s),i.props=c,m=t.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pe(l):(l=ye(n)?Ut:le.current,l=yn(t,l));var w=n.getDerivedStateFromProps;(g=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==m||f!==l)&&dl(t,i,o,l),lt=!1,f=t.memoizedState,i.state=f,ya(t,o,i,a);var k=t.memoizedState;s!==m||f!==k||we.current||lt?(typeof w=="function"&&(ni(t,n,w,o),k=t.memoizedState),(c=lt||ul(t,n,c,o,f,k,l)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(o,k,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(o,k,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=k),i.props=o,i.state=k,i.context=l,o=c):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),o=!1)}return ii(e,t,n,o,r,a)}function ii(e,t,n,o,a,r){Nu(e,t);var i=(t.flags&128)!==0;if(!o&&!i)return a&&nl(t,n,!1),at(e,t,r);o=t.stateNode,_p.current=t;var s=i&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&i?(t.child=vn(t,e.child,null,r),t.child=vn(t,null,s,r)):ue(e,t,s,r),t.memoizedState=o.state,a&&nl(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?tl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tl(e,t.context,!1),Ki(e,t.containerInfo)}function yl(e,t,n,o,a){return bn(),Gi(a),t.flags|=256,ue(e,t,n,o),t.child}var si={dehydrated:null,treeContext:null,retryLane:0};function li(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t,n){var o=t.pendingProps,a=O.current,r=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),A(O,a&1),e===null)return ei(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=o.children,e=o.fallback,r?(o=t.mode,r=t.child,i={mode:"hidden",children:i},!(o&1)&&r!==null?(r.childLanes=0,r.pendingProps=i):r=Da(i,o,0,null),e=Bt(e,o,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=li(n),t.memoizedState=si,e):rs(t,i));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return jp(e,t,i,o,s,a,n);if(r){r=o.fallback,i=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:o.children};return!(i&1)&&t.child!==a?(o=t.child,o.childLanes=0,o.pendingProps=l,t.deletions=null):(o=xt(a,l),o.subtreeFlags=a.subtreeFlags&14680064),s!==null?r=xt(s,r):(r=Bt(r,i,n,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,i=e.child.memoizedState,i=i===null?li(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=e.childLanes&~n,t.memoizedState=si,o}return r=e.child,e=r.sibling,o=xt(r,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function rs(e,t){return t=Da({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Do(e,t,n,o){return o!==null&&Gi(o),vn(t,e.child,null,n),e=rs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jp(e,t,n,o,a,r,i){if(n)return t.flags&256?(t.flags&=-257,o=wr(Error(S(422))),Do(e,t,i,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=o.fallback,a=t.mode,o=Da({mode:"visible",children:o.children},a,0,null),r=Bt(r,a,i,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,t.mode&1&&vn(t,e.child,null,i),t.child.memoizedState=li(i),t.memoizedState=si,r);if(!(t.mode&1))return Do(e,t,i,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var s=o.dgst;return o=s,r=Error(S(419)),o=wr(r,o,void 0),Do(e,t,i,o)}if(s=(i&e.childLanes)!==0,fe||s){if(o=te,o!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|i)?0:a,a!==0&&a!==r.retryLane&&(r.retryLane=a,ot(e,a),Oe(o,e,a,-1))}return ds(),o=wr(Error(S(421))),Do(e,t,i,o)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Op.bind(null,e),a._reactRetry=t,null):(e=r.treeContext,xe=yt(a.nextSibling),Se=t,D=!0,Fe=null,e!==null&&(je[ze++]=Xe,je[ze++]=Ze,je[ze++]=Ht,Xe=e.id,Ze=e.overflow,Ht=t),t=rs(t,o.children),t.flags|=4096,t)}function bl(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ti(e.return,t,n)}function yr(e,t,n,o,a){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=a)}function Mu(e,t,n){var o=t.pendingProps,a=o.revealOrder,r=o.tail;if(ue(e,t,o.children,n),o=O.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bl(e,n,t);else if(e.tag===19)bl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(A(O,o),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ba(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),yr(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ba(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}yr(t,!0,n,null,r);break;case"together":yr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function at(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(S(153));if(t.child!==null){for(e=t.child,n=xt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zp(e,t,n){switch(t.tag){case 3:Ru(t),bn();break;case 5:su(t);break;case 1:ye(t.type)&&pa(t);break;case 4:Ki(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,a=t.memoizedProps.value;A(fa,o._currentValue),o._currentValue=a;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(A(O,O.current&1),t.flags|=128,null):n&t.child.childLanes?Lu(e,t,n):(A(O,O.current&1),e=at(e,t,n),e!==null?e.sibling:null);A(O,O.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Mu(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),A(O,O.current),o)break;return null;case 22:case 23:return t.lanes=0,Pu(e,t,n)}return at(e,t,n)}var Au,ci,Wu,Fu;Au=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ci=function(){};Wu=function(e,t,n,o){var a=e.memoizedProps;if(a!==o){e=t.stateNode,Dt(Ve.current);var r=null;switch(n){case"input":a=Pr(e,a),o=Pr(e,o),r=[];break;case"select":a=U({},a,{value:void 0}),o=U({},o,{value:void 0}),r=[];break;case"textarea":a=Lr(e,a),o=Lr(e,o),r=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=da)}Ar(n,o);var i;n=null;for(c in a)if(!o.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var s=a[c];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xn.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in o){var l=o[c];if(s=a!=null?a[c]:void 0,o.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xn.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&W("scroll",e),r||s===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(t.updateQueue=c)&&(t.flags|=4)}};Fu=function(e,t,n,o){n!==o&&(t.flags|=4)};function An(e,t){if(!D)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Cp(e,t,n){var o=t.pendingProps;switch($i(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(t),null;case 1:return ye(t.type)&&ha(),ie(t),null;case 3:return o=t.stateNode,kn(),F(we),F(le),Zi(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fe!==null&&(wi(Fe),Fe=null))),ci(e,t),ie(t),null;case 5:Xi(t);var a=Dt(uo.current);if(n=t.type,e!==null&&t.stateNode!=null)Wu(e,t,n,o,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(S(166));return ie(t),null}if(e=Dt(Ve.current),Wo(t)){o=t.stateNode,n=t.type;var r=t.memoizedProps;switch(o[Ge]=t,o[lo]=r,e=(t.mode&1)!==0,n){case"dialog":W("cancel",o),W("close",o);break;case"iframe":case"object":case"embed":W("load",o);break;case"video":case"audio":for(a=0;a<Un.length;a++)W(Un[a],o);break;case"source":W("error",o);break;case"img":case"image":case"link":W("error",o),W("load",o);break;case"details":W("toggle",o);break;case"input":zs(o,r),W("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},W("invalid",o);break;case"textarea":Es(o,r),W("invalid",o)}Ar(n,r),a=null;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];i==="children"?typeof s=="string"?o.textContent!==s&&(r.suppressHydrationWarning!==!0&&Ao(o.textContent,s,e),a=["children",s]):typeof s=="number"&&o.textContent!==""+s&&(r.suppressHydrationWarning!==!0&&Ao(o.textContent,s,e),a=["children",""+s]):Xn.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&W("scroll",o)}switch(n){case"input":zo(o),Cs(o,r,!0);break;case"textarea":zo(o),Ps(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=da)}o=a,t.updateQueue=o,o!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=i.createElement(n,{is:o.is}):(e=i.createElement(n),n==="select"&&(i=e,o.multiple?i.multiple=!0:o.size&&(i.size=o.size))):e=i.createElementNS(e,n),e[Ge]=t,e[lo]=o,Au(e,t,!1,!1),t.stateNode=e;e:{switch(i=Wr(n,o),n){case"dialog":W("cancel",e),W("close",e),a=o;break;case"iframe":case"object":case"embed":W("load",e),a=o;break;case"video":case"audio":for(a=0;a<Un.length;a++)W(Un[a],e);a=o;break;case"source":W("error",e),a=o;break;case"img":case"image":case"link":W("error",e),W("load",e),a=o;break;case"details":W("toggle",e),a=o;break;case"input":zs(e,o),a=Pr(e,o),W("invalid",e);break;case"option":a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=U({},o,{value:void 0}),W("invalid",e);break;case"textarea":Es(e,o),a=Lr(e,o),W("invalid",e);break;default:a=o}Ar(n,a),s=a;for(r in s)if(s.hasOwnProperty(r)){var l=s[r];r==="style"?gc(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pc(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zn(e,l):typeof l=="number"&&Zn(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Xn.hasOwnProperty(r)?l!=null&&r==="onScroll"&&W("scroll",e):l!=null&&Ci(e,r,l,i))}switch(n){case"input":zo(e),Cs(e,o,!1);break;case"textarea":zo(e),Ps(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Tt(o.value));break;case"select":e.multiple=!!o.multiple,r=o.value,r!=null?dn(e,!!o.multiple,r,!1):o.defaultValue!=null&&dn(e,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=da)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ie(t),null;case 6:if(e&&t.stateNode!=null)Fu(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(S(166));if(n=Dt(uo.current),Dt(Ve.current),Wo(t)){if(o=t.stateNode,n=t.memoizedProps,o[Ge]=t,(r=o.nodeValue!==n)&&(e=Se,e!==null))switch(e.tag){case 3:Ao(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ao(o.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Ge]=t,t.stateNode=o}return ie(t),null;case 13:if(F(O),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(D&&xe!==null&&t.mode&1&&!(t.flags&128))nu(),bn(),t.flags|=98560,r=!1;else if(r=Wo(t),o!==null&&o.dehydrated!==null){if(e===null){if(!r)throw Error(S(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(S(317));r[Ge]=t}else bn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ie(t),r=!1}else Fe!==null&&(wi(Fe),Fe=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||O.current&1?X===0&&(X=3):ds())),t.updateQueue!==null&&(t.flags|=4),ie(t),null);case 4:return kn(),ci(e,t),e===null&&io(t.stateNode.containerInfo),ie(t),null;case 10:return qi(t.type._context),ie(t),null;case 17:return ye(t.type)&&ha(),ie(t),null;case 19:if(F(O),r=t.memoizedState,r===null)return ie(t),null;if(o=(t.flags&128)!==0,i=r.rendering,i===null)if(o)An(r,!1);else{if(X!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ba(e),i!==null){for(t.flags|=128,An(r,!1),o=i.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)r=n,e=o,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,e=i.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return A(O,O.current&1|2),t.child}e=e.sibling}r.tail!==null&&Y()>Sn&&(t.flags|=128,o=!0,An(r,!1),t.lanes=4194304)}else{if(!o)if(e=ba(i),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),An(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!D)return ie(t),null}else 2*Y()-r.renderingStartTime>Sn&&n!==1073741824&&(t.flags|=128,o=!0,An(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(n=r.last,n!==null?n.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Y(),t.sibling=null,n=O.current,A(O,o?n&1|2:n&1),t):(ie(t),null);case 22:case 23:return us(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?ve&1073741824&&(ie(t),t.subtreeFlags&6&&(t.flags|=8192)):ie(t),null;case 24:return null;case 25:return null}throw Error(S(156,t.tag))}function Ep(e,t){switch($i(t),t.tag){case 1:return ye(t.type)&&ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kn(),F(we),F(le),Zi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xi(t),null;case 13:if(F(O),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(S(340));bn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(O),null;case 4:return kn(),null;case 10:return qi(t.type._context),null;case 22:case 23:return us(),null;case 24:return null;default:return null}}var Oo=!1,se=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,I=null;function cn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){H(e,t,o)}else n.current=null}function ui(e,t,n){try{n()}catch(o){H(e,t,o)}}var vl=!1;function Np(e,t){if(Vr=la,e=Hc(),Ui(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var a=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var i=0,s=-1,l=-1,c=0,g=0,m=e,f=null;t:for(;;){for(var w;m!==n||a!==0&&m.nodeType!==3||(s=i+a),m!==r||o!==0&&m.nodeType!==3||(l=i+o),m.nodeType===3&&(i+=m.nodeValue.length),(w=m.firstChild)!==null;)f=m,m=w;for(;;){if(m===e)break t;if(f===n&&++c===a&&(s=i),f===r&&++g===o&&(l=i),(w=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=w}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qr={focusedElem:e,selectionRange:n},la=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var y=k.memoizedProps,b=k.memoizedState,d=t.stateNode,u=d.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ae(t.type,y),b);d.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(v){H(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return k=vl,vl=!1,k}function Jn(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,r!==void 0&&ui(t,n,r)}a=a.next}while(a!==o)}}function Wa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function di(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Du(e){var t=e.alternate;t!==null&&(e.alternate=null,Du(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ge],delete t[lo],delete t[Kr],delete t[mp],delete t[gp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ou(e){return e.tag===5||e.tag===3||e.tag===4}function kl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hi(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=da));else if(o!==4&&(e=e.child,e!==null))for(hi(e,t,n),e=e.sibling;e!==null;)hi(e,t,n),e=e.sibling}function pi(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var ne=null,We=!1;function it(e,t,n){for(n=n.child;n!==null;)Bu(e,t,n),n=n.sibling}function Bu(e,t,n){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ca,n)}catch{}switch(n.tag){case 5:se||cn(n,t);case 6:var o=ne,a=We;ne=null,it(e,t,n),ne=o,We=a,ne!==null&&(We?(e=ne,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ne.removeChild(n.stateNode));break;case 18:ne!==null&&(We?(e=ne,n=n.stateNode,e.nodeType===8?dr(e.parentNode,n):e.nodeType===1&&dr(e,n),oo(e)):dr(ne,n.stateNode));break;case 4:o=ne,a=We,ne=n.stateNode.containerInfo,We=!0,it(e,t,n),ne=o,We=a;break;case 0:case 11:case 14:case 15:if(!se&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var r=a,i=r.destroy;r=r.tag,i!==void 0&&(r&2||r&4)&&ui(n,t,i),a=a.next}while(a!==o)}it(e,t,n);break;case 1:if(!se&&(cn(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(s){H(n,t,s)}it(e,t,n);break;case 21:it(e,t,n);break;case 22:n.mode&1?(se=(o=se)||n.memoizedState!==null,it(e,t,n),se=o):it(e,t,n);break;default:it(e,t,n)}}function xl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pp),t.forEach(function(o){var a=Bp.bind(null,e,o);n.has(o)||(n.add(o),o.then(a,a))})}}function Le(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var a=n[o];try{var r=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:ne=s.stateNode,We=!1;break e;case 3:ne=s.stateNode.containerInfo,We=!0;break e;case 4:ne=s.stateNode.containerInfo,We=!0;break e}s=s.return}if(ne===null)throw Error(S(160));Bu(r,i,a),ne=null,We=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(c){H(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uu(t,e),t=t.sibling}function Uu(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Le(t,e),Ue(e),o&4){try{Jn(3,e,e.return),Wa(3,e)}catch(y){H(e,e.return,y)}try{Jn(5,e,e.return)}catch(y){H(e,e.return,y)}}break;case 1:Le(t,e),Ue(e),o&512&&n!==null&&cn(n,n.return);break;case 5:if(Le(t,e),Ue(e),o&512&&n!==null&&cn(n,n.return),e.flags&32){var a=e.stateNode;try{Zn(a,"")}catch(y){H(e,e.return,y)}}if(o&4&&(a=e.stateNode,a!=null)){var r=e.memoizedProps,i=n!==null?n.memoizedProps:r,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&r.type==="radio"&&r.name!=null&&uc(a,r),Wr(s,i);var c=Wr(s,r);for(i=0;i<l.length;i+=2){var g=l[i],m=l[i+1];g==="style"?gc(a,m):g==="dangerouslySetInnerHTML"?pc(a,m):g==="children"?Zn(a,m):Ci(a,g,m,c)}switch(s){case"input":Nr(a,r);break;case"textarea":dc(a,r);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!r.multiple;var w=r.value;w!=null?dn(a,!!r.multiple,w,!1):f!==!!r.multiple&&(r.defaultValue!=null?dn(a,!!r.multiple,r.defaultValue,!0):dn(a,!!r.multiple,r.multiple?[]:"",!1))}a[lo]=r}catch(y){H(e,e.return,y)}}break;case 6:if(Le(t,e),Ue(e),o&4){if(e.stateNode===null)throw Error(S(162));a=e.stateNode,r=e.memoizedProps;try{a.nodeValue=r}catch(y){H(e,e.return,y)}}break;case 3:if(Le(t,e),Ue(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{oo(t.containerInfo)}catch(y){H(e,e.return,y)}break;case 4:Le(t,e),Ue(e);break;case 13:Le(t,e),Ue(e),a=e.child,a.flags&8192&&(r=a.memoizedState!==null,a.stateNode.isHidden=r,!r||a.alternate!==null&&a.alternate.memoizedState!==null||(ls=Y())),o&4&&xl(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(se=(c=se)||g,Le(t,e),se=c):Le(t,e),Ue(e),o&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!g&&e.mode&1)for(I=e,g=e.child;g!==null;){for(m=I=g;I!==null;){switch(f=I,w=f.child,f.tag){case 0:case 11:case 14:case 15:Jn(4,f,f.return);break;case 1:cn(f,f.return);var k=f.stateNode;if(typeof k.componentWillUnmount=="function"){o=f,n=f.return;try{t=o,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(y){H(o,n,y)}}break;case 5:cn(f,f.return);break;case 22:if(f.memoizedState!==null){Tl(m);continue}}w!==null?(w.return=f,I=w):Tl(m)}g=g.sibling}e:for(g=null,m=e;;){if(m.tag===5){if(g===null){g=m;try{a=m.stateNode,c?(r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(s=m.stateNode,l=m.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=mc("display",i))}catch(y){H(e,e.return,y)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(y){H(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Le(t,e),Ue(e),o&4&&xl(e);break;case 21:break;default:Le(t,e),Ue(e)}}function Ue(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ou(n)){var o=n;break e}n=n.return}throw Error(S(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(Zn(a,""),o.flags&=-33);var r=kl(e);pi(e,r,a);break;case 3:case 4:var i=o.stateNode.containerInfo,s=kl(e);hi(e,s,i);break;default:throw Error(S(161))}}catch(l){H(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rp(e,t,n){I=e,Hu(e)}function Hu(e,t,n){for(var o=(e.mode&1)!==0;I!==null;){var a=I,r=a.child;if(a.tag===22&&o){var i=a.memoizedState!==null||Oo;if(!i){var s=a.alternate,l=s!==null&&s.memoizedState!==null||se;s=Oo;var c=se;if(Oo=i,(se=l)&&!c)for(I=a;I!==null;)i=I,l=i.child,i.tag===22&&i.memoizedState!==null?Il(a):l!==null?(l.return=i,I=l):Il(a);for(;r!==null;)I=r,Hu(r),r=r.sibling;I=a,Oo=s,se=c}Sl(e)}else a.subtreeFlags&8772&&r!==null?(r.return=a,I=r):Sl(e)}}function Sl(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:se||Wa(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!se)if(n===null)o.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ae(t.type,n.memoizedProps);o.componentDidUpdate(a,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&sl(t,r,o);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sl(t,i,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var g=c.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&oo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}se||t.flags&512&&di(t)}catch(f){H(t,t.return,f)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function Tl(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function Il(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wa(4,t)}catch(l){H(t,n,l)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var a=t.return;try{o.componentDidMount()}catch(l){H(t,a,l)}}var r=t.return;try{di(t)}catch(l){H(t,r,l)}break;case 5:var i=t.return;try{di(t)}catch(l){H(t,i,l)}}}catch(l){H(t,t.return,l)}if(t===e){I=null;break}var s=t.sibling;if(s!==null){s.return=t.return,I=s;break}I=t.return}}var Lp=Math.ceil,xa=rt.ReactCurrentDispatcher,is=rt.ReactCurrentOwner,Ee=rt.ReactCurrentBatchConfig,L=0,te=null,J=null,oe=0,ve=0,un=jt(0),X=0,go=null,Gt=0,Fa=0,ss=0,Qn=null,ge=null,ls=0,Sn=1/0,Qe=null,Sa=!1,mi=null,vt=null,Bo=!1,pt=null,Ta=0,Kn=0,gi=null,ea=-1,ta=0;function de(){return L&6?Y():ea!==-1?ea:ea=Y()}function kt(e){return e.mode&1?L&2&&oe!==0?oe&-oe:wp.transition!==null?(ta===0&&(ta=jc()),ta):(e=M,e!==0||(e=window.event,e=e===void 0?16:Lc(e.type)),e):1}function Oe(e,t,n,o){if(50<Kn)throw Kn=0,gi=null,Error(S(185));bo(e,n,o),(!(L&2)||e!==te)&&(e===te&&(!(L&2)&&(Fa|=n),X===4&&ut(e,oe)),be(e,o),n===1&&L===0&&!(t.mode&1)&&(Sn=Y()+500,La&&zt()))}function be(e,t){var n=e.callbackNode;wh(e,t);var o=sa(e,e===te?oe:0);if(o===0)n!==null&&Ls(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Ls(n),t===1)e.tag===0?fp(_l.bind(null,e)):Zc(_l.bind(null,e)),hp(function(){!(L&6)&&zt()}),n=null;else{switch(zc(o)){case 1:n=Li;break;case 4:n=Ic;break;case 16:n=ia;break;case 536870912:n=_c;break;default:n=ia}n=Ku(n,$u.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $u(e,t){if(ea=-1,ta=0,L&6)throw Error(S(327));var n=e.callbackNode;if(fn()&&e.callbackNode!==n)return null;var o=sa(e,e===te?oe:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Ia(e,o);else{t=o;var a=L;L|=2;var r=Yu();(te!==e||oe!==t)&&(Qe=null,Sn=Y()+500,Ot(e,t));do try{Wp();break}catch(s){Gu(e,s)}while(!0);Vi(),xa.current=r,L=a,J!==null?t=0:(te=null,oe=0,t=X)}if(t!==0){if(t===2&&(a=Ur(e),a!==0&&(o=a,t=fi(e,a))),t===1)throw n=go,Ot(e,0),ut(e,o),be(e,Y()),n;if(t===6)ut(e,o);else{if(a=e.current.alternate,!(o&30)&&!Mp(a)&&(t=Ia(e,o),t===2&&(r=Ur(e),r!==0&&(o=r,t=fi(e,r))),t===1))throw n=go,Ot(e,0),ut(e,o),be(e,Y()),n;switch(e.finishedWork=a,e.finishedLanes=o,t){case 0:case 1:throw Error(S(345));case 2:Mt(e,ge,Qe);break;case 3:if(ut(e,o),(o&130023424)===o&&(t=ls+500-Y(),10<t)){if(sa(e,0)!==0)break;if(a=e.suspendedLanes,(a&o)!==o){de(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qr(Mt.bind(null,e,ge,Qe),t);break}Mt(e,ge,Qe);break;case 4:if(ut(e,o),(o&4194240)===o)break;for(t=e.eventTimes,a=-1;0<o;){var i=31-De(o);r=1<<i,i=t[i],i>a&&(a=i),o&=~r}if(o=a,o=Y()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Lp(o/1960))-o,10<o){e.timeoutHandle=Qr(Mt.bind(null,e,ge,Qe),o);break}Mt(e,ge,Qe);break;case 5:Mt(e,ge,Qe);break;default:throw Error(S(329))}}}return be(e,Y()),e.callbackNode===n?$u.bind(null,e):null}function fi(e,t){var n=Qn;return e.current.memoizedState.isDehydrated&&(Ot(e,t).flags|=256),e=Ia(e,t),e!==2&&(t=ge,ge=n,t!==null&&wi(t)),e}function wi(e){ge===null?ge=e:ge.push.apply(ge,e)}function Mp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var a=n[o],r=a.getSnapshot;a=a.value;try{if(!Be(r(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ut(e,t){for(t&=~ss,t&=~Fa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-De(t),o=1<<n;e[n]=-1,t&=~o}}function _l(e){if(L&6)throw Error(S(327));fn();var t=sa(e,0);if(!(t&1))return be(e,Y()),null;var n=Ia(e,t);if(e.tag!==0&&n===2){var o=Ur(e);o!==0&&(t=o,n=fi(e,o))}if(n===1)throw n=go,Ot(e,0),ut(e,t),be(e,Y()),n;if(n===6)throw Error(S(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mt(e,ge,Qe),be(e,Y()),null}function cs(e,t){var n=L;L|=1;try{return e(t)}finally{L=n,L===0&&(Sn=Y()+500,La&&zt())}}function Yt(e){pt!==null&&pt.tag===0&&!(L&6)&&fn();var t=L;L|=1;var n=Ee.transition,o=M;try{if(Ee.transition=null,M=1,e)return e()}finally{M=o,Ee.transition=n,L=t,!(L&6)&&zt()}}function us(){ve=un.current,F(un)}function Ot(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dp(n)),J!==null)for(n=J.return;n!==null;){var o=n;switch($i(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&ha();break;case 3:kn(),F(we),F(le),Zi();break;case 5:Xi(o);break;case 4:kn();break;case 13:F(O);break;case 19:F(O);break;case 10:qi(o.type._context);break;case 22:case 23:us()}n=n.return}if(te=e,J=e=xt(e.current,null),oe=ve=t,X=0,go=null,ss=Fa=Gt=0,ge=Qn=null,Ft!==null){for(t=0;t<Ft.length;t++)if(n=Ft[t],o=n.interleaved,o!==null){n.interleaved=null;var a=o.next,r=n.pending;if(r!==null){var i=r.next;r.next=a,o.next=i}n.pending=o}Ft=null}return e}function Gu(e,t){do{var n=J;try{if(Vi(),Ko.current=ka,va){for(var o=B.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}va=!1}if($t=0,ee=K=B=null,qn=!1,ho=0,is.current=null,n===null||n.return===null){X=1,go=t,J=null;break}e:{var r=e,i=n.return,s=n,l=t;if(t=oe,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,g=s,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var f=g.alternate;f?(g.updateQueue=f.updateQueue,g.memoizedState=f.memoizedState,g.lanes=f.lanes):(g.updateQueue=null,g.memoizedState=null)}var w=pl(i);if(w!==null){w.flags&=-257,ml(w,i,s,r,t),w.mode&1&&hl(r,c,t),t=w,l=c;var k=t.updateQueue;if(k===null){var y=new Set;y.add(l),t.updateQueue=y}else k.add(l);break e}else{if(!(t&1)){hl(r,c,t),ds();break e}l=Error(S(426))}}else if(D&&s.mode&1){var b=pl(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ml(b,i,s,r,t),Gi(xn(l,s));break e}}r=l=xn(l,s),X!==4&&(X=2),Qn===null?Qn=[r]:Qn.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var d=zu(r,l,t);il(r,d);break e;case 1:s=l;var u=r.type,p=r.stateNode;if(!(r.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(vt===null||!vt.has(p)))){r.flags|=65536,t&=-t,r.lanes|=t;var v=Cu(r,s,t);il(r,v);break e}}r=r.return}while(r!==null)}qu(n)}catch(T){t=T,J===n&&n!==null&&(J=n=n.return);continue}break}while(!0)}function Yu(){var e=xa.current;return xa.current=ka,e===null?ka:e}function ds(){(X===0||X===3||X===2)&&(X=4),te===null||!(Gt&268435455)&&!(Fa&268435455)||ut(te,oe)}function Ia(e,t){var n=L;L|=2;var o=Yu();(te!==e||oe!==t)&&(Qe=null,Ot(e,t));do try{Ap();break}catch(a){Gu(e,a)}while(!0);if(Vi(),L=n,xa.current=o,J!==null)throw Error(S(261));return te=null,oe=0,X}function Ap(){for(;J!==null;)Vu(J)}function Wp(){for(;J!==null&&!lh();)Vu(J)}function Vu(e){var t=Qu(e.alternate,e,ve);e.memoizedProps=e.pendingProps,t===null?qu(e):J=t,is.current=null}function qu(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ep(n,t),n!==null){n.flags&=32767,J=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{X=6,J=null;return}}else if(n=Cp(n,t,ve),n!==null){J=n;return}if(t=t.sibling,t!==null){J=t;return}J=t=e}while(t!==null);X===0&&(X=5)}function Mt(e,t,n){var o=M,a=Ee.transition;try{Ee.transition=null,M=1,Fp(e,t,n,o)}finally{Ee.transition=a,M=o}return null}function Fp(e,t,n,o){do fn();while(pt!==null);if(L&6)throw Error(S(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(S(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(yh(e,r),e===te&&(J=te=null,oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bo||(Bo=!0,Ku(ia,function(){return fn(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Ee.transition,Ee.transition=null;var i=M;M=1;var s=L;L|=4,is.current=null,Np(e,n),Uu(n,e),ap(qr),la=!!Vr,qr=Vr=null,e.current=n,Rp(n),ch(),L=s,M=i,Ee.transition=r}else e.current=n;if(Bo&&(Bo=!1,pt=e,Ta=a),r=e.pendingLanes,r===0&&(vt=null),hh(n.stateNode),be(e,Y()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],o(a.value,{componentStack:a.stack,digest:a.digest});if(Sa)throw Sa=!1,e=mi,mi=null,e;return Ta&1&&e.tag!==0&&fn(),r=e.pendingLanes,r&1?e===gi?Kn++:(Kn=0,gi=e):Kn=0,zt(),null}function fn(){if(pt!==null){var e=zc(Ta),t=Ee.transition,n=M;try{if(Ee.transition=null,M=16>e?16:e,pt===null)var o=!1;else{if(e=pt,pt=null,Ta=0,L&6)throw Error(S(331));var a=L;for(L|=4,I=e.current;I!==null;){var r=I,i=r.child;if(I.flags&16){var s=r.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(I=c;I!==null;){var g=I;switch(g.tag){case 0:case 11:case 15:Jn(8,g,r)}var m=g.child;if(m!==null)m.return=g,I=m;else for(;I!==null;){g=I;var f=g.sibling,w=g.return;if(Du(g),g===c){I=null;break}if(f!==null){f.return=w,I=f;break}I=w}}}var k=r.alternate;if(k!==null){var y=k.child;if(y!==null){k.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}I=r}}if(r.subtreeFlags&2064&&i!==null)i.return=r,I=i;else e:for(;I!==null;){if(r=I,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Jn(9,r,r.return)}var d=r.sibling;if(d!==null){d.return=r.return,I=d;break e}I=r.return}}var u=e.current;for(I=u;I!==null;){i=I;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,I=p;else e:for(i=u;I!==null;){if(s=I,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Wa(9,s)}}catch(T){H(s,s.return,T)}if(s===i){I=null;break e}var v=s.sibling;if(v!==null){v.return=s.return,I=v;break e}I=s.return}}if(L=a,zt(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ca,e)}catch{}o=!0}return o}finally{M=n,Ee.transition=t}}return!1}function jl(e,t,n){t=xn(n,t),t=zu(e,t,1),e=bt(e,t,1),t=de(),e!==null&&(bo(e,1,t),be(e,t))}function H(e,t,n){if(e.tag===3)jl(e,e,n);else for(;t!==null;){if(t.tag===3){jl(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(vt===null||!vt.has(o))){e=xn(n,e),e=Cu(t,e,1),t=bt(t,e,1),e=de(),t!==null&&(bo(t,1,e),be(t,e));break}}t=t.return}}function Dp(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=de(),e.pingedLanes|=e.suspendedLanes&n,te===e&&(oe&n)===n&&(X===4||X===3&&(oe&130023424)===oe&&500>Y()-ls?Ot(e,0):ss|=n),be(e,t)}function Ju(e,t){t===0&&(e.mode&1?(t=Po,Po<<=1,!(Po&130023424)&&(Po=4194304)):t=1);var n=de();e=ot(e,t),e!==null&&(bo(e,t,n),be(e,n))}function Op(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ju(e,n)}function Bp(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(S(314))}o!==null&&o.delete(t),Ju(e,n)}var Qu;Qu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||we.current)fe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fe=!1,zp(e,t,n);fe=!!(e.flags&131072)}else fe=!1,D&&t.flags&1048576&&eu(t,ga,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Zo(e,t),e=t.pendingProps;var a=yn(t,le.current);gn(t,n),a=ts(null,t,o,e,a,n);var r=ns();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ye(o)?(r=!0,pa(t)):r=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Qi(t),a.updater=Aa,t.stateNode=a,a._reactInternals=t,oi(t,o,e,n),t=ii(null,t,o,!0,r,n)):(t.tag=0,D&&r&&Hi(t),ue(null,t,a,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Zo(e,t),e=t.pendingProps,a=o._init,o=a(o._payload),t.type=o,a=t.tag=Hp(o),e=Ae(o,e),a){case 0:t=ri(null,t,o,e,n);break e;case 1:t=wl(null,t,o,e,n);break e;case 11:t=gl(null,t,o,e,n);break e;case 14:t=fl(null,t,o,Ae(o.type,e),n);break e}throw Error(S(306,o,""))}return t;case 0:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ae(o,a),ri(e,t,o,a,n);case 1:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ae(o,a),wl(e,t,o,a,n);case 3:e:{if(Ru(t),e===null)throw Error(S(387));o=t.pendingProps,r=t.memoizedState,a=r.element,iu(e,t),ya(t,o,null,n);var i=t.memoizedState;if(o=i.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){a=xn(Error(S(423)),t),t=yl(e,t,o,n,a);break e}else if(o!==a){a=xn(Error(S(424)),t),t=yl(e,t,o,n,a);break e}else for(xe=yt(t.stateNode.containerInfo.firstChild),Se=t,D=!0,Fe=null,n=au(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bn(),o===a){t=at(e,t,n);break e}ue(e,t,o,n)}t=t.child}return t;case 5:return su(t),e===null&&ei(t),o=t.type,a=t.pendingProps,r=e!==null?e.memoizedProps:null,i=a.children,Jr(o,a)?i=null:r!==null&&Jr(o,r)&&(t.flags|=32),Nu(e,t),ue(e,t,i,n),t.child;case 6:return e===null&&ei(t),null;case 13:return Lu(e,t,n);case 4:return Ki(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=vn(t,null,o,n):ue(e,t,o,n),t.child;case 11:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ae(o,a),gl(e,t,o,a,n);case 7:return ue(e,t,t.pendingProps,n),t.child;case 8:return ue(e,t,t.pendingProps.children,n),t.child;case 12:return ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,a=t.pendingProps,r=t.memoizedProps,i=a.value,A(fa,o._currentValue),o._currentValue=i,r!==null)if(Be(r.value,i)){if(r.children===a.children&&!we.current){t=at(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){i=r.child;for(var l=s.firstContext;l!==null;){if(l.context===o){if(r.tag===1){l=et(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var g=c.pending;g===null?l.next=l:(l.next=g.next,g.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),ti(r.return,n,t),s.lanes|=n;break}l=l.next}}else if(r.tag===10)i=r.type===t.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(S(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),ti(i,n,t),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===t){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}ue(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,o=t.pendingProps.children,gn(t,n),a=Pe(a),o=o(a),t.flags|=1,ue(e,t,o,n),t.child;case 14:return o=t.type,a=Ae(o,t.pendingProps),a=Ae(o.type,a),fl(e,t,o,a,n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ae(o,a),Zo(e,t),t.tag=1,ye(o)?(e=!0,pa(t)):e=!1,gn(t,n),ju(t,o,a),oi(t,o,a,n),ii(null,t,o,!0,e,n);case 19:return Mu(e,t,n);case 22:return Pu(e,t,n)}throw Error(S(156,t.tag))};function Ku(e,t){return Tc(e,t)}function Up(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ce(e,t,n,o){return new Up(e,t,n,o)}function hs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hp(e){if(typeof e=="function")return hs(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pi)return 11;if(e===Ni)return 14}return 2}function xt(e,t){var n=e.alternate;return n===null?(n=Ce(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function na(e,t,n,o,a,r){var i=2;if(o=e,typeof e=="function")hs(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Zt:return Bt(n.children,a,r,t);case Ei:i=8,a|=8;break;case jr:return e=Ce(12,n,t,a|2),e.elementType=jr,e.lanes=r,e;case zr:return e=Ce(13,n,t,a),e.elementType=zr,e.lanes=r,e;case Cr:return e=Ce(19,n,t,a),e.elementType=Cr,e.lanes=r,e;case sc:return Da(n,a,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rc:i=10;break e;case ic:i=9;break e;case Pi:i=11;break e;case Ni:i=14;break e;case st:i=16,o=null;break e}throw Error(S(130,e==null?e:typeof e,""))}return t=Ce(i,n,t,a),t.elementType=e,t.type=o,t.lanes=r,t}function Bt(e,t,n,o){return e=Ce(7,e,o,t),e.lanes=n,e}function Da(e,t,n,o){return e=Ce(22,e,o,t),e.elementType=sc,e.lanes=n,e.stateNode={isHidden:!1},e}function br(e,t,n){return e=Ce(6,e,null,t),e.lanes=n,e}function vr(e,t,n){return t=Ce(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,n,o,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=er(0),this.expirationTimes=er(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ps(e,t,n,o,a,r,i,s,l){return e=new $p(e,t,n,s,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ce(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qi(r),e}function Gp(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xt,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function Xu(e){if(!e)return It;e=e._reactInternals;e:{if(qt(e)!==e||e.tag!==1)throw Error(S(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(S(171))}if(e.tag===1){var n=e.type;if(ye(n))return Xc(e,n,t)}return t}function Zu(e,t,n,o,a,r,i,s,l){return e=ps(n,o,!0,e,a,r,i,s,l),e.context=Xu(null),n=e.current,o=de(),a=kt(n),r=et(o,a),r.callback=t??null,bt(n,r,a),e.current.lanes=a,bo(e,a,o),be(e,o),e}function Oa(e,t,n,o){var a=t.current,r=de(),i=kt(a);return n=Xu(n),t.context===null?t.context=n:t.pendingContext=n,t=et(r,i),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=bt(a,t,i),e!==null&&(Oe(e,a,i,r),Qo(e,a,i)),i}function _a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ms(e,t){zl(e,t),(e=e.alternate)&&zl(e,t)}function Yp(){return null}var ed=typeof reportError=="function"?reportError:function(e){console.error(e)};function gs(e){this._internalRoot=e}Ba.prototype.render=gs.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(S(409));Oa(e,t,null,null)};Ba.prototype.unmount=gs.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yt(function(){Oa(null,e,null,null)}),t[nt]=null}};function Ba(e){this._internalRoot=e}Ba.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ct.length&&t!==0&&t<ct[n].priority;n++);ct.splice(n,0,e),n===0&&Rc(e)}};function fs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ua(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cl(){}function Vp(e,t,n,o,a){if(a){if(typeof o=="function"){var r=o;o=function(){var c=_a(i);r.call(c)}}var i=Zu(t,o,e,0,null,!1,!1,"",Cl);return e._reactRootContainer=i,e[nt]=i.current,io(e.nodeType===8?e.parentNode:e),Yt(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof o=="function"){var s=o;o=function(){var c=_a(l);s.call(c)}}var l=ps(e,0,!1,null,null,!1,!1,"",Cl);return e._reactRootContainer=l,e[nt]=l.current,io(e.nodeType===8?e.parentNode:e),Yt(function(){Oa(t,l,n,o)}),l}function Ha(e,t,n,o,a){var r=n._reactRootContainer;if(r){var i=r;if(typeof a=="function"){var s=a;a=function(){var l=_a(i);s.call(l)}}Oa(t,i,e,a)}else i=Vp(n,t,e,a,o);return _a(i)}Cc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bn(t.pendingLanes);n!==0&&(Mi(t,n|1),be(t,Y()),!(L&6)&&(Sn=Y()+500,zt()))}break;case 13:Yt(function(){var o=ot(e,1);if(o!==null){var a=de();Oe(o,e,1,a)}}),ms(e,1)}};Ai=function(e){if(e.tag===13){var t=ot(e,134217728);if(t!==null){var n=de();Oe(t,e,134217728,n)}ms(e,134217728)}};Ec=function(e){if(e.tag===13){var t=kt(e),n=ot(e,t);if(n!==null){var o=de();Oe(n,e,t,o)}ms(e,t)}};Pc=function(){return M};Nc=function(e,t){var n=M;try{return M=e,t()}finally{M=n}};Dr=function(e,t,n){switch(t){case"input":if(Nr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var a=Ra(o);if(!a)throw Error(S(90));cc(o),Nr(o,a)}}}break;case"textarea":dc(e,n);break;case"select":t=n.value,t!=null&&dn(e,!!n.multiple,t,!1)}};yc=cs;bc=Yt;var qp={usingClientEntryPoint:!1,Events:[ko,on,Ra,fc,wc,cs]},Wn={findFiberByHostInstance:Wt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jp={bundleType:Wn.bundleType,version:Wn.version,rendererPackageName:Wn.rendererPackageName,rendererConfig:Wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xc(e),e===null?null:e.stateNode},findFiberByHostInstance:Wn.findFiberByHostInstance||Yp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uo.isDisabled&&Uo.supportsFiber)try{Ca=Uo.inject(Jp),Ye=Uo}catch{}}Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;Ie.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fs(t))throw Error(S(200));return Gp(e,t,null,n)};Ie.createRoot=function(e,t){if(!fs(e))throw Error(S(299));var n=!1,o="",a=ed;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ps(e,1,!1,null,null,n,!1,o,a),e[nt]=t.current,io(e.nodeType===8?e.parentNode:e),new gs(t)};Ie.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(S(188)):(e=Object.keys(e).join(","),Error(S(268,e)));return e=xc(t),e=e===null?null:e.stateNode,e};Ie.flushSync=function(e){return Yt(e)};Ie.hydrate=function(e,t,n){if(!Ua(t))throw Error(S(200));return Ha(null,e,t,!0,n)};Ie.hydrateRoot=function(e,t,n){if(!fs(e))throw Error(S(405));var o=n!=null&&n.hydratedSources||null,a=!1,r="",i=ed;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Zu(t,null,e,1,n??null,a,!1,r,i),e[nt]=t.current,io(e),o)for(e=0;e<o.length;e++)n=o[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ba(t)};Ie.render=function(e,t,n){if(!Ua(t))throw Error(S(200));return Ha(null,e,t,!1,n)};Ie.unmountComponentAtNode=function(e){if(!Ua(e))throw Error(S(40));return e._reactRootContainer?(Yt(function(){Ha(null,null,e,!1,function(){e._reactRootContainer=null,e[nt]=null})}),!0):!1};Ie.unstable_batchedUpdates=cs;Ie.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Ua(n))throw Error(S(200));if(e==null||e._reactInternals===void 0)throw Error(S(38));return Ha(e,t,n,!1,o)};Ie.version="18.3.1-next-f1338f8080-20240426";function td(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(td)}catch(e){console.error(e)}}td(),tc.exports=Ie;var Qp=tc.exports,yi,El=Qp;yi=Ir.createRoot=El.createRoot,Ir.hydrateRoot=El.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fo.apply(this,arguments)}var mt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mt||(mt={}));const Pl="popstate";function Kp(e){e===void 0&&(e={});function t(o,a){let{pathname:r,search:i,hash:s}=o.location;return bi("",{pathname:r,search:i,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){return typeof a=="string"?a:ja(a)}return Zp(t,n,null,e)}function Q(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xp(){return Math.random().toString(36).substr(2,8)}function Nl(e,t){return{usr:e.state,key:e.key,idx:t}}function bi(e,t,n,o){return n===void 0&&(n=null),fo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jn(t):t,{state:n,key:t&&t.key||o||Xp()})}function ja(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function jn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Zp(e,t,n,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:r=!1}=o,i=a.history,s=mt.Pop,l=null,c=g();c==null&&(c=0,i.replaceState(fo({},i.state,{idx:c}),""));function g(){return(i.state||{idx:null}).idx}function m(){s=mt.Pop;let b=g(),d=b==null?null:b-c;c=b,l&&l({action:s,location:y.location,delta:d})}function f(b,d){s=mt.Push;let u=bi(y.location,b,d);c=g()+1;let p=Nl(u,c),v=y.createHref(u);try{i.pushState(p,"",v)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(v)}r&&l&&l({action:s,location:y.location,delta:1})}function w(b,d){s=mt.Replace;let u=bi(y.location,b,d);c=g();let p=Nl(u,c),v=y.createHref(u);i.replaceState(p,"",v),r&&l&&l({action:s,location:y.location,delta:0})}function k(b){let d=a.location.origin!=="null"?a.location.origin:a.location.href,u=typeof b=="string"?b:ja(b);return u=u.replace(/ $/,"%20"),Q(d,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,d)}let y={get action(){return s},get location(){return e(a,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Pl,m),l=b,()=>{a.removeEventListener(Pl,m),l=null}},createHref(b){return t(a,b)},createURL:k,encodeLocation(b){let d=k(b);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:f,replace:w,go(b){return i.go(b)}};return y}var Rl;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rl||(Rl={}));function em(e,t,n){return n===void 0&&(n="/"),tm(e,t,n)}function tm(e,t,n,o){let a=typeof t=="string"?jn(t):t,r=ws(a.pathname||"/",n);if(r==null)return null;let i=od(e);nm(i);let s=null;for(let l=0;s==null&&l<i.length;++l){let c=mm(r);s=dm(i[l],c)}return s}function od(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let a=(r,i,s)=>{let l={relativePath:s===void 0?r.path||"":s,caseSensitive:r.caseSensitive===!0,childrenIndex:i,route:r};l.relativePath.startsWith("/")&&(Q(l.relativePath.startsWith(o),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(o.length));let c=St([o,l.relativePath]),g=n.concat(l);r.children&&r.children.length>0&&(Q(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),od(r.children,t,g,c)),!(r.path==null&&!r.index)&&t.push({path:c,score:cm(c,r.index),routesMeta:g})};return e.forEach((r,i)=>{var s;if(r.path===""||!((s=r.path)!=null&&s.includes("?")))a(r,i);else for(let l of ad(r.path))a(r,i,l)}),t}function ad(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(o.length===0)return a?[r,""]:[r];let i=ad(o.join("/")),s=[];return s.push(...i.map(l=>l===""?r:[r,l].join("/"))),a&&s.push(...i),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function nm(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:um(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const om=/^:[\w-]+$/,am=3,rm=2,im=1,sm=10,lm=-2,Ll=e=>e==="*";function cm(e,t){let n=e.split("/"),o=n.length;return n.some(Ll)&&(o+=lm),t&&(o+=rm),n.filter(a=>!Ll(a)).reduce((a,r)=>a+(om.test(r)?am:r===""?im:sm),o)}function um(e,t){return e.length===t.length&&e.slice(0,-1).every((o,a)=>o===t[a])?e[e.length-1]-t[t.length-1]:0}function dm(e,t,n){let{routesMeta:o}=e,a={},r="/",i=[];for(let s=0;s<o.length;++s){let l=o[s],c=s===o.length-1,g=r==="/"?t:t.slice(r.length)||"/",m=hm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},g),f=l.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:St([r,m.pathname]),pathnameBase:ym(St([r,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(r=St([r,m.pathnameBase]))}return i}function hm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=pm(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],i=r.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:o.reduce((c,g,m)=>{let{paramName:f,isOptional:w}=g;if(f==="*"){let y=s[m]||"";i=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const k=s[m];return w&&!k?c[f]=void 0:c[f]=(k||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:i,pattern:e}}function pm(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,l)=>(o.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),o]}function mm(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ws(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function gm(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:a=""}=typeof e=="string"?jn(e):e;return{pathname:n?n.startsWith("/")?n:fm(n,t):t,search:bm(o),hash:vm(a)}}function fm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function kr(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wm(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rd(e,t){let n=wm(e);return t?n.map((o,a)=>a===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function id(e,t,n,o){o===void 0&&(o=!1);let a;typeof e=="string"?a=jn(e):(a=fo({},e),Q(!a.pathname||!a.pathname.includes("?"),kr("?","pathname","search",a)),Q(!a.pathname||!a.pathname.includes("#"),kr("#","pathname","hash",a)),Q(!a.search||!a.search.includes("#"),kr("#","search","hash",a)));let r=e===""||a.pathname==="",i=r?"/":a.pathname,s;if(i==null)s=n;else{let m=t.length-1;if(!o&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}s=m>=0?t[m]:"/"}let l=gm(a,s),c=i&&i!=="/"&&i.endsWith("/"),g=(r||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||g)&&(l.pathname+="/"),l}const St=e=>e.join("/").replace(/\/\/+/g,"/"),ym=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bm=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vm=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function km(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sd=["post","put","patch","delete"];new Set(sd);const xm=["get",...sd];new Set(xm);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wo.apply(this,arguments)}const ys=x.createContext(null),Sm=x.createContext(null),Jt=x.createContext(null),$a=x.createContext(null),Ct=x.createContext({outlet:null,matches:[],isDataRoute:!1}),ld=x.createContext(null);function Tm(e,t){let{relative:n}=t===void 0?{}:t;So()||Q(!1);let{basename:o,navigator:a}=x.useContext(Jt),{hash:r,pathname:i,search:s}=ud(e,{relative:n}),l=i;return o!=="/"&&(l=i==="/"?o:St([o,i])),a.createHref({pathname:l,search:s,hash:r})}function So(){return x.useContext($a)!=null}function Ga(){return So()||Q(!1),x.useContext($a).location}function cd(e){x.useContext(Jt).static||x.useLayoutEffect(e)}function bs(){let{isDataRoute:e}=x.useContext(Ct);return e?Fm():Im()}function Im(){So()||Q(!1);let e=x.useContext(ys),{basename:t,future:n,navigator:o}=x.useContext(Jt),{matches:a}=x.useContext(Ct),{pathname:r}=Ga(),i=JSON.stringify(rd(a,n.v7_relativeSplatPath)),s=x.useRef(!1);return cd(()=>{s.current=!0}),x.useCallback(function(c,g){if(g===void 0&&(g={}),!s.current)return;if(typeof c=="number"){o.go(c);return}let m=id(c,JSON.parse(i),r,g.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:St([t,m.pathname])),(g.replace?o.replace:o.push)(m,g.state,g)},[t,o,i,r,e])}function _m(){let{matches:e}=x.useContext(Ct),t=e[e.length-1];return t?t.params:{}}function ud(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=x.useContext(Jt),{matches:a}=x.useContext(Ct),{pathname:r}=Ga(),i=JSON.stringify(rd(a,o.v7_relativeSplatPath));return x.useMemo(()=>id(e,JSON.parse(i),r,n==="path"),[e,i,r,n])}function jm(e,t){return zm(e,t)}function zm(e,t,n,o){So()||Q(!1);let{navigator:a}=x.useContext(Jt),{matches:r}=x.useContext(Ct),i=r[r.length-1],s=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c=Ga(),g;if(t){var m;let b=typeof t=="string"?jn(t):t;l==="/"||(m=b.pathname)!=null&&m.startsWith(l)||Q(!1),g=b}else g=c;let f=g.pathname||"/",w=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let k=em(e,{pathname:w}),y=Rm(k&&k.map(b=>Object.assign({},b,{params:Object.assign({},s,b.params),pathname:St([l,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:St([l,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),r,n,o);return t&&y?x.createElement($a.Provider,{value:{location:wo({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:mt.Pop}},y):y}function Cm(){let e=Wm(),t=km(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:a},n):null,null)}const Em=x.createElement(Cm,null);class Pm extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(Ct.Provider,{value:this.props.routeContext},x.createElement(ld.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nm(e){let{routeContext:t,match:n,children:o}=e,a=x.useContext(ys);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Ct.Provider,{value:t},o)}function Rm(e,t,n,o){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var r;if(!n)return null;if(n.errors)e=n.matches;else if((r=o)!=null&&r.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=(a=n)==null?void 0:a.errors;if(s!=null){let g=i.findIndex(m=>m.route.id&&(s==null?void 0:s[m.route.id])!==void 0);g>=0||Q(!1),i=i.slice(0,Math.min(i.length,g+1))}let l=!1,c=-1;if(n&&o&&o.v7_partialHydration)for(let g=0;g<i.length;g++){let m=i[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=g),m.route.id){let{loaderData:f,errors:w}=n,k=m.route.loader&&f[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||k){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((g,m,f)=>{let w,k=!1,y=null,b=null;n&&(w=s&&m.route.id?s[m.route.id]:void 0,y=m.route.errorElement||Em,l&&(c<0&&f===0?(Dm("route-fallback"),k=!0,b=null):c===f&&(k=!0,b=m.route.hydrateFallbackElement||null)));let d=t.concat(i.slice(0,f+1)),u=()=>{let p;return w?p=y:k?p=b:m.route.Component?p=x.createElement(m.route.Component,null):m.route.element?p=m.route.element:p=g,x.createElement(Nm,{match:m,routeContext:{outlet:g,matches:d,isDataRoute:n!=null},children:p})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?x.createElement(Pm,{location:n.location,revalidation:n.revalidation,component:y,error:w,children:u(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):u()},null)}var dd=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dd||{}),hd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hd||{});function Lm(e){let t=x.useContext(ys);return t||Q(!1),t}function Mm(e){let t=x.useContext(Sm);return t||Q(!1),t}function Am(e){let t=x.useContext(Ct);return t||Q(!1),t}function pd(e){let t=Am(),n=t.matches[t.matches.length-1];return n.route.id||Q(!1),n.route.id}function Wm(){var e;let t=x.useContext(ld),n=Mm(),o=pd();return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function Fm(){let{router:e}=Lm(dd.UseNavigateStable),t=pd(hd.UseNavigateStable),n=x.useRef(!1);return cd(()=>{n.current=!0}),x.useCallback(function(a,r){r===void 0&&(r={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,wo({fromRouteId:t},r)))},[e,t])}const Ml={};function Dm(e,t,n){Ml[e]||(Ml[e]=!0)}function Om(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function At(e){Q(!1)}function Bm(e){let{basename:t="/",children:n=null,location:o,navigationType:a=mt.Pop,navigator:r,static:i=!1,future:s}=e;So()&&Q(!1);let l=t.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:r,static:i,future:wo({v7_relativeSplatPath:!1},s)}),[l,s,r,i]);typeof o=="string"&&(o=jn(o));let{pathname:g="/",search:m="",hash:f="",state:w=null,key:k="default"}=o,y=x.useMemo(()=>{let b=ws(g,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:w,key:k},navigationType:a}},[l,g,m,f,w,k,a]);return y==null?null:x.createElement(Jt.Provider,{value:c},x.createElement($a.Provider,{children:n,value:y}))}function Um(e){let{children:t,location:n}=e;return jm(vi(t),n)}new Promise(()=>{});function vi(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(o,a)=>{if(!x.isValidElement(o))return;let r=[...t,a];if(o.type===x.Fragment){n.push.apply(n,vi(o.props.children,r));return}o.type!==At&&Q(!1),!o.props.index||!o.props.children||Q(!1);let i={id:o.props.id||r.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(i.children=vi(o.props.children,r)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ki.apply(this,arguments)}function Hm(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,r;for(r=0;r<o.length;r++)a=o[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function $m(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gm(e,t){return e.button===0&&(!t||t==="_self")&&!$m(e)}const Ym=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vm="6";try{window.__reactRouterVersion=Vm}catch{}const qm="startTransition",Al=Dd[qm];function Jm(e){let{basename:t,children:n,future:o,window:a}=e,r=x.useRef();r.current==null&&(r.current=Kp({window:a,v5Compat:!0}));let i=r.current,[s,l]=x.useState({action:i.action,location:i.location}),{v7_startTransition:c}=o||{},g=x.useCallback(m=>{c&&Al?Al(()=>l(m)):l(m)},[l,c]);return x.useLayoutEffect(()=>i.listen(g),[i,g]),x.useEffect(()=>Om(o),[o]),x.createElement(Bm,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:i,future:o})}const Qm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Km=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=x.forwardRef(function(t,n){let{onClick:o,relative:a,reloadDocument:r,replace:i,state:s,target:l,to:c,preventScrollReset:g,viewTransition:m}=t,f=Hm(t,Ym),{basename:w}=x.useContext(Jt),k,y=!1;if(typeof c=="string"&&Km.test(c)&&(k=c,Qm))try{let p=new URL(window.location.href),v=c.startsWith("//")?new URL(p.protocol+c):new URL(c),T=ws(v.pathname,w);v.origin===p.origin&&T!=null?c=T+v.search+v.hash:y=!0}catch{}let b=Tm(c,{relative:a}),d=Xm(c,{replace:i,state:s,target:l,preventScrollReset:g,relative:a,viewTransition:m});function u(p){o&&o(p),p.defaultPrevented||d(p)}return x.createElement("a",ki({},f,{href:k||b,onClick:y||r?o:u,ref:n,target:l}))});var Wl;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Wl||(Wl={}));var Fl;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fl||(Fl={}));function Xm(e,t){let{target:n,replace:o,state:a,preventScrollReset:r,relative:i,viewTransition:s}=t===void 0?{}:t,l=bs(),c=Ga(),g=ud(e,{relative:i});return x.useCallback(m=>{if(Gm(m,n)){m.preventDefault();let f=o!==void 0?o:ja(c)===ja(g);l(e,{replace:f,state:a,preventScrollReset:r,relative:i,viewTransition:s})}},[c,l,g,o,a,n,e,r,i,s])}const Zm="_header_n3yy8_1",eg="_inner_n3yy8_15",tg="_logo_n3yy8_24",ng="_nav_n3yy8_42",og="_themeToggle_n3yy8_75",ag="_themeIcon_n3yy8_90",Kt={header:Zm,inner:eg,logo:tg,nav:ng,themeToggle:og,themeIcon:ag};function rg({theme:e,onToggleTheme:t}){return h.jsx("header",{className:Kt.header,children:h.jsxs("div",{className:Kt.inner,children:[h.jsx(dt,{to:"/",className:Kt.logo,children:"Matthew Gerstman"}),h.jsxs("nav",{className:Kt.nav,children:[h.jsx(dt,{to:"/",children:"Writing"}),h.jsx(dt,{to:"/talks",children:"Talks"}),h.jsx(dt,{to:"/career",children:"Career"}),h.jsx(dt,{to:"/about",children:"About"}),h.jsx("button",{className:Kt.themeToggle,onClick:t,"aria-label":"Toggle theme",children:h.jsx("span",{className:Kt.themeIcon,children:e==="dark"?"🌙":"☀️"})})]})]})})}function ig(){const[e,t]=x.useState(0);return x.useEffect(()=>{const n=()=>{const o=document.body.scrollTop||document.documentElement.scrollTop,a=document.documentElement.scrollHeight-document.documentElement.clientHeight;t(o/a*100)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),e}const sg="_progressBar_1q8l6_1",lg={progressBar:sg};function cg(){const e=ig();return h.jsx("div",{className:lg.progressBar,style:{width:`${e}%`}})}function Dl(e,t){e=e.toLowerCase(),t=t.toLowerCase();let n=0,o=0,a=0,r=0;for(;n<e.length&&o<t.length;)e[n]===t[o]?(a+=1+r,r++,n++):r=0,o++;return n!==e.length?{matched:!1,score:0}:{matched:!0,score:a}}function ug(e,t){return t?e.map(n=>{const o=Dl(t,n.title),a=n.excerpt?Dl(t,n.excerpt):{matched:!1,score:0},r=(o.matched?o.score*2:0)+(a.matched?a.score:0);return{post:n,matched:o.matched||a.matched,score:r}}).filter(n=>n.matched).sort((n,o)=>o.score-n.score).map(n=>n.post):e}function vs(e){if(!e||e.trim().length===0)return 0;const t=e.trim().split(/\s+/).length;return Math.ceil(t/200)}function md(e){return!e||e.trim().length===0?0:e.trim().split(/\s+/).length}const dg="_overlay_npiux_1",hg="_modal_npiux_16",pg="_input_npiux_26",mg="_results_npiux_41",gg="_resultItem_npiux_46",fg="_selected_npiux_61",wg="_icon_npiux_65",yg="_placeholder_npiux_74",bg="_content_npiux_83",vg="_title_npiux_88",kg="_meta_npiux_98",xg="_empty_npiux_103",me={overlay:dg,modal:hg,input:pg,results:mg,resultItem:gg,selected:fg,icon:wg,placeholder:yg,content:bg,title:vg,meta:kg,empty:xg};function Sg({isOpen:e,onClose:t,posts:n}){const[o,a]=x.useState(""),[r,i]=x.useState([]),[s,l]=x.useState(0),c=x.useRef(null),g=bs();x.useEffect(()=>{e&&(a(""),i([]),l(0),setTimeout(()=>{var w;return(w=c.current)==null?void 0:w.focus()},100))},[e]),x.useEffect(()=>{if(!o){i([]),l(0);return}const w=ug(n,o).slice(0,8);i(w),l(0)},[o,n]);const m=w=>{w.key==="ArrowDown"?(w.preventDefault(),l(k=>Math.min(k+1,r.length-1))):w.key==="ArrowUp"?(w.preventDefault(),l(k=>Math.max(k-1,0))):w.key==="Enter"&&r[s]?(w.preventDefault(),g(`/tech/${r[s].slug}`),t()):w.key==="Escape"&&t()},f=w=>{g(`/tech/${w.slug}`),t()};return e?h.jsx("div",{className:me.overlay,onClick:t,children:h.jsxs("div",{className:me.modal,onClick:w=>w.stopPropagation(),children:[h.jsx("input",{ref:c,type:"text",className:me.input,placeholder:"Search articles...",value:o,onChange:w=>a(w.target.value),onKeyDown:m,autoComplete:"off"}),h.jsxs("div",{className:me.results,children:[!o&&h.jsx("div",{className:me.empty,children:"Type to search articles..."}),o&&r.length===0&&h.jsx("div",{className:me.empty,children:"No articles found"}),r.map((w,k)=>{const y=w.banner_img,b=vs(w.content);return h.jsxs("div",{className:`${me.resultItem} ${k===s?me.selected:""}`,onClick:()=>f(w),children:[y?h.jsx("img",{src:y,alt:w.title,className:me.icon}):h.jsx("div",{className:`${me.icon} ${me.placeholder}`,children:"📝"}),h.jsxs("div",{className:me.content,children:[h.jsx("div",{className:me.title,children:w.title}),h.jsxs("div",{className:me.meta,children:[w.date," · ",b," min read"]})]})]},w.id)})]})]})}):null}const Tg="_container_rd6yi_1",Ig="_input_rd6yi_16",_g="_matches_rd6yi_29",jg="_controls_rd6yi_30",zg="_button_rd6yi_32",Nt={container:Tg,input:Ig,matches:_g,controls:jg,button:zg};function Cg({isOpen:e,onClose:t}){const[n,o]=x.useState(""),[a,r]=x.useState(0),[i,s]=x.useState(0),[l,c]=x.useState([]),g=x.useRef(null);x.useEffect(()=>{e?(o(""),r(0),s(0),c([]),setTimeout(()=>{var b;return(b=g.current)==null?void 0:b.focus()},100)):document.querySelectorAll(".find-match").forEach(b=>{b.classList.remove("find-match","find-current")})},[e]),x.useEffect(()=>{if(document.querySelectorAll(".find-match").forEach(d=>{d.classList.remove("find-match","find-current")}),!n){s(0),r(0),c([]);return}const b=m(n);c(b),s(b.length),b.length>0&&(r(1),f(b,0))},[n]);const m=b=>{const d=document.querySelector(".article-body");if(!d)return[];const u=[],p=b.toLowerCase(),v=document.createTreeWalker(d,NodeFilter.SHOW_TEXT,{acceptNode:C=>{const _=C.parentElement;return _&&(_.tagName==="SCRIPT"||_.tagName==="STYLE")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),T=[];let z;for(;z=v.nextNode();)z.textContent&&z.textContent.toLowerCase().includes(p)&&T.push(z);return T.forEach(C=>{const _=C.parentElement;_&&_.textContent&&_.textContent.toLowerCase().includes(p)&&(_.classList.contains("find-match")||(_.classList.add("find-match"),u.push(_)))}),u},f=(b,d)=>{if(!b[d])return;b.forEach(T=>T.classList.remove("find-current")),b[d].classList.add("find-current");const v=b[d].getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:v,behavior:"smooth"}),setTimeout(()=>{var T;return(T=g.current)==null?void 0:T.focus()},100)},w=()=>{if(l.length===0)return;const b=a>=l.length?1:a+1;r(b),f(l,b-1)},k=()=>{if(l.length===0)return;const b=a<=1?l.length:a-1;r(b),f(l,b-1)},y=b=>{b.key==="Enter"?(b.preventDefault(),b.shiftKey?k():w()):b.key==="Escape"&&t()};return e?h.jsxs("div",{className:Nt.container,children:[h.jsx("input",{ref:g,type:"text",className:Nt.input,placeholder:"Find in page...",value:n,onChange:b=>o(b.target.value),onKeyDown:y,autoComplete:"off"}),i>0&&h.jsxs("div",{className:Nt.matches,children:[a," / ",i]}),h.jsxs("div",{className:Nt.controls,children:[h.jsx("button",{className:Nt.button,onClick:k,disabled:i===0,title:"Previous",onMouseDown:b=>b.preventDefault(),children:"↑"}),h.jsx("button",{className:Nt.button,onClick:w,disabled:i===0,title:"Next",onMouseDown:b=>b.preventDefault(),children:"↓"}),h.jsx("button",{className:Nt.button,onClick:t,title:"Close",onMouseDown:b=>b.preventDefault(),children:"✕"})]})]}):null}const Eg="_card_12bef_6",Pg="_link_12bef_16",Ng="_title_12bef_22",Rg="_metaBar_12bef_37",Lg="_date_12bef_45",Mg="_badge_12bef_51",Ag="_excerpt_12bef_60",Wg="_banner_12bef_66",qe={card:Eg,link:Pg,title:Ng,metaBar:Rg,date:Lg,badge:Mg,excerpt:Ag,banner:Wg};function Fg({post:e,index:t}){const n=vs(e.content),o=md(e.content),a=e.banner_img;return h.jsx("article",{className:qe.card,style:{animationDelay:`${Math.min(t*.1,.5)}s`},children:h.jsxs(dt,{to:`/tech/${e.slug}`,className:qe.link,children:[h.jsx("h2",{className:qe.title,children:e.title}),h.jsxs("div",{className:qe.metaBar,children:[h.jsx("span",{className:qe.date,children:e.date}),h.jsxs("span",{className:qe.badge,children:[n," min read"]}),h.jsxs("span",{className:qe.badge,children:[o.toLocaleString()," words"]})]}),e.excerpt&&h.jsx("p",{className:qe.excerpt,children:e.excerpt}),a&&h.jsx("img",{src:a,alt:e.title,className:qe.banner})]})})}const Dg="_container_ar6qj_1",Og="_sortControls_ar6qj_2",Bg="_sortButton_ar6qj_3",Ug="_active_ar6qj_5",Hg="_posts_ar6qj_6",Rt={container:Dg,sortControls:Og,sortButton:Bg,active:Ug,posts:Hg};function Ol({posts:e}){const[t,n]=x.useState("newest"),o=[...e].sort((a,r)=>t==="newest"?new Date(r.date).getTime()-new Date(a.date).getTime():new Date(a.date).getTime()-new Date(r.date).getTime());return h.jsxs("div",{className:Rt.container,children:[h.jsxs("div",{className:Rt.sortControls,children:[h.jsx("button",{className:`${Rt.sortButton} ${t==="newest"?Rt.active:""}`,onClick:()=>n("newest"),children:"Newest First"}),h.jsx("button",{className:`${Rt.sortButton} ${t==="oldest"?Rt.active:""}`,onClick:()=>n("oldest"),children:"Oldest First"})]}),h.jsx("main",{className:Rt.posts,children:o.map((a,r)=>h.jsx(Fg,{post:a,index:r},a.id))})]})}function gd(e){x.useEffect(()=>{const t=n=>{var a,r,i,s,l,c,g;const o=n.target;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"){if(n.key==="Escape"){(a=e.onEscape)==null||a.call(e);return}if((n.metaKey||n.ctrlKey)&&n.key==="k"){n.preventDefault(),(r=e.onSearch)==null||r.call(e);return}return}(n.metaKey||n.ctrlKey)&&n.key==="k"&&(n.preventDefault(),(i=e.onSearch)==null||i.call(e)),n.key==="/"&&(n.preventDefault(),(s=e.onFindInPage)==null||s.call(e)),n.key==="Escape"&&((l=e.onEscape)==null||l.call(e)),n.key==="j"&&(n.preventDefault(),(c=e.onNext)==null||c.call(e)),n.key==="k"&&(n.preventDefault(),(g=e.onPrevious)==null||g.call(e))};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function $g(){return x.useEffect(()=>{var t;if(document.getElementById("twitter-wjs")){(t=window.twttr)!=null&&t.widgets&&window.twttr.widgets.load();return}const e=document.createElement("script");return e.id="twitter-wjs",e.src="https://platform.twitter.com/widgets.js",e.async=!0,e.charset="utf-8",document.body.appendChild(e),()=>{}},[]),null}function Gg(e,t){let n=!0;return(...o)=>{n&&(n=!1,e(...o),setTimeout(()=>{n=!0},t))}}function Yg(e,t){let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{e(...o)},t)}}const Vg="_demo_1xvkp_1",qg="_counter_1xvkp_10",Jg="_buttons_1xvkp_18",Qg="_button_1xvkp_18",Kg="_buttonThrottled_1xvkp_26",Xg="_buttonDebounced_1xvkp_27",ke={demo:Vg,counter:qg,buttons:Jg,button:Qg,buttonThrottled:Kg,buttonDebounced:Xg},fd=250;function Zg(){const[e,t]=x.useState(0),n=x.useCallback(()=>t(o=>o+1),[]);return h.jsxs("div",{className:ke.demo,children:[h.jsxs("div",{className:ke.counter,children:[e," Spells Cast!"]}),h.jsx("button",{onClick:n,className:ke.button,children:"Cast Spell!"})]})}function ef(){const[e,t]=x.useState(0),n=x.useCallback(()=>t(a=>a+1),[]),o=x.useCallback(Gg(n,fd),[n]);return h.jsxs("div",{className:ke.demo,children:[h.jsxs("div",{className:ke.counter,children:[e," Spells Cast!"]}),h.jsxs("div",{className:ke.buttons,children:[h.jsx("button",{onClick:n,className:ke.button,children:"Cast Spell!"}),h.jsx("button",{onClick:o,className:ke.buttonThrottled,children:"Cast Spell Throttled!"})]})]})}function tf(){const[e,t]=x.useState(0),n=x.useCallback(()=>t(a=>a+1),[]),o=x.useCallback(Yg(n,fd),[n]);return h.jsxs("div",{className:ke.demo,children:[h.jsxs("div",{className:ke.counter,children:[e," Spells Cast!"]}),h.jsxs("div",{className:ke.buttons,children:[h.jsx("button",{onClick:n,className:ke.button,children:"Cast Spell!"}),h.jsx("button",{onClick:o,className:ke.buttonDebounced,children:"Cast Spell Debounced!"})]})]})}const nf="_container_1dxfq_1",of="_image_1dxfq_6",af="_loading_1dxfq_13",rf="_loaded_1dxfq_17",Ho={container:nf,image:of,loading:af,loaded:rf},sf={"all-in-on-homekit/homekit-app-1.jpeg":{original:"/images/blog/all-in-on-homekit/homekit-app-1.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-app-1.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-app-1.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-app-1.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-app-1.webp"}},"all-in-on-homekit/homekit-app-2.jpeg":{original:"/images/blog/all-in-on-homekit/homekit-app-2.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-app-2.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-app-2.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-app-2.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-app-2.webp"}},"all-in-on-homekit/homekit-app-3.jpeg":{original:"/images/blog/all-in-on-homekit/homekit-app-3.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-app-3.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-app-3.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-app-3.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-app-3.webp"}},"all-in-on-homekit/homekit-automation-1.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-1.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-1.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-1.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-1.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-1.webp"}},"all-in-on-homekit/homekit-automation-2.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-2.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-2.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-2.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-2.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-2.webp"}},"all-in-on-homekit/homekit-automation-3.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-3.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-3.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-3.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-3.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-3.webp"}},"all-in-on-homekit/homekit-automation-4.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-4.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-4.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-4.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-4.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-4.webp"}},"all-in-on-homekit/homekit-automation-5.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-5.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-5.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-5.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-5.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-5.webp"}},"all-in-on-homekit/homekit-automation-6.png":{original:"/images/blog/all-in-on-homekit/homekit-automation-6.png",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-automation-6.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-automation-6.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-automation-6.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-automation-6.webp"}},"all-in-on-homekit/homekit-device-setup.jpeg":{original:"/images/blog/all-in-on-homekit/homekit-device-setup.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-device-setup.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-device-setup.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-device-setup.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-device-setup.webp"}},"all-in-on-homekit/homekit-setup.jpg":{original:"/images/blog/all-in-on-homekit/homekit-setup.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/homekit-setup.webp",medium:"/images/optimized/medium/all-in-on-homekit/homekit-setup.webp",large:"/images/optimized/large/all-in-on-homekit/homekit-setup.webp",full:"/images/optimized/full/all-in-on-homekit/homekit-setup.webp"}},"all-in-on-homekit/smart-home-device-1.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-1.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-1.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-1.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-1.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-1.webp"}},"all-in-on-homekit/smart-home-device-2.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-2.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-2.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-2.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-2.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-2.webp"}},"all-in-on-homekit/smart-home-device-3.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-3.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-3.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-3.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-3.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-3.webp"}},"all-in-on-homekit/smart-home-device-4.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-4.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-4.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-4.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-4.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-4.webp"}},"all-in-on-homekit/smart-home-device-5.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-5.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-5.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-5.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-5.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-5.webp"}},"all-in-on-homekit/smart-home-device-6.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-6.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-6.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-6.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-6.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-6.webp"}},"all-in-on-homekit/smart-home-device-7.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-7.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-7.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-7.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-7.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-7.webp"}},"all-in-on-homekit/smart-home-device-8.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-8.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-8.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-8.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-8.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-8.webp"}},"all-in-on-homekit/smart-home-device-9.jpeg":{original:"/images/blog/all-in-on-homekit/smart-home-device-9.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/all-in-on-homekit/smart-home-device-9.webp",medium:"/images/optimized/medium/all-in-on-homekit/smart-home-device-9.webp",large:"/images/optimized/large/all-in-on-homekit/smart-home-device-9.webp",full:"/images/optimized/full/all-in-on-homekit/smart-home-device-9.webp"}},"apartment.jpeg":{original:"/images/blog/apartment.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/apartment.webp",medium:"/images/optimized/medium/apartment.webp",large:"/images/optimized/large/apartment.webp",full:"/images/optimized/full/apartment.webp"}},"functional-programming-fundamentals/fp-concepts-diagram.png":{original:"/images/blog/functional-programming-fundamentals/fp-concepts-diagram.png",sizes:{thumbnail:"/images/optimized/thumbnail/functional-programming-fundamentals/fp-concepts-diagram.webp",medium:"/images/optimized/medium/functional-programming-fundamentals/fp-concepts-diagram.webp",large:"/images/optimized/large/functional-programming-fundamentals/fp-concepts-diagram.webp",full:"/images/optimized/full/functional-programming-fundamentals/fp-concepts-diagram.webp"}},"functional-programming-fundamentals/functional-programming-hero.jpg":{original:"/images/blog/functional-programming-fundamentals/functional-programming-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/functional-programming-fundamentals/functional-programming-hero.webp",medium:"/images/optimized/medium/functional-programming-fundamentals/functional-programming-hero.webp",large:"/images/optimized/large/functional-programming-fundamentals/functional-programming-hero.webp",full:"/images/optimized/full/functional-programming-fundamentals/functional-programming-hero.webp"}},"hello-there/bay-bridge-sf.jpg":{original:"/images/blog/hello-there/bay-bridge-sf.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hello-there/bay-bridge-sf.webp",medium:"/images/optimized/medium/hello-there/bay-bridge-sf.webp",large:"/images/optimized/large/hello-there/bay-bridge-sf.webp",full:"/images/optimized/full/hello-there/bay-bridge-sf.webp"}},"hello-there/matthew-speaking-1.jpg":{original:"/images/blog/hello-there/matthew-speaking-1.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hello-there/matthew-speaking-1.webp",medium:"/images/optimized/medium/hello-there/matthew-speaking-1.webp",large:"/images/optimized/large/hello-there/matthew-speaking-1.webp",full:"/images/optimized/full/hello-there/matthew-speaking-1.webp"}},"hello-there/matthew-speaking-2.jpg":{original:"/images/blog/hello-there/matthew-speaking-2.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hello-there/matthew-speaking-2.webp",medium:"/images/optimized/medium/hello-there/matthew-speaking-2.webp",large:"/images/optimized/large/hello-there/matthew-speaking-2.webp",full:"/images/optimized/full/hello-there/matthew-speaking-2.webp"}},"hero-mountain-lake.jpg":{original:"/images/blog/hero-mountain-lake.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-mountain-lake.webp",medium:"/images/optimized/medium/hero-mountain-lake.webp",large:"/images/optimized/large/hero-mountain-lake.webp",full:"/images/optimized/full/hero-mountain-lake.webp"}},"hero-mountain-sunset.jpg":{original:"/images/blog/hero-mountain-sunset.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-mountain-sunset.webp",medium:"/images/optimized/medium/hero-mountain-sunset.webp",large:"/images/optimized/large/hero-mountain-sunset.webp",full:"/images/optimized/full/hero-mountain-sunset.webp"}},"hero-mountain-valley.jpg":{original:"/images/blog/hero-mountain-valley.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-mountain-valley.webp",medium:"/images/optimized/medium/hero-mountain-valley.webp",large:"/images/optimized/large/hero-mountain-valley.webp",full:"/images/optimized/full/hero-mountain-valley.webp"}},"hero-mountains-night.jpg":{original:"/images/blog/hero-mountains-night.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-mountains-night.webp",medium:"/images/optimized/medium/hero-mountains-night.webp",large:"/images/optimized/large/hero-mountains-night.webp",full:"/images/optimized/full/hero-mountains-night.webp"}},"hero-northern-lights.jpg":{original:"/images/blog/hero-northern-lights.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-northern-lights.webp",medium:"/images/optimized/medium/hero-northern-lights.webp",large:"/images/optimized/large/hero-northern-lights.webp",full:"/images/optimized/full/hero-northern-lights.webp"}},"hero-technical-interview.jpg":{original:"/images/blog/hero-technical-interview.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/hero-technical-interview.webp",medium:"/images/optimized/medium/hero-technical-interview.webp",large:"/images/optimized/large/hero-technical-interview.webp",full:"/images/optimized/full/hero-technical-interview.webp"}},"history-of-the-web/browser-market-share.png":{original:"/images/blog/history-of-the-web/browser-market-share.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/browser-market-share.webp",medium:"/images/optimized/medium/history-of-the-web/browser-market-share.webp",large:"/images/optimized/large/history-of-the-web/browser-market-share.webp",full:"/images/optimized/full/history-of-the-web/browser-market-share.webp"}},"history-of-the-web/chrome-announcement.png":{original:"/images/blog/history-of-the-web/chrome-announcement.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/chrome-announcement.webp",medium:"/images/optimized/medium/history-of-the-web/chrome-announcement.webp",large:"/images/optimized/large/history-of-the-web/chrome-announcement.webp",full:"/images/optimized/full/history-of-the-web/chrome-announcement.webp"}},"history-of-the-web/edge-browser.png":{original:"/images/blog/history-of-the-web/edge-browser.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/edge-browser.webp",medium:"/images/optimized/medium/history-of-the-web/edge-browser.webp",large:"/images/optimized/large/history-of-the-web/edge-browser.webp",full:"/images/optimized/full/history-of-the-web/edge-browser.webp"}},"history-of-the-web/firefox-launch.png":{original:"/images/blog/history-of-the-web/firefox-launch.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/firefox-launch.webp",medium:"/images/optimized/medium/history-of-the-web/firefox-launch.webp",large:"/images/optimized/large/history-of-the-web/firefox-launch.webp",full:"/images/optimized/full/history-of-the-web/firefox-launch.webp"}},"history-of-the-web/html5-logo.png":{original:"/images/blog/history-of-the-web/html5-logo.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/html5-logo.webp",medium:"/images/optimized/medium/history-of-the-web/html5-logo.webp",large:"/images/optimized/large/history-of-the-web/html5-logo.webp",full:"/images/optimized/full/history-of-the-web/html5-logo.webp"}},"history-of-the-web/ie-browser-wars.png":{original:"/images/blog/history-of-the-web/ie-browser-wars.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/ie-browser-wars.webp",medium:"/images/optimized/medium/history-of-the-web/ie-browser-wars.webp",large:"/images/optimized/large/history-of-the-web/ie-browser-wars.webp",full:"/images/optimized/full/history-of-the-web/ie-browser-wars.webp"}},"history-of-the-web/modern-web-stack.png":{original:"/images/blog/history-of-the-web/modern-web-stack.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/modern-web-stack.webp",medium:"/images/optimized/medium/history-of-the-web/modern-web-stack.webp",large:"/images/optimized/large/history-of-the-web/modern-web-stack.webp",full:"/images/optimized/full/history-of-the-web/modern-web-stack.webp"}},"history-of-the-web/mosaic-browser.png":{original:"/images/blog/history-of-the-web/mosaic-browser.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/mosaic-browser.webp",medium:"/images/optimized/medium/history-of-the-web/mosaic-browser.webp",large:"/images/optimized/large/history-of-the-web/mosaic-browser.webp",full:"/images/optimized/full/history-of-the-web/mosaic-browser.webp"}},"history-of-the-web/netscape-navigator.png":{original:"/images/blog/history-of-the-web/netscape-navigator.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/netscape-navigator.webp",medium:"/images/optimized/medium/history-of-the-web/netscape-navigator.webp",large:"/images/optimized/large/history-of-the-web/netscape-navigator.webp",full:"/images/optimized/full/history-of-the-web/netscape-navigator.webp"}},"history-of-the-web/opera-browser.png":{original:"/images/blog/history-of-the-web/opera-browser.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/opera-browser.webp",medium:"/images/optimized/medium/history-of-the-web/opera-browser.webp",large:"/images/optimized/large/history-of-the-web/opera-browser.webp",full:"/images/optimized/full/history-of-the-web/opera-browser.webp"}},"history-of-the-web/safari-browser.png":{original:"/images/blog/history-of-the-web/safari-browser.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/safari-browser.webp",medium:"/images/optimized/medium/history-of-the-web/safari-browser.webp",large:"/images/optimized/large/history-of-the-web/safari-browser.webp",full:"/images/optimized/full/history-of-the-web/safari-browser.webp"}},"history-of-the-web/web-standards.png":{original:"/images/blog/history-of-the-web/web-standards.png",sizes:{thumbnail:"/images/optimized/thumbnail/history-of-the-web/web-standards.webp",medium:"/images/optimized/medium/history-of-the-web/web-standards.webp",large:"/images/optimized/large/history-of-the-web/web-standards.webp",full:"/images/optimized/full/history-of-the-web/web-standards.webp"}},"how-redux-works/redux-architecture-hero.jpeg":{original:"/images/blog/how-redux-works/redux-architecture-hero.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/how-redux-works/redux-architecture-hero.webp",medium:"/images/optimized/medium/how-redux-works/redux-architecture-hero.webp",large:"/images/optimized/large/how-redux-works/redux-architecture-hero.webp",full:"/images/optimized/full/how-redux-works/redux-architecture-hero.webp"}},"living-room.jpeg":{original:"/images/blog/living-room.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/living-room.webp",medium:"/images/optimized/medium/living-room.webp",large:"/images/optimized/large/living-room.webp",full:"/images/optimized/full/living-room.webp"}},"map-filter-reduce/map-filter-reduce-hero.jpg":{original:"/images/blog/map-filter-reduce/map-filter-reduce-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/map-filter-reduce/map-filter-reduce-hero.webp",medium:"/images/optimized/medium/map-filter-reduce/map-filter-reduce-hero.webp",large:"/images/optimized/large/map-filter-reduce/map-filter-reduce-hero.webp",full:"/images/optimized/full/map-filter-reduce/map-filter-reduce-hero.webp"}},"mary-had-a-little-lambda/lambda-calculus-hero.jpg":{original:"/images/blog/mary-had-a-little-lambda/lambda-calculus-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/mary-had-a-little-lambda/lambda-calculus-hero.webp",medium:"/images/optimized/medium/mary-had-a-little-lambda/lambda-calculus-hero.webp",large:"/images/optimized/large/mary-had-a-little-lambda/lambda-calculus-hero.webp",full:"/images/optimized/full/mary-had-a-little-lambda/lambda-calculus-hero.webp"}},"mary-had-a-little-lambda/lambda-diagram.png":{original:"/images/blog/mary-had-a-little-lambda/lambda-diagram.png",sizes:{thumbnail:"/images/optimized/thumbnail/mary-had-a-little-lambda/lambda-diagram.webp",medium:"/images/optimized/medium/mary-had-a-little-lambda/lambda-diagram.webp",large:"/images/optimized/large/mary-had-a-little-lambda/lambda-diagram.webp",full:"/images/optimized/full/mary-had-a-little-lambda/lambda-diagram.webp"}},"migrating-from-underscore-to-lodash/underscore-lodash-train.jpg":{original:"/images/blog/migrating-from-underscore-to-lodash/underscore-lodash-train.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/migrating-from-underscore-to-lodash/underscore-lodash-train.webp",medium:"/images/optimized/medium/migrating-from-underscore-to-lodash/underscore-lodash-train.webp",large:"/images/optimized/large/migrating-from-underscore-to-lodash/underscore-lodash-train.webp",full:"/images/optimized/full/migrating-from-underscore-to-lodash/underscore-lodash-train.webp"}},"misc-1438.jpeg":{original:"/images/blog/misc-1438.jpeg",sizes:{thumbnail:"/images/optimized/thumbnail/misc-1438.webp",medium:"/images/optimized/medium/misc-1438.webp",large:"/images/optimized/large/misc-1438.webp",full:"/images/optimized/full/misc-1438.webp"}},"misc-diagram.png":{original:"/images/blog/misc-diagram.png",sizes:{thumbnail:"/images/optimized/thumbnail/misc-diagram.webp",medium:"/images/optimized/medium/misc-diagram.webp",large:"/images/optimized/large/misc-diagram.webp",full:"/images/optimized/full/misc-diagram.webp"}},"public-speaking.jpg":{original:"/images/blog/public-speaking.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/public-speaking.webp",medium:"/images/optimized/medium/public-speaking.webp",large:"/images/optimized/large/public-speaking.webp",full:"/images/optimized/full/public-speaking.webp"}},"reduce-reduce-reduce/reduce-function-hero.jpg":{original:"/images/blog/reduce-reduce-reduce/reduce-function-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/reduce-reduce-reduce/reduce-function-hero.webp",medium:"/images/optimized/medium/reduce-reduce-reduce/reduce-function-hero.webp",large:"/images/optimized/large/reduce-reduce-reduce/reduce-function-hero.webp",full:"/images/optimized/full/reduce-reduce-reduce/reduce-function-hero.webp"}},"software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.jpg":{original:"/images/blog/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.webp",medium:"/images/optimized/medium/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.webp",large:"/images/optimized/large/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.webp",full:"/images/optimized/full/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.webp"}},"throttle-and-debounce/throttle-debounce-hero.jpg":{original:"/images/blog/throttle-and-debounce/throttle-debounce-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/throttle-and-debounce/throttle-debounce-hero.webp",medium:"/images/optimized/medium/throttle-and-debounce/throttle-debounce-hero.webp",large:"/images/optimized/large/throttle-and-debounce/throttle-debounce-hero.webp",full:"/images/optimized/full/throttle-and-debounce/throttle-debounce-hero.webp"}},"ts-tricks-higher-order-components/higher-order-components-hero.jpg":{original:"/images/blog/ts-tricks-higher-order-components/higher-order-components-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/ts-tricks-higher-order-components/higher-order-components-hero.webp",medium:"/images/optimized/medium/ts-tricks-higher-order-components/higher-order-components-hero.webp",large:"/images/optimized/large/ts-tricks-higher-order-components/higher-order-components-hero.webp",full:"/images/optimized/full/ts-tricks-higher-order-components/higher-order-components-hero.webp"}},"ts-tricks-type-guards/type-guards-hero.jpg":{original:"/images/blog/ts-tricks-type-guards/type-guards-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/ts-tricks-type-guards/type-guards-hero.webp",medium:"/images/optimized/medium/ts-tricks-type-guards/type-guards-hero.webp",large:"/images/optimized/large/ts-tricks-type-guards/type-guards-hero.webp",full:"/images/optimized/full/ts-tricks-type-guards/type-guards-hero.webp"}},"ts-tricks-type-safe-reducers/type-safe-reducers-hero.jpg":{original:"/images/blog/ts-tricks-type-safe-reducers/type-safe-reducers-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/ts-tricks-type-safe-reducers/type-safe-reducers-hero.webp",medium:"/images/optimized/medium/ts-tricks-type-safe-reducers/type-safe-reducers-hero.webp",large:"/images/optimized/large/ts-tricks-type-safe-reducers/type-safe-reducers-hero.webp",full:"/images/optimized/full/ts-tricks-type-safe-reducers/type-safe-reducers-hero.webp"}},"what-the-functor/functor-hero.jpg":{original:"/images/blog/what-the-functor/functor-hero.jpg",sizes:{thumbnail:"/images/optimized/thumbnail/what-the-functor/functor-hero.webp",medium:"/images/optimized/medium/what-the-functor/functor-hero.webp",large:"/images/optimized/large/what-the-functor/functor-hero.webp",full:"/images/optimized/full/what-the-functor/functor-hero.webp"}}};function Bl({src:e,alt:t,size:n="large",className:o="",loading:a="lazy"}){const[r,i]=x.useState(!1),[s,l]=x.useState(""),c=e.replace("/images/blog/",""),g=sf[c];return x.useEffect(()=>{if(!g){l(e),i(!0);return}const m=g.sizes.thumbnail;m&&l(m);const f=g.sizes[n]||g.original,w=new Image;w.src=f,w.onload=()=>{l(f),i(!0)}},[e,n,g]),g?h.jsx("div",{className:`${Ho.container} ${o}`,children:h.jsx("img",{src:s,alt:t,loading:a,className:`${Ho.image} ${r?Ho.loaded:Ho.loading}`})}):h.jsx("img",{src:e,alt:t,className:o,loading:a})}const lf="_article_og4an_1",cf="_header_og4an_2",uf="_title_og4an_3",df="_metaBar_og4an_4",hf="_date_og4an_5",pf="_badge_og4an_6",mf="_banner_og4an_7",gf="_body_og4an_8",ff="_authorBio_og4an_24",wf="_authorName_og4an_25",yf="_authorTitle_og4an_26",bf="_authorText_og4an_27",vf="_navigation_og4an_28",kf="_navPost_og4an_29",xf="_navLabel_og4an_31",Sf="_navTitle_og4an_32",V={article:lf,header:cf,title:uf,metaBar:df,date:hf,badge:pf,banner:mf,body:gf,authorBio:ff,authorName:wf,authorTitle:yf,authorText:bf,navigation:vf,navPost:kf,navLabel:xf,navTitle:Sf};function Tf({posts:e}){const{slug:t}=_m(),n=bs(),[o,a]=x.useState(null),[r,i]=x.useState(!1);x.useEffect(()=>{if(!t){n("/");return}const w=e.find(y=>y.slug===t);if(!w){n("/");return}a(w);const k=w.content.includes("twitter-tweet")||w.content.toLowerCase().includes("twitter.com");i(k),window.scrollTo(0,0),setTimeout(()=>{window.hljs&&document.querySelectorAll("pre code").forEach(y=>{const b=y.textContent||"";!y.className&&(b.includes("$ ")||b.includes("Matthew at "))&&y.classList.add("language-bash"),window.hljs.highlightElement(y);const d=y.parentElement;if(d&&!d.querySelector(".copy-button")){const u=document.createElement("button");u.className="copy-button",u.textContent="Copy",u.onclick=()=>{navigator.clipboard.writeText(y.textContent||""),u.textContent="Copied!",setTimeout(()=>u.textContent="Copy",2e3)},d.style.position="relative",d.insertBefore(u,d.firstChild)}}),document.querySelectorAll(".article-body h2").forEach((y,b)=>{y.id=`heading-${b}`}),document.querySelectorAll('.article-body iframe[src*="youtube"]').forEach(y=>{var d;const b=document.createElement("div");b.className="responsive-embed",b.style.position="relative",b.style.paddingBottom="56.25%",b.style.height="0",b.style.overflow="hidden",b.style.margin="2rem 0",b.style.borderRadius="8px",(d=y.parentNode)==null||d.insertBefore(b,y),b.appendChild(y),y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.width="100%",y.style.height="100%",y.style.border="none"}),document.querySelectorAll("[data-demo]").forEach(y=>{const b=y.getAttribute("data-demo");let d;switch(b){case"throttle-debounce-basic":d=Zg;break;case"throttle-debounce-throttle":d=ef;break;case"throttle-debounce-debounce":d=tf;break;default:return}yi(y).render(h.jsx(d,{}))}),document.querySelectorAll(".article-body img").forEach(y=>{var v;const b=y.getAttribute("src")||"",d=y.getAttribute("alt")||"";if(y.classList.contains("optimized-processed"))return;const u=document.createElement("div");u.className="optimized-image-wrapper",(v=y.parentNode)==null||v.insertBefore(u,y),yi(u).render(h.jsx(Bl,{src:b,alt:d,size:"large",loading:"lazy",className:y.className})),y.remove()})},100)},[t,e,n]);const s=o?e.findIndex(w=>w.id===o.id):-1,l=s>0?e[s-1]:null,c=s<e.length-1?e[s+1]:null;if(gd({onNext:()=>{c&&n(`/tech/${c.slug}`)},onPrevious:()=>{l&&n(`/tech/${l.slug}`)}}),!o)return null;const g=vs(o.content),m=md(o.content),f=o.banner_img;return h.jsxs("article",{className:V.article,children:[r&&h.jsx($g,{}),h.jsxs("header",{className:V.header,children:[h.jsx("h1",{className:V.title,children:o.title}),h.jsxs("div",{className:V.metaBar,children:[h.jsx("span",{className:V.date,children:o.date}),h.jsxs("span",{className:V.badge,children:[g," min read"]}),h.jsxs("span",{className:V.badge,children:[m.toLocaleString()," words"]})]}),f&&h.jsx(Bl,{src:f,alt:o.title,className:V.banner,size:"full",loading:"eager"})]}),h.jsx("div",{className:`${V.body} article-body`,"data-reading-time":g,dangerouslySetInnerHTML:{__html:o.content}}),h.jsxs("div",{className:V.authorBio,children:[h.jsx("div",{className:V.authorName,children:"Matthew Gerstman"}),h.jsx("div",{className:V.authorTitle,children:"Software Engineer & Tech Writer"}),h.jsx("p",{className:V.authorText,children:"Matthew is a software engineer with over a decade of experience building web applications. He's passionate about JavaScript, TypeScript, React, and teaching others about web development. Previously at Dropbox and Bluecore, he now writes about the web and gives talks at conferences."})]}),h.jsxs("div",{className:V.navigation,children:[l&&h.jsxs(dt,{to:`/tech/${l.slug}`,className:V.navPost,children:[h.jsx("div",{className:V.navLabel,children:"← Previous (k)"}),h.jsx("div",{className:V.navTitle,children:l.title})]}),c&&h.jsxs(dt,{to:`/tech/${c.slug}`,className:V.navPost,children:[h.jsx("div",{className:V.navLabel,children:"Next (j) →"}),h.jsx("div",{className:V.navTitle,children:c.title})]})]})]})}const xr=[{id:1,title:"Double Your Salary With This One Simple Trick",subtitle:"",video:"m1XdasrstCc",date:"2020",venue:"NYC",description:"A candid, no-BS talk about career growth in tech. Covers negotiation tactics, when to switch jobs, how to build leverage, and the uncomfortable truths about compensation that most people learn too late in their careers.",tags:["Career","Negotiation","Compensation"]},{id:2,title:"Nothing Generic About It",subtitle:"Advanced TypeScript",video:"1YWrc21Uv9g?start=530",date:"2020",venue:"Online",description:"Deep dive into TypeScript generics and advanced type patterns. Learn how to build type-safe, reusable abstractions that scale with your codebase while maintaining excellent developer ergonomics and autocomplete.",tags:["TypeScript","Generics","Type Systems"]},{id:3,title:"TypeScript: Seeing Past the Hype",subtitle:"ReactiveConf",video:"KdvEGPiULAQ",date:"2019",venue:"Prague, Czech Republic",description:"A pragmatic look at TypeScript adoption beyond the buzz. This talk explores real-world benefits, common pitfalls, and strategies for introducing static types to existing JavaScript codebases without disrupting your team's velocity.",tags:["TypeScript","JavaScript","Developer Experience"]},{id:4,title:"TypeScript: Seeing Past the Hype",subtitle:"React Loop",video:"veXkJq0Z2Qk",date:"2019",venue:"Chicago, IL",description:"An earlier iteration of the TypeScript adoption talk, tailored for React developers. Focuses on practical migration strategies, common React patterns in TypeScript, and how static types improve component APIs and refactoring confidence.",tags:["TypeScript","React","Migration"]},{id:5,title:"Building a Typesafe Code Split React-Redux Application",subtitle:"",video:"Mumy5YZZ2gs",date:"2018",venue:"NYC",description:"Combining TypeScript with React and Redux while maintaining code splitting presents unique challenges. This talk demonstrates patterns for achieving full type safety across async boundaries without sacrificing bundle size or load performance.",tags:["React","Redux","Code Splitting","TypeScript"]},{id:6,title:"Functional Programming Fundamentals",subtitle:"",video:"kkRyjXDpYqg",date:"2018",venue:"NYC",description:"Introduction to functional programming concepts for JavaScript developers. Covers immutability, pure functions, composition, and higher-order functions through practical examples that you can apply immediately in your daily work.",tags:["Functional Programming","JavaScript","Fundamentals"]}],If="_top_1abnf_1",_f="_title_1abnf_9",jf="_expandIcon_1abnf_26",zf="_role_1abnf_34",Cf="_subtitle_1abnf_42",Fn={top:If,title:_f,expandIcon:jf,role:zf,subtitle:Cf};function wd({title:e,subtitle:t,yearDisplay:n,role:o,hasExpand:a,isExpanded:r,onClick:i}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:Fn.top,children:[h.jsx("h4",{className:Fn.title,children:e}),a&&h.jsx("span",{className:Fn.expandIcon,children:r?"−":"+"})]}),h.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:o&&h.jsxs("div",{className:Fn.role,children:[o," - ",n]})}),t&&h.jsx("div",{className:Fn.subtitle,children:t})]})}const Ef="_tagList_rlcda_1",Pf="_tag_rlcda_1",Ul={tagList:Ef,tag:Pf};function yd({tags:e,onTagClick:t,className:n}){return!e||e.length===0?null:h.jsx("div",{className:`${Ul.tagList} ${n||""}`,children:e.map((o,a)=>h.jsx("span",{className:Ul.tag,onClick:t?()=>t(o):void 0,style:{cursor:t?"pointer":"default"},children:o},a))})}const Nf="_meta_18q46_1",Rf="_separator_18q46_13",Lf="_item_18q46_17",Sr={meta:Nf,separator:Rf,item:Lf};function Mf({items:e,className:t}){const n=e.filter(Boolean);return n.length===0?null:h.jsx("div",{className:`${Sr.meta} ${t||""}`,children:n.map((o,a)=>h.jsxs(_i.Fragment,{children:[a>0&&h.jsx("span",{className:Sr.separator,children:"•"}),h.jsx("span",{className:Sr.item,children:o})]},a))})}const Af="_container_17xym_1",Wf="_header_17xym_7",Ff="_subtitle_17xym_21",Df="_tagFilter_17xym_30",Of="_tagButton_17xym_40",Bf="_active_17xym_58",Uf="_talksGrid_17xym_65",Hf="_talkCard_17xym_71",$f="_expanded_17xym_87",Gf="_videoSection_17xym_95",Yf="_thumbnail_17xym_100",Vf="_playOverlay_17xym_123",qf="_videoWrapper_17xym_136",Jf="_content_17xym_152",Qf="_description_17xym_160",Kf="_tags_17xym_169",Xf="_watchButton_17xym_174",Zf="_noResults_17xym_196",q={container:Af,header:Wf,subtitle:Ff,tagFilter:Df,tagButton:Of,active:Bf,talksGrid:Uf,talkCard:Hf,expanded:$f,videoSection:Gf,thumbnail:Yf,playOverlay:Vf,videoWrapper:qf,content:Jf,description:Qf,tags:Kf,watchButton:Xf,noResults:Zf};function ew(){const[e,t]=x.useState(null),[n,o]=x.useState(null),a=Array.from(new Set(xr.flatMap(s=>s.tags||[]))),r=n?xr.filter(s=>{var l;return(l=s.tags)==null?void 0:l.includes(n)}):xr,i=s=>{t(e===s?null:s)};return h.jsxs("div",{className:q.container,children:[h.jsxs("header",{className:q.header,children:[h.jsx("h1",{children:"Talks"}),h.jsx("p",{className:q.subtitle,children:"Conference talks and presentations on TypeScript, React, career growth, and software engineering."})]}),h.jsxs("div",{className:q.tagFilter,children:[h.jsx("button",{className:`${q.tagButton} ${n?"":q.active}`,onClick:()=>o(null),children:"All"}),a.map(s=>h.jsx("button",{className:`${q.tagButton} ${n===s?q.active:""}`,onClick:()=>o(s),children:s},s))]}),h.jsx("div",{className:q.talksGrid,children:r.map(s=>{const l=e===s.id;return h.jsxs("div",{className:`${q.talkCard} ${l?q.expanded:""}`,children:[h.jsx("div",{className:q.videoSection,children:l?h.jsx("div",{className:q.videoWrapper,children:h.jsx("iframe",{src:`https://www.youtube.com/embed/${s.video}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:s.title})}):h.jsxs("div",{className:q.thumbnail,onClick:()=>i(s.id),children:[h.jsx("img",{src:`https://img.youtube.com/vi/${s.video.split("?")[0]}/maxresdefault.jpg`,alt:s.title,onError:c=>{c.target.src=`https://img.youtube.com/vi/${s.video.split("?")[0]}/hqdefault.jpg`}}),h.jsx("div",{className:q.playOverlay,children:h.jsxs("svg",{width:"68",height:"48",viewBox:"0 0 68 48",children:[h.jsx("path",{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"}),h.jsx("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})]})})]})}),h.jsxs("div",{className:q.content,children:[h.jsx(Mf,{items:[s.date,s.venue]}),h.jsx(wd,{title:s.title,subtitle:s.subtitle,hasExpand:!1,onClick:()=>i(s.id)}),h.jsx("p",{className:q.description,children:s.description}),h.jsx(yd,{tags:s.tags,onTagClick:o,className:q.tags}),h.jsx("button",{className:q.watchButton,onClick:()=>i(s.id),children:l?"Close Video":"Watch Talk"})]})]},s.id)})}),r.length===0&&h.jsxs("div",{className:q.noResults,children:['No talks found for "',n,'". ',h.jsx("button",{onClick:()=>o(null),children:"Clear filter"})]})]})}const tw="_gradientText_zz3uo_1",nw={gradientText:tw};function bd({children:e,as:t="span",className:n=""}){return h.jsx(t,{className:`${nw.gradientText} ${n}`,children:e})}const ow="_linkList_18fz2_1",aw="_link_18fz2_1",Hl={linkList:ow,link:aw};function rw({links:e,className:t}){return!e||e.length===0?null:h.jsx("div",{className:`${Hl.linkList} ${t||""}`,children:e.map((n,o)=>h.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:Hl.link,onClick:a=>a.stopPropagation(),children:[n.text," →"]},o))})}const iw="_projectCard_pg36n_1",sw="_expanded_pg36n_12",lw="_projectHeader_pg36n_16",cw="_projectDescription_pg36n_79",uw="_projectImpact_pg36n_85",dw="_projectTags_pg36n_94",hw="_projectDetails_pg36n_116",pw="_projectDetailsContent_pg36n_126",mw="_detailSection_pg36n_142",gw="_outcomeLabel_pg36n_200",He={projectCard:iw,expanded:sw,projectHeader:lw,projectDescription:cw,projectImpact:uw,projectTags:dw,projectDetails:hw,projectDetailsContent:pw,detailSection:mw,outcomeLabel:gw};function fw({title:e,startYear:t,endYear:n,description:o,belowTheFold:a,impact:r,role:i,technologies:s,links:l}){const[c,g]=x.useState(!1),m=a&&a.length>0,f=t===n?`${n}`:`${t}–${n}`;return h.jsxs("div",{className:`${He.projectCard} ${c?He.expanded:""}`,children:[h.jsxs("div",{className:He.projectHeader,onClick:()=>m&&g(!c),style:{cursor:m?"pointer":"default"},children:[h.jsx(wd,{title:e,role:i,hasExpand:m,isExpanded:c,yearDisplay:f}),h.jsx("p",{className:He.projectDescription,children:o}),r&&h.jsxs("div",{className:He.projectImpact,children:[h.jsx("span",{className:He.outcomeLabel,children:"Outcome:"})," ",r]}),h.jsx(rw,{links:l}),h.jsx(yd,{tags:s,className:He.projectTags})]}),m&&h.jsx("div",{className:He.projectDetails,children:h.jsx("div",{className:He.projectDetailsContent,children:a==null?void 0:a.map((w,k)=>h.jsxs("div",{className:He.detailSection,children:[h.jsx("h5",{children:w.title}),w.content.length===1&&!Array.isArray(w.content)?h.jsx("p",{children:w.content[0]}):h.jsx("ul",{children:w.content.map((y,b)=>h.jsx("li",{children:y},b))})]},k))})})]})}const ww={hero:{title:"Career Timeline",subtitle:"25+ years of building and learning"},jobs:[{id:"datadog",company:"Datadog",role:"Senior Software Engineer",period:"September 2022 - Present",startDate:"2022-09",description:"Leading development of collaborative data science tooling and dashboard infrastructure.",color:"#632CA6",projects:[{title:"Notebooks 2.0",year:"2023-2024",startYear:2023,endYear:2024,role:"Engineering Manager",description:"First-time engineering manager leading the rebuild of Datadog's collaborative notebook editor. Focused on team growth, customer engagement, and enabling technical excellence. Built customer council with rapid feedback loop.",impact:"Shipped complete Notebooks 2.0 rebuild with rich text editing and real-time multiplayer collaboration. Grew team from 4 to 6 engineers with 2 promotions. Established customer council that accelerated feedback cycles.",technologies:["ProseMirror","CRDTs (Yjs)","WebSockets","React","TypeScript","Team Leadership"],belowTheFold:[{title:"Execution",content:["Team Culture & Development - Grew team from 4 to 6 engineers with 2 promotions; established daily pairing and weekly learning sessions; created environment where people wanted to work together and help each other succeed. My favorite part of the job was coach, I aspired to be Ted Lasso.","Feature Development Oversight - Oversaw development of: Rich text editor with ProseMirror; Real-time multiplayer with CRDTs (Yjs) and WebSockets; Inlined widgets; Copy/paste; Toolbar and formatting; List indentation; Code blocks with syntax highlighting; Comments and version history; Inline tables; Print mode (personally implemented); Markdown import/export for API users",`Customer Engagement - Built customer council with shared Slack channels; identified high-usage customers and coordinated with CSMs. Spoke with multiple external customers per week during rollout. Rapidly implemented feedback—nothing a customer loves more than hearing their feature request was implemented in 48 hours. Product manager was focused elsewhere for 6 months; I handled prioritization and release management. Established principle: ship to someone new every week. We slowed down for customer feedback and sped up where it didn't apply. For example: released to 98% of customers while finishing API support for the remaining 2%. When a customer didn't like keyboard-first design, we paused for a week to implement "Bring Back Buttons" initiative.`]}]},{title:"Graphing Summit",year:"2024-2025",startYear:2024,endYear:2025,role:"Engineering Manager",description:"Organized Datadog's Graphing Summit to build cohesive culture within a newly-formed graphing org from a recent reorg. Led planning with 2 co-organizers, keeping execution lean—1/10 the time investment of typical summits with better relationship outcomes.",impact:'Transformed "kind of knew each other" relationships into "really knew each other" connections. Created foundation for cross-team collaboration in graphing org.',technologies:["Event Planning","Team Building","Cross-functional Coordination"],belowTheFold:[{title:"Execution",content:["Pre-Summit Relationship Building - Organized events leading up to the summit (IC1 class, org lunches, donut 1:1s) to increase relationship foundation","Lean Planning - Avoided committee bloat; 1/10 the time investment of other summits","Outcome-Focused Design - Prioritized relationships over presentations","Logistics - Managed ops, scheduling, speakers, budget, swag"]}]},{title:"IC1 Class",year:"2024-2025",startYear:2024,endYear:2025,role:"Engineering Manager",description:"Designed and taught Datadog's first IC1 engineering class—a 6-week intensive program covering career development, technical leadership, and organizational impact for early-career engineers.",impact:"Graduated 15 engineers with stronger career frameworks and clearer growth paths. Created reusable curriculum adopted by other teams. Demonstrated leadership in engineer development and organizational culture building.",technologies:["Teaching","Career Development","Technical Leadership","Curriculum Design"],belowTheFold:[{title:"Execution",content:["Curriculum Design - Created 6-week program covering: technical decision-making, code review best practices, effective communication, project scoping, and career navigation. Balanced theory with practical exercises","Interactive Teaching - Led weekly 90-minute sessions with 15 engineers. Used real Datadog scenarios and case studies. Facilitated group discussions and peer learning","Career Framework Development - Built structured approach to career progression at IC1 level. Clarified expectations and growth paths. Provided actionable advice for advancement","Organizational Impact - Identified gap in early-career support and created solution. Collaborated with engineering leadership to align curriculum with company values. Set precedent for structured engineer development programs"]}]},{title:"Dashboard Reporting & PDF Export",year:"2022-2023",startYear:2022,endYear:2023,role:"Software Engineer",description:"Built Datadog's report-printer node service from scratch—offline dashboard snapshots with 98%+ widget fidelity. Designed client/server rendering handshake, chose Puppeteer, established Node.js patterns now used across 15+ services.",impact:"Shipped to all customers with 95%+ widget fidelity (up from 70%). Created new revenue stream and permanent team. Node.js foundation code became company standard.",technologies:["Node.js","Puppeteer","React","TypeScript","PDF Generation","gRPC","Queue Systems"],belowTheFold:[{title:"Execution",content:["Architecture & Design - Prototyped for 6 weeks with weekly reviews; designed stateless queue-based system with heartbeat monitoring; built client/server handshake to coordinate React rendering, data fetching, viewport resizing, and snapshot timing","Rendering Engine Selection - Evaluated Selenium, Puppeteer, and Cypress; chose Puppeteer for browser-fidelity PDFs and thin Chrome wrapper; interviewed engineers about Selenium pain to inform decision","Quality & Fidelity - Created PrintModeAdapter to aggregate widget status; collaborated with Univiz team to expose fetch completion signals; solved split graph rendering bugs with proxy context providers","Service Foundation - Wrote all Node.js HTTP/gRPC communication code, tests, and documentation (pre-AI era); established patterns now foundational for 15+ services; implemented OBO token authentication with Puppeteer request interception","Performance & Constraints - Reduced dev loop from 30min to 1min; navigated security restrictions on Node.js infrastructure access; optimized print mode rendering by disabling interactivity; handled edge cases (note widgets, image security risks, file size bloat)"]},{title:"Leadership",content:["Built consensus through prototyping and stakeholder reviews","Mentored backend team on browser implementation","Transitioned to Notebooks management as project reached production"]}]},{title:"Integration Testing Framework",year:"2023",startYear:2023,endYear:2023,role:"Software Engineer",description:"Pioneered integration testing framework for Datadog's dashboard platform, enabling reliable testing of complex multi-widget interactions that were previously untestable. Built comprehensive test suite covering critical user workflows and edge cases.",impact:"Caught regressions before production that unit tests missed. Enabled confident refactoring of complex dashboard code. Set standard for integration testing across frontend teams. Reduced bug escape rate for dashboard features.",technologies:["TypeScript","React","Testing Frameworks","Integration Testing"],belowTheFold:[{title:"Execution",content:["Framework Design - Built testing infrastructure supporting complex dashboard scenarios (widget interactions, time range changes, template variables, cross-widget dependencies)","Test Coverage - Wrote comprehensive integration tests for critical paths: dashboard loading, widget editing, template variable propagation, and multi-widget coordination","Developer Experience - Created clear patterns and documentation for writing integration tests, enabling other engineers to expand coverage. Balanced test reliability with execution speed"]}]},{title:"Dashboard Type Safety & Documentation",year:"2022",startYear:2022,endYear:2022,role:"Software Engineer",description:"Led org-wide TypeScript migration and type safety improvement initiative for Datadog's dashboard codebase. Systematically eliminated any types, added proper type definitions, and established patterns for type-safe code.",impact:"Cut TypeScript any usage by 50% across Dashboards codebase. Reduced runtime type errors. Improved developer velocity through better IDE autocomplete and compile-time error catching. Set standard for TypeScript usage across frontend teams.",technologies:["TypeScript","React","Redux","Type Systems"],belowTheFold:[{title:"Execution",content:["Incremental Migration Strategy - Created phased approach to eliminate any types without blocking feature work. Prioritized high-impact areas (API boundaries, shared utilities, core data models)","Type System Design - Built comprehensive type definitions for dashboard domain models, widget configurations, and API responses. Established patterns for discriminated unions and type guards","Documentation & Tooling - Wrote comprehensive guides for widget development including configuration schemas, lifecycle hooks, and common patterns. Built tooling to validate widget configurations at compile time"]}]},{title:"TypeScript Cleanup Initiative",year:"2023",startYear:2023,endYear:2023,role:"Software Engineer",description:"Led systematic TypeScript type safety improvements across dashboard codebase. Eliminated unsafe type assertions and established patterns for type-safe code development.",impact:"Reduced runtime type errors. Improved developer velocity through better IDE support. Set standard for TypeScript usage across frontend teams. Made codebase more maintainable for future engineers.",technologies:["TypeScript","React","Type Systems"],belowTheFold:[{title:"Execution",content:["Systematic Audit - Reviewed codebase for unsafe type usage patterns. Prioritized fixes by impact and risk","Pattern Establishment - Created reusable patterns for common type-safety scenarios. Documented best practices for team","Team Enablement - Reviewed PRs to maintain type safety standards. Mentored engineers on advanced TypeScript features"]}]},{title:"Frontend Summit",year:"2023",startYear:2023,endYear:2023,role:"Software Engineer",description:"Organized and ran Datadog's first-ever Frontend Summit—a multi-day conference bringing together frontend engineers across the company. Created venue for cross-team knowledge sharing, technical deep dives, and community building.",impact:"Established precedent for frontend community events at Datadog. Built cross-org relationships and shared knowledge across previously siloed teams. Demonstrated leadership in frontend community building.",technologies:["Event Planning","Technical Leadership","Community Building"],belowTheFold:[{title:"Execution",content:["Event Design & Logistics - Planned multi-day agenda with technical talks, workshops, and networking sessions. Coordinated speakers, venues, and schedules across distributed teams","Content Curation - Identified key technical topics (performance, architecture, testing, tooling) and recruited speakers from across frontend teams to share expertise","Community Building - Created space for informal knowledge transfer and relationship building across teams that rarely interacted. Established foundation for ongoing frontend collaboration"]}]}]},{id:"bluecore",company:"Bluecore",role:"Staff Engineer",period:"June 2021 - September 2022",startDate:"2021-06",endDate:"2022-09",description:"Led frontend platform architecture and TypeScript migration for marketing technology platform.",color:"#00254a",projects:[{title:"Frontend North Star & Architecture Modernization",year:"2021-2022",startYear:2021,endYear:2022,role:"Staff Engineer",description:"Designed cohesive frontend platform strategy to unify fragmented architecture across product surfaces. Led TypeScript migration of component library with modern CSS architecture. Established patterns, created shared infrastructure, and coordinated cross-team adoption.",impact:"Unified frontend development practices. Modernized entire codebase with TypeScript and modern CSS. Reduced duplication and maintenance burden. Improved developer experience and velocity. Created scalable foundation for growth.",technologies:["TypeScript","React","CSS Variables","Component Design Systems","Architecture Patterns"],belowTheFold:[{title:"Execution",content:["Platform Strategy - Designed cohesive frontend platform strategy. Established architectural patterns and standards. Built bridges between legacy and modern systems","TypeScript Migration - Led migration of entire component library to TypeScript. Created type-safe patterns for common UI components. Incremental migration strategy to avoid breaking changes","Modern CSS Architecture - Standardized component library with CSS variables for theming. Implemented responsive layout systems. Improved accessibility and performance","Cross-Team Coordination - Coordinated adoption across teams. Created comprehensive documentation. Built culture of continuous learning through weekly training"]}]},{title:"NextServer (Next.js on Kubernetes)",year:"2022",startYear:2022,endYear:2022,role:"Senior Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"TypeScript Adoption & Strict Types",year:"2021-2022",startYear:2021,endYear:2022,role:"Staff Engineer",description:"Designed and taught comprehensive training curriculum on TypeScript fundamentals and advanced React patterns. Weekly classes with hands-on exercises to upskill entire engineering team on modern development practices.",impact:"Upskilled entire engineering team. Improved code quality across organization. Accelerated adoption of TypeScript and modern patterns. Built culture of continuous learning. Reduced onboarding time for new engineers.",technologies:["TypeScript","React","Redux","Teaching"],belowTheFold:[{title:"Execution",content:["Curriculum Design - Created comprehensive training covering TypeScript fundamentals, advanced React patterns, and best practices. Balanced theory with practical exercises","Interactive Teaching - Led weekly classes with hands-on exercises and code reviews. Created learning resources and documentation","Team Impact - Built culture of continuous learning. Improved code quality and reduced onboarding time. Enabled confident adoption of new patterns"]}]},{title:"Autogenerated API Client",year:"2021",startYear:2021,endYear:2021,role:"Staff Engineer",description:"Architected autogenerated API client system using gRPC/HTTP transcoding. Eliminated manual API client maintenance through code generation pipeline from API definitions with type-safe client and automatic updates.",impact:"Eliminated manual API client maintenance. Reduced API-related bugs significantly. Improved frontend/backend contract clarity. Accelerated feature development velocity. Set standard for API integration across organization.",technologies:["TypeScript","gRPC","HTTP Transcoding","Code Generation"],belowTheFold:[{title:"Execution",content:["Architecture Design - Implemented gRPC/HTTP transcoding for seamless protocol translation. Created code generation pipeline from API definitions","Type-Safe Client - Built autogenerated client with type safety and automatic updates. Designed error handling and retry logic","Developer Experience - Ensured automatic sync with backend changes. Set standard for API integration. Reduced integration bugs"]}]}]},{id:"dropbox",company:"Dropbox",role:"Software Engineer → Senior Software Engineer",period:"June 2017 - June 2021",startDate:"2017-06",endDate:"2021-06",description:"Architected state management systems and founded JavaScript Guild for organizational best practices.",color:"#0061FF",projects:[{title:"Plus Plus: Family Plans & Life Vault",year:"2020",description:"Led end-to-end frontend architecture for new product line with complex family sharing features.",impact:"Created new revenue stream",technologies:["TypeScript","React","Redux"],role:"",startYear:2020,endYear:2020,belowTheFold:[{title:"Execution",content:["Led end-to-end frontend architecture from ideation to launch","Designed complex state management for family account relationships","Built intuitive UI for family plan management","Coordinated cross-functional teams (design, product, backend)","Implemented Life Vault feature for important document storage"]}]},{title:"Redux State Management System",year:"2018",description:"Designed comprehensive Redux architecture with TypeScript type-safe patterns adopted across the organization.",impact:"Adopted by ~10 teams across ~25 features",technologies:["TypeScript","Redux","React"],role:"",startYear:2018,endYear:2018,belowTheFold:[{title:"Execution",content:["Designed comprehensive Redux architecture with TypeScript","Created reusable patterns for common state operations","Built extensive documentation and training materials","Systematic rollout across organization with team support","Established best practices and code review guidelines"]}]},{title:"File Viewer SDK",year:"2018",description:"Led architecture and bootstrapping of cross-platform SDK for file preview functionality.",technologies:["TypeScript","React","SDK Development"],role:"",startYear:2018,endYear:2018,belowTheFold:[{title:"Execution",content:["Led architecture and bootstrapping of cross-platform SDK","Owned build pipeline and asset optimization","Designed API for embedding file previews","Coordinated between web and desktop teams"]}]},{title:"Underscore → Lodash Migration",year:"2018",startYear:2018,endYear:2018,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"JavaScript Guild",year:"2017-2021",description:"Founded JavaScript Guild and organized 100+ attendee technical summits for frontend engineers.",technologies:["Community","Leadership"],role:"",startYear:2017,endYear:2021,belowTheFold:[{title:"Execution",content:["Founded JavaScript Guild as community for frontend engineers","Organized regular knowledge-sharing sessions","Published newsletters with tips and updates","Coordinated multi-day technical summits"]}]},{title:"Previews Mobile Web",year:"2017",startYear:2017,endYear:2017,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Showcase",year:"2017",startYear:2017,endYear:2017,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"ZIP File Previews",year:"2017",startYear:2017,endYear:2017,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]}]},{id:"todaytix",company:"TodayTix",role:"Software Engineer",period:"January 2016 - June 2017",startDate:"2016-01",endDate:"2017-06",description:"Full-stack development for theater ticketing platform with dramatic performance improvements.",color:"#E2231A",projects:[{title:"Ansible Deployment Automation",year:"2017",startYear:2017,endYear:2017,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Web 2.0: React + Redux Rebuild",year:"2016",description:"Built production-ready React + Redux application from scratch with comprehensive component library.",technologies:["React","Redux","Node.js","ES6+"],role:"",startYear:2016,endYear:2016,belowTheFold:[{title:"Execution",content:["Complete application architecture design","Built comprehensive component library","Implemented Redux state management patterns","Created Node.js authentication layer","Designed and built checkout flow"]}]},{title:"Special Offers Feature",year:"2016",description:"End-to-end feature design converting users who lost lottery into alternative sales.",impact:"New revenue stream from lost sales",technologies:["Groovy","React","SQL","Full-Stack"],role:"",startYear:2016,endYear:2016,belowTheFold:[{title:"Execution",content:["End-to-end feature design from user research to implementation","Built Groovy APIs with complex SQL queries for offer matching","Designed frontend experience for offer selection","Implemented business logic for offer eligibility"]}]},{title:"Rush Ticketing",year:"2016",startYear:2016,endYear:2016,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]}]},{id:"zetta",company:"Zetta.net",role:"Intern → Software Engineer",period:"June 2012 - December 2015",startDate:"2012-06",endDate:"2015-12",description:"Cloud storage platform development with rapid progression to technical leadership.",color:"#FF6B35",projects:[{title:"Page Load Optimization",year:"2016",description:"Comprehensive performance profiling and systematic optimization of mobile-first theater ticketing app.",impact:"95% reduction: 8 seconds → 400ms",technologies:["JavaScript","Webpack","Performance"],role:"",startYear:2016,endYear:2016,belowTheFold:[{title:"Execution",content:["Comprehensive performance profiling to identify bottlenecks","Systematic bundle strategy optimization and code splitting","Asset delivery improvements (compression, CDN, caching)","Render path performance enhancements","Critical path optimization for above-the-fold content"]}]},{title:"Backbone + RESTful APIs Migration",year:"2015",description:"Led complete backend migration to RESTful architecture and frontend migration to Backbone.js.",impact:"First major technical leadership role",technologies:["Backbone.js","RESTful APIs","JavaScript"],role:"",startYear:2015,endYear:2015,belowTheFold:[{title:"Execution",content:["Led complete backend migration to RESTful resource architecture","Migrated frontend to Backbone.js for better structure","Established API design standards and conventions","Created documentation and training materials"]}]},{title:"SVN → Git Migration",year:"2015",description:"Planned and executed organizational migration with team training and code review processes.",technologies:["Git","Version Control"],role:"",startYear:2015,endYear:2015,belowTheFold:[{title:"Leadership",content:["Planned and executed organizational migration from SVN to Git","Established branching strategies and PR processes","Created Git training materials and documentation","Provided hands-on training for team members"]}]},{title:"CI + Sentry Implementation",year:"2015",description:"Set up continuous integration pipeline and Sentry for production error tracking.",technologies:["CI/CD","Sentry","Testing"],role:"",startYear:2015,endYear:2015,belowTheFold:[{title:"Execution",content:["Set up continuous integration pipeline","Implemented Sentry for production error tracking","Established quality standards and gates"]}]},{title:"Data Restore Flow",year:"2014",description:"Built complete data restore flow with intuitive UI for version history and conflict resolution.",impact:"Core revenue-driving feature",technologies:["Full-Stack","UI/UX","Product Engineering"],role:"",startYear:2014,endYear:2014,belowTheFold:[{title:"Execution",content:["Built complete data restore flow","Created file selection and restoration UI","Integrated backend restore operations","Designed user experience for complex operations"]}]},{title:"User Enrollment Flow Refactor",year:"2014",startYear:2014,endYear:2014,role:"Fullstack Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Performance Refactor & Grunt Build System",year:"2014",startYear:2014,endYear:2014,role:"Fullstack Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Data Deletion Queue",year:"2014",startYear:2014,endYear:2014,role:"Fullstack Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Structured Logging",year:"2013",startYear:2013,endYear:2013,role:"Engineering Intern",description:"",impact:"",technologies:[],belowTheFold:[]},{title:"Release Gating",year:"2013",startYear:2013,endYear:2013,role:"Software Engineer",description:"",impact:"",technologies:[],belowTheFold:[]}]},{id:"dance-marathon",company:"Dance Marathon at UF",role:"Technology Captain → Technology Overall Director",period:"September 2010 - April 2013",startDate:"2010-09",endDate:"2013-04",description:"Led technology strategy for one of the largest student-run philanthropies.",color:"#FFD93D",projects:[{title:"Tweet Two Screens",year:"2013",description:"Custom tweet visualizers optimized for Jumbotron display with real-time aggregation.",technologies:["Twitter API","jQuery","Real-time"],role:"",startYear:2013,endYear:2013,belowTheFold:[{title:"Execution",content:["Built custom tweet visualizers optimized for Jumbotron display","Implemented real-time tweet aggregation via Twitter API","Created visual design specifically for large-screen viewing","Built content moderation system for appropriate messaging"]}]},{title:"DMatUF iPhone App",year:"2013",description:"Native iOS event app with schedule, song requests, and arena map for offline-first usage.",technologies:["iOS","Objective-C","Native Mobile"],role:"",startYear:2013,endYear:2013,belowTheFold:[{title:"Execution",content:["Built native iOS event app (pre-widespread adoption era)","Implemented event schedule and timing features","Created song request functionality","Designed locally hosted basketball arena map"]}]},{title:"DMAssassins",year:"2012",description:"Real-life 'assassins' game with target assignment system keeping thousands engaged throughout 26.6-hour marathon.",impact:"Used by thousands for 5+ years",technologies:["PHP","MySQL","jQuery","Game Design"],role:"",startYear:2012,endYear:2012,belowTheFold:[{title:"Execution",content:["Designed real-life 'assassins' game with target assignment system","Built pin verification system for 'hits'","Implemented automatic target reassignment upon elimination","Created MySQL backend for game state management","Built jQuery frontend for game interface"]}]}]},{id:"early-programming",company:"Early Programming & Education",role:"Student & Freelance Developer",period:"1999 - 2013",startDate:"1999",endDate:"2013",description:"From first Visual Basic program at age 11 to computer science degree, building websites, fixing computers, and developing deep technical foundations.",color:"#95E1D3",projects:[{title:"University of Florida - Computer Science Degree",year:"2009-2013",description:"Comprehensive computer science education covering programming, algorithms, systems, and mathematics.",technologies:["Java","C","PHP","MySQL","WordPress","CS Fundamentals"],role:"",startYear:2009,endYear:2013,belowTheFold:[{title:"Execution",content:["Core CS: Data Structures, Algorithms, Operating Systems, Networks, Databases","Systems: Computer Organization, Digital Logic, Circuits","Mathematics: Calculus 1-3, Differential Equations, Linear Algebra, Statistics","Languages: Java, C, PHP, MySQL","Continued WordPress contracting work during college"]}]},{title:"Body Logic MD - IT Support",year:"2008-2009",description:"First 'real' job in office environment during high school, supporting workplace users.",technologies:["IT Support","QA Testing"],role:"",startYear:2008,endYear:2009,belowTheFold:[{title:"Execution",content:["Supported systems people depended on for their jobs","Learned professional work skills","Handled non-technical workplace users","Organized group of friends to QA company's new website on weekend"]},{title:"Leadership",content:["Team leadership: Organized QA testing weekend with friends"]}]},{title:"Johns Hopkins Summer Program",year:"2008",description:"Programming 1 course providing deeper dive into computer science fundamentals, plus philosophy course developing critical thinking.",technologies:["Computer Science Fundamentals","Philosophy"],role:"",startYear:2008,endYear:2008},{title:"Freelance Computer Repair & Web Design",year:"2006-2009",description:"High school freelance work doing computer repair, virus removal, and building simple websites.",technologies:["Computer Repair","Web Design","Customer Service"],role:"",startYear:2006,endYear:2009,belowTheFold:[{title:"Execution",content:["Computer repair and troubleshooting","Virus removal during 'era of constant malware'","Software installation and configuration","Teaching people how to use computers","Designing and building simple websites"]}]},{title:"Don Estridge High Tech Middle School",year:"2005",description:"Programming in Pascal, hardware assembly, field support, and early security research.",technologies:["Pascal","Hardware Assembly","Field Support"],role:"",startYear:2005,endYear:2005,belowTheFold:[{title:"Execution",content:["Wrote programs for fun in Pascal classes","Built command line interactive Periodic Table for science project","Discovered and reported printer security vulnerability","Learned computer assembly, BIOS configuration, and hardware troubleshooting","Fixed computers for students and teachers","Developed skills explaining technical concepts to non-technical users"]}]},{title:"First Programs & Websites",year:"1999-2000",description:"Started with Visual Basic guest book, then built websites with HTML and JavaScript including the legendary 'DBZ dance party site'.",technologies:["Visual Basic","HTML","JavaScript"],role:"",startYear:1999,endYear:2e3,belowTheFold:[{title:"Execution",content:["First program: Generic guest book using Visual Basic 5","Built websites to show classmates at school","Created site with personalized message prompts","Made 'DBZ dance party' site with Dragon Ball Z gifs and Ocarina of Time music"]}]}]}]},yw="_container_e3tib_1",bw="_hero_e3tib_7",vw="_subtitle_e3tib_19",kw="_timeline_e3tib_24",xw="_timelineItem_e3tib_28",Sw="_jobInfo_e3tib_55",Tw="_companyName_e3tib_63",Iw="_role_e3tib_71",_w="_period_e3tib_79",jw="_companyDescription_e3tib_87",zw="_projects_e3tib_93",Me={container:yw,hero:bw,subtitle:vw,timeline:kw,timelineItem:xw,jobInfo:Sw,companyName:Tw,role:Iw,period:_w,companyDescription:jw,projects:zw},Tr=ww,Cw=()=>h.jsxs("div",{className:Me.container,children:[h.jsxs("header",{className:Me.hero,children:[h.jsx(bd,{as:"h1",children:Tr.hero.title}),h.jsx("p",{className:Me.subtitle,children:Tr.hero.subtitle})]}),h.jsx("div",{className:Me.timeline,children:Tr.jobs.map(e=>h.jsxs("div",{className:Me.timelineItem,children:[h.jsxs("div",{className:Me.jobInfo,children:[h.jsx("h2",{className:Me.companyName,style:{color:e.color},children:e.company}),h.jsx("p",{className:Me.role,children:e.role}),h.jsx("span",{className:Me.period,children:e.period}),h.jsx("p",{className:Me.companyDescription,children:e.description})]}),h.jsx("div",{className:Me.projects,children:e.projects.map((t,n)=>h.jsx(fw,{title:t.title,year:t.year,startYear:t.startYear,endYear:t.endYear,description:t.description,belowTheFold:t.belowTheFold,impact:t.impact,technologies:t.technologies,role:t.role},`${e.id}-${n}`))})]},e.id))})]}),Ew={hero:{title:"About Me",subtitle:"Software Engineer",lead:"Over 12 years building complex, performant systems that make sophisticated technology feel simple. I specialize in bridging powerful capabilities with production-ready interfaces, with a proven track record of leading technical initiatives from concept to full rollout at scale companies."},professionalSummary:{description:"Frontend Product Engineer with deep full-stack experience, focused on building systems that scale across teams and organizations. I thrive at the intersection of complex technical challenges and user experience, with particular expertise in making non-deterministic systems feel reliable and trustworthy.",coreStrengths:["Systems thinking and scalable architecture design","Performance engineering and optimization","Technical leadership and knowledge sharing","End-to-end product ownership","Migration expertise and organizational change management"]},technicalExpertise:{categories:[{title:"Languages & Frameworks",description:"TypeScript, JavaScript, React, Redux, Node.js, Python, PHP, SQL"},{title:"Specializations",description:"Real-time collaboration systems, Complex UI, Performance optimization, State management at scale, API architecture"},{title:"Leadership & Process",description:"Technical mentorship, Migration planning, Community building, Cross-functional coordination"}]},featuredProjects:[{title:"Notebooks 2.0",company:"Datadog",year:"2024",description:"Complete rebuild of collaborative data science tooling with real-time multi-user editing."},{title:"PDF Reporting System",company:"Datadog",year:"2023",description:"Built horizontally scalable Node.js/Puppeteer system, improving widget fidelity from ~70% to near 100%."},{title:"Redux State Management",company:"Dropbox",year:"2018",description:"Designed Redux architecture adopted by ~10 teams across ~25 features, becoming company standard."},{title:"Page Load Optimization",company:"TodayTix",year:"2016",description:"Achieved 95% reduction in page load time (8 seconds → 400ms) through systematic optimization."}],originStory:{paragraphs:["Started programming at age 11 with Visual Basic, driven by curiosity about how programs work. Built websites at 12, explored networking protocols at 13, and ran a freelance tech support business in high school.","Won the Don Estridge Award for technical achievement in middle school. Formal CS education covered algorithms, data structures, and hardware fundamentals. Early experiences emphasized deep technical understanding, strong communication, and user empathy—principles that continue to shape my work today."]},contact:{links:[{label:"Blog: matthewgerstman.com",url:"https://matthewgerstman.com"},{label:"GitHub: github.com/matthewgerstman",url:"https://github.com/matthewgerstman"},{label:"LinkedIn: linkedin.com/in/matthewgerstman",url:"https://linkedin.com/in/matthewgerstman"}]}},Pw="_container_wbf2a_1",Nw="_hero_wbf2a_7",Rw="_subtitle_wbf2a_20",Lw="_lead_wbf2a_26",Mw="_section_wbf2a_34",Aw="_projectCard_wbf2a_67",Ww="_projectCompany_wbf2a_90",Fw="_techGrid_wbf2a_114",Dw="_techCategory_wbf2a_122",Ow="_strengths_wbf2a_137",Bw="_contactLinks_wbf2a_154",ce={container:Pw,hero:Nw,subtitle:Rw,lead:Lw,section:Mw,projectCard:Aw,projectCompany:Ww,techGrid:Fw,techCategory:Dw,strengths:Ow,contactLinks:Bw},Je=Ew,Uw=()=>h.jsxs("div",{className:ce.container,children:[h.jsxs("header",{className:ce.hero,children:[h.jsx(bd,{as:"h1",children:Je.hero.title}),h.jsx("p",{className:ce.subtitle,children:Je.hero.subtitle}),h.jsx("p",{className:ce.lead,children:Je.hero.lead})]}),h.jsxs("section",{className:ce.section,children:[h.jsx("h2",{children:"Professional Summary"}),h.jsx("p",{children:Je.professionalSummary.description}),h.jsxs("div",{className:ce.strengths,children:[h.jsx("h3",{children:"Core Strengths"}),h.jsx("ul",{children:Je.professionalSummary.coreStrengths.map((e,t)=>h.jsx("li",{children:e},t))})]})]}),h.jsxs("section",{className:ce.section,children:[h.jsx("h2",{children:"Technical Expertise"}),h.jsx("div",{className:ce.techGrid,children:Je.technicalExpertise.categories.map((e,t)=>h.jsxs("div",{className:ce.techCategory,children:[h.jsx("h4",{children:e.title}),h.jsx("p",{children:e.description})]},t))})]}),h.jsxs("section",{className:ce.section,children:[h.jsx("h2",{children:"Featured Projects"}),Je.featuredProjects.map((e,t)=>h.jsxs("div",{className:ce.projectCard,children:[h.jsx("h3",{children:e.title}),h.jsxs("p",{className:ce.projectCompany,children:[e.company,", ",e.year]}),h.jsx("p",{children:e.description})]},t))]}),h.jsxs("section",{className:ce.section,children:[h.jsx("h2",{children:"Origin Story"}),Je.originStory.paragraphs.map((e,t)=>h.jsx("p",{children:e},t))]}),h.jsxs("section",{className:ce.section,children:[h.jsx("h2",{children:"Contact & Links"}),h.jsx("ul",{className:ce.contactLinks,children:Je.contact.links.map((e,t)=>h.jsx("li",{children:h.jsx("a",{href:e.url,children:e.label})},t))})]})]});function Hw(){const[e,t]=x.useState(()=>{const o=localStorage.getItem("theme");return o==="light"||o==="dark"?o:"dark"});return x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)},[e]),{theme:e,toggleTheme:()=>{t(o=>o==="dark"?"light":"dark")}}}const $o=[{id:17,slug:"performance-testing-anonymous-functions",title:"Performance Testing React With Anonymous Functions",date:"September 26, 2019",excerpt:`Over the past couple of years, anonymous functions have really taken off the React community.

There have been a lot of claims of "this might affect performance." Up until now I haven't seen any real `,content:`<p>Over the past couple of years, anonymous functions have really taken off the React community. A few days ago, I was on twitter and saw the following exchange:</p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">inline functions <a href="https://t.co/ISOsnigUtg">pic.twitter.com/ISOsnigUtg</a></p>&mdash; Kitze (@thekitze) <a href="https://twitter.com/thekitze/status/1175822194565361665?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>Kitze was kidding (I hope), but for a while this was a very real debate. Especially when render props were first taking off. Since then, Hooks have made anonymous (inline) functions even more popular.</p><p>There have been a lot of claims of "this might affect performance" which is often countered with "well that's a micro-optimization." Up until now I haven't seen any real numbers, so I decided to get them on my own.</p><p>At first, I did this just by running a simple node script with various numbers for NUM_EXECUTIONS.</p><pre><code class="language-Javascript">function runAnonymous() {
  for (let i = 0; i &lt; NUM_EXECUTIONS; i++) {
    (() =&gt; {
      // noop
    })();
  }
}

function named() {
  // noop
}

function runNamed() {
  for (let i = 0; i &lt; NUM_EXECUTIONS; i++) {
    named();
  }
}

const startNamed = new Date();
runNamed();
const endNamed = new Date();
const diffNamed = endNamed - startNamed;
console.log(\`Named took \${diffNamed} ms\`);

const startAnonymous = new Date();
runAnonymous();
const endAnonymous = new Date();
const diffAnonymous = endAnonymous - startAnonymous;
console.log(\`Anonymous took \${diffAnonymous} ms\`);

const factor = diffAnonymous / diffNamed;
console.log(\`Thats a factor of \${factor.toFixed(2)}x!\`);
</code></pre><p>This code is hopefully straightforward. First it runs a loop where it generates an anonymous function and executes it, second it creates a named function then loops over it and runs it the same number of times.</p><p>For anything less than 10,000 executions I couldn't profile a difference. Both the named and anonymous executions took 0 ms.</p><p>At 10,000 executions we start to get some results</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 4 ms
Thats a factor of Infinityx!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 4 ms
Thats a factor of Infinityx!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 0 ms
Anonymous took 3 ms
Thats a factor of Infinityx!</code></pre><p>Creating an anonymous function 10,000 times took about 3-4 ms to execute. I decided to crank it up a notch and see how many executions it took to see a real difference.</p><p>At a million executions I was able to see the named function actually take some time to run.</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1 ms
Anonymous took 3 ms
Thats a factor of 3.00x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 2 ms
Anonymous took 4 ms
Thats a factor of 2.00x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 2 ms
Anonymous took 3 ms
Thats a factor of 1.50x!</code></pre><p>These results were pretty inconsistent ranging from 1.5x to 3.0x. Just for fun, I decided to crank it up to a billion.</p><pre><code>Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1240 ms
Anonymous took 4117 ms
Thats a factor of 3.32x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1053 ms
Anonymous took 4153 ms
Thats a factor of 3.94x!

Matthew at Matthews-iMac in ~/src/react-perf/src on master
$ node anonymous.js 
Named took 1054 ms
Anonymous took 3798 ms
Thats a factor of 3.60x!</code></pre><p>Now we're getting some meaningful data. Creating an anonymous function and executing it takes roughly 3.5 times as long as calling a function that already exists.</p><p>This initial data tells me that anonymous functions don't make a meaningful difference to the performance of your application. In the above example we're averaging around 3 <strong>nanoseconds </strong>to allocate an anonymous function. For that to matter, we need to be operating at an unimaginably large scale.</p><h1 id="moving-on-to-react">Moving On To React</h1><p>The above example is pretty contrived. In a vacuum we see that anonymous functions have a negligible impact on performance, but what about in a real React application?</p><p>I decided to throw together a simple React application to see if anonymous functions made any difference to rendering a simple component. That looks roughly like this</p><pre><code class="language-Javascript">function AnonymousNumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number getNumber={() =&gt; i} key={i} /&gt;);
  }
  return list;
}

function NumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number number={i} key={i} /&gt;);
  }
  return list;
}

function Number({number, getNumber}) {
  return (
    &lt;h1 style={{color: number != null ? 'red' : 'blue'}}&gt;
      {number != null ? number : getNumber()}
    &lt;/h1&gt;
  );
}</code></pre><p>In this example, we can render a large number of <code>h1</code> tags and see if using an anonymous function makes any difference from just passing a raw prop. I opened up the React DevTools and profiled how long it took to render each set of elements.</p><h3 id="without-anonymous-functions">Without Anonymous Functions</h3><!--kg-card-begin: html--><table>
    <thead>
    <th>Number of Elements</th>
        <th>Time to Render</th>
    </thead>
<tr><td>100</td><td>5.1 ms</td></tr>
<tr><td>1000</td><td>41.7ms</td></tr>
<tr><td>10000</td><td>201.8ms</td></tr>
<tr><td>25000</td><td>518ms</td></tr>
</table><!--kg-card-end: html--><h3 id="with-anonymous-functions">With Anonymous Functions</h3><!--kg-card-begin: html--><table>
    <thead>
    <th>Number of Elements</th>
        <th>Time to Render</th>
    </thead>
    <tr><td>100</td><td>6.1 ms</td></tr>
<tr><td>1000</td><td>43 ms</td></tr>
<tr><td>10000</td><td>210.9 ms</td></tr>
<tr><td>25000</td><td>453 ms</td></tr>
</table><!--kg-card-end: html--><p>This data is not at all scientific, but it was pretty representative of what I've found. Having a single anonymous function as a prop makes no meaningful difference to React performance.</p><p>I did have one serious takeaway though.</p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">FWIW I was trying  to profile if anonymous functions in a render make any difference to performance.<br><br>The short answer I found was &quot;not until you&#39;ve reached a scale where you have a lot of other lower hanging fruit to fix&quot;</p>&mdash; Matthew Trevor Gerstman (@MatthewGerstman) <a href="https://twitter.com/MatthewGerstman/status/1175897335378927621?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I thought my experiment was over, but Rick Hanlon had other thoughts.</p><h1 id="let-s-play-with-react-memo">Let's Play With React.memo</h1><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">I was thinking about doing the same today<br><br>What about<br><br>&lt;Root&gt;<br>&lt;Parent&gt; &lt;-- anon function<br>&lt;ExpensiveChild&gt; &lt;-- expensive render<br><br>Child should be pure/memo, the expensive render could be sorting a large array of todo items. Compare with/without passing anon function into the child</p>&mdash; Ricky (@rickhanlonii) <a href="https://twitter.com/rickhanlonii/status/1175907744299327489?ref_src=twsrc%5Etfw">September 22, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I thought this was pretty interesting and decided to take this experiment a step further. How does React behave when you give it a really expensive component to render?</p><pre><code class="language-Javascript">function sleep(seconds) {
  const startTime = new Date();
  const endTime = startTime.setSeconds(startTime.getSeconds() + seconds);
  console.log({startTime, endTime});
  while (new Date() &lt; endTime) {
    // wait;
    continue;
  }

  return;
}

const ExpensiveComponent = React.memo(() =&gt; {
  sleep(1);
  return 'expensive';
});
</code></pre><p>To do this, I made a sleep function that blocks the main thread for a full second and a component that calls it. I then memoized that component.</p><p>I quickly discovered that React.memo is memoization per instance as opposed to per set of props for that component. For 10 components, this code will always take roughly 10 seconds for the first render.</p><pre><code class="language-Javascript">function NumberList({count}) {
  let list = [];
  for (let i = 0; i &lt; count; i++) {
    list.push(&lt;Number number={i} key={i} /&gt;);
  }
  return list;
}

function Number({number, getNumber}) {
  return (
    &lt;h1 style={{color: number != null ? 'red' : 'blue'}}&gt;
      {number != null ? number : getNumber()}
      &lt;ExpensiveComponent  /&gt;
    &lt;/h1&gt;
  );
}</code></pre><p>We haven't learned anything new yet, or at least nothing that isn't mentioned in the React docs.</p><p>Next up was profiling the overhead of React.memo. I decided to generate a big object with the following code.</p><pre><code>const bigObject = {};
for (let i = 0; i &lt; n; i++) {
  bigObject[\`\${i}\`] = \`\${i}\`;
}

&lt;ExpensiveComponent {...bigObject} /&gt;</code></pre><!--kg-card-begin: html--><table>
    <thead><th>Value of n</th><th>Overhead for React.memo</th></thead>
    <tr><td>100</td><td>0.1 ms</td></tr>
<tr><td>1,000</td><td>0.5 ms</td></tr>
<tr><td>10,000</td><td>3 ms</td></tr>
<tr><td>100,000</td><td>100 ms</td></tr>
<tr><td>1,000,000</td><td>675 ms</td></tr>
</table><!--kg-card-end: html--><p>These results were promising. I can't imagine a production scenario with more than 1,000 individual props. The overhead for memo is negligible for reasonable quantities.</p><p>In fact, I quickly realized that this isn't just the overhead for React.memo, <strong>this is also the overhead for prop spreading on the component.</strong></p><p>As a sanity check I ran the 1,000,000 prop approach again on a non memoized component. It took roughly 300ms to render that component. We can approximate that it takes 375 ms for React.memo to check 1,000,000 props.</p><h1 id="combining-with-anonymous-functions">Combining With Anonymous Functions</h1><p>As a final followup, I rendered my expensive, memoized component with an anonymous function as a prop</p><pre><code class="language-javascript">&lt;ExpensiveComponent anon={() =&gt; {}} /&gt;</code></pre><p>This did what I expected, it broke memoization. It once again took a full second for each render of each <code>ExpensiveComponent</code>.</p><p>While the overhead of using React.memo is negligible, this is a footgun to watch out for. An inexperienced developer could easily break memoization without realizing it.</p><p>To be clear, this has nothing to do with the anonymous function. This is because we're passing a new reference on each render to a memoized component. This code would also cause repeated rerenders.</p><pre><code class="language-javascript">&lt;ExpensiveComponent obj={{ foo: 'bar'}} /&gt;</code></pre><h2 id="a-note-on-science">A Note On Science</h2><p>This data isn't terribly scientific. I ran this experiment a small number of times on a single machine. In order to really collect data, we would need to run this code in a wide variety of environments many many times. I'm not a statistician, so I'll leave it to the experts to run a truly conclusive experiment.</p><h2 id="conclusions">Conclusions</h2><p>That said, I am very comfortable with the statement that <strong>inline anonymous functions have a negligible impact on application performance. </strong>Use all the hooks and render props you'd like.</p><p>You can see my full source <a href="http://github.com/matthew-gerstman/react-perf">here</a>. Also feel free to tweet me <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> with questions.</p>`,tags:["Tech","react"],banner_img:"/images/blog/hero-mountains-night.jpg"},{id:16,slug:"surviving-the-technical-interview",title:"Surviving The Technical Interview",date:"September 25, 2019",excerpt:`I've found myself giving a bunch of advise on technical interviews lately and thought it'd make for a good blog post. 

Here's my guide to surviving interviews.`,content:`<p>I've found myself giving a bunch of advise on technical interviews lately and thought it'd make for a good blog post. While most of us acknowledge that technical interviews have a lot of false negatives, the industry as a whole hasn't come up with a better alternative. Here's my guide to surviving interviews.</p><h1 id="practice">Practice</h1><p>This one seems obvious, but I need to say it up front. Practice, practice, practice. <em>Proper planning prevents poor performance</em>. I've personally done almost every problem in <a href="https://amzn.to/2l8CeGG">Cracking The Coding Interview</a> and I can't recommend that book enough. It helps you get into the mindset of interviewing.</p><p>A big failure mode with this book though is how it's organized. The problems are all neatly organized by what tool you need to solve them. For example theres a chapter with array problems and a chapter with tree problems. Real interviews won't be like this. You'll have to identify what tools to use on the problem when it's given to you.</p><p>The advanced chapters in the back are really helpful here because they don't provide any context, they're just problems to solve.</p><h1 id="turn-your-inner-monologue-inside-out">Turn Your Inner Monologue Inside Out</h1><p>This is so important. As an interviewer I need to get a sense of how you solve the problem. If you silently struggle, I can't give you the hint you need to succeed. Talk to yourself as you work through the practice problems. It may feel silly at first, but you need to practice saying out loud what's going through your head. Really say out loud everything going through your head.</p><p>Even say out loud the bad ideas and why they won't work. During the interview, I'm looking for <strong>signal</strong>, either positive or negative that we should hire you. If you mention something that won't work and why, that's really positive signal. It shows me that you can think through multiple solutions and know their tradeoffs.</p><p>It's also important to state your assumptions. Sometimes it might seem like you intuitively figured out a key part of the problem, but I need to verify that. Often if a candidate seems to just know something I'll ask some followup questions that seem really simple, just to confirm we're on the same page.</p><h1 id="if-you-re-stuck-make-a-magic-function">If You're Stuck, Make a Magic Function</h1><p>This one took me years to learn. When you're stuck on part of a problem, for example you don't know how to sort something, or organize a data structure, just pretend you have a function that does it for you. You will need to implement that magic function later, but this will help you get unstuck for the time being.</p><p>In fact, this is really positive signal for me. It shows me you can break down the problem into multiple steps, and that you can write clean code. It's often difficult to parse giant single-function solutions.</p><h1 id="take-a-deep-breath">Take a Deep Breath</h1><p>During some interview somewhere, you'll probably get stuck and flustered. Don't go into panic mode. Getting stuck on a small part of the problem is totally okay, and expected. Take a deep breath and go back to the basics to wrap your head around it.</p><p>For on-sites, you'll often do several interviews back to back. Remember that each interview has no bearing on the next one. You can fail one interview, pass the rest, and that interview becomes an outlier. When you finish an interview put it in the past, and move onto the next one.</p><h1 id="i-m-taking-notes">I'm Taking Notes</h1><p>This is important. I take notes throughout the whole interview to make sure I'm giving a fair evaluation. Here's what they might look like. </p><blockquote>5:06 PM Explained question<br>5:08 PM Candidate asked if they can assume a type of input, I say yes.<br>5:10 PM Candidate started writing error checking, i told them to assume it's valid input.<br>5:13 PM Candidate has the first part of the implementation.<br>5:14 PM Asked candidate to walk me through at a high level.<br>5:14 PM Candidates solution works like this ____________________<br>5:16 PM I asked what their data structure looks like.<br>5:18 PM They showed me they know what it looks like, now I can give them a sample input.<br>5:19 PM They're very caught up on this section. I'm asking them what would happen if they had a magic function to do it for them.<br>5:24 PM I asked what the code looks like for this simpler case.<br>5:29 PM Algo works for simple case, I told them I see a bug.<br>5:31 PM I told them "I would wager they could make this function work for the advanced case"<br>5:31 PM They figured out the advanced case.<br>5:35 PM There's a bug on line 33.<br>5:36 PM They found the bug on line 33 on their own.<br>5:40 PM I suggest a big scary edge case.<br>5:43 PM Candidate has a high level solution for edge case.<br>5:48 PM Candidate has implemented psuedocode around this.<br>5:53 PM We hit a good stopping point for questions.</blockquote><p>These are intentionally vague, but it's encapsulates the things I need to remember:</p><ol><li>How long did each part of the problem take the candidate?</li><li>When did they get stuck?</li><li>Were they able to figure it out the bugs on their own?</li></ol><p>After doing the same question dozens (or sometimes hundreds) of times, I have a pretty good sense of how the interview should go, what types of solutions a candidate may have, and when they're likely to get stuck.</p><h1 id="be-honest">Be Honest</h1><p>It's very likely at some point you'll be asked a question you've seen before. There are only so many interview questions out there. When this happens, tell the interviewer! I can usually tell if a candidate knows the question in advance and it feels like I'm being lied to. When this happens, I have to flag this suspicion and recommend we reinterview them.</p><h1 id="it-s-a-numbers-game">It's a Numbers Game</h1><p>Interviewing is it's own skill you need to hone; it can take years of practice. When I was going from my first to my second job I talked to 50 tech companies (and failed a lot of interviews). The more interviews you do, the better you'll get at it.</p><p>If you're just ramping up on a job search, consider scheduling the companies you're less excited about earlier. This will help you practice with less pressure. You'll feel more ready when you get to the interview you really care about.</p>`,tags:["Tech"],banner_img:"/images/blog/hero-technical-interview.jpg",heroImage:""},{id:13,slug:"reduce-reduce-reduce",title:"Reduce, Reduce, Reduce",date:"March 18, 2019",excerpt:"After my last article on map, filter, and reduce there was an outpour of requests to do an article on just reduce. This time let’s dive into all the fun things you can do with reduce.",content:`<p>After my last article on <a href="http://matthewgerstman.com/map-filter-reduce/" rel="noreferrer nofollow noopener">map, filter, and reduce</a> there was an outpour of requests to do an article on just reduce. This time let’s dive into all the fun things you can do with reduce. Before we do that though, let’s make sure we really understand how it works.</p><h1 id="why-s-it-called-reduce">Why’s it Called Reduce?</h1><p>I find it helpful if we look at the dictionary definition for the word reduce <a href="https://www.merriam-webster.com/dictionary/reduce" rel="noreferrer nofollow noopener"><strong>[1]</strong></a></p><blockquote><strong><em>a: </em></strong><em>To draw together or cause to converge, or consolidate</em><br>Example: reduce all the questions to one<br><br><strong><em>b: </em></strong><em>To diminish in size, amount, extent, or number</em><br>Example: reduce taxes<br>Example: reduce the likelihood of war<br><br><strong>c: </strong>To<em> decrease the volume and concentrate the flavor of by boiling</em><br>Example: add the wine and <em>reduce </em>the sauce for two minutes</blockquote><p>In all three of these, we’re taking a group of things and consolidating, or shrinking them through some process.</p><p>In programming it’s the same. We’re taking a <strong>list</strong> of <strong>items</strong> and consolidating the list into to one new <strong>value</strong> using an <strong>accumulator</strong>.</p><h1 id="function-signature">Function Signature</h1><p>Now let’s take look at the function signature for reduce.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/500644ef1e9020822f10bd7b0aea69bc.js"><\/script><!--kg-card-end: html--><p>This part is pretty straightforward, reduce takes a <strong>callback</strong>, and an <strong>initialValue</strong> to seed the <strong>accumulator</strong>. Most of the complexity here is in the function signature for the callback. Let’s dive into that.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d9647985a89f0dc4a76c4270a4c49554.js"><\/script><!--kg-card-end: html--><p>This is a bit more intimidating, so let’s break it down.</p><p>The <strong>accumulator </strong>is thing we’re trying to reduce our list down to. It <em>accumulates </em>the list of items into one value. That value could be an object or even a new array, but it’s considered one value.</p><p>Whatever gets returned from the callback is passed in as the <strong>accumulator </strong>to the next iteration. When we're done, the final state of the <strong>accumulator </strong>is returned as the <strong>value.</strong></p><p><strong>currentValue </strong>is less scary, it’s the current item in the list we’re iterating over. This might be more familiar if we use <code>for loop</code> syntax.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/977f044c735adba039b79a07f2df1c9f.js"><\/script><!--kg-card-end: html--><p>Next is <strong>currentIndex</strong>. In the example above this would be <code>i</code>. We can make this a bit more explicit though.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4aa9c545944ae55a3cd0f306b161ef9b.js"><\/script><!--kg-card-end: html--><p>Lastly, <strong>list. </strong>This is the entire list we’re iterating over. This can be useful if you want to access some other element in the original list. To be honest, I’ve never needed to access the original <strong>list</strong>, but it’s available.</p><h1 id="implementation">Implementation</h1><p>Now that we understand the function signature, let’s implement it from scratch. </p><p>One caveat, to avoid complexity this implementation takes the list as an argument as opposed to adding it to the prototype of array. You can see a proper polyfill at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">MDN [2].</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a13a16798ada747f047bb62637440014.js"><\/script><!--kg-card-end: html--><p>As you can see, the bulk of this function is error checking. We check to make sure we have a valid <strong>list </strong>and <strong>callback</strong>. We also ensure the user has either provided an <strong>initialValue</strong> or we can derive one from the list.</p><p>In fact if we assume that the user always provides valid input this is the entire function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e62b0aa35577350a050211cdcb893f6c.js"><\/script><!--kg-card-end: html--><p>This function takes a <strong>list</strong>, iterates over it, and calls a <strong>callback</strong> on the previous value along with each item in the list. it then returns the final <strong>value</strong>.</p><h1 id="all-of-the-examples">All of The Examples</h1><p>Hopefully you now understand <strong>how </strong>reduce works, but it may not be clear <strong>why </strong>you would want to use it. First, let’s get the sample data out of the way. This is the same <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener">data as last time.</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b024143766f91edf8278415568aa235a.js"><\/script><!--kg-card-end: html--><h2 id="keyby">keyBy</h2><p>Now that we have the sample data out of the way, let’s look at our first example, <code>keyBy</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6263edd4c352fcbcabc2b8415bec2bd3.js"><\/script><!--kg-card-end: html--><p>This function takes a list of objects and a key, and keys those objects by a property on them. In this example our <strong>initialValue </strong>is <code>{}</code>.We iterate over each item in the list, get <code>item[key]</code> and use it as our key in the accumulator.</p><p>As an aside, this implementation is naive and will overwrite on conflict.</p><p>Given the list of <code>wizards</code> above, we could call <code>keyBy(wizards, 'name')</code> and get the following output.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/93f21471ba9d6ce80e9d9d5f41915360.js"><\/script><!--kg-card-end: html--><h2 id="groupby">groupBy</h2><p>Next up is <code>groupBy</code>, this function takes a <strong>list</strong> and groups the <strong>items</strong> by the output of a given function<strong>,</strong> or <code>iteratee</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/be19558f74230249742cbaa7de944bf0.js"><\/script><!--kg-card-end: html--><p>Again, we take a list, but this time we take a function, or <code>iteratee</code>. We call <code>iteratee</code> on each <code>item</code> in the list and use this to determine what key on the <strong>accumulator,</strong> or <code>acc</code>, we place the item in.</p><p>We then make sure there’s an array allocated at the key and push the item onto that array.</p><p>If we call <code>groupBy(wizards, wizard =&gt; wizard.house)</code>, we’ll get the following output.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39070315478e7abd4198b87c3953354a.js"><\/script><!--kg-card-end: html--><h2 id="chunk">chunk</h2><p>Another popular example, <code>chunk</code>. In this case we want to take a big <strong>list</strong> and split it into a <strong>list</strong> of smaller lists.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8185bfc898629b3ea9716c21cdfa5c53.js"><\/script><!--kg-card-end: html--><p>Above, we take a <code>list</code> and a <code>size</code> for our sub-lists. Our <strong>initialValue </strong>is an array with a single empty array inside of it.</p><p>We then iterate over the list and make our smaller lists. Every time one of our sub-lists reaches <code>size</code>, we move on to the next one.</p><p>If we call const <code>chunkedWizards = chunk(wizards, 3)</code>, we’ll get the following value for <code>chunkedWizards</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/eb44f0bf2033f53e889ef64ba024604e.js"><\/script><!--kg-card-end: html--><p>We now have 3 lists of 3 wizards. It’s worth noting that this worked out nicely because we had exactly 9 wizards. If we had 8 total wizards, our final list would be of size 2. If we had 10 total wizards, our final list would be of size 1.</p><h1 id="flatten">flatten</h1><p>We’ve chunked <code>wizards</code> into <code>chunkedWizards</code>, but what if we want to undo that? Well that’s what flatten is for.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4f39158a4b0349807f36640011402a96.js"><\/script><!--kg-card-end: html--><p>In this example we take a <code>list</code> and iterate over it. Whenever we see an array, we <code>concat</code> it with the <strong>accumulator, </strong>or <code>acc</code>. Whenever we see anything else we push it onto the <strong>accumulator</strong>. Our <strong>initialValue </strong>for our <strong>accumulator</strong> this time is an empty array or <code>[]</code>.</p><p>If we call <code>flatten(chunkedWizards)</code> we get our original list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c2e3823a0b063c3fc311eaa1e5e26333.js"><\/script><!--kg-card-end: html--><h2 id="flatmap">flatMap</h2><p>We can take this a step further with flatMap. This <a href="__GHOST_URL__/map-filter-reduce/"><strong>maps</strong></a> over the list and flattens any results from the given function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/31a1fc7ad9ef71acd0d9ed5ee3503e90.js"><\/script><!--kg-card-end: html--><p>Hopefully by now you’re getting the hang of it. We iterate over the <code>list</code> and call <code>func</code> on each item. We then <code>flatten</code> the output of <code>func</code>.</p><p>Let’s look at a function call:</p><p><code>flatMap(wizards, wizard =&gt; [wizard.name, wizard.house, wizard.points])</code></p><p>This takes a wizard and returns all of it’s properties as items in an array. The output of this is one big array.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a98fbd728d753141306aaff42aaa4db3.js"><\/script><!--kg-card-end: html--><h1 id="map-and-filter">Map and Filter</h1><p>One last fun fact, we can implement <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener"><strong>map</strong></a><strong> </strong>and <a href="__GHOST_URL__/map-filter-reduce/" rel="noreferrer nofollow noopener"><strong>filter</strong></a><strong> </strong>with reduce.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/77c2e270789dbcff7f02ea123ffd3cb2.js"><\/script><!--kg-card-end: html--><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6ec04a34ba7d97df3e8f9677c20fe9e5.js"><\/script><!--kg-card-end: html--><p>If you're looking for reasons to use map or filter, check out my previous article, <a href="__GHOST_URL__/map-filter-reduce/">map, filter, reduce</a>.</p><h1 id="wrapping-up">Wrapping Up</h1><p>Reduce is one of the most powerful functions built into JavaScript. While most of the functions above are available in <a href="http://lodash.com/" rel="noreferrer nofollow noopener">lodash</a> <a href="http://lodash.com/" rel="noreferrer nofollow noopener">[3]</a>, they’re good examples of when you may want to use reduce. Give them a try and feel free to tweet questions <a href="https://twitter.com/MatthewGerstman" rel="noreferrer nofollow noopener">@MatthewGerstman.</a></p><hr><h1 id="references">References</h1><ol><li><a href="https://www.merriam-webster.com/dictionary/reduce" rel="noreferrer nofollow noopener">https://www.merriam-webster.com/dictionary/reduce</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" rel="noreferrer nofollow noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce</a></li><li><a href="http://lodash.com/" rel="noreferrer nofollow noopener">http://lodash.com</a></li></ol>`,tags:["Tech","functional-programming"],banner_img:"/images/blog/reduce-reduce-reduce/reduce-function-hero.jpg",heroImage:""},{id:11,slug:"map-filter-reduce",title:"Map, Filter, Reduce",date:"March 03, 2019",excerpt:"In this article we'll go back to basics and cover three of the most important functions in functional programming, map, filter, and reduce.",content:`<p>In this article we'll go <a href="__GHOST_URL__/functional-programming-fundamentals/">back to basics</a> and cover three of the most important functions in <a href="__GHOST_URL__/functional-programming-fundamentals/">functional programming</a>, map, filter, and reduce.</p><p>All three of these are useful functions for iterating over a list (or array) and doing some kind of transformation or computation. This will then produce a new list or the result of the computation done across the previous list.</p><h1 id="types">Types</h1><p>Before we dive into map, filter, and reduce, let's set up the list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ad7693f7583a07cf038bd38ab931152a.js"><\/script><!--kg-card-end: html--><p>As per usual, we're going to be operating on wizards. Each wizard object has a name, a house, and the number of points they've earned for their house. Let's declare a bunch of wizards and put them in a list.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/44860c22b93656ab0391243e8f579666.js"><\/script><!--kg-card-end: html--><h1 id="map-function map() { [native code] }1">Map</h1><p>Now that we've got the boilerplate out of the way, let's dive in. The first function is the simplest one, map. Map iterates (or loops) over a list, applies a function to each item in that list and then returns a new list of the transformed items. Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c02b0634780f0e6c6ef00d5390e6ec42.js"><\/script><!--kg-card-end: html--><p>This function iterates over the list of wizards, gets their name, and puts it into a new array. The result of this looks something like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/29ebae139d7839eb981fb110e9c1723f.js"><\/script><!--kg-card-end: html--><p>Now in this example we were using a <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda</a> (aka an anonymous function), but we can also use a named function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3d64ba545ca863db2fc3c6abd558abe7.js"><\/script><!--kg-card-end: html--><p>In this example we have a function called <code>wizardToString</code> and we pass that directly to map. It will then return a new list that looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/bf416ade6e4e95b9ce568a2df5449754.js"><\/script><!--kg-card-end: html--><h1 id="filter-function filter() { [native code] }1">Filter</h1><p>Next up is filter. Filter behaves like map in that it iterates over the list, but it instead of transforming each item, it transforms the whole list. Filter takes a function that returns true or false or <a href="__GHOST_URL__/mary-had-a-little-lambda/">predicate</a>. It then returns a new list with items where the predicate returns <code>true</code>. Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fe6468ae65e0e7a1e11c9d726b09b0ca.js"><\/script><!--kg-card-end: html--><p>In this example we filter over the list and only include wizards who are in the house Slytherin. The result would be this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/048d64ccc3719ba07a2b52a886bf6437.js"><\/script><!--kg-card-end: html--><p>As an aside, Taylor and Lin are two of the most acclaimed Slytherins of our day.</p><p>Just like with map, we don't need to use a <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda</a>, we can also use a predefined function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/884e4116282875442d860d44cb97eac3.js"><\/script><!--kg-card-end: html--><p>In this example we make two lists, the list of Slytherins who have earned points (winners), and the list of Slytherins who have lost points (losers). We can see those results below.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/496b2fa8c97d505d79f2aacaa1cb155e.js"><\/script><!--kg-card-end: html--><h1 id="reduce-function reduce() { [native code] }1">Reduce</h1><p>Now we get to the most interesting function, reduce. Reduce iterates over a list and produces a single value. Let's look at an example.</p><p>Suppose we want to get the total number of points across all wizards. We can use reduce to do that.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39da3b9782f8f3e4a59315c28a3523c9.js"><\/script><!--kg-card-end: html--><p>What's going on here? Well reduce is a function that takes two arguments, a function and an initial value for the accumulator. The accumulator is the name of the thing reduce returns. In this case we start our point count at 0.</p><p>Now the function takes the current state of the accumulator and the item in the list it's supposed to process. For the first wizard, it will pass 0 for the accumulator. This function then returns <code>accumulator + points</code>. This will eventually sum up all the points. If you're curious, the result is 5487.</p><p>Now the accumulator can be anything, we can even use reduce to produce an object. Let's look at an example where we add up the points for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/49909068b01b9285c0f18d6177a36b19.js"><\/script><!--kg-card-end: html--><p>In this case, we initialize our accumulator or <code>acc</code> with <code>{}</code>. Then for each wizard we call a function that adds the number of points that wizard has earned for their house. If you're curious that result looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e4b620c523337b30cb44075b8be2bdd8.js"><\/script><!--kg-card-end: html--><p>Let's look at one more example, let's say we want the best wizard for each house. We can tweak our previous function to use the best wizard for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5428d9c0713e7ddab3dfa3a8beb675c6.js"><\/script><!--kg-card-end: html--><p>If you're curious, the result of that looks like this.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fdac1cee43ba855a48af1abe0ba86629.js"><\/script><!--kg-card-end: html--><p>Just a little more fun now, we can use <code>Object.values</code> to transform this map.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/98890f863a695769975f6eafebd2480b.js"><\/script><!--kg-card-end: html--><p>Now we have nice strings for the best person in each house.</p><h1 id="wrapping-up">Wrapping Up</h1><p>Hopefully you're more comfortable with map, filter, and reduce now. If you'd like a deeper dive into practical FP check out my article, <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a>.</p><p>If you're looking for more abstract stuff check out <a href="__GHOST_URL__/what-the-functor/"><strong>What the Functor?</strong></a><strong> </strong>and <strong><a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda.</a> </strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p>`,tags:["Tech","functional-programming"],banner_img:"/images/blog/map-filter-reduce/map-filter-reduce-hero.jpg",heroImage:""},{id:12,slug:"throttle-and-debounce",title:"Throttle and Debounce",date:"March 03, 2019",excerpt:"In this article, we're going to talk about two of the most important functions in frontend development, throttle and debounce.",content:`<p>In this article, we're going to talk about two of the most important functions in frontend development, throttle and debounce.</p><p>Both of these functions are commonly used to deal with situations where a user is causing an event handler to fire on repeat and we want to slow down the underlying function call. Think scroll handlers, keyboard events, or even just clicking a button rapidly.</p><h1 id="throttle">Throttle</h1><p>Throttle is a <a href="http://matthewgerstman.com/functional-programming-fundamentals/">higher order function</a> that takes a function and a timeout and only allows that function at most once per the amount of time specified.</p><p>Before we use throttle. Let's start with an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c5d7a590204043ad7982946b3ca63a5c.js"><\/script><!--kg-card-end: html--><p>In this example above we have a piece of state <code>numSpells</code> and a function that can increment this state <code>castSpell</code>. We have a button we can click that increments <code>numSpells</code>. You can play with it below.</p><!--kg-card-begin: html--><div data-demo="throttle-debounce-basic"></div><!--kg-card-end: html--><p>Now you can click this button as quickly as you want and it will increment the number of spells cast. Now spells take some time to recharge, so we can use throttle to slow down the user.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/cc13aaffdcf78987efb8a61d403324bc.js"><\/script><!--kg-card-end: html--><p>We now have a button that call <code>castSpellThrottled</code> when the user clicks it. Try it out below.</p><!--kg-card-begin: html--><div data-demo="throttle-debounce-throttle"></div><!--kg-card-end: html--><p>Now that we understand what it does, lets dive into the source of throttle.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d8d2090f84290dbcfe92ba51ef5dc6a8.js"><\/script><!--kg-card-end: html--><p>What's going on here? Throttle is a function that takes a function and a timeout. Throttle returns a new function that forms a closure around the original one.</p><p>We keep track of a <code>boolean</code> called <code>ready</code> that stops the inner function from firing unless the timeout has elapsed. If we fire the function we also fire a timeout that will set <code>ready</code> to true when the timeout has elapsed. Pretty cool, huh?</p><h1 id="debounce">Debounce</h1><p>Debounce is a bit different from throttle. With throttle we slow down function calls as they happen, with debounce we don't fire at all until the user has stopped calling it.</p><p>This is really useful if you want to perform a computation or hit an api when the user is done typing or done scrolling. Let's play with another example.</p><!--kg-card-begin: html--><div data-demo="throttle-debounce-debounce"></div><!--kg-card-end: html--><p>You'll notice, you can click Cast Spell Debounced as many times as you'd like, but it will only fire after you've stopped clicking it. The source for this is similar to the previous component.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d4fea64d5553a71058bbaef129d08d09.js"><\/script><!--kg-card-end: html--><p>Now that we know what it does, let's see how it works.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f9b5c2df747a4e50b46ea4cc2e7e68b0.js"><\/script><!--kg-card-end: html--><p>While the last one relied on a simple boolean, with this one we need to maintain access to the timer. We do this because we need to clear the previous timeout every time the function gets called again. We then set a new timeout to call the inner function.</p><h1 id="real-world">Real World</h1><p>Now these implementations of throttle and debounce were both very naive. If you take a look at the <a href="https://github.com/lodash/lodash/blob/master/debounce.js">lodash source</a> you can see a much more advanced version of debounce that considers things like calling the function before or after we set the timeout.</p><p>It also allows fancy things like a <code>maxWait</code> and a <code>cancel</code>. They even implement <a href="https://github.com/lodash/lodash/blob/master/throttle.js">throttle with debounce.</a></p><h1 id="wrapping-up">Wrapping Up</h1><p>Hopefully you've learned a bit about debounce and throttle. For more real world code, check out some of my other articles <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamental</strong></a><strong> </strong>or <a href="__GHOST_URL__/map-filter-reduce/"><strong>Map, Filter, Reduce</strong></a><strong>.</strong></p><p>If you're looking for more abstract stuff check out <a href="__GHOST_URL__/what-the-functor/"><strong>What the Functor?</strong></a><strong> </strong>and <strong><a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda.</a> </strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p>`,tags:["Tech"],banner_img:"/images/blog/throttle-and-debounce/throttle-debounce-hero.jpg",heroImage:""},{id:19,slug:"history-of-the-web",title:"History of the Web: Part 1",date:"June 01, 2021",excerpt:"Today I'm going to share twenty years of context on the web. We'll talk about how the web evolved into what we have today, and why it makes building web applications so hard in 2021. ",content:`<p>Hey Technical Friends! It's been a while since I wrote anything. 2020 was well, 2020. Anyway, I started working at Bluecore! I've been tasked with leading frontend. As a result, I've been teaching a whole lot of people about the web.</p><p>If you didn't know, I've been toying with the web for over twenty years now. I started as a kid sometime around the year 2000. I remember learning about HTML 4 when it was brand new. As a teenager, I built websites for local businesses.</p><p>I started in the industry in 2012, working for <a href="https://blogs.gartner.com/martin-kihn/cookies-chaos-and-the-browser-meet-lou-montulli/">Lou Montulli</a> and I've been doing one thing or another on the web ever since.</p><p>As I get ramped up on a new job, I keep thinking about the sheer number of tools we take the time to configure. I've been writing proposals for frontend architecture and laying out a vision for a north star.</p><p>In the process of this, I've realized how important all this context on the web is. Knowing where we came from can help us figure out where we should go. It's also a mountain of technical debt, and we're collectively building on top of it.</p><p>Forgive me if I skip the wonderful stories of Macromedia Flash, Java in the browser, or whatever other detour you can think of. While those were important to development of the web, most of us will never run into them again.</p><hr><h1 id="back-to-basics">Back to Basics</h1><p>The first <strong>Hyper Text Markup Language (HTML)</strong> spec was released in <strong>1993</strong> as a way to represent web pages, then documents. Initially, HTML was completely static, requiring a full page reload to change. </p><pre><code class="language-html">&lt;!-- An entire web page could look like this: --&gt;
&lt;form action="/api/doctor"&gt;
  &lt;div class="row"&gt;
      &lt;label for="actor"&gt;Actor: &lt;/label&gt;
      &lt;input id="actor" placeholder="David Tennant"/&gt;
  &lt;/div&gt;
  &lt;div class="row"&gt;
      &lt;label for="companions"&gt;Companions: &lt;/label&gt;
      &lt;input id="companions" placeholder="Rose, Martha, Donna"/&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/form&gt;
&lt;!-- Note: Many of these tags were unavailable in HTML 1.0 --&gt;</code></pre><p><strong>JavaScript </strong>appeared in <strong>1995</strong> and provided a weakly typed scripting language for handling events. It was only occasionally used to change the contents of the page. </p><p><strong>CSS</strong> arrived in <strong>1996</strong> and provided a new way of declaring the look and feel of a website, separate from the primary content in the document.</p><p>For dynamically rendered pages, we would use a language like <strong>PHP (1995)</strong> that could provide a server generated HTML document in response to a request. JavaScript was mostly sprinkled in to add interactivity to the page.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/html5-logo.png" class="kg-image" alt loading="lazy" width="550" height="518"><figcaption><em>Mosaic, One of the first browsers</em></figcaption></figure><h2 id="the-dom">The DOM</h2><p>Things really got interesting when the<strong> Document Object Model (DOM)</strong> was introduced in <strong>1998. </strong>The DOM<strong> </strong>is a cross-platform and language-independent interface that treats an XML or HTML document as a tree structure. Each node is an object representing a part of the document. (<em><a href="https://en.wikipedia.org/wiki/Document_Object_Model">Thanks Wikipedia</a>)</em></p><p>This provided a <em>mostly</em> consistent interface across browsers for JavaScript based applications to make changes to the content being displayed in the browser. Before the DOM, we had similar tree-based structures, but they weren't yet standardized across browsers. As a result, the APIs were wildly inconsistent. The function <code>getElementById</code> wasn't standardized until 2000. Keyboard event handling wasn't standard until 2004.</p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/mosaic-browser.png" class="kg-image" alt loading="lazy" width="500" height="600"></figure><h2 id="s-websites-web-applications-g">s/Websites/Web Applications/g</h2><p>In the early 2000s websites began to go from simple pages to complex applications. Some of the most notable first web applications were Myspace (2003), Gmail (2004), Digg (2004), Google Maps (2005), </p><p>These were some of the first applications to use AJAX (<a href="https://web.archive.org/web/20050222032831/http://www.adaptivepath.com/publications/essays/archives/000385.php">Asynchronous JavaScript and XML</a>). This was a watershed moment for the web, as we were finally able to update an app without reloading the whole page.</p><p>Each browser implemented the JavaScript spec, <strong>ECMAScript (1997), </strong>slightly differently.<em> Aside, If you must know, it was previously the European Computer Manufacturers Association, but now its just Ecma.</em></p><p>This meant that application developers were constantly writing hacks like this:</p><pre><code>if (isIE()) {
  // ie.stuff()
} else {
  alert("Sorry, please use Internet Explorer");
}</code></pre><p>You can bet that <code>// ie.stuff()</code> was a thousand lines of code inside of an if else block.</p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/netscape-navigator.png" class="kg-image" alt loading="lazy" width="450" height="300"></figure><h2 id="browser-history">Browser History</h2><p>To understand how fragmented the web was, we need to discuss some browser history.</p><p>Netscape was the original market leader in 1994.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/ie-browser-wars.png" class="kg-image" alt loading="lazy" width="1023" height="576" srcset="/images/blog/size/w600/2021/05/image-4.png 600w, /images/blog/size/w1000/2021/05/image-4.png 1000w, /images/blog/history-of-the-web/ie-browser-wars.png 1023w" sizes="(min-width: 720px) 720px"><figcaption>Netscape showing the Ask Jeeves homepage.</figcaption></figure><p></p><p>Internet Explorer gained relevance in 1996 with their plugin architecture ActiveX.</p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/firefox-launch.png" class="kg-image" alt loading="lazy" width="920" height="576" srcset="/images/blog/size/w600/2021/05/image-6.png 600w, /images/blog/history-of-the-web/firefox-launch.png 920w" sizes="(min-width: 720px) 720px"></figure><p>Internet explorer was the clear leader for a very long time. Its market share didn't go under 50% until 2010!</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn.statcdn.com/Infographic/images/normal/1438.jpeg" class="kg-image" alt loading="lazy"><figcaption><em>Taken from <a href="https://www.statista.com/chart/1438/browser-market-share-since-2008/">Statista</a></em></figcaption></figure><p>Even the Mac ran Internet Explorer until 2003 when Apple released Safari.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/chrome-announcement.png" class="kg-image" alt loading="lazy" width="770" height="433" srcset="/images/blog/size/w600/2021/05/image-10.png 600w, /images/blog/history-of-the-web/chrome-announcement.png 770w" sizes="(min-width: 720px) 720px"><figcaption>Safari 1.0 on Mac OS</figcaption></figure><p>Internet Explorer's demise began when Netscape was reborn as Mozilla Firefox in 2004. Firefox was considered much more secure than Internet Explorer and included features like tabs and an integrated pop-up blocker.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/safari-browser.png" class="kg-image" alt loading="lazy" width="410" height="293"><figcaption>Mozilla Firefox 1.0 on Windows XP</figcaption></figure><p>We didn't see Chrome until 2008 – amusingly, it was considered a big deal that Google was creating a browser. </p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/opera-browser.png" class="kg-image" alt loading="lazy" width="770" height="526" srcset="/images/blog/size/w600/2021/05/image-8.png 600w, /images/blog/history-of-the-web/opera-browser.png 770w" sizes="(min-width: 720px) 720px"></figure><p>For a while we had four browsers with meaningful marketshare. This meant the web had to standardize on the open source ECMAScript as opposed to something proprietary. </p><h2 id="web-2-0">Web 2.0</h2><p>While all this browser nonsense was happening, application complexity was going up. Web 2.0 brought about new expectations with regards to interactivity. Instead of statically generated sites, users uploaded their own content. This required lots of client-side business logic that was previously unnecessary.</p><p>Two of my favorite Web 2.0 era sites were Digg and Meebo.</p><p>Digg was one of the first social news sites, featuring user submitted stories and upvotes. It even spun off one of the very first podcasts, Diggnation.</p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/edge-browser.png" class="kg-image" alt loading="lazy" width="400" height="300"></figure><p>Meebo was a popular messaging app that allowed users to sign into multiple messaging services at once, from anywhere.</p><figure class="kg-card kg-image-card"><img src="/images/blog/history-of-the-web/browser-market-share.png" class="kg-image" alt loading="lazy" width="560" height="460"></figure><hr><h2 id="jquery">jQuery</h2><p>We now have increasing feature requirements built on a language spec that no one could agree to. This meant application developers were left to deal with it.</p><p>jQuery abstracted that problem away. Instead of writing different code for two or three browsers, you could write once using a simple library. jQuery 1.0 was a decent amount of code, but we weren't concerned about bundle size yet, and we needed our stuff to work.</p><p>Code looked like this:</p><pre><code>var doctor = $('.doctor').attr('data-actor').value()
if (doctor === "David Tennant") {
  callRoseTyler();
} else if (doctor === "Matt Smith") {
  callAmyPond();
}</code></pre><p>Furthermore it provided a simple interface for making API requests against a server, now we could do things like make API requests and issue callbacks in response to those requests.</p><p>This was revolutionary, and kicked off the next wave of complex web applications. Here's what the source of one of those applications might look like.</p><figure class="kg-card kg-code-card"><pre><code>var companions = [];
var enemies = [];
var number = 10;

$.get("/api/companion/1", function (companion) {
  $('.name', companion.name); // Rose Tyler
  $('.seasons', companion.seasons); // Seasons 1 and 2
  companions.push(companion);
});

$(document).on("click", ".display_tardis", function (e) {
  e.preventDefault();
  $(".container").html("&lt;img src=/tardis /&gt;");
});

// Another thousand lines of code that looks like this.</code></pre><figcaption>f</figcaption></figure><p>We're now hitting APIs, storing state, and changing page markup – sometimes at the response of a button. As these apps grew in size we had to figure out how to provide some structure. From there, we started to see MVC frameworks.</p><h2 id="mvc">MVC</h2><p>The Model View Controller pattern was widely popular on the backend and it seemed logical to bring it to the frontend. Most engineers were used to working with a backend MVC framework, and they could reason with the way frontend worked.</p><p>The two most popular frontend frameworks were Backbone and Angular.</p><p>In an MVC world we have a model for storing data, a view for presenting it, and a controller for the business logic in between. MVC is object oriented, with different objects having different functions. For example, models could sync their state against a REST api.</p><p><em>Aside: we were collectively really into the full REST pattern for a while, but we're mostly back to GETs and POSTs.</em></p><p>These frameworks were very much a precursor to the modern React ecosystem. They featured built in templating languages and separated the logic of updating the DOM and manipulating application state.</p><p>That said, state management was still difficult. Different models were constantly falling out of sync with each other and imperative DOM mutations meant race-conditions galore.</p><h2 id="bundle-size">Bundle Size</h2><p>This is when bundle size became a problem. While the dependencies weren't huge, we were writing so much code on top of it. We also weren't consistently serving minified or even gzipped files. It was also expensive to make a round trip to the server to serve some JS only to fetch some more.</p><p>To solve this, we needed to concatenate the files to reduce requests, minify them to reduce file size, and gzip them to reduce size over the wire.  This would often lower the payload size by 5x.</p><p>However the client still had to parse it! A few years ago, I profiled this and it took roughly 1 millisecond per uncompressed kilobyte of javascript to parse it and run it for the first time. Even with modern frameworks, each file has to execute at least once before the page is interactive to put all the functions in place.</p><p>Regardless. We focused on reducing the amount of code sent over the wire. That could mean shrinking it, or optimizing when we loaded it. It's important to remember that before this, we would serve each unminified source file separately.</p><p><strong>This was how we became obsessed with tooling.</strong> We needed to do a bunch of things to our code before we shipped it down. We needed to concatenate source files into bundles grouped by functionality, minify them, and put a hash in the filename for cache busting. It got complicated, and this lead to an entire ecosystem of tools: npm, grunt, gulp, and eventually webpack.</p><h2 id="language">Language</h2><p>After we introduced a build step, we were able to begin tweaking the language itself. In 2009 CoffeeScript was released. It was a brand new langauge that compiled to JavaScript and had new features like arrow functions, optional chaining, and modern string interpolation.</p><p>Much like jQuery ascended into modern DOM apis, CoffeeScript ascended into JavaScript. Many of its more novel features made their way into ECMAScript and we moved off of it.</p><p>In addition, we had libraries like underscore and lodash influencing JavaScript. ES6 gave us map, filter, and reduce right in the language. This rendered the bulk of these libraries obsolete.</p><p>In 2014, 6to5 (later babel) was introduced. This allowed us to write source code using the new ES6 (ECMAScript 6) spec without dropping support for older browsers. It worked by transpiling newer ES6 into ES5. </p><p>This was one of the biggest developments the web has ever seen. The ability to improve the language without worrying about old browsers. Development on ES6 was accelerated and <a href="__GHOST_URL__/tech/es-everything/">TC39</a> were able to move to yearly releases.</p><p>CSS and HTML evolved as well. HTML 5 was released in 2014 and brought about a whole set of new tags we could implement against. CSS saw new dialects like SASS (2006) and LESS (2009) that were supported by the same build tooling we used for JavaScript.</p><h1 id="almost-there">Almost There</h1><p>We've reached the point where the JavaScript ecosystem looked a lot like the modern web. Let's take a look at a very common stack in 2015.</p><ul><li><strong>Language: </strong>ES6 was new and CoffeeScript was still heavily in use. New codebases were using babel, but many were still in CoffeeScript or even ES5.</li><li><strong>Libraries: </strong>jQuery was evolving into everyone's favorite piece of tech debt. Lodash was still very popular.</li><li><strong>Tooling: </strong>Build tools like Grunt and Gulp were largely task runners. One was config heavy the other was code heavy.</li><li><strong>Performance: </strong>Serving had gotten faster, but we were still doing DOM mutations by hand which was slow and error prone.</li><li><strong>Styling: </strong>LESS and SASS were actually pretty good for their time.</li></ul><h1 id="modules">Modules</h1><p>We haven't discussed modules yet. For a very long time we would include JavaScript on a page via a series of <code>&lt;script /&gt;</code> tags and make sure to load it in the right order.</p><p>For a while there were two competing standards/tools for modularizing JavaScript: commonJS, and AMD (asynchronous module definition). ESModules weren't <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">standard until 2018.</a></p><p>There were also a number of tools that shipped between 2009-2013, most notably requireJS. These tools provided a mechanism for isolating JavaScript and declaring dependencies within projects.</p><p>The problem was it was a nightmare to write. Here's what a standard file looked like with requireJS.</p><pre><code>requirejs(["jQuery", "underscore", "backbone"], function($, _, Backbone) {
  // This function is called when all of its dependencies have loaded.
  // Above, we have a 1:1 mapping of path to module export.
});</code></pre><p>These require statements got sufficiently large and they were written by hand for a long time. </p><p>Webpack was first released in 2014 and it was the first mainstream tool to combine building and dependency management all-in-one. It included the new <code>import</code> statement which compiled down to whatever <code>require</code> statement was necessary.</p><p>We haven't even discussed Node, but around this time isomorphic JavaScript was becoming popular (running the same code on the client and the server).</p><h1 id="react">React</h1><p>Seemingly out of nowhere, Facebook released React at the end of 2013. There were a bunch of problems with the current state of web development and React aimed to solve them:</p><ol><li>We were intermingling business logic with DOM mutations.</li><li>We were storing data on actual DOM nodes.</li><li>Reading/writing to the DOM was expensive.</li><li>State management was a nightmare, everything was constantly falling out of sync with everything.</li></ol><p>In 2014 Facebook gave a now legendary talk titled: <em>Hacker Way: Rethinking Web App Development at Facebook. </em></p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/nYkdrAPrdcw?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><p>This talk detailed how they introduced React and adopted the Flux pattern to simplify web development. React made one simple promise, UI is a function of state.</p><p>The flux pattern works as follows. We have a datastore sitting at the top of our application, React would read from that datastore and render UI, whenever it needed a state change it would issue an action that updated the data store. This would trigger a rerender of the entire application.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/web-standards.png" class="kg-image" alt loading="lazy" width="1280" height="866" srcset="/images/blog/size/w600/2021/05/image-15.png 600w, /images/blog/size/w1000/2021/05/image-15.png 1000w, /images/blog/history-of-the-web/web-standards.png 1280w" sizes="(min-width: 720px) 720px"><figcaption><em>Taken from the<a href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts"> Redux Docs</a></em></figcaption></figure><p>But there was magic! React introduced the virtual DOM which effectively eliminated the imperative DOM mutation problem.</p><p>React provides an interface for writing declarative components. This means you tell React <em>take this state and turn it into this UI. </em>What it doesn't do is tell you how to get from (State A, UI A) to (State B, UI B); React did all of that under the hood.</p><p>React would do a full render of State A, later it would do a full render of State B and then it would do a diff on two virtual DOMs (as opposed to the slow real DOM) and determine the minimum set of changes to make to the DOM.</p><p>React also introduced a syntax called JSX, a way to write html-like markup directly inside a JavaScript module. This allowed developers to create components with business logic adjacent to markup, without actually putting HTML strings in code.</p><p>This made applications both faster and more predictable, a win for everyone. Eventually, Redux became the most popular flux implementation. This led to the popularity of  <a href="__GHOST_URL__/tech/functional-programming-fundamentals/">functional programming</a> on the web.</p><p>Here's what some React code might look like.</p><pre><code class="language-javascript">import React from "react";

function TheDoctor({ number, actor, companions }) {
  return (
    &lt;div&gt;
      &lt;h1&gt;The {number} Doctor&lt;/h1&gt;
      &lt;h2&gt;Played by {actor}&lt;/h2&gt;
      &lt;div className="companions"&gt;
        {companions.map((companion) =&gt; (
          &lt;Companion {...companion} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
&lt;TheDoctor
  number="Twelfth"
  actor="Peter Capaldi"
  companions={["Clara Oswald", "Nardole", "Bill Potts"]}
/&gt;;
</code></pre><h1 id="typescript">TypeScript</h1><p>Over the years JavaScript kept getting better. We moved from big releases like ES6 to iterative yearly releases like ES2021. It only made sense that someone would add types.</p><p>TypeScript is a statically typed language that compiles down to traditional JavaScript. It enforces type checking at compile time however the runtime code is still untyped. This works well enough even if it's not perfect.</p><p>While TypeScript was first released in 2008, it didn't get mainstream adoption until a decade later, in 2019. As far as I'm aware, Dropbox was one of the first companies to adopt <a href="https://dropbox.tech/frontend/the-great-coffeescript-to-typescript-migration-of-2017">TypeScript at scale in 2015</a>, or maybe I'm just really proud of the migration we did.</p><p>TypeScript started to get good during the 2.x phase. These versions brought strict null checks, async functions, enums, <code>Pick</code>, and a whole range of utilities we take for granted today. Since then, it's become more and more powerful, and has quickly rose to be the most popular dialect of Javascript.</p><p>With the advent of types, we could now enforce contracts between different parts of the codebase.</p><pre><code>type DoctorProps = {
  number: string;
  actor: string;
  companions: string[];
}

function TheDoctor({ number, actor, companions }: DoctorProps) {
  // Function Body
}

&lt;TheDoctor
  // Type 'number' is not assignable to type 'string'. ts(2322)
  number={13}
  actor="Jodie Whittaker"
  companions={["Graham", "Ryan", "Yasmin"]}
 /&gt;</code></pre><p>If you're curious, I once gave a talk on why TypeScript is amazing.</p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/KdvEGPiULAQ?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><hr><h1 id="the-mountain-of-technical-debt">The Mountain of Technical Debt</h1><p>All of that history, and we've reached web development in 2021. We also skipped a lot: GraphQL, advancements in CSS (modules, styled components, etc), and the entire node ecosystem.</p><p>When looked through the lens that <a href="https://blog.professorbeekums.com/all-code-is-debt/">all code is technical debt</a>, there's a mountain. We're still building web applications using fundamentally the same tools we were 20 years ago: JavaScript, HTML, and CSS.</p><p>They've evolved quite a bit, but they continue to maintain support for every website ever built. Furthermore, any sufficiently large codebase will include artifacts from its past. How many of us claim to be running TypeScript + React, but secretly have some backbone, some jQuery, or some checked-in-decaffeinated CoffeeScript? And that's just the stuff I can think of.</p><p>Even with the latest features in ES2021, the vast majority of websites are still targeting ES5, a language released in 2009. We can add types and declarative runtimes, but it will eventually execute in a typeless and imperative environment.</p><p>Our obsession with tools has reached new heights. Let's take a look at a pretty standard setup for a modern application:</p><ul><li><strong>TypeScript </strong>- Adds support for types and newer ES features. Usually compiles to ES5.</li><li><strong>React 17 + React DOM  - </strong>About 35kb gzipped runtime that allows for declarative programming.</li><li><strong>Apollo - </strong>Popular graphql library for API requests. About 33kb gzipped.</li><li><strong>NPM - </strong>Package manager, supports pulling in third party dependencies (including the ones listed here).</li><li><strong>Webpack - </strong>Build tool, runs the underlying TypeScript compiler and handles minification, bundle splitting, etc.</li><li><strong>ESLint - </strong>Lints code for style and potentially runtime errors.</li><li><strong>Prettier </strong>- Code formatter, standardizes whitespace, quotes, and semicolons.</li><li><strong>CSS Modules - </strong>Allows importing CSS directly in JavaScript files.</li><li><strong>Jest - </strong>Unit test runner.</li><li><strong>Cypress - </strong>End to end test runner.</li></ul><p>That's a lot of tools! Today's web developers need to know about all of them, how they interact with each other, and how they interact with all that <em>legacy</em> code that isn't going anywhere.</p><p>The list keeps going, and the worst part, all of these tools are written in JavaScript, which leads to extended build times, test runtimes, and one dragged out feedback loop.</p><p>In fact, most of the recent developments in performance have been achieved by writing JavaScript tooling in other languages! The esbuild team saw 150x performance gains over webpack 5 by writing their bundler in go.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/history-of-the-web/modern-web-stack.png" class="kg-image" alt loading="lazy" width="800" height="150" srcset="/images/blog/size/w600/2021/05/image-16.png 600w, /images/blog/history-of-the-web/modern-web-stack.png 800w" sizes="(min-width: 720px) 720px"><figcaption>Taken from the <a href="l">esbuild docs</a></figcaption></figure><h2 id="page-loads">Page Loads</h2><p>This is just in our terminal! Even if we fix the tools, we still have to ship code down to the browser. Here's what an average pageload might look like.</p><ul><li>Http requests comes in to server</li><li>Server provides initial HTML markup</li><li>HTML is scanned, <code>&lt;script /&gt;</code> tags are loaded.</li><li>JavaScript comes down over the wire, is parsed and executed for the first time.</li><li>JavaScript code makes a network request for content over a JSON API.</li><li>API request comes back, JavaScript renders page, the page is finally interactive.</li><li>Lazy loaded code begins loading.</li><li>Modules pop into the page as we fetch and render code/content asyncronously.</li></ul><p>There are tons and tons of performance optimizations we can do here, but at the end of the day we either have to pay this cost in the form of time or complexity. Any performance optimization we do makes serving more complex and creates more places for our stuff to break.</p><hr><h1 id="the-future">The Future</h1><p>The two projects I find most interesting are <a href="https://svelte.dev/">Svelte</a> and <a href="https://deno.land/">Deno</a>. There are a number of competitors to React, most notably Vue and Angular 2. While they have their own approaches to application development, they still ship a runtime down to the browser.</p><p>Svelte is different, it has no runtime. It does all of its work at compile time so that you can send down as little code as possible. While Svelte hasn't been meaningfully adopted at scale, I believe whatever takes the throne from React won't have a runtime.</p><p>Deno is a secure runtime for TypeScript. Its built in rust and totally overhauls how we run v8 in the server. While it still runs V8, they've largely abstracted that away from the user, allowing it to be swapped out in the future.</p><p>I believe we've found the correct interfaces for web development. TypeScript and React provide an incredible developer experience with the constraints they're built on. What if we took TypeScript and React and honest-to-god compiled it. What if we could ship the React runtime as part of the browser? What if we took advantage of type data at runtime?</p><p>If we started to do this, we would take the existing paradigms frontend engineers are familiar with, but turbocharge their implementation. Until then, we're going to keep executing our code in the same environment we were in 1998.</p>`,tags:["Tech","frontend","javascript","typescript"],banner_img:"/images/blog/hero-northern-lights.jpg",heroImage:""},{id:7,slug:"how-redux-works-2",title:"How Redux Works - Part 2",date:"January 30, 2019",excerpt:"In this post we'll cover the various other files in the library. While some of these contain simple utilities, others are much more complex. We'll also cover the infamous redux-thunk.",content:`<p><em><em>This is part </em>two <em>of a two part series. For part </em>one<em> </em><a href="__GHOST_URL__/how-redux-works/">see here.</a></em></p><p>In our <a href="__GHOST_URL__/how-redux-works/">last post</a> we covered the bulk of how Redux works with <code><a href="https://www.matthewgerstman.com/how-redux-works/">createStore</a></code>. In this post we'll cover the various other files in the library. While some of these contain simple utilities, others are much more complex. We'll also cover the infamous redux-thunk. Before we get to redux-thunk though we need to cover <strong>applyMiddleware.</strong></p><p><em><em>A note on embedded source: The most up to date redux source is <a href="https://github.com/reduxjs/redux/tree/master/src">available here</a>. I'll be embedding source code as of when this post was written</em>.</em></p><h1 id="applymiddleware">applyMiddleware</h1><p>Now you might remember from <a href="__GHOST_URL__/how-redux-works/"><a href="__GHOST_URL__/how-redux-works/">part </a>one</a> that we have the notion of a store enhancer. These wrap the store and can modify it's exported functions. In this case, <code>applyMiddleware</code> is a store enhancer that wraps <code>dispatch</code>.</p><p>So when we create our store, we pass <code>applyMiddleware</code> with a middleware as the second argument.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/398b682e6c20d20e426e9334f01a3dec.js"><\/script><!--kg-card-end: html--><p>This second argument triggers the following block from <code>createStore</code>:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9388c9b6dd4c167424a05c6b72a49168.js"><\/script><!--kg-card-end: html--><p>Once again we're gonna be looking at functions all the way down. Enhancer is a function that takes <code>createStore</code> and returns a new version of <code>createStore</code>. </p><p>Upstream we've passed <code>applyMiddleware(thunk)</code> as the <code>enhancer</code>.</p><p>Let's take a look at just the function signature of <code>applyMiddleware</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/79fa2ae4cb62e6594c50193fef69d00b.js"><\/script><!--kg-card-end: html--><p>The first layer of <code>applyMiddleware</code> takes a list of functions, or middleware, that we're going to apply. Here's how we might call <code>applyMiddleware</code> in our application.</p><p>In this case we're only passing <code>thunk</code> but in another application we may want to pass more. <code>applyMiddleware</code> then returns a new function that takes <code>createStore</code> as it's argument. </p><p>This then returns a third function which takes the arguments that we would pass to <code>createStore</code>. In the code sample above, that would be <code>reducer</code> and <code>preloadedState</code>.</p><p>As an aside, the process of returning functions that each require a single argument is called currying. You can read more about that in <a href="__GHOST_URL__/functional-programming-fundamentals/">Functional Programming Fundamentals</a>.</p><p>Okay this third function is now the bulk of <code>applyMiddleware</code>. It has a bound copy of <code>middlewares</code> and <code>createStore</code> and takes whatever arguments we're going to pass to <code>createStore</code>.</p><p>Let's examine the body of this function, or at least the first half of it.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5c27fe5e7f0ddb7df39052b88eb982ba.js"><\/script><!--kg-card-end: html--><p>The first thing it does is, surprise, calls <code>createStore</code> with these arguments. Then it temporarily overwrites <code>dispatch</code> to make sure our consumers don't accidentally call it while we're setting up the store. This pattern should look familiar from <a href="__GHOST_URL__/how-redux-works/"><a href="__GHOST_URL__/how-redux-works/">part </a>one</a>, we're validating before doing business logic.</p><p>Okay now let's look at the entire function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8d79f0ff97192a91bea13f8534aa5b3a.js"><\/script><!--kg-card-end: html--><p>This function then loops over the list of middleware, which are functions, and calls them with the <code>middlewareAPI</code>. This gives those functions a bound reference to dispatch and <code>getState</code>. It then <code>composes</code> the list of middleware together (more on that later) and gives this new function access to the original <code>dispatch</code> that can only take a plain object.</p><p>Finally, it returns a new object with all the old methods on the store plus this new, wrapped dispatch.</p><h2 id="redux-thunk">Redux Thunk</h2><p>While we're composing middleware, this is a great time to take a look at my personal favorite, Redux Thunk.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4860c96843b35db2438c52767fa230a5.js"><\/script><!--kg-card-end: html--><p>Wow, thats a dense 14 lines of code, and once again it's functions all the way down. Now might be a good time to refresh on <a href="__GHOST_URL__/functional-programming-fundamentals/">currying</a>. Let's step through this line by line.</p><p>The first bit is <code>createThunkMiddleware</code>, this function allows us to bind an extra argument to all thunks. This can be used as a way to inject dependencies into all of your action creators at runtime. For example, you might want to only allow API calls from within an action creator. This would let you enforce that.</p><p>You'll notice that by default this function exports a thunk middleware with no extra argument. Most people just use thunk without an extra argument.</p><p>Lines 2-8 are the bulk of the logic here. We return a function that takes <code>{dispatch, getState</code>. This is the same <code>middlewareAPI</code> you saw above. So now we have a bound function with <code>dispatch</code>, <code>getState</code>, and maybe an <code>extraArgument</code>.</p><p>Two more functions to go. This returns a function that takes the <code>next</code> middleware to call. This is effectively calling a chain of middlewares until we get to the plain <code>dispatch</code>. Finally, this returns a function that takes an <code>action</code>.</p><p>Lines 3-7 are now the actual <code>thunk</code> logic. If the action is a function, we call it and pass it <code>dispatch</code>, <code>getState</code>, and <code>extraArgument</code>. If it's a plain action, we just pass  that on to the next middleware or the original <code>dispatch</code>. </p><p>As an aside, this process is called trampolining in computer science.</p><h1 id="compose">Compose</h1><p>Okay we've now seen <code>applyMiddleware</code> and <code>redux-thunk</code>. Let's zero back in on a section of <code>applyMiddleware</code> that should make a little more sense now.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c8468374cb8a814f9dbf7b7b2cce1436.js"><\/script><!--kg-card-end: html--><p>This section calls each middleware with the <code>middlewareAPI</code> and then composes that chain together, with a final call to the original <code>store.dispatch</code>. Let's take a look at compose.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e139975425a5f190461c20c6b671650e.js"><\/script><!--kg-card-end: html--><p>What's this doing? Well compose takes a list of <strong>single argument </strong>functions and passes them to each other from right to left. So <code>compose(f, g, h)</code>would be the same as <code>(...args) =&gt; f(g(h(...args)))</code>.</p><p>You'll remember each middleware only takes a single argument at each phase, in this case that's <code>next</code>. </p><p>The first 8 lines are just optimizations. If we don't have any functions return an identity function and if we only have one function return that.</p><p>This last bit is the intimidating part:</p><p><code>return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))</code></p><p>What's going on here? Well, it's a reduce, another FP paradigm. It loops over <code>funcs</code> and then calls the function given to it with two arguments <code>accumulator</code> and <code>value</code>. In this case <code>a</code> is <code>accumulator</code> and <code>b</code> is <code>value</code>. <code>accumulator</code> is the return value of the previous function call.</p><p>Let's say we call <code>compose(f, g, h)</code>. First it loops over the array <code>[f, g, h]</code>. Then this logic happens <code>accumulator = (..args) = &gt; f(..args)</code>. Then we get to <code>g</code> and call <code>accumulator = accumulator(g)</code> or <code>accumulator = (...args) =&gt; f(g(..args))</code>. Finally it gets to <code>h</code> and calls <code>accumulator(h)</code> which is equivalent to <code>accumulator = (...args) =&gt; f(g(h(..args)))</code>.</p><p>If this is difficult to reason follow, don't stress. It took me a few hours to wrap my head around it.</p><h1 id="bindactioncreators">bindActionCreators</h1><p>While we're on the subject of actions. Let's talk about how our actions actually get access to <code>dispatch</code>. If you're using <code>react-redux</code> you probably just pass your action creators to <code>mapDispatchToProps</code> and let it take care of things for you. Well under the hood it's calling a function called <code>bindActionCreators</code>. Let's take a look:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d10b5bdb1aa3ea0ef0854e29749404e2.js"><\/script><!--kg-card-end: html--><p>Holy validation batman. Guess what, thats virtually all this function is doing. <code>bindActionCreators</code> either takes a map of action creators or a function that returns one. If it gets a function it just calls the singular <code>bindActionCreator</code> which we'll get to.</p><p>Otherwise it does a whole bunch of validation to make sure that our map is in the correct format.</p><p>Assuming that goes well, lines 15-23 loop over the map and create a new map with each function passed to <code>bindActionCreator</code>. Let's dig into that inner function now.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5855b7de59a79fe4f59036bf9d2b10e2.js"><\/script><!--kg-card-end: html--><p>Were you expecting something other than a closure? <code>bindActionCreator</code> returns an anonymous function that calls the original function <code>actionCreator</code> with whatever arguments the anonymous function got and then passes the result of <code>actionCreator</code> to dispatch. Crazy, huh?</p><h2 id="combinereducers">combineReducers</h2><p>There's one file left in <code>src</code> and that's <code>combineReducers.js</code>. It's a relatively big one, 178 lines, so we'll break it down. Much like the rest of redux, there's a lot of validation however it only exports one function <code>combineReducers</code>.</p><p>This function takes a map of keys to <code>reducer</code> and returns a new <code>rootReducer</code> that slices up the redux state amongst these keys. The callsite looks like this</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/191b00ffe4f3e2a052f762285bbe6e68.js"><\/script><!--kg-card-end: html--><p>In this case the <code>wizardReducer</code> will receive the slice of the store from the <code>wizard</code> key down and the <code>muggleReducer</code> will receive the slice of the store from the <code>muggle</code> key down.</p><p>Back to the actual redux source, let's take a look at the declaration for <code>combineReducers</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/c7239957990bb935ec15f811d369d490.js"><\/script><!--kg-card-end: html--><p>These 29 lines are once again validation on our arguments. Redux loops over all the keys, makes sure they're all defined and point to a function. Interestingly, if it's not a function it doesn't bother complaining.</p><p>It also sets up the <code>unexpectedKeyCache</code> which is a reference to any unexpected keys we've warned about. </p><p>It then calls <code>assertReducerShape</code> our first big validation function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/56f2164f455995a358e022491aed7845.js"><\/script><!--kg-card-end: html--><p>This is a pretty nifty function, it loops over each key and makes sure they handle an <code>INIT</code> action and a randomly generated <code>PROBE_UNKNOWN_ACTION</code> properly. This ensures that all reduces return a <code>defaultState</code> when given no <code>initialState</code> and return <em>something </em>when they get an unknown action.</p><p>Back to <code>combineReducers</code>, after the validation phase it returns our new <code>rootReducer</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ec4d29d127c357c12e3a66286a3daa94.js"><\/script><!--kg-card-end: html--><p>But obviously, our <code>rootReducer</code> must do some validation of it's own! First off, if <code>assertReducerShape</code> threw an error, it throws that error on every single invocation. It doesn't allow us to fail silently here.</p><p>Second, if we're in dev mode it calls <code>getUnexpectedStateShapeWarningMessage</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3c30a9214369f63cc99643e137fc161f.js"><\/script><!--kg-card-end: html--><p>This is a big function but the bulk of the logic is right here.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0119aa89e891b33f7c2489d554b5e59d.js"><\/script><!--kg-card-end: html--><p>Basically, loop over the reducer keys and make sure they're identical to the state keys. Also remember any keys we've warned about in the past so we don't warn about the same issue repeatedly.</p><p>Finally, we get to the real logic below.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/176fa2cd86bc6edc34d4720ac1cf8b5c.js"><\/script><!--kg-card-end: html--><p>This loop takes every action and passes it to each reducer with the state it previously generated. It then does a simple reference check on each reducer's new state. If any of them are different, it returns a new object. Otherwise it just returns the previous state so upstream functions can memoize.</p><p>And that's redux! I hope you enjoyed this.</p>`,tags:["Tech","redux"],banner_img:"/images/blog/hero-mountain-valley.jpg"},{id:2,slug:"how-redux-works",title:"How Redux Works - Part 1",date:"January 29, 2019",excerpt:"In this article we'll be covering createStore. This is the function that sets up the redux store and provides access to getState, dispatch, subscribe, and replaceReducer. ",content:`<p><em>This is part one of a two part series. For part two <a href="__GHOST_URL__/how-redux-works-2/">see here</a>.</em></p><h1 id="create-store">Create Store</h1><p>I spend a lot of time walking people through Redux best practices and how to use it, and throughout this process I've found it really helpful to dive into the source itself. While this source is very readable and well commented, I thought I'd put together a blog post to break it down and add some more context.</p><p>In this article we'll be covering <code><a href="https://github.com/reduxjs/redux/blob/master/src/createStore.js">createStore</a></code>. This is the function that sets up the redux store and provides access to <code>getState</code>, <code>dispatch</code>, <code>subscribe</code>, and <code>replaceReducer</code>. </p><p><em>A note on embedded source: The most up to date redux source is <a href="https://github.com/reduxjs/redux/tree/master/src">available here</a>. I'll be embedding source code as of when this post was written.</em></p><h1 id="three-principals">Three Principals</h1><p>Before we get started we should reexamine the <a href="https://redux.js.org/introduction/three-principles">three principals</a> of redux. Below is an excerpt from the redux docs.</p><h3 id="single-source-of-truth">Single source of truth</h3><p>The <a href="https://redux.js.org/glossary#state">state</a> of your whole application is stored in an object tree within a single <a href="https://redux.js.org/glossary#store">store</a>.</p><h3 id="state-is-read-only">State is read-only</h3><p>The only way to change the state is to emit an <a href="https://redux.js.org/glossary#action">action</a>, an object describing what happened.</p><h3 id="changes-are-made-with-pure-functions">Changes are made with pure functions</h3><p>To specify how the state tree is transformed by actions, you write pure <a href="https://redux.js.org/glossary#reducer">reducers</a>.</p><h3 id="takeaway">Takeaway</h3><p>The important bit here is that everything is done with pure functions. As a result of this we prevent consumers from doing things like calling <code>dispatch</code> or <code>getState</code> from within a reducer.</p><p>As we talk about <code>createStore</code> we'll notice that the majority of the code enforces these constraints.</p><h1 id="function-signature">Function Signature</h1><p>Now that we've introduced this, let's dive into <code>createStore</code>. We'll start with the function signature.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/23ad2daace19787621102bf7c04e6d3a.js"><\/script><!--kg-card-end: html--><p>This takes three arguments <code>reducer</code> <code>preloadedState</code> and <code>enhancer</code>.</p><h2 id="reducer">Reducer</h2><p>The first one is hopefully straightforward. This is the <code>rootReducer</code> for your application. It's a pure function that takes a <code>state</code> and an <code>action</code> and returns a new <code>state</code>. It's most likely generated by <code><a href="https://github.com/reduxjs/redux/blob/master/src/combineReducers.js">combineReducers</a></code> which we'll cover in part 2.</p><h2 id="preloadedstate">preloadedState</h2><p>This is simply the state you'd like to start with. Most likely if you're using <code>preloadedState</code> you're doing one of two things. You have a server side rendered the page, or you have a data payload coming down with your source. Either way you  have data you want loaded into redux as soon as the app is instantiated.</p><p>If you're not doing one of these you should probably just dispatch an action after the store is created.</p><h2 id="enhancer">enhancer</h2><p>I sometimes like to call this the <em>enchanter </em>because it really does some magic. The most common uses for this are the <a href="https://github.com/zalmoxisus/redux-devtools-extension">redux devtools</a> or adding <a href="https://github.com/reduxjs/redux/blob/master/src/applyMiddleware.js">middleware</a>, another thing we'll see in part 2.</p><h1 id="argument-validation-and-enhancing">Argument Validation and Enhancing</h1><p>The next lines of code are mostly argument validation. You can read the full source below but here's what it's doing:</p><ol><li>Ensures you've passed at most three arguments</li><li>Allow the user to only pass <code>reducer</code> and <code>enhancer</code>. If this happens it swaps the argument order.</li><li>Ensures the reducer is an actual function.</li></ol><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/8268324853199df738b0e3b82670b703.js"><\/script><!--kg-card-end: html--><p>There is one <em>very interesting </em>thing going on here though. You can see it on line 22 in the gist above.</p><p><code>enhancer(createStore)(reducer, preloadedState)</code></p><p>If an <code>enhancer</code> function is provided it calls it with <code>createStore</code> as an argument. This function then returns a new <code>createStore</code> function which only takes <code>reducer</code> and <code>preloadedState</code>.</p><p>This pattern is very common in the redux source, wrapping functions in other functions. In fact I like to say it's functions all the way down.</p><p>This is also how <a href="https://github.com/zalmoxisus/redux-devtools-extension">redux devtools</a> works. It wraps the createStore function so it can inject wrappers around every exported function and listen to their inputs and outputs. We won't dive too deeply into this, but you can check out <a href="https://github.com/zalmoxisus/redux-devtools-extension/blob/7b0be59e5b28162ca00e99dcd2f092b8df493a47/src/browser/extension/inject/pageScript.js">that source here</a>.</p><h1 id="internal-state">Internal State</h1><p>Before we get to the function declarations, <code>createStore</code> needs to set up some internal state.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3a6d6b547dfb5b01b5f7b3f7aa1287a6.js"><\/script><!--kg-card-end: html--><p>Let's walk through each of these.</p><ul><li><code>currentReducer</code> - The root reducer redux calls.</li><li><code>currentState</code> - A reference to the key/value object that represents state</li><li><code>currentListeners</code> - This is a list of functions that have subscribed to redux.</li><li><code>nextListeners</code> - This is a reference to the updated listeners before a dispatch.</li><li><code>isDispatching</code> - Effectively a semaphore to block us from dispatching more than one action at a time.</li></ul><p>If these don't make total sense yet, especially the latter three, don't worry. We'll cover these more later.</p><h1 id="function-declarations">Function Declarations</h1><p>We're still inside of <code>createStore</code> but now we're declaring functions that will be used throughout the lifecycle of the store. Some of these will be returned as part of the store, others will only be used internally. I'll label each as we're going.</p><h2 id="ensurecanmutatenextlisteners">ensureCanMutateNextListeners</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/acf68892b5ffce759b6c7ff1114c8287.js"><\/script><!--kg-card-end: html--><p>This function seems inconsequential but it's actually very important. Redux supports pub-sub or publish-subscribe. We have no invariants around when a consumer may decide to subscribe to our store or unsubscribe from it. As a result <code>nextListeners</code> needs to be mutable at all times. </p><p>Consider, a listener might even unsubscribe as a result of being called!</p><p>As a result of this we only call listeners in <code>currentListeners</code> and let any new subscriptions modify <code>nextListeners</code>. </p><p>Under the hood, this works because <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">Array.prototype.slice</a></code> returns a new reference to the list so <code>currentListeners</code> and <code>nextListeners</code> point to different arrays.</p><h2 id="getstate">getState</h2><p>This is a fan favorite, this is the function that returns <code>state</code>. It get's returned as part of the store and returns a reference to the current underlying <code>state</code> object.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/73d678df7c701ec3a3478d536d0e46c1.js"><\/script><!--kg-card-end: html--><p>You'll notice there's an invariant here that prevents us from calling this function during a dispatch. There's a good reason for this. When reducers are combined they only get a slice of the state, more on that in part 2. We don't want a reducer to get access to this function and derive it's state from another namespace state tree. As a result this throws if we're in the middle of a dispatch.</p><p>You may be thinking, but I call <code>getState</code> from a thunk! We're specifically referring to the plain action <code>dispatch</code>, not thunk <code>dispatch</code>. We'll cover thunks in part 2.</p><h2 id="subscribe">Subscribe</h2><p>The next function created is <code>subscribe</code>. This is what notifies listeners that something in the store has changed. This function is returned as part of the store.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/91a474355477ea619c32005de42d318a.js"><\/script><!--kg-card-end: html--><p>Hopefully this pattern is starting to look familiar. Subscribe takes a function that gets called every time the internal <code>state</code> updates. It also does the following validation:</p><ol><li>Make sure the argument is actually a function.</li><li>Make sure we're not attaching a subscribe in the middle of a dispatch.</li><li>Make sure we can mutate listeners, otherwise we couldn't subscribe!</li></ol><p>It also creates some internal state, <code>isSubscribed</code>. This is used in the <code>unsubscribe</code> function it returns.</p><h2 id="unsubscribe-">Unsubscribe.</h2><p>We've covered how we start listening to things, we call <code>subscribe</code>. But how do we stop? Well <code>subscribe</code> conveniently returns a function called <code>unsubscribe</code> that allows us to stop paying attention to redux.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3600b8330c4a40417ea3bbc5c874beb1.js"><\/script><!--kg-card-end: html--><p>This function is very similar to <code>subscribe</code>. It checks <code>isSubscribed</code> (internal state) to see if it's already been called, and does some validation to make sure we're not currently <code>dispatching</code>. </p><p>Then it removes listener from the list.</p><h2 id="mapstatetoprops">mapStateToProps</h2><p>You might be thinking. I've been using redux for years, I've never called these functions. That's because most integration libraries will abstract all this away for us. In the case of the react-redux library this is taken care of in the <code><a href="https://github.com/reduxjs/react-redux/blob/85fb553ba8e3f4b0efc158d2e48aafb4c18a04d4/src/components/Provider.js">&lt;Provider /&gt;</a></code> component. We won't delve too far into that library but you can check out the <a href="https://github.com/reduxjs/react-redux">full source here</a>.</p><h1 id="dispatch">Dispatch</h1><p>It's worth a reminder that all of this is still being done in the context of the <code>createStore</code> function. The next function is the most important one, <code>dispatch</code>. This is the thing that updates the store and notifies listeners. Let's walk through it.</p><h2 id="validation">Validation</h2><p>Like every other function we've encountered. <code>dispatch</code> starts with a bunch of validation.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1d2e71c16f656255bc7edc5d79c5f387.js"><\/script><!--kg-card-end: html--><p>You can see above it's enforcing the following rules</p><ol><li>We're only dispatching a plain object.</li><li>That object has a property called <code>type</code>.</li><li>We are not currently dispatching.</li></ol><p>But once again you might be thinking, but I dispatch functions! This is taken care of by the thunk middleware, something to look forward to in part 2 of this article.</p><h2 id="business-logic">Business Logic</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/dd42acdb76fdeb65f66a5a45be266cac.js"><\/script><!--kg-card-end: html--><p>Now that we've made it this far, this function is probably much less impressive than you expected. Here's what it's doing.</p><ol><li>Set the <code>isDispatching</code> semaphore to <code>true</code></li><li>Call <code>currentReducer</code> with <code>currentState</code> and <code>action</code>. This returns a brand new state for our listeners.</li><li>Update listeners with the next set.</li><li>Loop through the list of listeners and call each of them.</li></ol><p>This is also where it's important that we keep <code>currentListeners</code> and <code>nextListeners</code> separate. While the reducer must be a synchronous pure function, there is no such invariant around any given listeners.</p><p>A listener may be async, take a long time, modify some global state, etc. It might even unsubscribe as a result of being called.</p><h1 id="two-more-functions">Two More Functions</h1><p>We've now covered the bulk of the business logic in <code>createStore</code>. There are now just two functions we need to mention, <code>replaceReducer</code> and <code>observable</code>.</p><h3 id="replacereducer">replaceReducer</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ab3646462fcbac0eea9b6f4d4d75a75.js"><\/script><!--kg-card-end: html--><p>The function itself seems pretty straightforward, we take a new reducer and replace the one we use in the store. Then we dispatch an action announcing this has happened.</p><p>This action will also have the "side effect" of copying over any state that the new reducer needs to know about.</p><p>Why would you need this? This function is particularly useful for <a href="http://matthewgerstman.com/redux-code-split-typecheck/">code splitting. </a>I wrote an entire article about how to <a href="http://matthewgerstman.com/redux-code-split-typecheck/">code split a redux store</a> so I'll leave that as a followup.</p><h2 id="observable">Observable</h2><p>This last bit I've never actually used, so I don't think I'm qualified to go into too much detail about it. Effectively it adds support for to support <code>observables</code>, a proposal to ecmascript. It's  just a simple wrapper around <code>subscribe</code>/<code>unsubscribe</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/198ebd8fb599fe4563c0db2df6ad052a.js"><\/script><!--kg-card-end: html--><h1 id="wrapping-up">Wrapping Up</h1><p>The very last bit in <code>createStore</code> is initializing the state tree and exporting functions.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/005294ffb5ff7563607cf1fa35a84638.js"><\/script><!--kg-card-end: html--><p>This is how users get access to <code>store.getState</code>, <code>store.dispatch</code>, <code>store.subscribe</code>, and <code>replaceReducer</code>. </p><h1 id="next-time-">Next Time!</h1><p>In our next article we'll be covering a lot of the tooling around redux. We'll talk about <code>applyMiddleware</code>, <code>bindActionCreators</code>, thunks, and more!</p><p>Part two is now available <a href="__GHOST_URL__/how-redux-works-2/">here</a>!</p>`,tags:["Tech","redux"],banner_img:"/images/blog/how-redux-works/redux-architecture-hero.jpeg",heroImage:""},{id:6,slug:"ts-tricks-higher-order-components",title:"TS Tricks: Higher Order Components",date:"January 27, 2019",excerpt:"",content:`<p>Higher order components are a useful pattern for creating composable logic within a React application. While they're not as popular as other tools like render props or hooks, they're still worth knowing.</p><p>How do higher order components work? Well as we discussed in <a href="__GHOST_URL__/functional-programming-fundamentals/">Functional Programming Fundamentals</a>, higher order functions take a function as an argument and/or returns an argument as it's result.</p><p>In this case, higher order components are functions that take a component as an argument and return a new supercharged component as a result. This poses an interesting problem for typing.</p><p>We want to expose a component that only needs require the props <em>not</em> provided by the HOC, but we still want to be able to access the original uncomposed component.</p><p>Let's walk through an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/343b3bb2726bb1b63c80406ecca419c8.js"><\/script><!--kg-card-end: html--><p>We start with a super basic component, <code>TomRiddle</code>. Now it matters not what someone is born, but what they chose to be. <code>TomRiddle</code> takes an <code>isEvil</code> prop that determines if it renders "Tom Marvolo Riddle" or "I am Lord Voldemort".</p><p>Tom isn't such a great guy and wants to learn how to make horcruxes. How do we teach him? Well we could make him into a class component and add some state. Let's see what that looks like.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1fa3633692b86a5be34229777d0cae1d.js"><\/script><!--kg-card-end: html--><p>This totally works. We've taught Tom how to make horcruxes. Now Tom wants to recruit some followers, he calls those Death Eaters. Let's add another prop for those. While we're at it, let's derive <code>isEvil</code>  from the number of horcruxes the wizard has. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/008edec62ba9f1a661910071327e554e.js"><\/script><!--kg-card-end: html--><p>Now this component is doing a bit too much. It's rendering to the DOM and it's managing state. Also, anyone can learn to make horcruxes, what if we take that functionality and make it into a higher order component. </p><p>Before we get to typing this, let's take a look at what this would look like in vanilla JS.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9f09e9aed1cc76125902ddbf58e1ad37.js"><\/script><!--kg-card-end: html--><p><code>EvilWizard</code> is a function that takes a component, <code>Wizard</code>, and passes that component the following props <code>numHorcruxes</code>, and <code>makeHorcrux</code>. It also manages this state for them.</p><p>Now, two minor gotchas with HOCs, we need to set the <code>displayName</code> and <code>hoistNonReactStatics</code>.</p><p>Okay now let's type this thing. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/984fd1a6f9473dca0bb9004ee66b5438.js"><\/script><!--kg-card-end: html--><p>What's going on here? A lot actually. Let's break it down. We export a type called <code>WithEvilWizardProps</code>. This type takes <code>T</code>, a generic, and returns an intersection type of <code>T</code> and <code>EvilWizardInnerProps</code>.</p><p>The function <code>EvilWizard</code> takes a <code>Wizard</code> that is either a <code>ComponentClass</code> or a <code>FunctionComponent</code>. The props of this component is of type <code>EvilWizardInnerProps &amp; T</code>. Now here's the real magic. The component we're returning is a class of type <code>React.ComponentClass&lt;T&gt;</code>. </p><p>What does this mean? Well because we're using an intersection type, Typescript is smart enough to unpack this and return a component that only requires the props <strong>not</strong> provided by the HOC.</p><p>One last thing, let's update <code>TomRiddle</code> to use this new HOC.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/12e3e8ed7234df320490df373841a091.js"><\/script><!--kg-card-end: html--><p>We've now extracted all that state back out and we're using <code>WithEvilWizardProps</code> when declaring <code>TomRiddleProps</code>. Now let's use our components!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f63c4028e796863f55f991bb815b5ce0.js"><\/script><!--kg-card-end: html--><p>As you can see above, we have the option of using <code>LordVoldemort</code> the output of <code>EvilWizard(TomRiddle)</code> or we can just call <code>TomRiddle</code> directly. This is particularly useful if you want to test the behavior of the inner component without the HOC.</p>`,tags:["Tech"],banner_img:"/images/blog/ts-tricks-higher-order-components/higher-order-components-hero.jpg",heroImage:""},{id:4,slug:"ts-tricks-type-guards",title:"TS Tricks: Type Guards",date:"January 23, 2019",excerpt:"With everyone getting excited about Typescript I thought it'd be fun to do a walkthrough of one of my favorite features, type guards. These are type-safe functions that allow us to assert that an argu",content:`<p>With everyone getting excited about Typescript I thought it'd be fun to do a walkthrough of one of my favorite features, <strong>type guards. </strong>These are type-safe functions that allow us to assert that an argument matches a certain type. The best part is these work at runtime!</p><p>Let's start with a basic example below:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0e70421835c3fcc14c9151a8d34d1eed.js"><\/script><!--kg-card-end: html--><p>We've declared some interfaces here: <code>Person</code>, <code>Wizard</code>, and <code>Muggle</code>. <code>Wizard</code> and <code>Muggle</code> are both instances of <code>Person</code>, however they have an extra property. Pretty standard so far.</p><p>But now let's create a type guard!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9f079fa3524a9c9b0f78a0e82b6c2f23.js"><\/script><!--kg-card-end: html--><p>We now have functions called <code>isWizard</code> and <code>isMuggle</code>. These functions return a boolean at runtime, but in Typescript land they return <code>person is Wizard</code> or <code>person is Muggle</code>.  At compile time we'll get static type checking on our instances.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ea79189fee729dbfa5607ca4d1625a79.js"><\/script><!--kg-card-end: html--><p>These functions are all 100% type-safe. In fact, if we were to try to get spells off a <code>Muggle</code> we would get a type error.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f07d362eb60a5981a4404a77b4e8400f.js"><\/script><!--kg-card-end: html--><p>These functions always return the right thing because we have validation at both runtime and compile time. It's basically a free unit test! </p><p>Note: It's <em>one</em> free unit test per function, you should write others.</p><p>Let's make this more complicated now, let's extend <code>Wizard</code>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f2899f9720f277f1c54a45ec528bd78d.js"><\/script><!--kg-card-end: html--><p>Now each <code>Wizard</code> has a <code>house</code> property for a Hogwarts house. Just like before we could make new interfaces for each house.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/231f405cb2d526e232102dc1113054d5.js"><\/script><!--kg-card-end: html--><p>And once again, we can make simple type guards for each house. But this time we'll also reuse our <code>isWizard</code> guard. After all, only wizards can go to Hogwarts!</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b201ff33316b4dd51d0de74769f9f549.js"><\/script><!--kg-card-end: html--><p>Let's have some fun now, let's throw together a makeshift datastore and do some functional programming. If you're new to FP you can check out my <a href="http://matthewgerstman.com/functional-programming-fundamentals/">previous article here</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ee14f44a05c33d0b89d6ed45ccfd9e25.js"><\/script><!--kg-card-end: html--><p>Now we have an array of people. These people may or may not be Wizards and their Hogwarts houses vary. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/76ec3695c4cc6a5fb0bea0375f756f2a.js"><\/script><!--kg-card-end: html--><p>We can now make functions that <code>filter</code> over the list of people and return the ones that match a type.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ec5f1bf68038a83cf8dc1dbf835c4dc.js"><\/script><!--kg-card-end: html--><p>We can also combine these with a <code>map</code> to get data we care about.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/1f879a3c4b038e0875d6b7b09b2b1a20.js"><\/script><!--kg-card-end: html--><p>If these look like redux selectors, it's because this pattern is very commonly used to get data out of a typed redux store. If you want to know more about that, I wrote an article about <a href="http://matthewgerstman.com/redux-code-split-typecheck/">building a typed and code-split</a> redux store.</p>`,tags:["Tech","typescript"],banner_img:"/images/blog/ts-tricks-type-guards/type-guards-hero.jpg",heroImage:""},{id:5,slug:"ts-tricks-type-safe-reducers",title:"TS Tricks: Type-safe Reducers",date:"January 23, 2019",excerpt:" We're going to talk about how to build a type-safe reducer. Now, I use these for redux reducers, but these principles could apply to any function.",content:`<p>If you enjoyed my post on <a href="__GHOST_URL__/ts-tricks-type-guards/">type guards</a>, this one might tickle your fancy. We're going to talk about how to build a type-safe reducer. Now, I use these for redux reducers, but these principles could apply to any function.</p><p>Let's start by typing some actions.</p><!--kg-card-begin: html--><script src="https://gist.github.com/e44f3e0a9181aa543480a23b0c18409b.js"><\/script><!--kg-card-end: html--><p>You'll notice we've created two action types <code>MakeFriend</code> and <code>LearnSpell</code>. Each of these has a <code>type</code> and a <code>payload</code>. The <code>payload</code> of each however is a different shape. In this case it's an object with a single key, but you can imagine a much more complex scenario.</p><p>Now at the bottom we have a type called <code>WizardActions</code>. This is what's called a <em>discriminated union. </em>What this means is that we can take an argument of type <code>WizardActions</code> and it will be exactly <em>one</em> the types in the union. Let's look at some more code to elaborate.</p><!--kg-card-begin: html--><script src="https://gist.github.com/075e46c391c59d48b1ee8dc6977c9606.js"><\/script><!--kg-card-end: html--><p>We now have a reducer that takes a <code>state</code> and an <code>action</code> and returns the current state. Don't worry, we'll handle these actions later. Now the <code>action</code> argument is of type <code>WizardActions</code> which means it's going to be of type <code>MakeFriend</code> or of type <code>LearnSpell</code>.</p><p>Let's expand on our reducer and keep going.</p><!--kg-card-begin: html--><script src="https://gist.github.com/bfc303ff9ca54f1bdaba392a1e2d470b.js"><\/script><!--kg-card-end: html--><p>If you're used to redux, this should look familiar. We have a switch statement on the action type and we're handling each payload differently. For <code>MakeFriend</code> actions we append a friend to the list of friends. For <code>LearnSpell</code> actions we append a spell to the list of spells.</p><p>We actually don't need the default case because this is an exhaustive type-check, but it's still good to be defensive in case someone upstream uses an <code>any</code>. It's also necessary if we integrate this with redux.</p><p>How does this work? Well Typescript is pretty smart. It figures out on it's own that checking <code>type</code> will guarantee the payload is a certain shape. When we go to access that payload, it knows what properties to expect. If we attempted to check the <code>spell</code> of a <code>MakeFriend</code> action we would get a type error.</p><p>Let's have some fun now and call our reducer. First let's make some friends.</p><!--kg-card-begin: html--><script src="https://gist.github.com/a3829b4e82aa81ba62bf73c6fcda7c26.js"><\/script><!--kg-card-end: html--><p>This reducer works how we expect at runtime; Harry meets Ron, then he meets Hermione. Let's learn some spells.</p><!--kg-card-begin: html--><script src="https://gist.github.com/dec12d44c109ac5142d862c93eb5d2ba.js"><\/script><!--kg-card-end: html--><p>Now Harry learns <em>Expelliarmus </em>and <em>Expecto Patronum!</em></p><p>If you want to know more about typing redux, I wrote an article about <a href="http://matthewgerstman.com/redux-code-split-typecheck/">building a typed and code-split</a> redux store.</p>`,tags:["Tech","typescript","redux"],banner_img:"/images/blog/ts-tricks-type-safe-reducers/type-safe-reducers-hero.jpg",heroImage:""},{id:3,slug:"functional-programming-fundamentals",title:"Functional Programming Fundamentals",date:"January 21, 2019",excerpt:"In this post, we’ll discuss the fundamentals of Functional Programming and how they apply to modern JavaScript. We’ll also avoid unnecessary jargon like monads and functors and stick to concepts that ",content:`<p>In the past few years, React and Redux have generated a surge of Functional Programming which we often take for granted. However many of us never got a chance to learn the fundamentals.</p><p>In this post, we’ll cover the fundamentals of Functional Programming and how they apply to modern JavaScript. We’ll also avoid unnecessary jargon like monads and functors and stick to concepts that will make our code better.</p><p>If you'd like to learn all the unnecessary jargon, check out my other posts, <a href="__GHOST_URL__/what-the-functor/">What The Functor</a> and <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>. I also have an article on <a href="__GHOST_URL__/map-filter-reduce/">map, filter, and reduce.</a></p><p><em>Note: If you wanna see this post in talk form you can <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg">here</a>.</em></p><hr><h1 id="none-of-this-is-new">None of this is new</h1><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/functional-programming-fundamentals/fp-concepts-diagram.png" class="kg-image" alt loading="lazy"><figcaption>https://xkcd.com/297/</figcaption></figure><p>Before we dive into actual concepts, I want to lead by saying that none of this is new. Functional Programming as existed for over 60 years. <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a>, a popular FP programming language, was first developed in 1958.</p><p>What is new is the popularity of FP, which has surged in the past few years.</p><hr><h1 id="when-is-functional-programming-most-useful">When is Functional Programming most useful?</h1><p>Before we cover <em>what</em> functional programming is. I think it's helpful to define when we use it.</p><p>Functional Programming is most useful when we’re doing 1 to 1 data transformations.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e1a796c632887ce0c1004824553f9542.js"><\/script><!--kg-card-end: html--><p>In the code snipped above we have some types listed for a data store, a component, and a functional layer in between them.</p><p>This functional layer, <code>convertUserMapToArray</code>, converts the data from a format that makes sense to the store to a format that makes sense for the UI. This is what we're going to zero in on today.</p><hr><h1 id="what-is-functional-programming">What is Functional Programming?</h1><p><strong>Functional programming </strong>(often abbreviated FP) is the process of building software by composing <strong>pure functions. </strong>A <strong>pure function </strong>is a function which given the same inputs, always returns the same output, and has no side-effects. <a href="https://jetpacmonkey.github.io/fp-slides/" rel="noreferrer nofollow noopener">[9]</a></p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://www.dropbox.com/s/wj4p4s1bvvzc9o4/image%20(12).png?raw=1" class="kg-image" alt loading="lazy"><figcaption><a href="https://www.fpcomplete.com/blog/2017/04/pure-functional-programming" rel="noreferrer nofollow noopener">[3]</a></figcaption></figure><p>For example, we can trust that 2 + 2 is always 4 and 3 x 3 is always 9.</p><hr><h1 id="side-effects">Side Effects</h1><p>The no side-effects bit is particularly important, because this is what allows us to trust that a function will always behave the same in any environment. This will help with future concepts.</p><p>Now side-effects aren't inherently bad, but you should isolate them to parts of your codebase where you can easily identify them.</p><p>Let's take a look a some examples of side effects.</p><h2 id="mutation">Mutation</h2><p>Modifying the argument that’s passed in <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/73ef079b4f0d418938062615c601757f.js"><\/script><!--kg-card-end: html--><p>In this example above, we're changing the value of <code>arr</code> at the reference it lives at. As a result, we can't predict what this function will return at any point. What happens when <code>arr</code> runs out of values? </p><h2 id="shared-state">Shared State</h2><p>Using some form of global state <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/6d0ca6210f3dc13a7ff031b8ab88fb0d.js"><\/script><!--kg-card-end: html--><p>In this example, we can't predict what these functions will return because they depend on some external value. The order of the function calls will matter.</p><p>Furthermore what happens if someone else changes the value of <code>i</code>? Do you feel like googling what <code>string++</code> is? </p><h2 id="asynchronous-code">Asynchronous Code</h2><p>Code that doesn't execute immediately <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">[1]</a>.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4cdb5608124ab2e4ea3d1679ef89a63a.js"><\/script><!--kg-card-end: html--><p>This one deserves an extra mention because its a necessity. We have to do some things asynchronously. We have to hit APIs; we have to fetch data.</p><p>This brings me back to my earlier point. Side effects aren't inherently bad, but they should be properly isolated to make your code more predictable.</p><hr><h1 id="example-time">Example Time</h1><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/44a40f904f1e6016c9fd0682e9f60c5c.js"><\/script><!--kg-card-end: html--><p>Looking at the code above, we would expect it to produce the following:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b44e6a7990f0c96439b17ed94417c5d7.js"><\/script><!--kg-card-end: html--><p>Unfortunately, this isn't what we get. This is:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/00d4010a7a5a1dde0b4f6449f65bb69f.js"><\/script><!--kg-card-end: html--><p>What happened?</p><p>Well the first function, <code>clone</code> is a pure function and works as expected. It produced a new object at a new reference.</p><p><code>killParents</code> is not a pure function. It mutates the given argument and marks the parent as dead. It does however return the object so it <em>appears</em> we're getting a new copy.</p><p><code>addScar</code> really doesn't care. It mutates the original object, and then returns nothing, so <code>addScar(c)</code> returns <code>undefined</code> even though it also modifies <code>c</code>.</p><p>As a result <code>a</code> is pointing to the original reference, <code>b</code> and <code>c</code> are pointing to the cloned copy (with dead parents and a scar), and <code>d</code> is pointing to nothing.</p><hr><h1 id="declarative-and-imperative">Declarative and Imperative</h1><p><strong>Declarative code describes what it does.</strong></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2998e01ec2f15a2fe5d63ebcda6609ac.js"><\/script><!--kg-card-end: html--><h3 id="imperative-code-describes-how-it-does-it-">Imperative code describes how it does it.</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5a7da58e7074d3168dcb63d80da86e52.js"><\/script><!--kg-card-end: html--><p>Looking at the two code samples above, we can see a stark contrast. The top block is written using React and just says "we want a counter on the page." This code trusts React, the declarative library, to get it right.</p><p>The bottom block is using vanilla JS. It explicitly finds a DOM node and updates it. While this is fine for such a simple example this won't scale well. What happens when we want multiple counters in multiple locations? React is ready for that, with vanilla JS we have a lot of work to do.</p><p>Now it's worth noting that declarative code will always end up either compiling down to or being processed by something imperative. What do I mean by that? Well <em>something</em> has to do the DOM mutation. In this case that's React. Even with functional languages like Lisp or Haskell they <em>eventually</em> get compiled to imperative machine code.</p><h2 id="example">Example</h2><h3 id="imperative">Imperative</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/9fc233a7e7dcd880912a25f5fec938c0.js"><\/script><!--kg-card-end: html--><h3 id="declarative">Declarative</h3><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/f4b604ff5b55acda3300866195d4d0bf.js"><\/script><!--kg-card-end: html--><p>Now these two functions achieve the exact same thing. They take a list of <code>files</code> and return a dictionary of files where the key is <code>file.id</code>.</p><p>But the imperative one is sloppier. It's 8 lines of code instead of 3. It also leaves a lot of room for error.</p><p>What happens if a file doesn't have an <code>id</code>? What happens if we get our exit clause wrong? And fun fact, there are faster ways to do for loops (they're ugly), but we can trust lodash to do those under the hood.</p><hr><h1 id="functional-concepts">Functional Concepts</h1><p>It's now time to move onto functional concepts. Let's take these in pairs, the first two <strong>separation </strong>and <strong>composition.</strong></p><h2 id="separation">Separation</h2><blockquote><em>If you try to perform effects and logic at the same time, you may create hidden side effects which cause bugs in the logic. Keep functions small. Do one thing at a time, and do it well. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><h2 id="composition">Composition</h2><blockquote><em>Plan for composition. Write functions whose outputs will naturally work as inputs to many other functions. Keep function signatures as simple as possible. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><p>I pulled these quotes from an article called <em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd">The Dao of Immutability</a>. </em>What we're saying here is we want small functions that easily chain together to make larger ones. Let's take a look at an example:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/cb7622935829a6ce49badfdc1af3974e.js"><\/script><!--kg-card-end: html--><p>These three functions are all super simple. They take one argument and do a transformation on that argument. The first function sorts the list of files.</p><p>The second function is a <code>filter</code>.  <code>filter</code> is an FP term for filtering in, as opposed to filtering out. So this code returning an array of files who's extensions are PDFs.</p><p>The last function is just a <code>map</code>. <code>map</code> is another FP term, a 1:1 transformation over a list to a new version of that list. In this case we're looping over the list of files and returning the key <code>name</code> from each of them.</p><p>Now we can combine them together:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e49ca9b4e211c8eda34ea078ee88645f.js"><\/script><!--kg-card-end: html--><p>Now both of these functions are equivalent. They take a list of files, filter for pdfs, get their names, and return a sorted list of file names.</p><p><code>lodash.flow</code> does have some optimizations under the hood, but the second syntax might be more readable to you. Do whatever you think is best.</p><p>Let's move on to the next set of concepts.</p><h2 id="immutability">Immutability</h2><blockquote><em>The true constant is change. Mutation hides change. Hidden change manifests chaos. Therefore, the wise embrace history. </em><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener"><em>[4]</em></a></blockquote><h2 id="memoization">Memoization</h2><blockquote><em>Memoization is an optimization technique used primarily to speed up computer programs by storing the results of expensive function calls and returning the cached result when the same inputs occur again. </em><a href="https://en.wikipedia.org/wiki/Memoization" rel="noreferrer nofollow noopener"><em>[5]</em></a></blockquote><p>These pair really nicely. Immutability says we're never gonna mutate an argument only return a new one, and memoization allows us to remember outputs. Let's look at an example combining them.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/47fe2834b2da7bab88c705095db096de.js"><\/script><!--kg-card-end: html--><p>What's going on here? Well we have a function called <code>killSibling</code> (dark I know), that takes a wizard. It copies over the wizard and decrements the number of siblings that wizard has. Please ignore any glaring bugs here, I wanted to keep this simple.</p><p>We then pass <code>killSibling</code> to <code>lodash.memoize</code>, this produces a new function called <code>killSiblingMemoized</code>. Now when we call <code>killSiblingMemoized</code> on <code>ron</code>, it returns a brand new object. If we do a strict equality check it returns false. Of course it does, his brother died, he's a different person now.</p><p>Because we've memoized this, if we repeat this call to <code>killSiblingMemoized</code> we'll get the exact same version of <code>ron</code> we got after the first call.</p><p>We've covered a lot, now let's move onto some advanced topics.</p><hr><h1 id="higher-order-functions">Higher Order Functions</h1><p>In mathematics and computer science, a <strong>higher-order function </strong>is a function that does at least one of the following:</p><ul><li>takes one or more functions as arguments(i.e.,procedural parameters),</li><li>returns a function as its result. <a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="noreferrer nofollow noopener">[6]</a></li></ul><p>This seems much more intimidating than it actually is. In fact I bet you've written some of these before without realizing it.</p><h2 id="function-that-takes-a-function">Function that takes a function</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/ed44a6db0c48aaf8ca0da717154d4427.js"><\/script><!--kg-card-end: html--><p>These are just <strong>callbacks.</strong> In this case <code>then</code> is the higher order function that takes an anonymous function as its argument.</p><h2 id="function-that-returns-a-function">Function that returns a function</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3ccbd0608ba61e231d1a1858106d56d1.js"><\/script><!--kg-card-end: html--><p>Another thing you've probably done before, <strong>closures. </strong>In this case <code>counterGenerator</code> is the higher order function because it returns a function.</p><h2 id="function-that-takes-a-function-and-returns-a-function">Function that takes a function and returns a function</h2><p>Last, the final form, a function that does both. But you've already seen these.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/484c1aecc9e69ba39377afb4fd1f89d4.js"><\/script><!--kg-card-end: html--><p>Both <code>memoize</code> and <code>flow</code> were higher order functions that take a function (or several) as arguments and return a new function.</p><hr><h1 id="currying">Currying</h1><blockquote><em>Currying is the technique of translating the evaluation of a function that takes multiple arguments (or a tuple of arguments) into evaluating a sequence of functions, each with a single argument. </em><a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer nofollow noopener"><em>[7]</em></a></blockquote><p>This seems a little intimidating but I think an example will help.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/d31c96725e9d1cbc76abc3b4a89b00e8.js"><\/script><!--kg-card-end: html--><p>We have a function <code>sum</code> which takes arguments <code>a</code>, <code>b</code>, and <code>c</code>. When we pass <code>sum</code> to <code>lodash.curry</code> (a higher order function), it becomes a new function that keeps returning functions until <code>a</code>, <code>b</code>, and <code>c</code> have all been filled.</p><p>If we give it arguments <code>1,2,3</code> then it executes immediately and returns 6. If we give it just <code>2,3</code> it returns a new function waiting for one more argument.</p><p>This works for all permutations of arguments.</p><hr><h1 id="partial-application">Partial Application</h1><blockquote><em>Partial application (or partial function application) refers to the process of fixing a number of arguments to a function, producing another function of smaller arity. </em><a href="https://en.wikipedia.org/wiki/Partial_application" rel="noreferrer nofollow noopener"><em>[8]</em></a></blockquote><p><em>Note: Arity is just a term for the number of arguments a function takes. <a href="https://github.com/hemanth/functional-programming-jargon" rel="noreferrer nofollow noopener">[2]</a></em></p><p>With partial application, we can take a function and bind arguments to it. Let's take a look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/79394bccde6191763a31f48c32f47f39.js"><\/script><!--kg-card-end: html--><p>In this case we have a function called <code>learnSpell</code> that takes a <code>spell</code> and a <code>wizard</code>. If we pass these functions to <code>lodash.partial</code> with a spell, it will create a new function that teaches a wizard a predefined spell. In this case we can generate <code>learnExpelliarmus</code> and <code>learnExpectoPatronum</code>.</p><p>We actually saw some examples of this earlier when we were talking about composition. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/bfb76754ceff4093a1511e13cf06e127.js"><\/script><!--kg-card-end: html--><p>All of these functions are partially applying an argument to a lodash function. In fact it's functionally equivalent to this block.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2d72d421f0a81aecf3aa6399964ff7e5.js"><\/script><!--kg-card-end: html--><p>Much like with <code>flow</code> you should do what you're comfortable with here. Both methods works well.</p><hr><h1 id="what-are-we-optimizing-for">What Are We Optimizing For?</h1><ol><li>Make our code more readable</li><li>Make our code easier to reason about</li><li>Make our code easier to test</li><li>Make our users happier </li></ol><p>We're not trying to reduce lines of code.</p><hr><h1 id="thanks">Thanks</h1><p>Thanks so much for reading! If you'd like to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><p>If you'd like to learn all the scary jargon check out my other posts <a href="__GHOST_URL__/what-the-functor/">What The Functor</a>, <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>, and <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce.</a></p><hr><h1 id="references">References</h1><ol><li><a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0" rel="noreferrer nofollow noopener">https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0</a></li><li><a href="https://github.com/hemanth/functional-programming-jargon" rel="noreferrer nofollow noopener">https://github.com/hemanth/functional-programming-jargon</a></li><li><a href="https://www.fpcomplete.com/blog/2017/04/pure-functional-programming" rel="noreferrer nofollow noopener">https://www.fpcomplete.com/blog/2017/04/pure-functional-programming</a></li><li><a href="https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd" rel="noreferrer nofollow noopener">https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd</a></li><li><a href="https://en.wikipedia.org/wiki/Memoization" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Memoization</a></li><li><a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Higher-order_function</a></li><li><a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Currying</a></li><li><a href="https://en.wikipedia.org/wiki/Partial_application" rel="noreferrer nofollow noopener">https://en.wikipedia.org/wiki/Partial_application</a></li><li><a href="https://jetpacmonkey.github.io/fp-slides/" rel="noreferrer nofollow noopener">https://jetpacmonkey.github.io/fp-slides/</a></li><li><a href="https://xkcd.com/297/" rel="noreferrer nofollow noopener">https://xkcd.com/297/</a></li><li><a href="https://xkcd.com/1270/" rel="noreferrer nofollow noopener">https://xkcd.com/1270/</a></li><li><a href="https://xkcd.com/1312/" rel="noreferrer nofollow noopener">https://xkcd.com/1312/</a></li></ol><h1></h1>`,tags:["Tech","functional-programming"],banner_img:"/images/blog/functional-programming-fundamentals/functional-programming-hero.jpg",heroImage:""},{id:1,slug:"redux-code-split-typecheck",title:"Redux with Code-Splitting and Type Checking",date:"January 17, 2019",excerpt:"How do you code-split your store so you’re not serving unnecessary JavaScript on a single page? And while you’re working on code splitting, how do you get it to play nicely with TypeScript so that you",content:'<h1 id="before-we-get-started">Before We Get Started</h1><p>This article assumes a working knowledge of Redux, React, React-Redux, TypeScript, and uses a little bit of Lodash for convenience. If you’re not familiar with those subjects, you might need to do some Googling. You can find the final version of all the code <a href="https://github.com/matthew-gerstman/redux-codesplit-typechecl-example/tree/master" rel="noopener">here</a>. Also, follow me on Twitter <a href="https://twitter.com/matthewgerstman" rel="noopener">@MatthewGerstman.</a></p><h1 id="introduction">Introduction</h1><p>Redux has become the go-to state management system for React applications. While plenty of material exists about Redux best practices in Single Page Applications (SPAs), there isn’t a lot of material on putting together a store for a large, monolithic application.</p><p>What happens when you only need a few reducers on each page, but it could be any permutation of the total number of reducers you support? How do you code-split your store so you’re not serving unnecessary JavaScript on a single page? And while you’re working on code splitting, how do you get it to play nicely with TypeScript so that you can trust what’s going in and coming out of the store?</p><h1 id="the-architecture">The Architecture</h1><p>Before we dive into code, let’s outline the architecture we’re about to build.</p><p><strong>We need to create the store in such a way that we can register reducers asynchronously. </strong>This allows us to async load code associated with those reducers.</p><p><strong>We need to type the store in such a way that it knows about all possible reducers we can register. </strong>This allows us to ensure static typing of all components at runtime.</p><h1 id="creating-the-store">Creating the Store</h1><p>In order to code split, we need to instantiate the store in a way that allows us to register reducers after store creation. We start with the following code:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/2094e725ecbda01342b8ec973f240f58.js"><\/script><!--kg-card-end: html--><p>What’s going on here? We’re instantiating the store with the file and we’ve also exported two functions. One called <code>getStore</code>, which is simply a wrapper around the store and doesn’t need much further explanation, and <code>registerReducer</code>.</p><p><code>registerReducer</code> is the more interesting function. We maintain a map of existing reducers internal to the module and then replace add new ones as they come in. We then call <code><a href="https://redux.js.org/api/store#replaceReducer" rel="noopener">replaceReducer</a></code> on the store and replace it wholesale. <code><a href="https://redux.js.org/api/store#replaceReducer" rel="noopener">replaceReducer</a></code> is smart enough to maintain the state of the reducers that were previously there and fires an <code>INIT</code> action for the new ones to populate their default state.</p><p>This is what makes code-splitting possible. We don’t care when the reducer is registered and all of that code can be loaded after the store is created.</p><h1 id="type-safety">Type Safety</h1><p>Now let’s dig into what makes this type safe. Well, let’s dig into our <code>types.ts</code> file.</p><!--kg-card-begin: markdown--><script src="https://gist.github.com/matthew-gerstman/cacb21238ab545930a86b68aec0d9b71.js"><\/script><!--kg-card-end: markdown--><p>You’ll notice we import <code>MuggleNamespaceShape</code> and <code>WizardNamespaceShape</code>from elsewhere in the codebase. This is okay. Because these are type-only imports, most build systems won’t actually bundle them in when building packages. This is where the statically typed code splitting magic happens.</p><p>We then export types <code>StoreShape</code> and <code>ReducerMap</code>, which allow us to register all possible types on the actual state object in advance. Because we colocate the namespace keys in the types file, our developers can ensure that there are no key conflicts.</p><p>You’ll notice these types are both <code>Partial</code>, so how do we enforce that a reducer is actually registered? Well, we do that in the selector layer.</p><h1 id="selectors">Selectors</h1><p>Our selector layer is what ensures that we always have the reducers registered that we need. We can do this with a simple helper function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/0f5d8c39386d508f53cf4d27fd140619.js"><\/script><!--kg-card-end: html--><p>In short, <code>getStateAtNamespaceKey</code> complains <strong>very loudly </strong>if you attempt to access a namespace that hasn’t been registered yet. This is the only way we should access our data. As long as you call <code>registerReducer</code> in the same part of your tree as your <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#provider-store" rel="noopener">&lt;Provider /&gt;</a></code> component, your namespace should be registered by the time you get down to a <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options]" rel="noopener">connect</a></code>. We’ll elaborate on this in a moment.</p><h1 id="writing-actual-product-code">Writing Actual Product Code</h1><p>This is is all well and good, but let’s talk about what our product code looks like.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/39db0e7769d346bddf35d34f02e72770.js"><\/script><!--kg-card-end: html--><p>The code above is (hopefully) straightforward. We connect to the Redux store using <code>react-redux</code>and use the <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#provider-store" rel="noopener">&lt;Provider /</a>&gt;</code>and <code><a href="https://github.com/reduxjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" rel="noopener">connect</a></code>component/HOC respectively. We take a list of wizards and render them out to the screen, along with information about what spells they know and the status of their parents. Spoiler: We’re getting to a certain boy wizard with a lightning scar.</p><p>The two novel bits of code here are <code>getStoreForWizardApp</code>and <code>getWizards</code>. Let’s dig into them both.</p><h2 id="getstoreforwizardapp">getStoreForWizardApp</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fc3befd0a3e2230d0915bdeb44f00f61.js"><\/script><!--kg-card-end: html--><p>In the above code, you saw what we call the <code>registerReducer</code>and <code>getStore</code>functions that we declared before. We pass <code>registerReducer</code>a map with the key for the Wizard namespace and the Wizard reducer. Another important note: if we try to pass the wrong key or even the wrong reducer to <code>registerReducer</code>, type checking will complain about it.</p><p>One last but crucial bit. We wrap <code>getStoreForWizardApp</code> in <code><a href="https://lodash.com/docs/4.17.10#once" rel="noopener">lodash.once</a></code>. This ensures that we only register the reducer once and then always return the same instance of the store. While this isn’t <em>strictly</em>required, <code>replaceReducer</code>is an expensive noop, if called repeatedly.</p><h2 id="getwizards">getWizards</h2><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/fe22e16974ae0c706b085c33ae44ab65.js"><\/script><!--kg-card-end: html--><p>This one is much more straightforward. We call <code>getStateAtNamespaceKey</code>and spit out the wizards to the user.</p><h2 id="actions">Actions</h2><p>Sweet! We’ve set up the store, registered our reducer, and even built some components. Now let’s talk about how we can strongly type our actions. We do this in both the action layer and the reducer layer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4ce621d79bf0b86a31d9174634d89a47.js"><\/script><!--kg-card-end: html--><p>You’ll notice that we have two action types: <code>LearnSpellAction</code>and <code>KillParentsAction</code>. These actions each have a strongly-typed payload and their type is a predetermined string enum. We also export <code>WizardAction</code>, which is useful in our reducer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/7447b9ae50d93c4f6123a970bcb170b3.js"><\/script><!--kg-card-end: html--><p>This is one of those occasions where TypeScript is truly brilliant. Our given action type is any of the <code>WizardActionTypes</code>. Because each of them has their own defined <code>type</code>property, our switch statement will actually strongly type <code>action.payload</code>after we determine its type. If we were to put any invalid code here, TypeScript would complain.</p><h2 id="store-hydration">Store Hydration</h2><p>The last question to answer here is: “How do we get initial data into the store?” That’s done through a process called store hydration. What this means is that we’re going to dispatch an action that sets the state. Let’s take a look at this code.</p><p>First, we update our <code>actions.ts</code>file as shown.</p><!--kg-card-begin: markdown--><script src="https://gist.github.com/matthew-gerstman/81a26bbfbe2ffd616dd7a836ef2c3198.js"><\/script><!--kg-card-end: markdown--><p>Second, we add another switch statement to our reducer.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/74cb2c46fabadca1a7d8d5be996aada8.js"><\/script><!--kg-card-end: html--><p>Third, we need to make an action creator.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/e544e1e35f1e88c6c011a832910479a4.js"><\/script><!--kg-card-end: html--><p>Finally, we dispatch the hydration action from our store creation function.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/97162d4992692dd6daa90bc6f0ed3d93.js"><\/script><!--kg-card-end: html--><p>The <code><a href="https://lodash.com/docs/4.17.10#once" rel="noopener">lodash.once</a></code>is now extra useful because we will only ever populate the store once.</p><h1 id="conclusions">Conclusions</h1><p>I hope this article helped you get started with Redux. At compile time, our store is strongly typed and has knowledge of the entire system. At runtime, we can code split however we’d like.</p><h1 id="glossary-of-functions">Glossary of Functions</h1><p>This is a list of the core functions and types and the roles they serve in this architecture.</p><h2 id="types">Types</h2><ul><li><strong>NamespaceKey </strong>— A key for a reducer or namespace within the state object.</li><li><strong>ReducerMap </strong>— Object of all possible keys we can have on our store and their matching reducers. Is declared as a partial because it is not guaranteed that any given namespace is on the store.</li><li><strong>StoreShape </strong>— Object of all possible keys we can have on our store and their state shapes. Is declared as a partial because it is not guaranteed that any given namespace is on the store.</li></ul><h2 id="functions">Functions</h2><ul><li><strong>hydrateWizardNamespace </strong>— Product layer function that provides initial state for the wizard namespace after the reducer is registered.</li><li><strong>getStoreForWizardApp </strong>— Product layer function that registers the “wizard” namespace within the store.</li><li><strong>getStateAtNamespaceKey </strong>— Function that grabs a namespace from the state object and fails quickly if that namespace is unregistered. Used to make our selectors type safe.</li><li><strong>registerReducer</strong> — Function that injects a reducer into the store after page load. Ensures that we only register known reducers at the typing layer.</li></ul><h1 id="thanks">Thanks</h1><p>Publishing an article like this takes a village. I want thank a whole bunch of people for their contributions.</p><p><a href="https://twitter.com/acemarke" rel="noopener">@acemarke</a> — For maintaining Redux and inspiring me to write this article.</p><p><a href="https://twitter.com/brianlink" rel="noopener">@brianlink</a> — Typo patrol.</p><p><a href="https://twitter.com/donavon" rel="noopener">@donavon</a> — For adding and removing commas like a boss.</p><p><a href="https://twitter.com/goingglacial" rel="noopener">@goingglacial</a> — For a thorough code review before merging the source this is based on.</p><p><a href="https://twitter.com/hswolff" rel="noopener">@hswolff</a> — For teaching me Redux in the first place.</p><p><a href="https://twitter.com/jetpacmonkey" rel="noopener">@jetpacmonkey</a> — For finding a bug in this article.</p><p><a href="https://twitter.com/peterpme" rel="noopener">@peterpme</a> — For code reviewing the article.</p><p><a href="https://twitter.com/swyx" rel="noopener">@swyx</a> — For providing technical feedback on this article.</p><p>Andrew H — For article feedback</p><p>Justin K — For copy editing and fixing my atrocious grammar.</p><p>Matt S — For relevant life advice.</p><p>Yoeun P — For pair programming with me when I wrote the source this is based on.</p><h1></h1>',tags:["Tech","redux","typescript","code-splitting"],banner_img:"/images/blog/hero-mountain-lake.jpg"},{id:14,slug:"hello-there",title:"Hello There",date:"January 15, 2019",excerpt:"I have a habit of rambling on the internet and thought it'd be nice to consolidate all these ramblings into one place.",content:`<p>My name is Matthew Gerstman, I'm a software engineer with a bunch of hobbies. What hobbies you ask? Well, I see a lot of theater, give tech talks regularly, and travel so much I'm writing this from an airplane. I'm also a Harry Potter enthusiast, long time Green Day listener, and I adore New York City.</p><p>I have a habit of rambling on the internet and thought it'd be nice to consolidate all these ramblings into one place. </p><h1 id="theater">Theater</h1><p>Last year I saw about 50 shows. On Broadway, off Broadway, everything from tiny one-person shows to Hamilton in London. If the show has something that looks like a Playbill I'll probably get around to seeing it. In fact here's a gif of everything I have that looks like a Playbill from 2018.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/hello-there/hello-there-kenobi.gif" class="kg-image" alt loading="lazy"><figcaption>For those wondering, I use this <a href="https://amzn.to/2DgdXok">playbill binder</a> with <a href="https://amzn.to/2suwkzL">these sheets</a>.</figcaption></figure><p>I'm hoping to do reviews of the shows I see on here, and if a miracle occurs, get asked to write them.</p><h1 id="tech">Tech</h1><p>By day I'm a software engineer at Dropbox. Now would be a good time to note opinions on this blog are mine, not theirs. I also spend a lot of time in the greater JavaScript community.</p><p>I'm hella active on Twitter and enjoy external validation quite a bit. Please follow me <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman. </a></p><figure class="kg-card kg-embed-card"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">This guy says follow me on Twitter. <a href="https://twitter.com/ken_wheeler?ref_src=twsrc%5Etfw">@ken_wheeler</a> <a href="https://t.co/lLX3nAw2M6">pic.twitter.com/lLX3nAw2M6</a></p>&mdash; Matthew Gerstman (Slytherin) (@MatthewGerstman) <a href="https://twitter.com/MatthewGerstman/status/1075207374552662016?ref_src=twsrc%5Etfw">December 19, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
</figure><p>I also give tech talks on everything ranging from <a href="https://www.youtube.com/watch?v=m1XdasrstCc&amp;t=2s">salary negotiation</a> to <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg&amp;t=534s">functional programming</a>. Last year I got the opportunity to speak at <a href="https://www.youtube.com/watch?v=Pjc1AnBLG8c">ReactNext in Tel Aviv</a> and this summer you can catch me at React Norway.</p><p>One more thing! I'm a co-host on the popular podcast <a href="https://theconsolelog.com">The Console Log!</a> Every week we talk about the latest in the JavaScript world and make some pretty great puns (if I do say so myself).</p><h1 id="travel">Travel</h1><p>I imagine I'll blog the least about this but Theater, Tech, and Travel sounds much better with the third T. Or maybe this will be the unexpected star of the blog. Anything is possible on the internet!</p><p>I get on an airplane about 15 times a year and go somewhere. Most of the time its San Francisco (work) or Florida (family), but I'm known to pick random spots in the US. Once or twice a year I feel adventurous and hop over the Atlantic or Pacific. This year it might be more.</p><p>Being on a plane inspired me to write this blog so really it's earned this mention.</p><h1 id="harry-potter">Harry Potter</h1><p>Harry Potter has had a profound impact on my life. So much that I've been sitting on a very personal letter to JK Rowling I've never had the courage to send. One day I'll get to it.</p><p>Aside from that I collect copies of the series, I have about 90 books these days. I've also seen <a href="https://amzn.to/2suNvRI">Puffs</a> 10ish times, and even <em>liked</em> Cursed Child when I saw it on stage. MuggleNet is a long standing member of my bookmarks bar and I find nothing more soothing than the voice of Jim Dale reading the series.</p><p>Here's a picture of me at Hogwarts in Japan.</p><figure class="kg-card kg-image-card"><img src="/images/blog/hello-there/matthew-speaking-1.jpg" class="kg-image" alt loading="lazy"></figure><h1 id="green-day">Green Day</h1><p>When I was eight years old I decided Green Day was going to be my favorite band. I'm very good at keeping my commitments. 20 years later and nothing makes me happier than hearing Green Day when I'm not expecting it.</p><p>I actually love music as a whole though. My record collection is around 250 records now, and my day to day listening is mostly <a href="https://www.amazon.com/Frank-Turner/e/B001LHXD5K/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=754e625d523c4b3cbad801b972e21d7e&amp;camp=1789&amp;creative=9325">Frank Turner</a>, <a href="https://www.amazon.com/Taylor-Swift/e/B0017PE36O/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=44320b27d000550fcda6add6243d1363&amp;camp=1789&amp;creative=9325">Taylor Swift</a>, and showtunes.</p><p>Last year I met Billie Joe Armstrong for the first time; we made extremely awkward small talk.</p><figure class="kg-card kg-image-card"><img src="/images/blog/hello-there/matthew-speaking-2.jpg" class="kg-image" alt loading="lazy"></figure><p>Surprisingly less awkward, dancing on stage with <a href="https://www.amazon.com/Frank-Turner/e/B001LHXD5K/digital/ref=ntt_mp3_rdr?_encoding=UTF8&amp;amp;sn=d&amp;_encoding=UTF8&amp;tag=mtg06-20&amp;linkCode=ur2&amp;linkId=754e625d523c4b3cbad801b972e21d7e&amp;camp=1789&amp;creative=9325">Frank Turner.</a></p><figure class="kg-card kg-embed-card"><iframe width="459" height="344" src="https://www.youtube.com/embed/HlLkJ_YDFkU?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><h1 id="new-york">New York</h1><p>Finally, I'd be remise not to mention that I adore New York City. I moved here in December of 2015 and I immediately realized I was home. I'm never moving, please don't ask me to consider it.</p><h1 id="thanks-">Thanks!</h1><p>I'm shocked anyone made it this far in a self-indulgent blog post where I talk about all the things I love, but thanks for reading. I hope to start blogging regularly about all the things I mentioned above and we'll see what comes of it. ‌‌</p>`,tags:["Tech","Theater","Travel"],banner_img:"/images/blog/hello-there/bay-bridge-sf.jpg",heroImage:""},{id:18,slug:"es-everything",title:"ES-Everything: an ECMA Explainer",date:"January 06, 2020",excerpt:`Whats ES6? What about ESNext? TC39? ECMA? Transpilers? 

There's an entire ecosystem around shipping new-ish JavaScript to older browsers and how we decide what features get added to JavaScript in the`,content:`<p>You've done it, you've built your first web application. It does everything you expect. You've tested it rigorously. It works everywhere, your Macbook, your iPhone, your friend's android. You're so proud of yourself, you send it to your parents; they tell you it's just a blank page.</p><p>You poke around and realize they're still using that Dell desktop they bought in 2006. It's running Windows 7. They're using Internet Explorer 10. Your web-app doesn't work on this machine.</p><p>So you Google how to make your app work in IE 10, or 11, or whatever. You're quickly flooded with acronyms and terms you've never heard before ES5, ES6, ESNext, ES2020, TC39, ECMA. What's a transpiler? People are debating about polyfills and ponyfills; is there a difference?</p><p>If you're overwhelmed, that's okay, it's a lot. This article will attempt to cover the entire ecosystem around shipping new-ish JavaScript to older browsers and how the community decides what features get added to JavaScript in the first place; let's dive in.</p><h1 id="let-s-talk-about-ecma">Let's Talk About ECMA</h1><p>ECMA is the European Computer Manufacturers Association. They have many committees that handle many things. One of these committees is TC39 or Technical Committee 39. They maintain a specification, or spec, called ECMAScript. Whenever you hear ES5, ES6, or ESAnything, the ES refers to ECMAScript.</p><p>ECMAScript is the spec which JavaScript is built upon. It's a formal in-writing agreement of how JavaScript should work. Each browser has their own implementation of JavaScript but they all conform to the same spec (or they do their best). This is why your code may run slightly differently in Safari or Firefox or Chrome. The browser vendors are implementing an engine that takes your JavaScript and runs it on the machine.</p><h2 id="es5-es6-esnext">ES5, ES6, ESNext</h2><p>Now, this underlying spec is constantly changing. JavaScript gets new features and browsers evolve. In 2009, ES5 was standardized across browsers. This was the largest release for a long time. If you've ever read <a href="https://amzn.to/2MWOggZ">JavaScript: The Good Parts</a> it was based on ES5. </p><p>It wasn't until 2015 that ES6 was released with major changes to the language. Some of the bigger features in ES6 included Promises, Arrow Functions, and Classes.</p><p>ES6 was a massive release. It was so big, and took so long, that TC39 decided to stop numbering ECMAScript altogether. At this point they decided to rebrand ES6 as ES2015 and brand all future versions by year. Examples include ES2016, ES2017, etc.</p><p>They also introduced the concept of ESNext, a living breathing version of the latest JavaScript. ESNext includes all the features that have been formally agreed upon by the committee.</p><h3 id="a-note-on-es6">A Note On ES6</h3><p>You may be thinking: I thought ES6 was the latest version of JavaScript. This is a misnomer. For a number of reasons, people often refer to anything after ES5 as ES6. This is mostly due to the fact that ES6 was a very large release, and the last one to have a simple version number.</p><p>If you hear someone say ES6, they likely mean ESNext.</p><h2 id="tc39">TC39</h2><p>Technical Committee 39 meet semi-regularly, usually on the West Coast of the United States, but sometimes elsewhere. You can see all their meeting agendas <a href="https://github.com/tc39/agendas">here</a>. They're made up of individuals from major tech companies who are members of ECMA. For most large companies, for example Google or Facebook, it costs about $70,000 for membership. There are significant discounts for very small or non-profit companies. You can see the full list of members <a href="https://www.ecma-international.org/memento/members.htm">here</a>.</p><h2 id="new-javascript-features">New JavaScript Features</h2><p>Anybody can submit a proposal for a new JavaScript feature, but every proposal eventually needs a "champion" from the committee in order to be adopted. Proposals are submitted by opening a pull request on the <a href="https://github.com/tc39/proposals">proposals repo</a>.</p><p>Features go through stages from 0 to 4. At the end of the year, all features in Stage 4 are considered in that year's version of ECMAScript. You can see the full list of finished proposals <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">here</a>.</p><h3 id="stage-0-strawperson">Stage 0: Strawperson</h3><p>These are strawperson proposals. This is the idea stage. The only requirement to get to Stage 0 is the initial PR.</p><h3 id="stage-1-proposal">Stage 1: Proposal</h3><p>This is the stage where the committee agrees they will spend time discussing on the feature. They assign a champion to the proposal, determine the high level API, and potentially implement a demo. It is expected that a feature will spend a good chunk of time being worked on in Stage 1 before reaching Stage 2.</p><h3 id="stage-2-draft">Stage 2: Draft</h3><p>At this point, a there should be a formal specification for the feature. It may still have lots of TODOs and room for improvement, but it's mostly there. If a significant issue is discovered, the feature may have to go back to Stage 1.</p><h3 id="stage-3-candidate">Stage 3: Candidate</h3><p>This is when the feature is mostly complete. The committee agrees that they are unable to find any issues until someone attempts to implement the feature. If a browser vendor attempts to implement the feature and finds an issue, the feature may go back to Stage 2.</p><h3 id="stage-4-finished">Stage 4: Finished</h3><p>A feature is considered done when it's been implemented in not one, but two different browsers. For example, if a feature becomes stable in both Firefox and Chrome, it's considered finished. The committee will then merge in a pull request to the ECMAScript spec.</p><p>The full ECMAScript spec is available <a href="https://tc39.es/ecma262/">here</a>.</p><h1 id="running-your-code">Running Your Code</h1><p>We often want to use the latest features in our code, but older browsers won't support them. To do this, we use transpilers and polyfills.</p><h2 id="transpilers">Transpilers</h2><p>A transpiler is a type of compiler that takes source code written in a high level language and produces equivalent source code in another high level language. This is in contrast to a compiler, which takes source code written in a high level language and compiles it to a low level language like assembly.</p><p>Transpilers can also be used to convert from one version of a language to another one. This is how we can write JavaScript using the newest features but still execute our code in browsers that don't support them natively.</p><p>For example we can compile an arrow function to a traditional one.</p><pre><code class="language-javascript">const func = () =&gt; {
  console.log('foo');
}

const func = function () {
  console.log('foo');
}
</code></pre><h3 id="babel">Babel</h3><p>One of the most popular transpilers is <a href="https://babeljs.io">Babel</a>. Babel is the go-to test environment for early JavaScript features. It does this by implementing a rich plugin architecture that allows developers to test syntax while it is still in it's earliest stages.</p><h3 id="typescript">TypeScript</h3><p>TypeScript goes a step further and adds type-checking to JavaScript. As part of this, it offers a built in transpiler to build your ESNext code for older browsers. While Babel has the ecosystem to support Stage 2 and below features, Typescript does not.</p><p>Sometimes developers will chose to use both so they can get type-checking and the latest features.</p><h3 id="targets">Targets</h3><p>When building our code we'll pick a target version of JavaScript. This is most commonly ES5 however we could compile to any arbitrary version of the ECMAScript spec. The tradeoff is that older targets generate more source code, but newer targets will run in fewer browsers.</p><p>The reason we often want to generate less source is performance. Fewer bytes means less to send over the network, less to parse, and less to execute.</p><h2 id="polyfills">Polyfills</h2><p>Transpiling is enough for syntax changes, but what about new functions and classes? That's where polyfills come in. A polyfill is the implementation of a newer feature written in an older version of ES. The polyfill usually check if the browser has it's own version of the feature and if not inject it.</p><p>For example a fetch polyfill might look like this:</p><pre><code class="language-javascript">if (window.fetch === undefined) {
  window.fetch = function() {
   // Implementation of fetch here
  }
}
</code></pre><p>Babel and Typescript will support a configuration to automatically include any necessary polyfills in your source code.</p><p>Under the hood, most most polyfills rely on a project called <a href="https://github.com/zloirock/core-js">core-js</a>.</p><h3 id="ponyfill">Ponyfill</h3><p>While polyfills automatically inject an implementation of the feature, ponyfills will treat them as any other dependency. There are a few advantages to this. Ponyfills don't polute the global scope. In addition, the implementation of a feature may vary between browsers and the polyfill. This allows engineers to use a consistent implementation of a feature.</p><p>For example a fetch ponyfill might look like this:</p><pre><code class="language-javascript">const fetch = window.fetch || require('fetch-ponyfill');
</code></pre><p>It is commonly debated which approach is better. I'll leave that exercise up to the reader.</p><h2 id="where-you-run-your-code-matters">Where You Run Your Code Matters</h2><p>When deciding what version of ES to target and what polyfills to include, it's important to consider where your code is running.</p><p>We often focus on which browsers and which versions of those browsers we support, but JavaScript can run many places. For example, if you're building an Electron application, you may not need to transpile/polyfill at all. The same thing applies to node applications. If you're building for one specific environment, you only need to worry about how your code runs in that environment.</p><h1 id="thanks">Thanks</h1><p>I hope this post was useful! Follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> for more content like this.</p><h1 id="references">References</h1><ul><li><a href="https://www.ecma-international.org/memento/tc39-m.htm">https://www.ecma-international.org/memento/tc39-m.htm</a></li><li><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">https://github.com/tc39/proposals/blob/master/finished-proposals.md</a></li><li><a href="https://en.wikipedia.org/wiki/ECMAScript#ES2019">https://en.wikipedia.org/wiki/ECMAScript</a></li><li><a href="https://tc39.es/process-document/">https://tc39.es/process-document/</a></li><li><a href="https://en.wikipedia.org/wiki/Source-to-source_compiler">https://en.wikipedia.org/wiki/Source-to-source_compiler</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill">https://developer.mozilla.org/en-US/docs/Glossary/Polyfill</a></li></ul>`,tags:["javascript","tc39","ecmascript","Tech"],banner_img:"/images/blog/hero-mountain-sunset.jpg"},{id:20,slug:"all-in-on-homekit",title:"All in on HomeKit",date:"January 04, 2022",excerpt:`I've shared a lot of pictures of my apartment, but I haven't spent a whole lot of time talking about how automated this place is. I put a lot of work into automating it and thought I'd do a writeup.

`,content:`<p>I've shared a lot of pictures of my apartment, but I haven't spent a whole lot of time talking about how automated this place is. I put a lot of work into automating it and thought I'd do a writeup. Also all of the amazon links are affiliate links so I might make a dollar if you buy something.</p><p>I'm an Apple Enthusiast and I consistently opt in to whatever they provide in their ecosystem. We're up to two HomePod Classics, four HomePod Minis, multiple Macs, and several dozen iPods. Also the latest iPhone, iPad Pro, and the Apple Watch.</p><p>To put simply, if Apple has a product category, I've opted in. It's no surprise I went with HomeKit for my home operating system. HomeKit presents different challenges from the Alexa and Google ecosystems. For example, HomeKit requires developers register with Apple and meet certain hardware requirements on their products. As a result there are significantly fewer accessories that work with HomeKit. I do however find they generally perform better than non-HomeKit equivalents I've set up in other homes.</p><h2 id="layout">Layout</h2><p>We've got three main rooms in the apartment: The Office (or Guest Room), The Living Room, and The Bedroom. The bulk of the equipment is in The Office, so we'll start there.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-setup.jpg" class="kg-image" alt loading="lazy" width="775" height="595"><figcaption><em>Marked up floorplan I used when planning.</em></figcaption></figure><h1 id="the-office">The Office</h1><p>The Office or The Guest Room, is where I spend the bulk of my day working from home. I picked green because it's a color that helps me stay awake and focus. Also it goes nicely with plants.</p><p>My work machine is a 2020 16" intel MacBook, a <a href="https://amzn.to/3EOlw2c">Dell 27" monitor</a>, and a <a href="https://amzn.to/337e992">Dell 24" monitor</a> vertically oriented. I also have my personal iMac which is a plex server for the apartment. Behind the iMac I use a <a href="https://amzn.to/3zq4HJK">variety</a> of <a href="https://amzn.to/3HE2a1k">cable management</a> boxes to hide the wires and a pair of <a href="https://amzn.to/3eOib8P">Philips Hue Play Bars</a> and <a href="https://amzn.to/3ztY9dk">Philips Hue Blooms</a> for lighting. Below is what it looks like on an average day.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-1.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Office Doorway</figcaption></figure><p>There's a pair of HomePod Minis as a studio pair I can use with either of the Macs. I also use my Airpods Max while working and for conference calls. </p><p>Behind the closet I've got a FreeNas, networking equipment, and hubs for the hue lights, shades, and overhead lights. I recently added a smart power switch so I can power cycle these from my phone. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-app-1.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667"><figcaption>Server Closet</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-2.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Office - Bed and Bookshelf</figcaption></figure><p>This room has a few lamps, most notably the <a href="https://amzn.to/3GbaPbD">hydra lamp</a>, and the <a href="https://amzn.to/3eSkUOA">hotel style usb lamp</a>. I also have a <a href="https://amzn.to/3mVrwQu">charging station</a> at the bed for guests. The various lamps in the room are all <a href="https://amzn.to/3t1W7Qe">Philips Hue White bulbs</a> with <a href="https://amzn.to/3pVRvcG">VOCOLinc smart plugs</a> for the bookshelf lights and lava lamp. </p><h2 id="networking">Networking</h2><p>The apartment network is powered by a Ubiquity Dream Machine, a ton of <a href="https://amzn.to/3F7jjzb">UniFi switches</a>, and a few <a href="https://amzn.to/3eVBvRi">WiFi 6 access points</a>. The Dream Machine lives behind the iMac with the bulk of the switches in the server closet. I also have a <a href="https://amzn.to/3mVla3A">Raspberry Pi</a> running <a href="https://pi-hole.net">Pi-hole</a> as a DNS level ad-blocker.</p><p>I drilled a small hole in the walls against the Living Room and Bedroom to send an ethernet cable to the other room.</p><h1 id="the-living-room">The Living Room</h1><p>The Living Room is where I watch TV with the cats or hangout with friends I'm entertaining. <a href="https://amzn.to/3mRqtBd">AppleTV</a> was a no-brainer. The display is a <a href="https://amzn.to/3JKwc5t">LG GX65 OLED</a>. Theres a <a href="https://amzn.to/3JH08zz">Philips Hue Gradient Strip</a> along with <a href="https://amzn.to/3qIxSUu">two Play Bar lights</a> synced with the <a href="https://amzn.to/3pSpZws">Hue Play Sync Box</a>.</p><p>This is hooked up to a <a href="https://amzn.to/3pQ0j3z">Sonos Arc</a>, Two Rear <a href="https://amzn.to/3EUDxMl">Sonos One SLs</a>, and a <a href="https://amzn.to/3zr4PIT">Sonos Sub</a>. Each of these is connected via ethernet using wires running under and behind the furniture. I use these <a href="https://amzn.to/3pU8UCh">cord protectors</a> to keep the cables neat and protected from the cats. I have <a href="https://amzn.to/3r7548z">this charging station</a> on the end table, along with chargers next to the AC unit for on-couch charging.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-3.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Living Room</figcaption></figure><h2 id="lighting">Lighting</h2><p>Separate from the television lighting system, every light in the apartment is smart. </p><p>Most of the Living Room bulbs are <a href="https://amzn.to/3t1W7Qe">Philips Hue White bulbs</a>, however the <a href="https://amzn.to/32ZhBSU">couch lamps</a> are using <a href="https://amzn.to/3pSLXPS">Philips Hue Color bulbs</a> for fun scenes. I tried syncing these with the TV but it ended up being more annoying than fun.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-4.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Living Room - Behind the couch</figcaption></figure><p>In the dining room I have this <a href="https://amzn.to/334npKL">larger lamp</a> along with the three bulb unit I got at a local hardware store. The overhead lights are using <a href="https://amzn.to/3JBbDsl">Caseta Lutron</a> switches. The water fountain for the cats is hooked up to a <a href="https://amzn.to/3nimFJB">VOCOLinc smart plug</a> so I can turn it on/off with the lights.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-5.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Dining Room</figcaption></figure><h1 id="kitchen">Kitchen</h1><p>The kitchen has a surprising amount of tech packed into it. Under the cabinets are <a href="https://amzn.to/3EPLsdD">Philips Hue lightstrips</a> that can change color. I mostly use these to light the countertops. I attempted to use these for the office bookshelf but it was a nightmare splicing them and I went with a cheaper IKEA solution. There's a HomePod mini in the kitchen that I use mostly for siri but occasionally for music. </p><p>I also have a <a href="https://amzn.to/31r0J77">GE Opal ice maker</a> that I adore. It's a nightmare to clean though.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-6.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Kitchen</figcaption></figure><h1 id="the-entryway">The Entryway</h1><p>The first thing you see when you walk into the apartment is a television hooked up to a raspberry pi. I use <a href="https://dakboard.com/site">DakboardOS</a> to power a display that shows me my daily calendar along with updating news. This is exceptionally useful when I'm pacing between my office and the kitchen during the work day.</p><p>Most of the panels were available out of the box, but I had to roll my own <a href="http://github.com/matthew-gerstman/tweetonescreen">tweet visualizer</a> in the lower left hand corner.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-app-2.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667"><figcaption>Entryway Dakboard</figcaption></figure><p>I also have <a href="https://amzn.to/3pWhdxm">Eufy Pan and Tilt cameras</a> here and in every other room so I can watch the cats or check on the apartment when I'm out of town. </p><h2 id="the-bedroom">The Bedroom</h2><p>In the the bedroom I took things up a notch with <a href="https://amzn.to/3324wYS">White Ambiance</a> bulbs. I like these because the temperature is warmer at night and easier on the eyes. The television is connected to an Apple TV with two HomePod Classics in a stereo pair. I connected my vintage turntable to the Homepods with <a href="https://amzn.to/3zshGuH">this adapter</a>, a <a href="https://amzn.to/3pSkOfY">Behringer USB preamp</a> and <a href="https://www.airchordapp.com">AirChord</a> running on my old iPad.</p><p>There are a pair of <a href="https://amzn.to/3sYnMkX">Philips Hue Edison Bulbs</a> in <a href="https://amzn.to/3pUGDvC">these lamps</a>. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-7.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Bedroom</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-8.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Bedroom Media</figcaption></figure><h1 id="scenes">Scenes</h1><p>All this integration means I can do a lot of nifty things with scenes. First, theres some simple automation. The couch lamps and the steel lamp both turn off at 5 PM every day. The bedroom shade automatically lifts at 7:30 AM on weekdays which abruptly informs the cats its time to wake me up.</p><p>The AC is controlled with a <a href="https://amzn.to/3FV8AZv">Sensibo Air</a> to make the window units smart.</p><p>The scenes I use every day are Good Morning and Good Night. Good Morning opens every shade, turns on every light to 100%, and boots the entryway TV up. Good Night turns off every light. There's another scene: Make it Dark, that turns off every light and closes every shade. </p><p>Each room has a <a href="https://amzn.to/31oY8dQ">hue dimmer switch</a> that controls the whole room. I made two scenes for each room, Room One and Room Zero. Those turn off every light and control the shades. In between those I have scenes that brings an assorted set of lights on. For example in the kitchen I have a scene that only turns on the countertop lights.</p><p>My favorite scene is Lullaby which turns off my TV, closes my shades, and begins playing a playlist in the bedroom currently composed of The Postal Service, Taylor Swift, The Postal Service again, and Billie Eilish. There's also Nap Time which does all this and turns off the bedroom lights.</p><p>In the same vein, Nightlight turns on a dim light in the master bathroom, kitchen, and living room. </p><p>For anything Marvel, I put on TV Time which closes the shades and turns off any light that I can see from the Living Room, including the entryway TV. It's counterspell is Chill, which opens all shades and turns every light in the apartment to 50%. I used <a href="http://leviosashades.com">Leviosa Shades</a> which integrate with HomeKit, although I wish the bridge was more reliable.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-1.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-2.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot - Bedroom</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-3.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot - Kitchen</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-4.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot - Living Room</figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-5.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot - Office</figcaption></figure><h1 id="speakers-and-music">Speakers and Music</h1><p>I've already touched on the speakers but I'll reiterate and be a bit more thorough this time. The Office has a paired set of HomePod mini's that I use with the computers. The bookshelf has a <a href="https://amzn.to/31tr0lo">Sonos Five</a> connected to a <a href="https://amzn.to/3mZjuGj">Fluance RT85</a> turntable for vinyl. This can stream vinyl throughout the entire apartment.</p><p>The Bedroom has a pair of HomePod Classics for primary listening. The turntable is a vintage Sanyo with an <a href="https://amzn.to/331ORsA">Ortofon Blue cartridge</a>. I like to read and listen to records on this setup. I occasionally put the <a href="https://amzn.to/3pSzN9K">Sonos roam</a> in here if I'm doing a project where I'm running between rooms and want to listen to vinyl.</p><p>I've also got one of two iPod displays in the Bedroom. I love iPods, they were iconic during my formative years and are a form of Apple Nostalgia for me. The iPod Mini display includes one of each color with a different artist on each. They are from left to right Green Day, Taylor Swift, Coldplay, Blink 182, and Frank Turner. They also work! I stream them to an old Zenith radio using an iTrip.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-device-setup.jpeg" class="kg-image" alt loading="lazy" width="2000" height="2667"><figcaption>iPod Mini Display</figcaption></figure><p>The Living Room is where the magic happens. The main system is a <a href="https://amzn.to/3pQ0j3z">Sonos Arc</a>, two rear <a href="https://amzn.to/3EUDxMl">Sonos One SLs</a>, and a <a href="https://amzn.to/3zr4PIT">Sonos Sub</a>. This sounds fantastic for movies and is also a great party system.</p><p>To the right I have the iPod Classic display. This contains each generation of iPod and the first five generations of iPhone. All of these devices work and are loaded with content.</p><p>There's also an iPod Hi-Fi that can accept any of the iPods with dock connectors and play their music. Inside the box is an Airport Express to pair this speaker to AirPlay 2. I mostly use this speaker when I'm working out in the landing strip between the carpet and the display or when I'm drunk and feel like dancing.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/smart-home-device-9.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>Photo Wall With iPod Display</figcaption></figure><p>Finally, there's a HomePod mini tucked away in the back that I exclusively use for Siri.</p><h1 id="legacy-macs">Legacy Macs</h1><p>Behind the couch is my legacy mac setup. There's a few machines here. There's a 2014 Macbook Pro I use to manage all of my devices. A 2009 Macbook Pro I use to manage some legacy iPads. and my favorite, a 2007 Black Macbook that's dual booting Snow Leopard and Windows XP.</p><p>These are mostly toys, but they all work and I use them for projects.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-app-3.jpeg" class="kg-image" alt loading="lazy" width="2000" height="1500"><figcaption>2007 Macbook running WIndows XP</figcaption></figure><h1 id="bugs">Bugs</h1><p>I'm really proud of this thing I built, but it definitely has it's quirks. The various bridges all need to be reset from time to time, and I once just turned off the circuit breaker to turn off everything at once and reboot the whole apartment. Recently, I added a <a href="https://amzn.to/3HvAuvy">smart power switch</a> so I could power cycle the bridges from my phone. The Pi-hole DNS is one of the most likely things to crash so I have that plugged into it as well.</p><p>Scenes featuring music are particularly unreliable. Lullaby and Nightlight will work for a while and then stop. I used to have a scene called Tunes that would play a playlist on every speaker in the house, but I gave up after too many failures.</p><p>There's also an issue where the living room AppleTV is slightly out of sync with other AirPlay devices. I work around this by unplugging the Sonos Arc and airplaying directly to it when I want to use multiple speakers at once.</p><p>Another issue is Siri always feels the need to tell me when one or more devices didn't respond. This is great in theory, but is almost never useful. I consistently repeat the request and it works the second time. It also doesn't give me any insight into which device failed. Many of my scenes are controlling 30+ accessories so I have no way of knowing if a bridge is down or the bathroom light is just off. It'd be nice if the home app gave me this info.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/all-in-on-homekit/homekit-automation-6.png" class="kg-image" alt loading="lazy" width="2000" height="1397"><figcaption>Home App Screenshot - Misc</figcaption></figure><p></p><h1 id="wrap-up-and-feature-requests">Wrap Up and Feature Requests</h1><p>The main tools I used to make this apartment smart were Philips Hue bulbs and fixtures, Apple devices, the Leviosa Shades, and a bunch of VOCOLinc adapters. From there it was a massive time investment to get everything working the way I wanted it to.</p><p>Scenes are a small nightmare to compose. Any time I add or move I light I need to modify every single scene it's in. I would love to see composable scenes where I can say "this is the office in chill mode" or "this is the bedroom 100%". This way I could make Good Morning the composition of Bedroom One, Living Room One, and Office One.</p><p>I would also love a guest mode. Whenever I have someone visiting I need to be careful with apartment-wide scenes while they're sleeping. It would be great if I could just make a room automonmous for a period.</p><p>The home app is overdue for a makeover. It was perfect when I lived in a 350 sqft studio apartment, but now that I have multiple rooms, many accessories, and many scenes it's unweildy and unreliable. I'm hoping that Apple improves this in a future release.</p><p>Overall though, I'm happy I went with HomeKit. It integrates with everything else I own and Apple's track record on privacy is next to none. I really hope Apple improves the stability of HomeKit and HomePods over the next few years, but until then I'll keep tinkering.</p>`,tags:["Tech"],banner_img:"/images/blog/living-room.jpeg",heroImage:""},{id:9,slug:"what-the-functor",title:"What the Functor?",date:"February 24, 2019",excerpt:"A monad is just a monoid in the category of endofunctors, what's the problem? Hopefully, you'll understand this when we're done.",content:`<p>My <a href="__GHOST_URL__/functional-programming-fundamentals">last post</a> aimed to make <a href="__GHOST_URL__/functional-programming-fundamentals">functional programming</a> as straightforward as possible. An explicit goal of that article was to <em>avoid unnecessary jargon like monads and functors and stick to concepts that will make our code better. </em></p><p>This time around let's dive into all the scary terms and make them not so scary. While knowing these terms might not make your code better, they're fun to know. </p><p>The one thing we skip in this article is <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda calculus</a>, check out <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a> for more on that. I also have an article called <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce</a> that is more practical.</p><p>As a warning, we're gonna be diving into some abstract mathematics. This XKCD is now more relevant than ever.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/image-5.png" class="kg-image" alt loading="lazy"><figcaption>Functional programming combines the flexibility and power of abstract mathematics with the intuitive clarity of abstract mathematics.<a href="https://xkcd.com/1270/" rel="noreferrer nofollow noopener">[11]</a></figcaption></figure><p>A monad is just a monoid in the category of endofunctors, what's the problem? <a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">[7]</a> <a href="https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/3870310#3870310">[8]</a>. Hopefully, you'll understand this when we're done.</p><p>One final disclaimer, I didn't know any of this when I set out to write this article. I've heavily annotated this post with resources I used to learn this stuff as I was going. If you're already knowledgeable on category theory, please be gentle when correcting me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="functors">Functors</h1><p>What fun would it be if we didn't start with the titular term, functor.</p><p>A <em>functor </em>is anything that can be mapped over. This is most commonly a list, but really it's any object that can be mapped over.</p><p>For example, we can make a <code>Wizard</code> that can be mapped over.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/4f20482a242e565ea455ebb78f0a617a.js"><\/script><!--kg-card-end: html--><p><em>Note: in most practical situations, a functor would be parametric (containing a type parameter like <code>String</code> in <code>Array&lt;String&gt;</code>), but <code>Wizard</code> does fulfill the basic definition of a functor.</em></p><p>Now the <code>map</code> function also needs to meet the following criteria.</p><h2 id="identity-law-1-">Identity Law  <a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">[1]</a></h2><p>If map is given an identity function it must return the exact same object. Like so:</p><p><code>functor.map(x =&gt; x) === functor</code></p><p>This one is hopefully straightforward.</p><h2 id="composition-law-1-">Composition Law  <a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">[1]</a></h2><p><code>functor.map(x =&gt; f(g(x))) === functor.map(g).map(f)</code></p><p>Woah that's intimidating. What does this actually mean? Let's look at an example.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/a9a6c8392e87e7a936a3e383fa0f2be5.js"><\/script><!--kg-card-end: html--><p>We have <code>joinGryffindor</code> and <code>learnExpelliarmous</code>. If we call </p><p><code>wizard.map(joinGryffindor).map(learnExpelliarmous)</code> it needs to be equivalent to  <code>wizard.map(w =&gt; learnExpelliarmous(joinGryffindor(w)))</code>. </p><p>Now it's worth calling out, it needs to be functionally equivalent. In abstract mathematics we're not worried about pointers and references so we can consider this good enough. This is also known as "Fast and Loose Reasoning is morally correct." <a href="http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html">[13]</a></p><hr><h1 id="category">Category</h1><p>The next term we need to dive into is a category. A category is an algebraic structure that models objects and their relationships with each other.</p><p>Below we can see a category of int, string, and float. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/image-3.png" class="kg-image" alt loading="lazy"><figcaption>Taken from article by Nikolay Grozev <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5]</a>.</figcaption></figure><p>The category is the entire chart. It's how we convert from int to string, float to string, or int to float, or float to int. </p><p>Now while in practice, a functor is just a thing we can map over, it has a more advanced explanation. In category theory, a functor is a transformation between two categories <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5]</a>. This is a transformation of the <strong>entire category.</strong> </p><p>For example, we can transform the entire category above with a <code>List</code> functor. The relationships between all of the types goes from a function like <code>toString</code> to <code>map(func)</code> or  <code>map(toString)</code>. This also applies to <code>toFloat</code>, <code>round</code>, and any other functions in our category.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/images/blog/image-4.png" class="kg-image" alt loading="lazy"><figcaption>Taken from article by Nikolay Grozev <a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">[5].</a></figcaption></figure><hr><h1 id="endofunctor">Endofunctor</h1><p>Now that we have functors and categories, let's discuss endofunctors. An endofunctor is a functor that transforms a category into itself. </p><p>I spent several hours trying to grok this, and more importantly, understand how it's relevant in software. After reading <em>many</em> articles I stumbled on <a href="https://www.youtube.com/watch?v=8XGFFMPHG0o"><a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">this talk [6]</a> </a>by <a href="https://twitter.com/DanielaSfregola">@<a href="https://twitter.com/DanielaSfregola">DanielaSfregola</a></a> and it clicked.</p><p>For all intents and purposes, all functors in programming are endofunctors. A functor is really just metadata around a value that allows us to map over it.</p><p>The objects in our category are our types, and the arrows are the relationships between those types. These relationships are fundamental to the language so we can't just create a wrapper (functor) that changes how these types are interrelated. </p><p>We can't change how types are related unless we change the definition of the type altogether. Even in JavaScript, which has gnarly behaviors around <code>NaN</code>, <code>undefined</code>, and other types, the relationship between them is still defined in the spec and can't be changed with a simple functor.</p><p>Practically speaking, all functors in programming are endofunctors. There are all sorts of nuanced exceptions to this rule but those are out of scope here. Think of it like physics 101 when we pretended friction wasn't a thing.</p><p>Seriously though, watch <a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">that talk</a>, I closed so many tabs after watching that talk.</p><hr><h1 id="monoid">Monoid</h1><p>Cool cool, cool cool cool. We've defined some of the scariest terms in functional programming, let's move on to monoids. </p><p>A monoid is a category with one object. A monoid has three important rules: identity, composition, and associativity. In programming, it's a wrapper around an object that enforces these rules.</p><ul><li><strong>Identity: </strong>This states that there must be a way to use the monoid such that it returns itself.</li><li><strong>Composition: </strong>This states that we must be able to combine values using the monoid.</li><li><strong>Associative: </strong>This states that the order of operations remains constant so <code>(a +b) + c === a + (b + c)</code>.</li></ul><p>If these seem vague and generalized, well thats how abstract math works. Let's look at a practical example, a string monoid. <a href="http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446">[9]</a></p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3f97a78df599085a01bd8663e80cc9ec.js"><\/script><!--kg-card-end: html--><p>Above, we can see our <code>StringMonoid</code> with an <code>identity</code> value and a <code>compose</code> function.</p><p>We can use the compose function to produce a new string.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/5a095ebd187f2be8098bd5ba2a05c2fa.js"><\/script><!--kg-card-end: html--><p>If we compose with the identity value we get the same value.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/571a8bab94ee65d77013aef7913b9c23.js"><\/script><!--kg-card-end: html--><p>Finally, if we call compose on the same arguments it doesn't matter which pair we do first.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/7f76d38e33fbed7a2a82c7a303fec776.js"><\/script><!--kg-card-end: html--><p>Here are some other examples of monoids in JavaScript:</p><ul><li>Adding and multiplying numbers (with 0 and 1 as the identity value respectively).</li><li>Joining multiple arrays.</li><li>Composing multiple functions together.</li></ul><hr><h1 id="monads">Monads</h1><p>We did it! We made it to Monads.</p><p>Before we dive in let's take a step back. Functors and monoids were both wrappers around a value that allow us to execute operations on them. In the case of functors it was <code>map</code> in the case of monoids it was <code>compose</code>, where compose is a single operation.</p><p>Now monads. Monad's are both a functor and a monoid. That doesn't make this any simpler though. Let's define this in simpler terms.</p><p>A monad is a wrapper around some value that makes it easier to compose functions around it. This is often used to abstract away things like API calls or IO. In fact a <code>Promise</code> is a monad.</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/b5d20d2d6c2dace042376db4810336dd.js"><\/script><!--kg-card-end: html--><p>If we look at these  types above, we have a <code>Wizard</code> and a function that returns a <code>Promise&lt;Wizard&gt;</code>. This promise allows us to compose functions on top of it without worrying about the underlying IO needed to go fetch a <code>Wizard</code> from the server.</p><p>Lets break down further.</p><p>A monad is based on a simple symmetry — A way to wrap a value into a context, and a way to unwrap the value from the context <a href="https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8">[10]</a>.</p><h3 id="lift">Lift</h3><p>A monad allows us to <em>lift</em> a type into the monad context. In this case we're going from <code>Wizard</code> to <code>Promise&lt;Wizard&gt;</code>. The process of wrapping the <code>Wizard</code> in a <code>Promise</code> is called lifting.</p><h3 id="map-function map() { [native code] }1">Map</h3><p>A monad also allows us to map from one wrapped type to another. So we can call <code>wizardPromise.then(joinGryffindor).then(learnExpelliarmous)</code> to update the underlying wizard in the promise. </p><p>I should mention that the monad <code>map</code> is the same <code>map</code> we get with a functor. This is because monads are a type of functor.</p><p>Now it's worth noting that Promises don't explicitly provide a <code>map</code> function, but <code>then</code> gets us close enough.</p><h3 id="flatmap">FlatMap</h3><p>Finally, monads give us a way of going from <code>Promise&lt;Promise&lt;Wizard&gt;&gt;</code> to <code>Promise&lt;Wizard&gt;</code>. We should be able to have an arbitrarily nested monad and get to the original underlying value. We should also be able to do a <code>flatMap</code> on it. This is commonly done with a <code>chain</code> function.</p><h2 id="back-to-monads">Back to Monads</h2><p>Now it's worth noting that Promises don't perfectly map to monads, but they're close enough to understand the data type.</p><p>This also seems like a good time to reiterate, monads are an advanced abstract mathematical type. We're bringing these into our understanding of programming. They don't always line up perfectly with every construct in JavaScript. That's okay! </p><p>The point here isn't to make our code perfectly mathematical, we're just trying to understand some of the advanced math that powers our languages.</p><hr><h1 id="wrapping-up">Wrapping Up</h1><p>I'm going to admit. This article was challenging to write. I learned a lot in the process. I'd like to reiterate, none of this is important to your day to day code. But if you were curious what all those scary FP terms mean hopefully this satisfied that curiosity.</p><p>If you'd like something that will make your code better, check out <a href="http://matthewgerstman.com/functional-programming-fundamentals/">Functional Programming Fundamentals</a>. You can also check out <a href="__GHOST_URL__/map-filter-reduce/">Map, Filter, Reduce.</a> If you want to learn about <a href="__GHOST_URL__/mary-had-a-little-lambda/">lambda calculus</a> check out <a href="__GHOST_URL__/mary-had-a-little-lambda/">Mary Had a Little Lambda</a>.</p><p>Special thank you to <a href="https://twitter.com/glittershark1">@glittershark1</a> and <a href="https://twitter.com/jetpacmonkey">@<a href="https://twitter.com/jetpacmonkey">jetpacmonkey</a></a> for reviewing this.</p><p>Thank you to <a href="https://twitter.com/drboolean">@drboolean</a> for correcting my functor <a href="https://twitter.com/drboolean/status/1104145856452677633">example on Twitter.</a></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="references">References</h1><p><em>Note: I didn't end up quoting all of these directly, but I consulted all of them while writing this article.</em></p><ol><li><a href="https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6">https://medium.com/@dtinth/what-is-a-functor-dcf510b098b6</a></li><li><a href="https://medium.com/javascript-scene/functors-categories-61e031bac53f">https://medium.com/javascript-scene/functors-categories-61e031bac53f</a></li><li><a href="https://medium.com/@l.mugnaini/functors-applicatives-and-monads-in-pictures-784c2b5786f7">https://medium.com/@l.mugnaini/functors-applicatives-and-monads-in-pictures-784c2b5786f7</a></li><li><a href="https://medium.com/@lettier/your-easy-guide-to-monads-applicatives-functors-862048d61610">https://medium.com/@lettier/your-easy-guide-to-monads-applicatives-functors-862048d61610</a></li><li><a href="https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/">https://nikgrozev.com/2016/03/14/functional-programming-and-category-theory-part-1-categories-and-functors/</a></li><li><a href="https://www.youtube.com/watch?v=8XGFFMPHG0o">https://www.youtube.com/watch?v=8XGFFMPHG0o</a></li><li><a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html</a></li><li><a href="https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/3870310#3870310">https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-problem/</a></li><li><a href="http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446">http://s3.amazonaws.com/erlang-conferences-production/media/files/000/000/760/original/Daniela_Sfregola_-_A_Pragmatic_Introduction_to_Category_Theory.pdf?1510238446</a></li><li><a href="https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8">https://medium.com/javascript-scene/javascript-monads-made-simple-7856be57bfe8</a></li><li><a href="https://xkcd.com/1270/">https://xkcd.com/1270/</a></li><li><a href="https://gist.github.com/ericelliott/ea925c58410f0ae74aef">https://gist.github.com/ericelliott/ea925c58410f0ae74aef</a></li><li><a href="http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html">http://www.cse.chalmers.se/~nad/publications/danielsson-et-al-popl2006.html</a></li></ol>`,tags:["Tech","functional-programming"],banner_img:"/images/blog/what-the-functor/functor-hero.jpg",heroImage:""},{id:10,slug:"mary-had-a-little-lambda",title:"Mary Had a Little Lambda",date:"February 24, 2019",excerpt:`Originally I set out to write a sequel to Functional Programming Fundamentals that covered all of the scary jargon.  This quickly evolved into What the Functor? 

In that article I covered monads, mon`,content:`<p>Originally I set out to write a sequel to <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a> that covered all of the scary jargon.  This quickly evolved into <strong><a href="__GHOST_URL__/what-the-functor/">What the Functor?</a> </strong></p><p>In that article I covered monads, monoids, and functors. Now we have one last bit of scary functional jargon, lambdas.</p><figure class="kg-card kg-image-card"><img src="/images/blog/mary-had-a-little-lambda/lambda-diagram.png" class="kg-image" alt loading="lazy"></figure><h1 id="lambda">Lambda</h1><p>A lambda is an anonymous function that can be treated like a value.<a href="https://github.com/hemanth/functional-programming-jargon"> [2]</a></p><p>We actually saw some of these in the <a href="__GHOST_URL__/what-the-functor/">previous post</a>. These were <code>learnExpelliarmous</code> and <code>joinGryffindor</code>. </p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/82876b9911bc8b1bba5c5cc733b2427d.js"><\/script><!--kg-card-end: html--><p>In this case we create an anonymous function and assign it to the variable <code>joinGryffindor</code>. We then pass this as an argument to <code>map</code>. We could also just pass this anonymous function directly like so:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/61fb080c43c384ecc6d34bc7fba30ce3.js"><\/script><!--kg-card-end: html--><p>This is a common pattern, passing a lambda, or an anonymous function to a <a href="http://matthewgerstman.com/functional-programming-fundamentals/">higher order function</a>.</p><h1 id="lambda-calculus">Lambda Calculus</h1><p>Now the scarier term Lambda Calculus. Let's break this down. Lambdas are anonymous functions, we just learned that. </p><p>Why don't we define calculus now? If we pull up the dictionary definition we get the following</p><blockquote><em>A method of computation or calculation in a special notation (as of logic or symbolic logic. <a href="https://www.merriam-webster.com/dictionary/calculus">[3]</a></em></blockquote><p><strong>Lambda Calculus is just a formal way of defining functions using special notation. Less scary now, right?</strong></p><p>Let's dive just a little more into it. Lambda Calculus, or the formal notation for defining functions, is composed of three elements <strong>variables, functions, </strong>and <strong>applications</strong>. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><p>I'm going to go ahead and heavily paraphrase <a href="https://learnxinyminutes.com/docs/lambda-calculus/">this great article from learn x in y minutes</a>.</p><h2 id="variables">Variables </h2><p>We know these, variables are used in programming all the time, and we can name them anything. Lets go with one named <code>x</code>. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><h2 id="function">Function</h2><p>We know these too! We use functions in our code, and that's why you're reading an article on functional programming. In lambda calculus they use a special syntax: <code>λ&lt;parameters&gt;.&lt;body&gt;</code>. As an example <code>λx.x</code> is the identity function. <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><h2 id="application">Application</h2><p>This is a new word, but we see this all the time too. This is the act of calling a function. So if a function is the function declaration, this is the actual function call.</p><p>The syntax for this even involves parentheses! <code>(λx.x)a</code> calls the identity function with the argument <code>a</code>.</p><p>Here's a useful table taken from the <a href="https://learnxinyminutes.com/docs/lambda-calculus/">article mentioned above.</a> <a href="https://learnxinyminutes.com/docs/lambda-calculus/">[4]</a></p><!--kg-card-begin: html--><table><thead>
<tr>
<th>Name</th>
<th>Syntax</th>
<th>Example</th>
<th>Explanation</th>
</tr>
</thead><tbody>
<tr>
<td>Variable</td>
<td><code>&lt;name&gt;</code></td>
<td><code>x</code></td>
<td>a variable named “x”</td>
</tr>
<tr>
<td>Function</td>
<td><code>λ&lt;parameters&gt;.&lt;body&gt;</code></td>
<td><code>λx.x</code></td>
<td>a function with parameter “x” and body “x”</td>
</tr>
<tr>
<td>Application</td>
<td><code>&lt;function&gt;&lt;variable or function&gt;</code></td>
<td><code>(λx.x)a</code></td>
<td>calling the function “λx.x” with argument “a”</td>
</tr>
</tbody></table><!--kg-card-end: html--><p>This took me a while to grok. If you're looking for more resources I recommend Computerphiles <a href="https://www.youtube.com/watch?v=eis11j_iGMs">excellent video on Lambda Calculus</a> and the sequel on <a href="https://www.youtube.com/watch?v=9T8A89jgeTI">Y Combinators.</a></p><hr><h1 id="predicate">Predicate</h1><p>Let's finish up with a comparatively straightforward term. What is a predicate? A predicate is just a function that returns true or false [<a href="https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science">5</a>]. It's most commonly used as criteria for a filter.</p><p>Here's a predicate:</p><!--kg-card-begin: html--><script src="https://gist.github.com/matthew-gerstman/3951b37d8edeb0ee55153a2d76d0655c.js"><\/script><!--kg-card-end: html--><hr><h1 id="wrapping-up">Wrapping Up</h1><p>I'd like to reiterate, none of this is important to your day to day code. But if you were curious what all those scary FP terms mean hopefully this satisfied that curiosity.</p><p>If you'd like something that will make your code better, check out <a href="http://matthewgerstman.com/functional-programming-fundamentals/"><strong>Functional Programming Fundamentals</strong></a>. If you want even scarier terms check out <strong><a href="__GHOST_URL__/what-the-functor/">What the Functor?</a></strong></p><p>Also if you feel the need to buy me a drink you can do so <a href="http://cash.me/$MatthewGerstman">here</a> or follow me on twitter <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a>.</p><hr><h1 id="ads">Ads</h1><p>These ads help me pay to keep this site up. Feel free to buy, watch, listen or ignore these like any other ad.</p><!--kg-card-begin: html--><div id="amzn-assoc-ad-28dd1412-99f1-4930-a348-0d0afedbb7ce"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=28dd1412-99f1-4930-a348-0d0afedbb7ce"><\/script><!--kg-card-end: html--><hr><h1 id="references">References</h1><ol><li><a href="https://www.youtube.com/watch?v=eis11j_iGMs">https://www.youtube.com/watch?v=eis11j_iGMs</a></li><li><a href="https://github.com/hemanth/functional-programming-jargon">https://github.com/hemanth/functional-programming-jargon</a></li><li><a href="https://www.merriam-webster.com/dictionary/calculus">https://www.merriam-webster.com/dictionary/calculus</a></li><li><a href="https://learnxinyminutes.com/docs/lambda-calculus/">https://learnxinyminutes.com/docs/lambda-calculus/</a></li><li><a href="https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science">https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science</a></li></ol>`,tags:["Tech","functional-programming"],banner_img:"/images/blog/mary-had-a-little-lambda/lambda-calculus-hero.jpg",heroImage:""},{id:8,slug:"everything-i-wish-i-knew-before-my-first-bay-area-internship",title:"Everything I Wish I Knew Before My First Internship",date:"February 18, 2019",excerpt:`In 2012 I spent my first summer as an intern in the Bay Area. While it was a invaluable experience, there's so much I wish I knew before then. Here's a run-through of everything I wish I knew.
`,content:`<p>In 2012 I spent my first summer as an intern in the Bay Area. While it was a invaluable experience, there's so much I wish I knew before then. Here's a run-through of everything I wish I knew.</p><p><em>Note: While I mention the Bay Area a few times in this post, this is really relevant to any location.</em></p><h1 id="application-process">Application Process</h1><p>Apply early and often. Interviews are a numbers game. The more companies you apply to, the better chance you’ll have. Interview processes for internships range in difficulty, but most will put you through a technical interview.</p><p>Most technical interviews focus on data structures. If you haven't taken that course yet, I would recommend getting ahead as most of it directly translates to the interview process. I also highly recommend the book <a href="https://amzn.to/2DQP0Pt">Cracking the Coding Interview</a> for practice. </p><p>Also I would definitely recommend applying to all of the big companies (Google, Apple, Facebook, Amazon, etc). Even if you don’t get the internship this summer, you’ll put yourself on their radar in the future.</p><p>I do have some more advice on the subject though.</p><h3 id="real-interviews-don-t-tell-you-what-kind-of-problem-it-is-in-advance-">Real interviews don't tell you what kind of problem it is in advance.</h3><p>In <a href="https://amzn.to/2DQP0Pt">Cracking the Coding Interview</a>, problems are broken down by strings, arrays, trees, searches, sorts, etc. In a real interview you're going to get a vague prompt and have to figure out what kind of problem it is.</p><h3 id="failure">Failure</h3><p>You're going to fail a lot of interviews before you pass one. Technical interviews are hard and require a lot of practice, don't get discouraged. Do <a href="https://amzn.to/2DQP0Pt">practice problems</a> with your friends and keep your head up. Interviewing is a skillset completely separate from day to day coding, and unfortunately it's one you need to master.</p><h3 id="your-last-interview-has-no-bearing-on-the-current-one-">Your last interview has no bearing on the current one.</h3><p>If you bombed the last interview, shrug it off and move on. I know it's a stressful situation but do your best. This is doubly true for onsite interviews where you have multiple rounds in a row.</p><p>Here's a tip on interviews, you really only need to get one person excited about hiring you. The rest can be lukewarm. If you pass that bar you'll probably get an offer.</p><h2 id="number-of-internships">Number of Internships</h2><p>I recommend most people try and get two internships while they're in college. Usually it's the summers before Junior and Senior year.</p><p>You should still look for ways to write code during your first Summer (before Sophomore year). Apply to small (and big) companies, volunteer at a nonprofit, or just build an app and publish it. </p><p>Get <em>something </em>to put on your resume each summer.</p><h1 id="big-vs-small-companies">Big vs Small Companies</h1><p>One of the bigger decisions you’ll make is whether to go to a big or small company. Here are some of the pros of each.</p><h2 id="small-company">Small Company</h2><ul><li><strong>Wide variety of projects.</strong> Startups have more projects than they have resources. You’ll be able to work on projects across the entire tech stack and learn what they like.</li><li><strong><strong><strong>Access to leadership. </strong></strong></strong>At a startup you’ll much more access to the leadership than you would at a company like google.</li></ul><h2 id="big-company">Big Company</h2><ul><li><strong><strong><strong>Structured internship programs. </strong></strong></strong>The big companies essentially create a summer camp for their interns. They make sure you’re constantly entertained with activities. They’ll also set you up with a mentor.</li><li><strong><strong><strong>Pay/Housing.</strong></strong></strong> The bigger companies will usually pay you more and set you up with housing.</li><li><strong><strong><strong>Resume.</strong></strong></strong> People are shallow, Google will always look great on your resume.</li></ul><h1 id="resume">Resume</h1><p>Your resume should always fit on one page. Most recruiters will go through dozens of resumes at once and spend 30 seconds on each of them. A short resume that’s all quality content will sell better than a long one with a lot of fluff.</p><p>I know the one page thing seems daunting at first, but trust me on this one. Here’s <a href="https://www.businessinsider.com/elons-musk-resume-all-on-one-page-2016-4">an example of Elon Musk’s resume</a> shortened to one page. Google Docs has a ton of great templates these days.</p><p>Also, always submit your resume as a PDF. You never know how a <code>.docx</code> or <code>.pages</code> file is going be displayed on someone else's machine, or even worse, their printer.</p><p>One last thing, use your personal email. You won’t have your school email forever and you never know who you’re going to want to reach out to in 5 years. If it’s not already, I recommend your email be some version of firstname.lastname@gmail.com.</p><h1 id="once-you-start-your-internship">Once You Start Your Internship</h1><p>Always be aware that your internship is a 3 month long interview process. People will be submitting feedback on you. If they like you they’ll often extend an offer for when you graduate. Also remember that the interview process is a two way street. I’d recommend paying attention to how happy the full time employees are.</p><h1 id="intern-community">Intern Community</h1><p>The Bay Area brings in over 5,000 interns every summer. Some of the friends you make now will be both friends and industry connections you have for the rest of your career.</p><p>There will also be lots of intern focused events that are great for both social and professional networking. Keep in mind when attending these, the hosts always have their own motives. Usually they’re looking to recruit engineers. You’ll still get a lot of value out of attending these events, but be aware no one is hosting it out of kindness of their heart.</p><h1 id="some-general-advice">Some General Advice</h1><p><strong>Always be learning. </strong>The tech industry moves incredibly quickly and you should always make sure you’re keeping up. If you ever feel like you’ve stopped learning at your job, it’s probably time to look for a new one.</p><p><strong>Find Mentors</strong>. The best thing you can do for your career is to find people you look up to. They don't need to be that far ahead of you, 2-3 years is enough. But they should have seen enough of the road ahead to give you direction. But remember this is your life, do what you think is best.</p><p><strong>Don’t Drop Out. </strong>You’ll find a lot of people trying to convince you to drop out and join their startup, don’t. Your CS degree will be valuable for at least the first 10 years of your career. I see lots of candidates who know how to code but can’t handle real engineering tasks, you’ll learn that in school.</p><p><strong>Ship Code. </strong>Build apps, web-apps or whatever you feel like, but get the experience of writing something that people actually use. I meet lots of recent college grads who can pass a technical interview but have never watched someone use their software. It’s humbling to say the least. Also, try adding features to something you wrote a year ago. You’ll learn a lot about writing maintainable code that way.</p><p><strong>Learn Git</strong>. Learn how git works and upload everything you write to github. Github will eventually be your second resume. Don’t be embarrassed about publishing your code. Git is one of the most important tools you’ll use in the industry and most schools don’t teach it. <em>Disclaimer: Make sure you’re allowed to upload your class projects.</em></p><h1 id="the-most-important-advice">The Most Important Advice</h1><p><strong>You are in charge of your own happiness.</strong> Remember this forever. I grew up on the east coast and firmly belong here. I spent years trying to convince myself to like the Bay Area, when really it just wasn't a good fit.</p><p>Try everything once, live somewhere you're not used to, but when it comes time to figure out what makes you happy, do what you think is best.</p>`,tags:["Tech","internship","bay-area"],banner_img:"/images/blog/hello-there/bay-bridge-sf.jpg"},{id:15,slug:"how-i-prepare-a-talk",title:"How I Prepare A Tech Talk",date:"April 01, 2019",excerpt:"Almost weekly someone will ask me how do I put together a tech talk. I'd like to think I've gotten pretty good at answering. In fact I've gotten so used to sharing The Matthew Gerstman Method that it ",content:`<p>Almost weekly someone will ask me <em>how do I put together a tech talk.</em> I'd like to think I've gotten pretty good at answering. In fact I've gotten so used to sharing <em>The Matthew Gerstman Method </em>that it might as well be it's own talk.</p><p>That's too meta for me, so I went with a blog post. This probably isn't that different from anyone else's strategy, but it works for me.</p><h1 id="figuring-out-the-topic">Figuring Out The Topic</h1><p>The very first step is figuring out what I actually want to talk about. Different talks will come from variou sources of inspiration.</p><p>My <a href="https://www.youtube.com/watch?v=kkRyjXDpYqg">Functional Programming talk</a> came out of a desire to evangelize Lodash after we migrated from <a href="https://blogs.dropbox.com/tech/2018/09/migrating-from-underscore-to-lodash/">Underscore at Dropbox</a>. I gave a talk on <a href="https://www.youtube.com/watch?v=m1XdasrstCc">Salary Negotiation </a>that is filled with advice I've given on repeat.</p><p>Currently I'm developing three talks. Building a Typed and Code Split React App, TypeScript: Seeing Past The Hype, and Nothing Generic About It. All three of these came directly out things I've learned at Dropbox. More importantly, these are things I'm passionate about and that should come through when I'm delivering them.</p><h1 id="outlining">Outlining</h1><p>The next step is the rough technical outline. I usually do this offline, walking around Manhattan, running errands, or cleaning my apartment. I generally try to get myself into a headspace where my thoughts can run wild and I can think about the general structure for the talk.</p><p>I might think a little bit about how I want to handle certain subjects, and ideas for code samples may come up, but overall it's high level.</p><p>When I get home I start to type it up. I plug away into <a href="http://paper.dropbox.com">Paper</a> and build a proper outline. Seeing it in front of me, I can reorganize topics and start to add more detail as it comes to me.</p><h1 id="research">Research</h1><p>This is often the hardest part of the talk. Researching the topic.</p><p>I try to learn everything I can about the subject I'm talking about and I make sure to cite sources. At this point it's more of a blog post than a tech talk. It's a lot of information in a Paper doc that I can share.</p><p>At this point I'm generally just copy pasting from articles I find into Paper and saving where I got the info.</p><p>Slowly this mass of content will become actual slides. I'll put in line breaks and figure out the flow of my talk. This is also where I write any relevant sample code.</p><p>Also, this is when jokes usually start coming to me. I might start stockpiling gifs, although that's not necessarily important yet.</p><h1 id="starting-the-slides">Starting The Slides</h1><p>At this stage I export from Paper to markdown and switch over to <a href="https://github.com/jxnblk/mdx-deck">mdx-deck</a>. It's a really nice project that lets you write your slides in markdown and include live code samples. If you're curious, I host my slides on Netlify.</p><p>I'm not terribly concerned about getting my slides perfect. The most important thing for now is the content itself. Secondly, I like to make sure theres comic relief when things get too technical.</p><p>Arguably, you should avoid spending time refining your slides here because they're so likely to change. Fonts, colors, and alignment can all wait. </p><p>Instead, I start running through the slides at home. I time myself on each practice run. More often than not, I need to cut content rather than add more, but your mileage may vary.</p><h1 id="workshopping">Workshopping</h1><p>This is one of my favorite parts, testing the talk out with friends. I usually find a couple of co-workers and give the talk to them in private. This allows me to see how the talk flows when someone is listening, how they respond to various things I might say, and most importantly, gather feedback.</p><p>Often I'll get feedback that something was confusing, or a few slides could have been rearranged. I might also get feedback like <em>this is irrelevant,</em> or <em>you need to expand on this</em>. Most importantly, I get to see if my jokes are funny.</p><p>When I was first getting started, I would have someone count my <em>ums</em>. This is a really useful exercise, because it gets you in the habit of breaking your awkward mannerisms. We all have them, and it takes practice to fix them.</p><p>I also recommend timing yourself, and asking your friend(s) to hold feedback until the end. I usually give them a pen and paper to take notes that I can hold onto afterwards.</p><h1 id="refining">Refining</h1><p>After two or three of these one on one sessions I'm in refinement mode. Getting the talk down to a science, and making sure I have all my points together.</p><p>This is the stage when I start trying to make my slides perfect. I check that everything is aligned properly. I also start adding speaker notes. </p><p>There's one thing I don't do though; I don't memorize anything. I make it a point to speak naturally every time I give the talk. This makes the delivery feel much more organic. I avoid writing down full sentences in my speaker notes and stick to bullet points. If I miss something during any given speech it's not that big a deal.</p><p>I also make sure my gif game is on point. To be honest, I spend hours on Google images looking for the perfect gifs.</p><h1 id="practicing-in-public">Practicing In Public</h1><p>The talk is 90% done now, but it still hasn't been given to an audience. I'll set a date with a local meetup and give the talk to a smaller group, usually 50-100 people. This is my first chance to give the talk in public and see how it lands. Usually people will come up to me after the talk and ask questions or give feedback. This is very helpful for the final version.</p><p>From here on, I'll update my slides as necessary, change up any jokes that didn't get laughs, and really hone my delivery. These tend to be minor tweaks, but they make a difference.</p><h1 id="the-big-event">The Big Event</h1><p>The week of the conference or event I'm speaking at I'll practice my talk every day to stay fresh. In the hours before I give it for real, I'll practice it two-three times by myself just to make sure I'm on point. I tend to get pretty nervous the day of so I just keep practicing in my hotel room to fight my nerves.</p><h1 id="reusing-a-talk">Reusing a Talk</h1><p>Giving a talk multiple times is totally okay. You've done all that work, you should get as much out of it as you can. However, you should ask yourself the question, <em>is this audience different from the one I originally spoke to?</em></p><p>There are a lot of reasons that answer could be yes. There are React conferences, TypeScript conferences, and vanilla JavaScript conferences. It's a safe bet that those audiences will all have different levels of familiarity with parts of your talk.</p><p>You should also consider cultural differences. Last year I gave my Functional Programming talk in Israel. I made it a point to replace all my Taylor Swift references with Natalie Portman to localize.</p><h1 id="wrapping-up">Wrapping Up</h1><p>If this sounds like a lot of work, it is. I estimate I spend one to two hours on every minute I'm speaking. The point of this is to know how to spend those fourty to sixty hours and get the most for your time.</p><p>Good luck with your talk! Feel free to tweet <a href="https://twitter.com/MatthewGerstman">@MatthewGerstman</a> with questions.</p><h2></h2>`,tags:["Tech","public-speaking"],banner_img:"/images/blog/public-speaking.jpg"},{id:21,slug:"migrating-from-underscore-to-lodash",title:"Migrating from Underscore to Lodash",date:"September 5, 2018",excerpt:"How we successfully migrated the Dropbox web application from Underscore to Lodash, a comprehensive guide to large-scale JavaScript library migrations.",content:`<p><em>Originally published on the <a href="https://dropbox.tech/frontend/migrating-from-underscore-to-lodash">Dropbox Tech Blog</a></em></p>

<p><strong>By Matthew Gerstman and Stacey Sern • September 5, 2018</strong></p>

<p>The core Dropbox web application is 10 years old and used by millions of users per day. Hundreds of front-end engineers across multiple cities actively work on it. Unsurprisingly, our codebase is very large and somewhat irregular. Recently written parts have thorough test coverage, other parts haven't been updated in years.</p>

<p>Over the past two years we've worked to modernize our front-end stack. We've successfully moved from CoffeeScript to TypeScript, from jQuery to React, and from a custom Flux implementation to Redux. Having completed these migrations we identified our utility library, Underscore, as one more candidate for migration.</p>

<h2>Why migrate?</h2>

<p>When we began our research, Underscore hadn't seen an update in 3 years. Newer developers were hesitant to use a deprecated library. We wanted to fill that need.</p>

<h3>Benefits of Lodash</h3>

<p>Lodash is a utility library composed of many individual modules. It can be used as a complete library, as individual modules, or as a custom build consisting of just the necessary functions. It's the single most used utility library on the web, and as a result is extremely battle tested. It heavily optimizes for front-end CPU performance in a way that Underscore doesn't. For example, Lodash is implemented to take advantage of JIT in JavaScript engines.</p>

<p>It also offers new features that promote functional programming. For example, it's well suited for building a functional selector layer between React and Redux, two technologies we use in our front-end codebase. Finally, Lodash is actively maintained, which is critical to long-term support of the library.</p>

<h2>Setting a strategy for migration</h2>

<p>We wanted to use a strategic migration approach. By gathering consensus from our internal community, doing research first, and constructing a bespoke build for our environment before migrating our entire codebase, we hoped to avoid surprises and ensure a smooth transition.</p>

<h3>Getting alignment with a Web Enhancement Proposal</h3>

<p>At Dropbox we have a process called Web Enhancement Proposals (WEPs). Similar to Python's PEPs or JavaScript's TC39 process, WEPs are a way to propose large-scale changes to our web infrastructure. They provide a forum for discussion and help us reach consensus before making major technical decisions.</p>

<p>We wrote a WEP proposing the migration from Underscore to Lodash. This gave the broader engineering team a chance to provide feedback and raise concerns. The proposal outlined our reasoning, the benefits we expected, and our migration strategy.</p>

<h3>Doing the research first</h3>

<p>Before writing any code, we did extensive research. We needed to understand:</p>

<ul>
<li>Which Underscore functions were actually being used in our codebase</li>
<li>How those functions mapped to Lodash equivalents</li>
<li>Whether any functions had different behavior between libraries</li>
<li>What our final bundle size would look like</li>
</ul>

<p>We wrote scripts to analyze our codebase and identify all Underscore usage. This gave us a complete picture of what we'd need to migrate.</p>

<h3>Choosing the right tools</h3>

<p>We evaluated several approaches for the migration:</p>

<ol>
<li><strong>Manual find-and-replace</strong>: Too error-prone and time-consuming</li>
<li><strong>Automated codemods</strong>: Promising, but needed careful testing</li>
<li><strong>Aliasing Underscore to Lodash</strong>: Quick but risky</li>
</ol>

<p>We ultimately chose a hybrid approach: automated codemods for the bulk of the work, with manual review for edge cases.</p>

<h3>Building the bundle</h3>

<p>One of our key concerns was bundle size. We didn't want to ship the entire Lodash library if we were only using a subset of functions.</p>

<p>We used Webpack to create a custom Lodash build containing only the functions we actually needed. This required some experimentation to get right.</p>

<p>We should note that the unminified Webpack bundle came with a fair amount of Webpack cruft: comments, dependency resolution, and other snippets Webpack needs to do its job. However we decided that letting Bazel minify and remove most of this was a reasonable tradeoff to make.</p>

<h2>Migrating the Codebase</h2>

<p>It was finally time for the big scary part: migrating the codebase. Everything until now had been implemented in a vacuum; we hadn't yet gone out and touched anyone else's code.</p>

<p>We constructed a comprehensive mapping table showing how each Underscore function mapped to its Lodash equivalent. Some functions had direct 1:1 mappings, others required slight modifications, and a few had no direct equivalent.</p>

<h3>Splitting the work</h3>

<p>Rather than attempt a big-bang migration, we split the work into phases:</p>

<ol>
<li><strong>Phase 1</strong>: Migrate functions with direct 1:1 mappings</li>
<li><strong>Phase 2</strong>: Migrate functions requiring slight modifications</li>
<li><strong>Phase 3</strong>: Handle edge cases and custom wrappers</li>
<li><strong>Phase 4</strong>: Remove Underscore entirely</li>
</ol>

<p>Each phase was deployed separately, giving us time to catch and fix any issues before moving on.</p>

<h3>Exactly one bug</h3>

<p>Despite migrating thousands of lines of code, we only encountered a single bug in production. It was related to a subtle difference in how Underscore and Lodash handle empty arrays in their <code>_.compact</code> function.</p>

<p>This speaks to the thoroughness of our preparation and testing. The research phase paid off.</p>

<h2>Conclusion</h2>

<p>Migrating from Underscore to Lodash was a significant undertaking, but it was worth it. We now have a modern, well-maintained utility library that's better suited to our needs.</p>

<p>The key lessons we learned:</p>

<ol>
<li><strong>Do your research first</strong>: Understanding the problem space saved us countless hours later</li>
<li><strong>Get organizational buy-in</strong>: The WEP process helped us build consensus</li>
<li><strong>Migrate incrementally</strong>: Phased rollouts are safer than big-bang changes</li>
<li><strong>Test thoroughly</strong>: Our extensive testing caught issues before they reached production</li>
</ol>

<p>If you're considering a similar migration, we hope our experience helps guide your approach.</p>

<hr>

<p><em>Read the original article on the <a href="https://dropbox.tech/frontend/migrating-from-underscore-to-lodash">Dropbox Tech Blog</a></em></p>`,tags:["Tech","javascript","dropbox"],banner_img:"/images/blog/migrating-from-underscore-to-lodash/underscore-lodash-train.jpg"},{id:22,slug:"software-engineering-lifecycle-dropbox-plus",title:"The Software Engineering Lifecycle: How We Built the New Dropbox Plus",date:"September 15, 2020",excerpt:"A behind-the-scenes look at building Dropbox Plus, from problem scoping through launch, covering team dynamics, technical decisions, and lessons learned.",content:`<p><em>Originally published on the <a href="https://dropbox.tech/frontend/the-software-engineering-lifecycle--how-we-built-the-new-dropbox">Dropbox Tech Blog</a></em></p>

<p><strong>By Matthew Gerstman • September 15, 2020</strong></p>

<p>A few weeks ago, we released <a href="https://blog.dropbox.com/topics/product-tips/new-dropbox-helps-manage-work-and-home">a whole bunch of new features</a> to Dropbox Plus, our paid plan for personal users. While we started as a storage company, we've grown to be a hub to manage your digital life. About 150 people worked on this launch: engineers, product managers, designers, copywriters, and many more.</p>

<p>Through a combination of luck and happenstance, I was fortunate enough to touch almost every part of this launch. I got to see how different teams work, as I joined each at different stages of the software engineering lifecycle.</p>

<p>In this post I'll distill my experience working on different parts of the launch, and discuss how we think about building software. I'll go into a few technical details, but mostly focus on how teams organize and operate.</p>

<h2>Problem Scoping</h2>

<p>Toward the end of 2019 we had a realization: while we had built incredible new products for our professional users like the <a href="https://blog.dropbox.com/topics/product-tips/new-dropbox">new Dropbox</a> and <a href="https://www.dropbox.com/transfer">Dropbox Transfer</a>, it had been a while since we delivered new value to our personal users.</p>

<p>We set out to change that. We put together a team focused exclusively on helping personal users manage their digital lives. At the time we didn't know how much those lives and needs would change the year to come, but in hindsight our timing was great.</p>

<p>Our contract with our customers is simple: We build products that people like so much that millions of them pay for it. As a rule, we aspire to be worthy of trust in all situations. You are our customer, not our product.</p>

<p>Merging our mission and our values, we came up with a simple plan: ship a bunch of timely, useful features to our most loyal users. After a lot of discussion about what to build, we came up with the new Dropbox Plus.</p>

<p>We knew our users wanted <a href="https://www.dropbox.com/features/cloud-storage/computer-backup">computer backup</a>. This was finally possible thanks to our <a href="https://dropbox.tech/infrastructure/rewriting-the-heart-of-our-sync-engine">brand new sync engine</a>, which we had just finished rolling out in June.</p>

<p>We did weeks of customer research and learned that users wanted a handful of specific new features from us. They wanted a special folder where they could store their most important files, this became <strong>Vault</strong>. They wanted to be able to rewind their entire Dropbox to recover from ransomware or accidental deletion, this became <strong>Rewind</strong>. They wanted a way to track down and free up space on their computer, this became <strong>Computer Backup</strong>.</p>

<h3>Family</h3>

<p>One feature stood out as particularly important: <strong>Family</strong>. We learned that many of our users were sharing their personal Dropbox accounts with family members. They'd share credentials, which was both insecure and inconvenient.</p>

<p>We decided to build a proper family plan. Each family member would get their own account with their own space, but they'd all be on one subscription. We'd build a special shared folder that the whole family could access.</p>

<h2>Plan Before Coding</h2>

<p>Before writing any code, we spent significant time in planning. This is critical for large projects with many dependencies.</p>

<p>We held design reviews where designers presented mockups and gathered feedback. We held technical design reviews where engineers proposed architectures and discussed tradeoffs. We wrote detailed specs outlining exactly what we'd build.</p>

<p>This upfront investment paid off. When we finally started coding, everyone knew what they were building and why.</p>

<h3>Team Dynamics</h3>

<p>Large projects require careful coordination between many teams. For Dropbox Plus, we had:</p>

<ul>
<li><strong>Desktop client team</strong>: Building the backup and sync features</li>
<li><strong>Web team</strong>: Building the web UI for all features</li>
<li><strong>API team</strong>: Building the backend services</li>
<li><strong>Vault team</strong>: Building the secure folder feature</li>
<li><strong>Rewind team</strong>: Building the recovery feature</li>
<li><strong>Family team</strong>: Building the family plan feature</li>
</ul>

<p>Each team had its own engineering lead, product manager, and designer. We held weekly syncs to keep everyone aligned.</p>

<h2>Speeding Up Development</h2>

<p>One of the biggest challenges in large projects is maintaining velocity. As teams grow and dependencies multiply, it's easy to slow down.</p>

<p>We used several strategies to stay fast:</p>

<ol>
<li><strong>Clear ownership</strong>: Each feature had a single team responsible for it</li>
<li><strong>Parallel workstreams</strong>: Teams worked independently where possible</li>
<li><strong>Integration points</strong>: We defined clear interfaces between systems early</li>
<li><strong>Regular demos</strong>: Teams showed progress weekly to catch issues early</li>
<li><strong>Automated testing</strong>: Comprehensive test coverage gave us confidence to move fast</li>
</ol>

<h3>Milestones</h3>

<p>We broke the project into clear milestones:</p>

<ol>
<li><strong>Internal Alpha</strong>: Get it working for Dropbox employees</li>
<li><strong>External Beta</strong>: Invite a small group of users to test</li>
<li><strong>Gradual Rollout</strong>: Slowly expand to all users</li>
<li><strong>General Availability</strong>: Launch to everyone</li>
</ol>

<p>Each milestone had specific success criteria. We wouldn't move to the next phase until we met them.</p>

<h2>Internal Alpha: Dogfooding</h2>

<p>Before releasing to users, we released to Dropbox employees. We call this "dogfooding" - eating our own dog food.</p>

<p>This was incredibly valuable. Employees found bugs, suggested improvements, and stress-tested the features in real-world scenarios. We got feedback from hundreds of internal users before a single external user saw the product.</p>

<p>The feedback was sometimes brutal but always helpful. Engineers on other teams would file detailed bug reports. Executives would question design decisions. Everyone had opinions, and we listened to all of them.</p>

<h3>Onboarding a new teammate</h3>

<p>Midway through the project, I joined the Vault team. Vault was the secure folder feature - a special folder that required an additional PIN to access.</p>

<p>The very first thing I did was set up a 1:1 with each and every person with whom I'd be working. We had engineers working on locking/unlocking the folder, serving APIs, updating the desktop app, and working on the existing frontend. We also had a product manager and a designer.</p>

<p>I knew it was important to establish these relationships early on if I were to become an effective member of the team.</p>

<h3>Joining Vault</h3>

<p>When I joined Vault, the team had already been working for months. They had working prototypes, clear designs, and a solid technical plan.</p>

<p>My job was to build the web frontend. I needed to create the UI for setting up Vault, accessing it, and managing it.</p>

<p>I started by reviewing all the existing design docs and technical specs. I attended the team's daily standups and weekly planning meetings. I paired with other engineers to understand the codebase.</p>

<p>Within two weeks, I had shipped my first feature: the Vault setup flow. Within a month, I was a fully productive member of the team.</p>

<h2>Class Dismissed</h2>

<p>By this point in the project, we were deep into implementation. The initial planning phase was over. Now it was all about execution.</p>

<p>We held these 1:1s over Zoom as soon as the company had sent us all to work from home, rather than waiting until April. It was a shift for everyone but it worked. Over time I figured out who I'd be working with the most. I set up weekly 1:1s with them to make sure we stayed in sync from afar.</p>

<h3>Shipping Our Team Coding Standards</h3>

<p>As I worked on Vault, I noticed our team had different coding styles. Some engineers preferred functional programming, others object-oriented. Some wrote detailed comments, others preferred self-documenting code.</p>

<p>I proposed we establish team coding standards. We held a meeting where everyone shared their preferences, then we voted on contentious points.</p>

<p>The result was a document outlining our team's conventions. It wasn't perfect, but it gave us consistency. New code looked like it was written by one person, not five.</p>

<h3>Nothing's Perfect</h3>

<p>During Vault development, we experimented with a new internal technology called API-QL, a GraphQL-like query language for our internal APIs.</p>

<p>It worked well in theory, but in practice it added complexity without enough benefit for our use case. After a few weeks, we decided to switch back to our standard REST APIs.</p>

<p>There was an important lesson here: Ideas that work flawlessly on one project might not transfer to another. API-QL is a fantastic technology and we're continuing to invest in it, but it wasn't the right fit for this project at this time.</p>

<h3>Reflecting</h3>

<p>Looking back, the key to our success was balance:</p>

<ul>
<li>Balance between planning and execution</li>
<li>Balance between speed and quality</li>
<li>Balance between individual autonomy and team coordination</li>
<li>Balance between shipping fast and getting it right</li>
</ul>

<p>We didn't always get the balance right, but we kept adjusting until we did.</p>

<h2>Entrypoints</h2>

<p>One technical challenge worth highlighting: entrypoints.</p>

<p>Dropbox has a massive web codebase. To keep page load times fast, we split our JavaScript into many small bundles. Each page loads only the code it needs.</p>

<p>For Dropbox Plus, we added many new pages: Vault setup, Rewind UI, Family management, etc. Each needed its own entrypoint.</p>

<p>We used Webpack's code splitting to create these entrypoints automatically. When a user navigated to a new page, we'd load just the code for that page. This kept our bundle sizes small and our app fast.</p>

<p>We also used dynamic imports to load code on-demand. For example, the Vault PIN entry dialog was loaded only when a user tried to access their Vault. This saved bandwidth for users who never used the feature.</p>

<p>The result: despite adding significant new functionality, our page load times actually improved.</p>

<h2>Conclusion</h2>

<p>Building Dropbox Plus was a massive undertaking. It required coordination between dozens of teams, careful planning, and disciplined execution.</p>

<p>The key lessons I learned:</p>

<ol>
<li><strong>Plan thoroughly before coding</strong>: The upfront investment pays off</li>
<li><strong>Break large projects into milestones</strong>: Celebrate progress along the way</li>
<li><strong>Dogfood your own products</strong>: Internal testing catches issues early</li>
<li><strong>Establish clear team norms</strong>: Consistency makes collaboration easier</li>
<li><strong>Stay flexible</strong>: Be willing to change course when something isn't working</li>
<li><strong>Build relationships</strong>: 1:1s and regular communication are critical</li>
<li><strong>Optimize for speed</strong>: Technical decisions should enable fast iteration</li>
</ol>

<p>If you're working on a large software project, I hope these lessons help you ship something great.</p>

<hr>

<p><em>Read the original article on the <a href="https://dropbox.tech/frontend/the-software-engineering-lifecycle--how-we-built-the-new-dropbox">Dropbox Tech Blog</a></em></p>`,tags:["Tech","dropbox","product"],banner_img:"/images/blog/software-engineering-lifecycle-dropbox-plus/dropbox-plus-hero.jpg"}];function $w(){const{theme:e,toggleTheme:t}=Hw(),[n,o]=x.useState(!1),[a,r]=x.useState(!1);return gd({onSearch:()=>o(!0),onEscape:()=>{o(!1),r(!1)},onFindInPage:()=>r(!0)}),h.jsxs(Jm,{basename:"/",children:[h.jsx(cg,{}),h.jsx(rg,{theme:e,onToggleTheme:t}),h.jsx(Sg,{isOpen:n,onClose:()=>o(!1),posts:$o}),h.jsx(Cg,{isOpen:a,onClose:()=>r(!1)}),h.jsxs(Um,{children:[h.jsx(At,{path:"/",element:h.jsx(Ol,{posts:$o})}),h.jsx(At,{path:"/tech/:slug",element:h.jsx(Tf,{posts:$o})}),h.jsx(At,{path:"/talks",element:h.jsx(ew,{})}),h.jsx(At,{path:"/career",element:h.jsx(Cw,{})}),h.jsx(At,{path:"/about",element:h.jsx(Uw,{})}),h.jsx(At,{path:"*",element:h.jsx(Ol,{posts:$o})})]})]})}const vd=document.getElementById("root");if(!vd)throw new Error("Root element not found");Ir.createRoot(vd).render(h.jsx(_i.StrictMode,{children:h.jsx($w,{})}));
